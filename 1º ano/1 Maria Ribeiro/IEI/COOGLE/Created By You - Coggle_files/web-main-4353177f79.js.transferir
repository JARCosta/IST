/* commit: 8b308fe6fd70cf9748f8cb89a7db3ca2cd062fa8 */window.Coggle_JS_Version=1515952834;/*! jQuery v3.2.1 | (c) JS Foundation and other contributors | jquery.org/license */

/*! jQuery Migrate v3.0.0 | (c) jQuery Foundation and other contributors | jquery.org/license */

//     Underscore.js 1.8.3
//     http://underscorejs.org
//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

//     (c) 2010-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

/**
 * @preserve 
 * Copyright Coggle 2013. All Rights reserved.
 **/

// encodeji: encode :simple-names: for emoji as unicode codepoints.
// Copyright 2016 Coggle, Licensed under ISC
// Portions from Twemoji: MIT licensed Copyright Twitter Inc. and other contributors.

/**@preserve
 * marked - a markdown parser
 * Copyright (c) 2011-2013, Christopher Jeffrey. (MIT Licensed)
*/

/*!
 * jQuery Cookie Plugin v1.4.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */

/*!
 * jQuery UI Widget 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Mouse 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI :data 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Scroll Parent 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Draggable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Droppable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/**
 * Timeago is a jQuery plugin that makes it easy to support automatically
 * updating fuzzy timestamps (e.g. "4 minutes ago" or "about 1 day ago").
 *
 * @name timeago
 * @version 1.6.1
 * @requires jQuery v1.2.3+
 * @author Ryan McGeary
 * @license MIT License - http://www.opensource.org/licenses/mit-license.php
 *
 * For usage and examples, visit:
 * http://timeago.yarp.com/
 *
 * Copyright (c) 2008-2017, Ryan McGeary (ryan -[at]- mcgeary [*dot*] org)
 */

/*!
 * jQuery UI Sortable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*
 * jQuery outside events - v1.1 - 3/16/2010
 * http://benalman.com/projects/jquery-outside-events-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */

/**
 * @preserve Copyright Coggle 2014. All Rights reserved.
 **/

/*!
 * jQuery UI Keycode 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Position 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */

/*!
 * jQuery UI Unique ID 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Menu 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Autocomplete 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*! jQuery & Zepto Lazy v1.7.7 - http://jquery.eisbehr.de/lazy - MIT&GPL-2.0 license - Copyright 2012-2017 Daniel 'Eisbehr' Kern */

/*! Copyright Twitter Inc. and other contributors. Licensed under MIT */

/**
 * Copyright (c) 2007-2015 Ariel Flesler - aflesler<a>gmail<d>com | http://flesler.blogspot.com
 * Licensed under MIT
 * @author Ariel Flesler
 * @version 2.1.2
 */

/*!
 * jQuery UI Disable Selection 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*!
 * jQuery UI Resizable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/* @preserve emoji from Twemoji project by Twitter: https://github.com/twitter/twemoji, Graphics licensed under CC-BY 4.0 */

// console.log('forward children of "'+node.model.text()+'" :', _.map(forwardChildren, function(c){return c.model.text();}));

// console.log('reverse children of "'+node.model.text()+'" :', _.map(reverseChildren, function(c){return c.model.text();}));

/*!
 * jQuery Mousewheel 3.1.13
 *
 * Copyright 2015 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */

/*!
 * jQuery UI Progressbar 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/** @preserve
 * Sage Menu Copyright Coggle 2014
 **/

/*! jquery-textcomplete - v1.8.4 - 2017-08-29 */

/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */

/** @preserve
 * XMLWriter
 * Copyright (c) 2008 Ariel Flesler
 * Licensed under BSD
 */

//(n)ame, (a)ttributes, (c)hildren

/*
 * UnicodeNormalizer 1.0.0
 * Copyright (c) 2008 Matsuza
 * Dual licensed under the MIT (MIT-LICENSE.txt) and GPL (GPL-LICENSE.txt) licenses.
 * $Date: 2008-06-05 16:44:17 +0200 (Thu, 05 Jun 2008) $
 * $Rev: 13309 $
 */

/*!
 * jQuery UI Tooltip 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

/**
 * @preserve
 * Copyright Coggle 2013. All Rights reserved.
 **/

/** @preserve MDN polyfills: Copyright MDN. */

/*!
 * jQuery UI Touch Punch 0.2.3
 *
 * Copyright 2011–2014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */

function testDefineProperty(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}function testCORSSupport(){return"withCredentials"in new XMLHttpRequest}if(!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";function n(e,t){t=t||ne;var n=t.createElement("script");n.text=e,t.head.appendChild(n).parentNode.removeChild(n)}function i(e){var t=!!e&&"length"in e&&e.length,n=ge.type(e);return"function"!==n&&!ge.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function o(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function r(e,t,n){return ge.isFunction(t)?ge.grep(e,function(e,i){return!!t.call(e,i,e)!==n}):t.nodeType?ge.grep(e,function(e){return e===t!==n}):"string"!=typeof t?ge.grep(e,function(e){return le.call(t,e)>-1!==n}):Ae.test(t)?ge.filter(t,e,n):(t=ge.filter(t,e),ge.grep(e,function(e){return le.call(t,e)>-1!==n&&1===e.nodeType}))}function s(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function l(e){var t={};return ge.each(e.match(ke)||[],function(e,n){t[n]=!0}),t}function a(e){return e}function u(e){throw e}function c(e,t,n,i){var o;try{e&&ge.isFunction(o=e.promise)?o.call(e).done(t).fail(n):e&&ge.isFunction(o=e.then)?o.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}function d(){ne.removeEventListener("DOMContentLoaded",d),e.removeEventListener("load",d),ge.ready()}function h(){this.expando=ge.expando+h.uid++}function p(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:$e.test(e)?JSON.parse(e):e)}function f(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(Be,"-$&").toLowerCase(),n=e.getAttribute(i),"string"==typeof n){try{n=p(n)}catch(e){}Me.set(e,t,n)}else n=void 0;return n}function g(e,t,n,i){var o,r=1,s=20,l=i?function(){return i.cur()}:function(){return ge.css(e,t,"")},a=l(),u=n&&n[3]||(ge.cssNumber[t]?"":"px"),c=(ge.cssNumber[t]||"px"!==u&&+a)&&He.exec(ge.css(e,t));if(c&&c[3]!==u){u=u||c[3],n=n||[],c=+a||1;do r=r||".5",c/=r,ge.style(e,t,c+u);while(r!==(r=l()/a)&&1!==r&&--s)}return n&&(c=+c||+a||0,o=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=c,i.end=o)),o}function m(e){var t,n=e.ownerDocument,i=e.nodeName,o=Ue[i];return o?o:(t=n.body.appendChild(n.createElement(i)),o=ge.css(t,"display"),t.parentNode.removeChild(t),"none"===o&&(o="block"),Ue[i]=o,o)}function v(e,t){for(var n,i,o=[],r=0,s=e.length;r<s;r++)i=e[r],i.style&&(n=i.style.display,t?("none"===n&&(o[r]=Pe.get(i,"display")||null,o[r]||(i.style.display="")),""===i.style.display&&Ve(i)&&(o[r]=m(i))):"none"!==n&&(o[r]="none",Pe.set(i,"display",n)));for(r=0;r<s;r++)null!=o[r]&&(e[r].style.display=o[r]);return e}function y(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&o(e,t)?ge.merge([e],n):n}function b(e,t){for(var n=0,i=e.length;n<i;n++)Pe.set(e[n],"globalEval",!t||Pe.get(t[n],"globalEval"))}function w(e,t,n,i,o){for(var r,s,l,a,u,c,d=t.createDocumentFragment(),h=[],p=0,f=e.length;p<f;p++)if(r=e[p],r||0===r)if("object"===ge.type(r))ge.merge(h,r.nodeType?[r]:r);else if(Xe.test(r)){for(s=s||d.appendChild(t.createElement("div")),l=(We.exec(r)||["",""])[1].toLowerCase(),a=Ke[l]||Ke._default,s.innerHTML=a[1]+ge.htmlPrefilter(r)+a[2],c=a[0];c--;)s=s.lastChild;ge.merge(h,s.childNodes),s=d.firstChild,s.textContent=""}else h.push(t.createTextNode(r));for(d.textContent="",p=0;r=h[p++];)if(i&&ge.inArray(r,i)>-1)o&&o.push(r);else if(u=ge.contains(r.ownerDocument,r),s=y(d.appendChild(r),"script"),u&&b(s),n)for(c=0;r=s[c++];)Ye.test(r.type||"")&&n.push(r);return d}function _(){return!0}function E(){return!1}function C(){try{return ne.activeElement}catch(e){}}function F(e,t,n,i,o,r){var s,l;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=void 0);for(l in t)F(e,l,n,i,t[l],r);return e}if(null==i&&null==o?(o=n,i=n=void 0):null==o&&("string"==typeof n?(o=i,i=void 0):(o=i,i=n,n=void 0)),o===!1)o=E;else if(!o)return e;return 1===r&&(s=o,o=function(e){return ge().off(e),s.apply(this,arguments)},o.guid=s.guid||(s.guid=ge.guid++)),e.each(function(){ge.event.add(this,t,o,i,n)})}function A(e,t){return o(e,"table")&&o(11!==t.nodeType?t:t.firstChild,"tr")?ge(">tbody",e)[0]||e:e}function x(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function S(e){var t=ot.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function T(e,t){var n,i,o,r,s,l,a,u;if(1===t.nodeType){if(Pe.hasData(e)&&(r=Pe.access(e),s=Pe.set(t,r),u=r.events)){delete s.handle,s.events={};for(o in u)for(n=0,i=u[o].length;n<i;n++)ge.event.add(t,o,u[o][n])}Me.hasData(e)&&(l=Me.access(e),a=ge.extend({},l),Me.set(t,a))}}function O(e,t){var n=t.nodeName.toLowerCase();"input"===n&&ze.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function N(e,t,i,o){t=re.apply([],t);var r,s,l,a,u,c,d=0,h=e.length,p=h-1,f=t[0],g=ge.isFunction(f);if(g||h>1&&"string"==typeof f&&!pe.checkClone&&it.test(f))return e.each(function(n){var r=e.eq(n);g&&(t[0]=f.call(this,n,r.html())),N(r,t,i,o)});if(h&&(r=w(t,e[0].ownerDocument,!1,e,o),s=r.firstChild,1===r.childNodes.length&&(r=s),s||o)){for(l=ge.map(y(r,"script"),x),a=l.length;d<h;d++)u=r,d!==p&&(u=ge.clone(u,!0,!0),a&&ge.merge(l,y(u,"script"))),i.call(e[d],u,d);if(a)for(c=l[l.length-1].ownerDocument,ge.map(l,S),d=0;d<a;d++)u=l[d],Ye.test(u.type||"")&&!Pe.access(u,"globalEval")&&ge.contains(c,u)&&(u.src?ge._evalUrl&&ge._evalUrl(u.src):n(u.textContent.replace(rt,""),c))}return e}function k(e,t,n){for(var i,o=t?ge.filter(t,e):e,r=0;null!=(i=o[r]);r++)n||1!==i.nodeType||ge.cleanData(y(i)),i.parentNode&&(n&&ge.contains(i.ownerDocument,i)&&b(y(i,"script")),i.parentNode.removeChild(i));return e}function I(e,t,n){var i,o,r,s,l=e.style;return n=n||at(e),n&&(s=n.getPropertyValue(t)||n[t],""!==s||ge.contains(e.ownerDocument,e)||(s=ge.style(e,t)),!pe.pixelMarginRight()&&lt.test(s)&&st.test(t)&&(i=l.width,o=l.minWidth,r=l.maxWidth,l.minWidth=l.maxWidth=l.width=s,s=n.width,l.width=i,l.minWidth=o,l.maxWidth=r)),void 0!==s?s+"":s}function L(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function R(e){if(e in ft)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=pt.length;n--;)if(e=pt[n]+t,e in ft)return e}function D(e){var t=ge.cssProps[e];return t||(t=ge.cssProps[e]=R(e)||e),t}function P(e,t,n){var i=He.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function M(e,t,n,i,o){var r,s=0;for(r=n===(i?"border":"content")?4:"width"===t?1:0;r<4;r+=2)"margin"===n&&(s+=ge.css(e,n+Ge[r],!0,o)),i?("content"===n&&(s-=ge.css(e,"padding"+Ge[r],!0,o)),"margin"!==n&&(s-=ge.css(e,"border"+Ge[r]+"Width",!0,o))):(s+=ge.css(e,"padding"+Ge[r],!0,o),"padding"!==n&&(s+=ge.css(e,"border"+Ge[r]+"Width",!0,o)));return s}function $(e,t,n){var i,o=at(e),r=I(e,t,o),s="border-box"===ge.css(e,"boxSizing",!1,o);return lt.test(r)?r:(i=s&&(pe.boxSizingReliable()||r===e.style[t]),"auto"===r&&(r=e["offset"+t[0].toUpperCase()+t.slice(1)]),r=parseFloat(r)||0,r+M(e,t,n||(s?"border":"content"),i,o)+"px")}function B(e,t,n,i,o){return new B.prototype.init(e,t,n,i,o)}function j(){mt&&(ne.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(j):e.setTimeout(j,ge.fx.interval),ge.fx.tick())}function H(){return e.setTimeout(function(){gt=void 0}),gt=ge.now()}function G(e,t){var n,i=0,o={height:e};for(t=t?1:0;i<4;i+=2-t)n=Ge[i],o["margin"+n]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function V(e,t,n){for(var i,o=(z.tweeners[t]||[]).concat(z.tweeners["*"]),r=0,s=o.length;r<s;r++)if(i=o[r].call(n,t,e))return i}function q(e,t,n){var i,o,r,s,l,a,u,c,d="width"in t||"height"in t,h=this,p={},f=e.style,g=e.nodeType&&Ve(e),m=Pe.get(e,"fxshow");n.queue||(s=ge._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,h.always(function(){h.always(function(){s.unqueued--,ge.queue(e,"fx").length||s.empty.fire()})}));for(i in t)if(o=t[i],vt.test(o)){if(delete t[i],r=r||"toggle"===o,o===(g?"hide":"show")){if("show"!==o||!m||void 0===m[i])continue;g=!0}p[i]=m&&m[i]||ge.style(e,i)}if(a=!ge.isEmptyObject(t),a||!ge.isEmptyObject(p)){d&&1===e.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],u=m&&m.display,null==u&&(u=Pe.get(e,"display")),c=ge.css(e,"display"),"none"===c&&(u?c=u:(v([e],!0),u=e.style.display||u,c=ge.css(e,"display"),v([e]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===ge.css(e,"float")&&(a||(h.done(function(){f.display=u}),null==u&&(c=f.display,u="none"===c?"":c)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",h.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),a=!1;for(i in p)a||(m?"hidden"in m&&(g=m.hidden):m=Pe.access(e,"fxshow",{display:u}),r&&(m.hidden=!g),g&&v([e],!0),h.done(function(){g||v([e]),Pe.remove(e,"fxshow");for(i in p)ge.style(e,i,p[i])})),a=V(g?m[i]:0,i,h),i in m||(m[i]=a.start,g&&(a.end=a.start,a.start=0))}}function U(e,t){var n,i,o,r,s;for(n in e)if(i=ge.camelCase(n),o=t[i],r=e[n],Array.isArray(r)&&(o=r[1],r=e[n]=r[0]),n!==i&&(e[i]=r,delete e[n]),s=ge.cssHooks[i],s&&"expand"in s){r=s.expand(r),delete e[i];for(n in r)n in e||(e[n]=r[n],t[n]=o)}else t[i]=o}function z(e,t,n){var i,o,r=0,s=z.prefilters.length,l=ge.Deferred().always(function(){delete a.elem}),a=function(){if(o)return!1;for(var t=gt||H(),n=Math.max(0,u.startTime+u.duration-t),i=n/u.duration||0,r=1-i,s=0,a=u.tweens.length;s<a;s++)u.tweens[s].run(r);return l.notifyWith(e,[u,r,n]),r<1&&a?n:(a||l.notifyWith(e,[u,1,0]),l.resolveWith(e,[u]),!1)},u=l.promise({elem:e,props:ge.extend({},t),opts:ge.extend(!0,{specialEasing:{},easing:ge.easing._default},n),originalProperties:t,originalOptions:n,startTime:gt||H(),duration:n.duration,tweens:[],createTween:function(t,n){var i=ge.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(i),i},stop:function(t){var n=0,i=t?u.tweens.length:0;if(o)return this;for(o=!0;n<i;n++)u.tweens[n].run(1);return t?(l.notifyWith(e,[u,1,0]),l.resolveWith(e,[u,t])):l.rejectWith(e,[u,t]),this}}),c=u.props;for(U(c,u.opts.specialEasing);r<s;r++)if(i=z.prefilters[r].call(u,e,c,u.opts))return ge.isFunction(i.stop)&&(ge._queueHooks(u.elem,u.opts.queue).stop=ge.proxy(i.stop,i)),i;return ge.map(c,V,u),ge.isFunction(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),ge.fx.timer(ge.extend(a,{elem:e,anim:u,queue:u.opts.queue})),u}function W(e){var t=e.match(ke)||[];return t.join(" ")}function Y(e){return e.getAttribute&&e.getAttribute("class")||""}function K(e,t,n,i){var o;if(Array.isArray(t))ge.each(t,function(t,o){n||Tt.test(e)?i(e,o):K(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,n,i)});else if(n||"object"!==ge.type(t))i(e,t);else for(o in t)K(e+"["+o+"]",t[o],n,i)}function X(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,o=0,r=t.toLowerCase().match(ke)||[];if(ge.isFunction(n))for(;i=r[o++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function J(e,t,n,i){function o(l){var a;return r[l]=!0,ge.each(e[l]||[],function(e,l){var u=l(t,n,i);return"string"!=typeof u||s||r[u]?s?!(a=u):void 0:(t.dataTypes.unshift(u),o(u),!1)}),a}var r={},s=e===jt;return o(t.dataTypes[0])||!r["*"]&&o("*")}function Q(e,t){var n,i,o=ge.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:i||(i={}))[n]=t[n]);return i&&ge.extend(!0,e,i),e}function Z(e,t,n){for(var i,o,r,s,l=e.contents,a=e.dataTypes;"*"===a[0];)a.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(o in l)if(l[o]&&l[o].test(i)){a.unshift(o);break}if(a[0]in n)r=a[0];else{for(o in n){if(!a[0]||e.converters[o+" "+a[0]]){r=o;break}s||(s=o)}r=r||s}if(r)return r!==a[0]&&a.unshift(r),n[r]}function ee(e,t,n,i){var o,r,s,l,a,u={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)u[s.toLowerCase()]=e.converters[s];for(r=c.shift();r;)if(e.responseFields[r]&&(n[e.responseFields[r]]=t),!a&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=r,r=c.shift())if("*"===r)r=a;else if("*"!==a&&a!==r){if(s=u[a+" "+r]||u["* "+r],!s)for(o in u)if(l=o.split(" "),l[1]===r&&(s=u[a+" "+l[0]]||u["* "+l[0]])){s===!0?s=u[o]:u[o]!==!0&&(r=l[0],c.unshift(l[1]));break}if(s!==!0)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+a+" to "+r}}}return{state:"success",data:t}}var te=[],ne=e.document,ie=Object.getPrototypeOf,oe=te.slice,re=te.concat,se=te.push,le=te.indexOf,ae={},ue=ae.toString,ce=ae.hasOwnProperty,de=ce.toString,he=de.call(Object),pe={},fe="3.2.1",ge=function(e,t){return new ge.fn.init(e,t)},me=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ve=/^-ms-/,ye=/-([a-z])/g,be=function(e,t){return t.toUpperCase()};ge.fn=ge.prototype={jquery:fe,constructor:ge,length:0,toArray:function(){return oe.call(this)},get:function(e){return null==e?oe.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=ge.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return ge.each(this,e)},map:function(e){return this.pushStack(ge.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(oe.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:se,sort:te.sort,splice:te.splice},ge.extend=ge.fn.extend=function(){var e,t,n,i,o,r,s=arguments[0]||{},l=1,a=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[l]||{},l++),"object"==typeof s||ge.isFunction(s)||(s={}),l===a&&(s=this,l--);l<a;l++)if(null!=(e=arguments[l]))for(t in e)n=s[t],i=e[t],s!==i&&(u&&i&&(ge.isPlainObject(i)||(o=Array.isArray(i)))?(o?(o=!1,r=n&&Array.isArray(n)?n:[]):r=n&&ge.isPlainObject(n)?n:{},s[t]=ge.extend(u,r,i)):void 0!==i&&(s[t]=i));return s},ge.extend({expando:"jQuery"+(fe+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===ge.type(e)},isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=ge.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==ue.call(e)||(t=ie(e))&&(n=ce.call(t,"constructor")&&t.constructor,"function"!=typeof n||de.call(n)!==he))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ae[ue.call(e)]||"object":typeof e},globalEval:function(e){n(e)},camelCase:function(e){return e.replace(ve,"ms-").replace(ye,be)},each:function(e,t){var n,o=0;if(i(e))for(n=e.length;o<n&&t.call(e[o],o,e[o])!==!1;o++);else for(o in e)if(t.call(e[o],o,e[o])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(me,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(i(Object(e))?ge.merge(n,"string"==typeof e?[e]:e):se.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:le.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,o=e.length;i<n;i++)e[o++]=t[i];return e.length=o,e},grep:function(e,t,n){for(var i,o=[],r=0,s=e.length,l=!n;r<s;r++)i=!t(e[r],r),i!==l&&o.push(e[r]);return o},map:function(e,t,n){var o,r,s=0,l=[];if(i(e))for(o=e.length;s<o;s++)r=t(e[s],s,n),null!=r&&l.push(r);else for(s in e)r=t(e[s],s,n),null!=r&&l.push(r);return re.apply([],l)},guid:1,proxy:function(e,t){var n,i,o;if("string"==typeof t&&(n=e[t],t=e,e=n),ge.isFunction(e))return i=oe.call(arguments,2),o=function(){return e.apply(t||this,i.concat(oe.call(arguments)))},o.guid=e.guid=e.guid||ge.guid++,o},now:Date.now,support:pe}),"function"==typeof Symbol&&(ge.fn[Symbol.iterator]=te[Symbol.iterator]),ge.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ae["[object "+t+"]"]=t.toLowerCase()});var we=function(e){function t(e,t,n,i){var o,r,s,l,a,u,c,h=t&&t.ownerDocument,f=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==f&&9!==f&&11!==f)return n;if(!i&&((t?t.ownerDocument||t:H)!==L&&I(t),t=t||L,D)){if(11!==f&&(a=ve.exec(e)))if(o=a[1]){if(9===f){if(!(s=t.getElementById(o)))return n;if(s.id===o)return n.push(s),n}else if(h&&(s=h.getElementById(o))&&B(t,s)&&s.id===o)return n.push(s),n}else{if(a[2])return Q.apply(n,t.getElementsByTagName(e)),n;if((o=a[3])&&E.getElementsByClassName&&t.getElementsByClassName)return Q.apply(n,t.getElementsByClassName(o)),n}if(E.qsa&&!z[e+" "]&&(!P||!P.test(e))){if(1!==f)h=t,c=e;else if("object"!==t.nodeName.toLowerCase()){for((l=t.getAttribute("id"))?l=l.replace(_e,Ee):t.setAttribute("id",l=j),u=x(e),r=u.length;r--;)u[r]="#"+l+" "+p(u[r]);c=u.join(","),h=ye.test(e)&&d(t.parentNode)||t}if(c)try{return Q.apply(n,h.querySelectorAll(c)),n}catch(e){}finally{l===j&&t.removeAttribute("id")}}}return T(e.replace(le,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>C.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[j]=!0,e}function o(e){var t=L.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function r(e,t){for(var n=e.split("|"),i=n.length;i--;)C.attrHandle[n[i]]=t}function s(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function l(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function a(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return function(t){return"form"in t?t.parentNode&&t.disabled===!1?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&Fe(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function c(e){return i(function(t){return t=+t,i(function(n,i){for(var o,r=e([],n.length,t),s=r.length;s--;)n[o=r[s]]&&(n[o]=!(i[o]=n[o]))})})}function d(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function h(){}function p(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function f(e,t,n){var i=t.dir,o=t.next,r=o||i,s=n&&"parentNode"===r,l=V++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||s)return e(t,n,o);return!1}:function(t,n,a){var u,c,d,h=[G,l];if(a){for(;t=t[i];)if((1===t.nodeType||s)&&e(t,n,a))return!0}else for(;t=t[i];)if(1===t.nodeType||s)if(d=t[j]||(t[j]={}),c=d[t.uniqueID]||(d[t.uniqueID]={}),o&&o===t.nodeName.toLowerCase())t=t[i]||t;else{if((u=c[r])&&u[0]===G&&u[1]===l)return h[2]=u[2];if(c[r]=h,h[2]=e(t,n,a))return!0}return!1}}function g(e){return e.length>1?function(t,n,i){for(var o=e.length;o--;)if(!e[o](t,n,i))return!1;return!0}:e[0]}function m(e,n,i){for(var o=0,r=n.length;o<r;o++)t(e,n[o],i);return i}function v(e,t,n,i,o){for(var r,s=[],l=0,a=e.length,u=null!=t;l<a;l++)(r=e[l])&&(n&&!n(r,i,o)||(s.push(r),u&&t.push(l)));return s}function y(e,t,n,o,r,s){return o&&!o[j]&&(o=y(o)),r&&!r[j]&&(r=y(r,s)),i(function(i,s,l,a){var u,c,d,h=[],p=[],f=s.length,g=i||m(t||"*",l.nodeType?[l]:l,[]),y=!e||!i&&t?g:v(g,h,e,l,a),b=n?r||(i?e:f||o)?[]:s:y;if(n&&n(y,b,l,a),o)for(u=v(b,p),o(u,[],l,a),c=u.length;c--;)(d=u[c])&&(b[p[c]]=!(y[p[c]]=d));if(i){if(r||e){if(r){for(u=[],c=b.length;c--;)(d=b[c])&&u.push(y[c]=d);r(null,b=[],u,a)}for(c=b.length;c--;)(d=b[c])&&(u=r?ee(i,d):h[c])>-1&&(i[u]=!(s[u]=d))}}else b=v(b===s?b.splice(f,b.length):b),r?r(null,s,b,a):Q.apply(s,b)})}function b(e){for(var t,n,i,o=e.length,r=C.relative[e[0].type],s=r||C.relative[" "],l=r?1:0,a=f(function(e){return e===t},s,!0),u=f(function(e){return ee(t,e)>-1},s,!0),c=[function(e,n,i){var o=!r&&(i||n!==O)||((t=n).nodeType?a(e,n,i):u(e,n,i));return t=null,o}];l<o;l++)if(n=C.relative[e[l].type])c=[f(g(c),n)];else{if(n=C.filter[e[l].type].apply(null,e[l].matches),n[j]){for(i=++l;i<o&&!C.relative[e[i].type];i++);return y(l>1&&g(c),l>1&&p(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(le,"$1"),n,l<i&&b(e.slice(l,i)),i<o&&b(e=e.slice(i)),i<o&&p(e))}c.push(n)}return g(c)}function w(e,n){var o=n.length>0,r=e.length>0,s=function(i,s,l,a,u){var c,d,h,p=0,f="0",g=i&&[],m=[],y=O,b=i||r&&C.find.TAG("*",u),w=G+=null==y?1:Math.random()||.1,_=b.length;for(u&&(O=s===L||s||u);f!==_&&null!=(c=b[f]);f++){if(r&&c){for(d=0,s||c.ownerDocument===L||(I(c),l=!D);h=e[d++];)if(h(c,s||L,l)){a.push(c);break}u&&(G=w)}o&&((c=!h&&c)&&p--,i&&g.push(c))}if(p+=f,o&&f!==p){for(d=0;h=n[d++];)h(g,m,s,l);if(i){if(p>0)for(;f--;)g[f]||m[f]||(m[f]=X.call(a));m=v(m)}Q.apply(a,m),u&&!i&&m.length>0&&p+n.length>1&&t.uniqueSort(a)}return u&&(G=w,O=y),g};return o?i(s):s}var _,E,C,F,A,x,S,T,O,N,k,I,L,R,D,P,M,$,B,j="sizzle"+1*new Date,H=e.document,G=0,V=0,q=n(),U=n(),z=n(),W=function(e,t){return e===t&&(k=!0),0},Y={}.hasOwnProperty,K=[],X=K.pop,J=K.push,Q=K.push,Z=K.slice,ee=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",oe="\\["+ne+"*("+ie+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",re=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+oe+")*)|.*)\\)|)",se=new RegExp(ne+"+","g"),le=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ae=new RegExp("^"+ne+"*,"+ne+"*"),ue=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),ce=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),de=new RegExp(re),he=new RegExp("^"+ie+"$"),pe={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie+"|[*])"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+re),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},fe=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,me=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,be=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),we=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},_e=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Ee=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},Ce=function(){I()},Fe=f(function(e){return e.disabled===!0&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{Q.apply(K=Z.call(H.childNodes),H.childNodes),K[H.childNodes.length].nodeType}catch(e){Q={apply:K.length?function(e,t){J.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}E=t.support={},A=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},I=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:H;return i!==L&&9===i.nodeType&&i.documentElement?(L=i,R=L.documentElement,D=!A(L),H!==L&&(n=L.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",Ce,!1):n.attachEvent&&n.attachEvent("onunload",Ce)),E.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),E.getElementsByTagName=o(function(e){return e.appendChild(L.createComment("")),!e.getElementsByTagName("*").length}),E.getElementsByClassName=me.test(L.getElementsByClassName),E.getById=o(function(e){return R.appendChild(e).id=j,!L.getElementsByName||!L.getElementsByName(j).length}),E.getById?(C.filter.ID=function(e){var t=e.replace(be,we);return function(e){return e.getAttribute("id")===t}},C.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&D){var n=t.getElementById(e);return n?[n]:[]}}):(C.filter.ID=function(e){var t=e.replace(be,we);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},C.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&D){var n,i,o,r=t.getElementById(e);if(r){if(n=r.getAttributeNode("id"),n&&n.value===e)return[r];for(o=t.getElementsByName(e),i=0;r=o[i++];)if(n=r.getAttributeNode("id"),n&&n.value===e)return[r]}return[]}}),C.find.TAG=E.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):E.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],o=0,r=t.getElementsByTagName(e);if("*"===e){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},C.find.CLASS=E.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&D)return t.getElementsByClassName(e)},M=[],P=[],(E.qsa=me.test(L.querySelectorAll))&&(o(function(e){R.appendChild(e).innerHTML="<a id='"+j+"'></a><select id='"+j+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&P.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||P.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+j+"-]").length||P.push("~="),e.querySelectorAll(":checked").length||P.push(":checked"),e.querySelectorAll("a#"+j+"+*").length||P.push(".#.+[+~]")}),o(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=L.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&P.push("name"+ne+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&P.push(":enabled",":disabled"),R.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&P.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),P.push(",.*:")})),(E.matchesSelector=me.test($=R.matches||R.webkitMatchesSelector||R.mozMatchesSelector||R.oMatchesSelector||R.msMatchesSelector))&&o(function(e){E.disconnectedMatch=$.call(e,"*"),$.call(e,"[s!='']:x"),M.push("!=",re)}),P=P.length&&new RegExp(P.join("|")),M=M.length&&new RegExp(M.join("|")),t=me.test(R.compareDocumentPosition),B=t||me.test(R.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},W=t?function(e,t){if(e===t)return k=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!E.sortDetached&&t.compareDocumentPosition(e)===n?e===L||e.ownerDocument===H&&B(H,e)?-1:t===L||t.ownerDocument===H&&B(H,t)?1:N?ee(N,e)-ee(N,t):0:4&n?-1:1)}:function(e,t){if(e===t)return k=!0,0;var n,i=0,o=e.parentNode,r=t.parentNode,l=[e],a=[t];if(!o||!r)return e===L?-1:t===L?1:o?-1:r?1:N?ee(N,e)-ee(N,t):0;if(o===r)return s(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)a.unshift(n);for(;l[i]===a[i];)i++;return i?s(l[i],a[i]):l[i]===H?-1:a[i]===H?1:0},L):L},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==L&&I(e),n=n.replace(ce,"='$1']"),E.matchesSelector&&D&&!z[n+" "]&&(!M||!M.test(n))&&(!P||!P.test(n)))try{var i=$.call(e,n);if(i||E.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return t(n,L,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==L&&I(e),B(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==L&&I(e);var n=C.attrHandle[t.toLowerCase()],i=n&&Y.call(C.attrHandle,t.toLowerCase())?n(e,t,!D):void 0;return void 0!==i?i:E.attributes||!D?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.escape=function(e){return(e+"").replace(_e,Ee)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,o=0;if(k=!E.detectDuplicates,N=!E.sortStable&&e.slice(0),e.sort(W),k){for(;t=e[o++];)t===e[o]&&(i=n.push(o));for(;i--;)e.splice(n[i],1)}return N=null,e},F=t.getText=function(e){var t,n="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=F(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i++];)n+=F(t);return n},C=t.selectors={cacheLength:50,createPseudo:i,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(be,we),e[3]=(e[3]||e[4]||e[5]||"").replace(be,we),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&de.test(n)&&(t=x(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(be,we).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=q[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&q(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(o){var r=t.attr(o,e);return null==r?"!="===n:!n||(r+="","="===n?r===i:"!="===n?r!==i:"^="===n?i&&0===r.indexOf(i):"*="===n?i&&r.indexOf(i)>-1:"$="===n?i&&r.slice(-i.length)===i:"~="===n?(" "+r.replace(se," ")+" ").indexOf(i)>-1:"|="===n&&(r===i||r.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,n,i,o){var r="nth"!==e.slice(0,3),s="last"!==e.slice(-4),l="of-type"===t;return 1===i&&0===o?function(e){return!!e.parentNode}:function(t,n,a){var u,c,d,h,p,f,g=r!==s?"nextSibling":"previousSibling",m=t.parentNode,v=l&&t.nodeName.toLowerCase(),y=!a&&!l,b=!1;if(m){if(r){for(;g;){for(h=t;h=h[g];)if(l?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=g="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?m.firstChild:m.lastChild],s&&y){for(h=m,d=h[j]||(h[j]={}),c=d[h.uniqueID]||(d[h.uniqueID]={}),u=c[e]||[],p=u[0]===G&&u[1],b=p&&u[2],h=p&&m.childNodes[p];h=++p&&h&&h[g]||(b=p=0)||f.pop();)if(1===h.nodeType&&++b&&h===t){c[e]=[G,p,b];break}}else if(y&&(h=t,d=h[j]||(h[j]={}),c=d[h.uniqueID]||(d[h.uniqueID]={}),u=c[e]||[],p=u[0]===G&&u[1],b=p),b===!1)for(;(h=++p&&h&&h[g]||(b=p=0)||f.pop())&&((l?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++b||(y&&(d=h[j]||(h[j]={}),c=d[h.uniqueID]||(d[h.uniqueID]={}),c[e]=[G,b]),h!==t)););return b-=o,b===i||b%i===0&&b/i>=0}}},PSEUDO:function(e,n){var o,r=C.pseudos[e]||C.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return r[j]?r(n):r.length>1?(o=[e,e,"",n],C.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,o=r(e,n),s=o.length;s--;)i=ee(e,o[s]),e[i]=!(t[i]=o[s])}):function(e){return r(e,0,o)}):r}},pseudos:{not:i(function(e){var t=[],n=[],o=S(e.replace(le,"$1"));return o[j]?i(function(e,t,n,i){for(var r,s=o(e,null,i,[]),l=e.length;l--;)(r=s[l])&&(e[l]=!(t[l]=r))}):function(e,i,r){return t[0]=e,o(t,null,r,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(be,we),function(t){return(t.textContent||t.innerText||F(t)).indexOf(e)>-1}}),lang:i(function(e){return he.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(be,we).toLowerCase(),function(t){var n;do if(n=D?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),
n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===R},focus:function(e){return e===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:u(!1),disabled:u(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return fe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[n<0?n+t:n]}),even:c(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:c(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(var i=n<0?n+t:n;--i>=0;)e.push(i);return e}),gt:c(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}},C.pseudos.nth=C.pseudos.eq;for(_ in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[_]=l(_);for(_ in{submit:!0,reset:!0})C.pseudos[_]=a(_);return h.prototype=C.filters=C.pseudos,C.setFilters=new h,x=t.tokenize=function(e,n){var i,o,r,s,l,a,u,c=U[e+" "];if(c)return n?0:c.slice(0);for(l=e,a=[],u=C.preFilter;l;){i&&!(o=ae.exec(l))||(o&&(l=l.slice(o[0].length)||l),a.push(r=[])),i=!1,(o=ue.exec(l))&&(i=o.shift(),r.push({value:i,type:o[0].replace(le," ")}),l=l.slice(i.length));for(s in C.filter)!(o=pe[s].exec(l))||u[s]&&!(o=u[s](o))||(i=o.shift(),r.push({value:i,type:s,matches:o}),l=l.slice(i.length));if(!i)break}return n?l.length:l?t.error(e):U(e,a).slice(0)},S=t.compile=function(e,t){var n,i=[],o=[],r=z[e+" "];if(!r){for(t||(t=x(e)),n=t.length;n--;)r=b(t[n]),r[j]?i.push(r):o.push(r);r=z(e,w(o,i)),r.selector=e}return r},T=t.select=function(e,t,n,i){var o,r,s,l,a,u="function"==typeof e&&e,c=!i&&x(e=u.selector||e);if(n=n||[],1===c.length){if(r=c[0]=c[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&9===t.nodeType&&D&&C.relative[r[1].type]){if(t=(C.find.ID(s.matches[0].replace(be,we),t)||[])[0],!t)return n;u&&(t=t.parentNode),e=e.slice(r.shift().value.length)}for(o=pe.needsContext.test(e)?0:r.length;o--&&(s=r[o],!C.relative[l=s.type]);)if((a=C.find[l])&&(i=a(s.matches[0].replace(be,we),ye.test(r[0].type)&&d(t.parentNode)||t))){if(r.splice(o,1),e=i.length&&p(r),!e)return Q.apply(n,i),n;break}}return(u||S(e,c))(i,t,!D,n,!t||ye.test(e)&&d(t.parentNode)||t),n},E.sortStable=j.split("").sort(W).join("")===j,E.detectDuplicates=!!k,I(),E.sortDetached=o(function(e){return 1&e.compareDocumentPosition(L.createElement("fieldset"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||r("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),E.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||r("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||r(te,function(e,t,n){var i;if(!n)return e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);ge.find=we,ge.expr=we.selectors,ge.expr[":"]=ge.expr.pseudos,ge.uniqueSort=ge.unique=we.uniqueSort,ge.text=we.getText,ge.isXMLDoc=we.isXML,ge.contains=we.contains,ge.escapeSelector=we.escape;var _e=function(e,t,n){for(var i=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&ge(e).is(n))break;i.push(e)}return i},Ee=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},Ce=ge.expr.match.needsContext,Fe=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,Ae=/^.[^:#\[\.,]*$/;ge.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?ge.find.matchesSelector(i,e)?[i]:[]:ge.find.matches(e,ge.grep(t,function(e){return 1===e.nodeType}))},ge.fn.extend({find:function(e){var t,n,i=this.length,o=this;if("string"!=typeof e)return this.pushStack(ge(e).filter(function(){for(t=0;t<i;t++)if(ge.contains(o[t],this))return!0}));for(n=this.pushStack([]),t=0;t<i;t++)ge.find(e,o[t],n);return i>1?ge.uniqueSort(n):n},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&Ce.test(e)?ge(e):e||[],!1).length}});var xe,Se=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Te=ge.fn.init=function(e,t,n){var i,o;if(!e)return this;if(n=n||xe,"string"==typeof e){if(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:Se.exec(e),!i||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof ge?t[0]:t,ge.merge(this,ge.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:ne,!0)),Fe.test(i[1])&&ge.isPlainObject(t))for(i in t)ge.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return o=ne.getElementById(i[2]),o&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):ge.isFunction(e)?void 0!==n.ready?n.ready(e):e(ge):ge.makeArray(e,this)};Te.prototype=ge.fn,xe=ge(ne);var Oe=/^(?:parents|prev(?:Until|All))/,Ne={children:!0,contents:!0,next:!0,prev:!0};ge.fn.extend({has:function(e){var t=ge(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(ge.contains(this,t[e]))return!0})},closest:function(e,t){var n,i=0,o=this.length,r=[],s="string"!=typeof e&&ge(e);if(!Ce.test(e))for(;i<o;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&ge.find.matchesSelector(n,e))){r.push(n);break}return this.pushStack(r.length>1?ge.uniqueSort(r):r)},index:function(e){return e?"string"==typeof e?le.call(ge(e),this[0]):le.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ge.uniqueSort(ge.merge(this.get(),ge(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ge.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return _e(e,"parentNode")},parentsUntil:function(e,t,n){return _e(e,"parentNode",n)},next:function(e){return s(e,"nextSibling")},prev:function(e){return s(e,"previousSibling")},nextAll:function(e){return _e(e,"nextSibling")},prevAll:function(e){return _e(e,"previousSibling")},nextUntil:function(e,t,n){return _e(e,"nextSibling",n)},prevUntil:function(e,t,n){return _e(e,"previousSibling",n)},siblings:function(e){return Ee((e.parentNode||{}).firstChild,e)},children:function(e){return Ee(e.firstChild)},contents:function(e){return o(e,"iframe")?e.contentDocument:(o(e,"template")&&(e=e.content||e),ge.merge([],e.childNodes))}},function(e,t){ge.fn[e]=function(n,i){var o=ge.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=ge.filter(i,o)),this.length>1&&(Ne[e]||ge.uniqueSort(o),Oe.test(e)&&o.reverse()),this.pushStack(o)}});var ke=/[^\x20\t\r\n\f]+/g;ge.Callbacks=function(e){e="string"==typeof e?l(e):ge.extend({},e);var t,n,i,o,r=[],s=[],a=-1,u=function(){for(o=o||e.once,i=t=!0;s.length;a=-1)for(n=s.shift();++a<r.length;)r[a].apply(n[0],n[1])===!1&&e.stopOnFalse&&(a=r.length,n=!1);e.memory||(n=!1),t=!1,o&&(r=n?[]:"")},c={add:function(){return r&&(n&&!t&&(a=r.length-1,s.push(n)),function t(n){ge.each(n,function(n,i){ge.isFunction(i)?e.unique&&c.has(i)||r.push(i):i&&i.length&&"string"!==ge.type(i)&&t(i)})}(arguments),n&&!t&&u()),this},remove:function(){return ge.each(arguments,function(e,t){for(var n;(n=ge.inArray(t,r,n))>-1;)r.splice(n,1),n<=a&&a--}),this},has:function(e){return e?ge.inArray(e,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return o=s=[],r=n="",this},disabled:function(){return!r},lock:function(){return o=s=[],n||t||(r=n=""),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=n||[],n=[e,n.slice?n.slice():n],s.push(n),t||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},ge.extend({Deferred:function(t){var n=[["notify","progress",ge.Callbacks("memory"),ge.Callbacks("memory"),2],["resolve","done",ge.Callbacks("once memory"),ge.Callbacks("once memory"),0,"resolved"],["reject","fail",ge.Callbacks("once memory"),ge.Callbacks("once memory"),1,"rejected"]],i="pending",o={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return ge.Deferred(function(t){ge.each(n,function(n,i){var o=ge.isFunction(e[i[4]])&&e[i[4]];r[i[1]](function(){var e=o&&o.apply(this,arguments);e&&ge.isFunction(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[i[0]+"With"](this,o?[e]:arguments)})}),e=null}).promise()},then:function(t,i,o){function r(t,n,i,o){return function(){var l=this,c=arguments,d=function(){var e,d;if(!(t<s)){if(e=i.apply(l,c),e===n.promise())throw new TypeError("Thenable self-resolution");d=e&&("object"==typeof e||"function"==typeof e)&&e.then,ge.isFunction(d)?o?d.call(e,r(s,n,a,o),r(s,n,u,o)):(s++,d.call(e,r(s,n,a,o),r(s,n,u,o),r(s,n,a,n.notifyWith))):(i!==a&&(l=void 0,c=[e]),(o||n.resolveWith)(l,c))}},h=o?d:function(){try{d()}catch(e){ge.Deferred.exceptionHook&&ge.Deferred.exceptionHook(e,h.stackTrace),t+1>=s&&(i!==u&&(l=void 0,c=[e]),n.rejectWith(l,c))}};t?h():(ge.Deferred.getStackHook&&(h.stackTrace=ge.Deferred.getStackHook()),e.setTimeout(h))}}var s=0;return ge.Deferred(function(e){n[0][3].add(r(0,e,ge.isFunction(o)?o:a,e.notifyWith)),n[1][3].add(r(0,e,ge.isFunction(t)?t:a)),n[2][3].add(r(0,e,ge.isFunction(i)?i:u))}).promise()},promise:function(e){return null!=e?ge.extend(e,o):o}},r={};return ge.each(n,function(e,t){var s=t[2],l=t[5];o[t[1]]=s.add,l&&s.add(function(){i=l},n[3-e][2].disable,n[0][2].lock),s.add(t[3].fire),r[t[0]]=function(){return r[t[0]+"With"](this===r?void 0:this,arguments),this},r[t[0]+"With"]=s.fireWith}),o.promise(r),t&&t.call(r,r),r},when:function(e){var t=arguments.length,n=t,i=Array(n),o=oe.call(arguments),r=ge.Deferred(),s=function(e){return function(n){i[e]=this,o[e]=arguments.length>1?oe.call(arguments):n,--t||r.resolveWith(i,o)}};if(t<=1&&(c(e,r.done(s(n)).resolve,r.reject,!t),"pending"===r.state()||ge.isFunction(o[n]&&o[n].then)))return r.then();for(;n--;)c(o[n],s(n),r.reject);return r.promise()}});var Ie=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;ge.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&Ie.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},ge.readyException=function(t){e.setTimeout(function(){throw t})};var Le=ge.Deferred();ge.fn.ready=function(e){return Le.then(e).catch(function(e){ge.readyException(e)}),this},ge.extend({isReady:!1,readyWait:1,ready:function(e){(e===!0?--ge.readyWait:ge.isReady)||(ge.isReady=!0,e!==!0&&--ge.readyWait>0||Le.resolveWith(ne,[ge]))}}),ge.ready.then=Le.then,"complete"===ne.readyState||"loading"!==ne.readyState&&!ne.documentElement.doScroll?e.setTimeout(ge.ready):(ne.addEventListener("DOMContentLoaded",d),e.addEventListener("load",d));var Re=function(e,t,n,i,o,r,s){var l=0,a=e.length,u=null==n;if("object"===ge.type(n)){o=!0;for(l in n)Re(e,t,l,n[l],!0,r,s)}else if(void 0!==i&&(o=!0,ge.isFunction(i)||(s=!0),u&&(s?(t.call(e,i),t=null):(u=t,t=function(e,t,n){return u.call(ge(e),n)})),t))for(;l<a;l++)t(e[l],n,s?i:i.call(e[l],l,t(e[l],n)));return o?e:u?t.call(e):a?t(e[0],n):r},De=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};h.uid=1,h.prototype={cache:function(e){var t=e[this.expando];return t||(t={},De(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,o=this.cache(e);if("string"==typeof t)o[ge.camelCase(t)]=n;else for(i in t)o[ge.camelCase(i)]=t[i];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][ge.camelCase(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){Array.isArray(t)?t=t.map(ge.camelCase):(t=ge.camelCase(t),t=t in i?[t]:t.match(ke)||[]),n=t.length;for(;n--;)delete i[t[n]]}(void 0===t||ge.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!ge.isEmptyObject(t)}};var Pe=new h,Me=new h,$e=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Be=/[A-Z]/g;ge.extend({hasData:function(e){return Me.hasData(e)||Pe.hasData(e)},data:function(e,t,n){return Me.access(e,t,n)},removeData:function(e,t){Me.remove(e,t)},_data:function(e,t,n){return Pe.access(e,t,n)},_removeData:function(e,t){Pe.remove(e,t)}}),ge.fn.extend({data:function(e,t){var n,i,o,r=this[0],s=r&&r.attributes;if(void 0===e){if(this.length&&(o=Me.get(r),1===r.nodeType&&!Pe.get(r,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(i=s[n].name,0===i.indexOf("data-")&&(i=ge.camelCase(i.slice(5)),f(r,i,o[i])));Pe.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each(function(){Me.set(this,e)}):Re(this,function(t){var n;if(r&&void 0===t){if(n=Me.get(r,e),void 0!==n)return n;if(n=f(r,e),void 0!==n)return n}else this.each(function(){Me.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Me.remove(this,e)})}}),ge.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=Pe.get(e,t),n&&(!i||Array.isArray(n)?i=Pe.access(e,t,ge.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=ge.queue(e,t),i=n.length,o=n.shift(),r=ge._queueHooks(e,t),s=function(){ge.dequeue(e,t)};"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===t&&n.unshift("inprogress"),delete r.stop,o.call(e,s,r)),!i&&r&&r.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Pe.get(e,n)||Pe.access(e,n,{empty:ge.Callbacks("once memory").add(function(){Pe.remove(e,[t+"queue",n])})})}}),ge.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?ge.queue(this[0],e):void 0===t?this:this.each(function(){var n=ge.queue(this,e,t);ge._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&ge.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ge.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,o=ge.Deferred(),r=this,s=this.length,l=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)n=Pe.get(r[s],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(l));return l(),o.promise(t)}});var je=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,He=new RegExp("^(?:([+-])=|)("+je+")([a-z%]*)$","i"),Ge=["Top","Right","Bottom","Left"],Ve=function(e,t){return e=t||e,"none"===e.style.display||""===e.style.display&&ge.contains(e.ownerDocument,e)&&"none"===ge.css(e,"display")},qe=function(e,t,n,i){var o,r,s={};for(r in t)s[r]=e.style[r],e.style[r]=t[r];o=n.apply(e,i||[]);for(r in t)e.style[r]=s[r];return o},Ue={};ge.fn.extend({show:function(){return v(this,!0)},hide:function(){return v(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ve(this)?ge(this).show():ge(this).hide()})}});var ze=/^(?:checkbox|radio)$/i,We=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Ye=/^$|\/(?:java|ecma)script/i,Ke={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ke.optgroup=Ke.option,Ke.tbody=Ke.tfoot=Ke.colgroup=Ke.caption=Ke.thead,Ke.th=Ke.td;var Xe=/<|&#?\w+;/;!function(){var e=ne.createDocumentFragment(),t=e.appendChild(ne.createElement("div")),n=ne.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),pe.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",pe.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Je=ne.documentElement,Qe=/^key/,Ze=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,et=/^([^.]*)(?:\.(.+)|)/;ge.event={global:{},add:function(e,t,n,i,o){var r,s,l,a,u,c,d,h,p,f,g,m=Pe.get(e);if(m)for(n.handler&&(r=n,n=r.handler,o=r.selector),o&&ge.find.matchesSelector(Je,o),n.guid||(n.guid=ge.guid++),(a=m.events)||(a=m.events={}),(s=m.handle)||(s=m.handle=function(t){return"undefined"!=typeof ge&&ge.event.triggered!==t.type?ge.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(ke)||[""],u=t.length;u--;)l=et.exec(t[u])||[],p=g=l[1],f=(l[2]||"").split(".").sort(),p&&(d=ge.event.special[p]||{},p=(o?d.delegateType:d.bindType)||p,d=ge.event.special[p]||{},c=ge.extend({type:p,origType:g,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&ge.expr.match.needsContext.test(o),namespace:f.join(".")},r),(h=a[p])||(h=a[p]=[],h.delegateCount=0,d.setup&&d.setup.call(e,i,f,s)!==!1||e.addEventListener&&e.addEventListener(p,s)),d.add&&(d.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),o?h.splice(h.delegateCount++,0,c):h.push(c),ge.event.global[p]=!0)},remove:function(e,t,n,i,o){var r,s,l,a,u,c,d,h,p,f,g,m=Pe.hasData(e)&&Pe.get(e);if(m&&(a=m.events)){for(t=(t||"").match(ke)||[""],u=t.length;u--;)if(l=et.exec(t[u])||[],p=g=l[1],f=(l[2]||"").split(".").sort(),p){for(d=ge.event.special[p]||{},p=(i?d.delegateType:d.bindType)||p,h=a[p]||[],l=l[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=h.length;r--;)c=h[r],!o&&g!==c.origType||n&&n.guid!==c.guid||l&&!l.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(h.splice(r,1),c.selector&&h.delegateCount--,d.remove&&d.remove.call(e,c));s&&!h.length&&(d.teardown&&d.teardown.call(e,f,m.handle)!==!1||ge.removeEvent(e,p,m.handle),delete a[p])}else for(p in a)ge.event.remove(e,p+t[u],n,i,!0);ge.isEmptyObject(a)&&Pe.remove(e,"handle events")}},dispatch:function(e){var t,n,i,o,r,s,l=ge.event.fix(e),a=new Array(arguments.length),u=(Pe.get(this,"events")||{})[l.type]||[],c=ge.event.special[l.type]||{};for(a[0]=l,t=1;t<arguments.length;t++)a[t]=arguments[t];if(l.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,l)!==!1){for(s=ge.event.handlers.call(this,l,u),t=0;(o=s[t++])&&!l.isPropagationStopped();)for(l.currentTarget=o.elem,n=0;(r=o.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!l.rnamespace.test(r.namespace)||(l.handleObj=r,l.data=r.data,i=((ge.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,a),void 0!==i&&(l.result=i)===!1&&(l.preventDefault(),l.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,l),l.result}},handlers:function(e,t){var n,i,o,r,s,l=[],a=t.delegateCount,u=e.target;if(a&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||u.disabled!==!0)){for(r=[],s={},n=0;n<a;n++)i=t[n],o=i.selector+" ",void 0===s[o]&&(s[o]=i.needsContext?ge(o,this).index(u)>-1:ge.find(o,this,null,[u]).length),s[o]&&r.push(i);r.length&&l.push({elem:u,handlers:r})}return u=this,a<t.length&&l.push({elem:u,handlers:t.slice(a)}),l},addProp:function(e,t){Object.defineProperty(ge.Event.prototype,e,{enumerable:!0,configurable:!0,get:ge.isFunction(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[ge.expando]?e:new ge.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==C()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===C()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&o(this,"input"))return this.click(),!1},_default:function(e){return o(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},ge.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},ge.Event=function(e,t){return this instanceof ge.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?_:E,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&ge.extend(this,t),this.timeStamp=e&&e.timeStamp||ge.now(),void(this[ge.expando]=!0)):new ge.Event(e,t)},ge.Event.prototype={constructor:ge.Event,isDefaultPrevented:E,isPropagationStopped:E,isImmediatePropagationStopped:E,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=_,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=_,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=_,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},ge.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Qe.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ze.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},ge.event.addProp),ge.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){ge.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,o=e.relatedTarget,r=e.handleObj;return o&&(o===i||ge.contains(i,o))||(e.type=r.origType,n=r.handler.apply(this,arguments),e.type=t),n}}}),ge.fn.extend({on:function(e,t,n,i){return F(this,e,t,n,i)},one:function(e,t,n,i){return F(this,e,t,n,i,1)},off:function(e,t,n){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,ge(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return t!==!1&&"function"!=typeof t||(n=t,t=void 0),n===!1&&(n=E),this.each(function(){ge.event.remove(this,e,n,t)})}});var tt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,nt=/<script|<style|<link/i,it=/checked\s*(?:[^=]|=\s*.checked.)/i,ot=/^true\/(.*)/,rt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;ge.extend({htmlPrefilter:function(e){return e.replace(tt,"<$1></$2>")},clone:function(e,t,n){var i,o,r,s,l=e.cloneNode(!0),a=ge.contains(e.ownerDocument,e);if(!(pe.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ge.isXMLDoc(e)))for(s=y(l),r=y(e),i=0,o=r.length;i<o;i++)O(r[i],s[i]);if(t)if(n)for(r=r||y(e),s=s||y(l),i=0,o=r.length;i<o;i++)T(r[i],s[i]);else T(e,l);return s=y(l,"script"),s.length>0&&b(s,!a&&y(e,"script")),l},cleanData:function(e){for(var t,n,i,o=ge.event.special,r=0;void 0!==(n=e[r]);r++)if(De(n)){if(t=n[Pe.expando]){if(t.events)for(i in t.events)o[i]?ge.event.remove(n,i):ge.removeEvent(n,i,t.handle);n[Pe.expando]=void 0}n[Me.expando]&&(n[Me.expando]=void 0)}}}),ge.fn.extend({detach:function(e){return k(this,e,!0)},remove:function(e){return k(this,e)},text:function(e){return Re(this,function(e){return void 0===e?ge.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return N(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=A(this,e);t.appendChild(e)}})},prepend:function(){return N(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=A(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return N(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return N(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(ge.cleanData(y(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ge.clone(this,e,t)})},html:function(e){return Re(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!nt.test(e)&&!Ke[(We.exec(e)||["",""])[1].toLowerCase()]){e=ge.htmlPrefilter(e);try{for(;n<i;n++)t=this[n]||{},1===t.nodeType&&(ge.cleanData(y(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return N(this,arguments,function(t){var n=this.parentNode;ge.inArray(this,e)<0&&(ge.cleanData(y(this)),n&&n.replaceChild(t,this))},e)}}),ge.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ge.fn[e]=function(e){for(var n,i=[],o=ge(e),r=o.length-1,s=0;s<=r;s++)n=s===r?this:this.clone(!0),ge(o[s])[t](n),se.apply(i,n.get());return this.pushStack(i)}});var st=/^margin/,lt=new RegExp("^("+je+")(?!px)[a-z%]+$","i"),at=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)};!function(){function t(){if(l){l.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",l.innerHTML="",Je.appendChild(s);var t=e.getComputedStyle(l);n="1%"!==t.top,r="2px"===t.marginLeft,i="4px"===t.width,l.style.marginRight="50%",o="4px"===t.marginRight,Je.removeChild(s),l=null}}var n,i,o,r,s=ne.createElement("div"),l=ne.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",pe.clearCloneStyle="content-box"===l.style.backgroundClip,s.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",s.appendChild(l),ge.extend(pe,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return t(),i},pixelMarginRight:function(){return t(),o},reliableMarginLeft:function(){return t(),r}}))}();var ut=/^(none|table(?!-c[ea]).+)/,ct=/^--/,dt={position:"absolute",visibility:"hidden",display:"block"},ht={letterSpacing:"0",fontWeight:"400"},pt=["Webkit","Moz","ms"],ft=ne.createElement("div").style;ge.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=I(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,r,s,l=ge.camelCase(t),a=ct.test(t),u=e.style;return a||(t=D(l)),s=ge.cssHooks[t]||ge.cssHooks[l],void 0===n?s&&"get"in s&&void 0!==(o=s.get(e,!1,i))?o:u[t]:(r=typeof n,"string"===r&&(o=He.exec(n))&&o[1]&&(n=g(e,t,o),r="number"),void(null!=n&&n===n&&("number"===r&&(n+=o&&o[3]||(ge.cssNumber[l]?"":"px")),pe.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,i))||(a?u.setProperty(t,n):u[t]=n))))}},css:function(e,t,n,i){var o,r,s,l=ge.camelCase(t),a=ct.test(t);return a||(t=D(l)),s=ge.cssHooks[t]||ge.cssHooks[l],s&&"get"in s&&(o=s.get(e,!0,n)),void 0===o&&(o=I(e,t,i)),"normal"===o&&t in ht&&(o=ht[t]),""===n||n?(r=parseFloat(o),n===!0||isFinite(r)?r||0:o):o}}),ge.each(["height","width"],function(e,t){ge.cssHooks[t]={get:function(e,n,i){if(n)return!ut.test(ge.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?$(e,t,i):qe(e,dt,function(){return $(e,t,i)})},set:function(e,n,i){var o,r=i&&at(e),s=i&&M(e,t,i,"border-box"===ge.css(e,"boxSizing",!1,r),r);return s&&(o=He.exec(n))&&"px"!==(o[3]||"px")&&(e.style[t]=n,n=ge.css(e,t)),P(e,n,s)}}}),ge.cssHooks.marginLeft=L(pe.reliableMarginLeft,function(e,t){if(t)return(parseFloat(I(e,"marginLeft"))||e.getBoundingClientRect().left-qe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),ge.each({margin:"",padding:"",border:"Width"},function(e,t){ge.cssHooks[e+t]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];i<4;i++)o[e+Ge[i]+t]=r[i]||r[i-2]||r[0];return o}},st.test(e)||(ge.cssHooks[e+t].set=P)}),ge.fn.extend({css:function(e,t){return Re(this,function(e,t,n){var i,o,r={},s=0;if(Array.isArray(t)){for(i=at(e),o=t.length;s<o;s++)r[t[s]]=ge.css(e,t[s],!1,i);return r}return void 0!==n?ge.style(e,t,n):ge.css(e,t)},e,t,arguments.length>1)}}),ge.Tween=B,B.prototype={constructor:B,init:function(e,t,n,i,o,r){this.elem=e,this.prop=n,this.easing=o||ge.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=r||(ge.cssNumber[n]?"":"px")},cur:function(){var e=B.propHooks[this.prop];return e&&e.get?e.get(this):B.propHooks._default.get(this)},run:function(e){var t,n=B.propHooks[this.prop];return this.options.duration?this.pos=t=ge.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):B.propHooks._default.set(this),this}},B.prototype.init.prototype=B.prototype,B.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ge.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){ge.fx.step[e.prop]?ge.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[ge.cssProps[e.prop]]&&!ge.cssHooks[e.prop]?e.elem[e.prop]=e.now:ge.style(e.elem,e.prop,e.now+e.unit)}}},B.propHooks.scrollTop=B.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ge.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},ge.fx=B.prototype.init,ge.fx.step={};var gt,mt,vt=/^(?:toggle|show|hide)$/,yt=/queueHooks$/;ge.Animation=ge.extend(z,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return g(n.elem,e,He.exec(t),n),n}]},tweener:function(e,t){ge.isFunction(e)?(t=e,e=["*"]):e=e.match(ke);for(var n,i=0,o=e.length;i<o;i++)n=e[i],z.tweeners[n]=z.tweeners[n]||[],z.tweeners[n].unshift(t)},prefilters:[q],prefilter:function(e,t){t?z.prefilters.unshift(e):z.prefilters.push(e)}}),ge.speed=function(e,t,n){var i=e&&"object"==typeof e?ge.extend({},e):{complete:n||!n&&t||ge.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ge.isFunction(t)&&t};return ge.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in ge.fx.speeds?i.duration=ge.fx.speeds[i.duration]:i.duration=ge.fx.speeds._default),null!=i.queue&&i.queue!==!0||(i.queue="fx"),i.old=i.complete,i.complete=function(){ge.isFunction(i.old)&&i.old.call(this),i.queue&&ge.dequeue(this,i.queue)},i},ge.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Ve).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var o=ge.isEmptyObject(e),r=ge.speed(t,n,i),s=function(){var t=z(this,ge.extend({},e),r);(o||Pe.get(this,"finish"))&&t.stop(!0)};return s.finish=s,o||r.queue===!1?this.each(s):this.queue(r.queue,s)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){
var t=!0,o=null!=e&&e+"queueHooks",r=ge.timers,s=Pe.get(this);if(o)s[o]&&s[o].stop&&i(s[o]);else for(o in s)s[o]&&s[o].stop&&yt.test(o)&&i(s[o]);for(o=r.length;o--;)r[o].elem!==this||null!=e&&r[o].queue!==e||(r[o].anim.stop(n),t=!1,r.splice(o,1));!t&&n||ge.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=Pe.get(this),i=n[e+"queue"],o=n[e+"queueHooks"],r=ge.timers,s=i?i.length:0;for(n.finish=!0,ge.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<s;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),ge.each(["toggle","show","hide"],function(e,t){var n=ge.fn[t];ge.fn[t]=function(e,i,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(G(t,!0),e,i,o)}}),ge.each({slideDown:G("show"),slideUp:G("hide"),slideToggle:G("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ge.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),ge.timers=[],ge.fx.tick=function(){var e,t=0,n=ge.timers;for(gt=ge.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||ge.fx.stop(),gt=void 0},ge.fx.timer=function(e){ge.timers.push(e),ge.fx.start()},ge.fx.interval=13,ge.fx.start=function(){mt||(mt=!0,j())},ge.fx.stop=function(){mt=null},ge.fx.speeds={slow:600,fast:200,_default:400},ge.fn.delay=function(t,n){return t=ge.fx?ge.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,i){var o=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(o)}})},function(){var e=ne.createElement("input"),t=ne.createElement("select"),n=t.appendChild(ne.createElement("option"));e.type="checkbox",pe.checkOn=""!==e.value,pe.optSelected=n.selected,e=ne.createElement("input"),e.value="t",e.type="radio",pe.radioValue="t"===e.value}();var bt,wt=ge.expr.attrHandle;ge.fn.extend({attr:function(e,t){return Re(this,ge.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ge.removeAttr(this,e)})}}),ge.extend({attr:function(e,t,n){var i,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return"undefined"==typeof e.getAttribute?ge.prop(e,t,n):(1===r&&ge.isXMLDoc(e)||(o=ge.attrHooks[t.toLowerCase()]||(ge.expr.match.bool.test(t)?bt:void 0)),void 0!==n?null===n?void ge.removeAttr(e,t):o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(i=o.get(e,t))?i:(i=ge.find.attr(e,t),null==i?void 0:i))},attrHooks:{type:{set:function(e,t){if(!pe.radioValue&&"radio"===t&&o(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,o=t&&t.match(ke);if(o&&1===e.nodeType)for(;n=o[i++];)e.removeAttribute(n)}}),bt={set:function(e,t,n){return t===!1?ge.removeAttr(e,n):e.setAttribute(n,n),n}},ge.each(ge.expr.match.bool.source.match(/\w+/g),function(e,t){var n=wt[t]||ge.find.attr;wt[t]=function(e,t,i){var o,r,s=t.toLowerCase();return i||(r=wt[s],wt[s]=o,o=null!=n(e,t,i)?s:null,wt[s]=r),o}});var _t=/^(?:input|select|textarea|button)$/i,Et=/^(?:a|area)$/i;ge.fn.extend({prop:function(e,t){return Re(this,ge.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[ge.propFix[e]||e]})}}),ge.extend({prop:function(e,t,n){var i,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&ge.isXMLDoc(e)||(t=ge.propFix[t]||t,o=ge.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:e[t]=n:o&&"get"in o&&null!==(i=o.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=ge.find.attr(e,"tabindex");return t?parseInt(t,10):_t.test(e.nodeName)||Et.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),pe.optSelected||(ge.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ge.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ge.propFix[this.toLowerCase()]=this}),ge.fn.extend({addClass:function(e){var t,n,i,o,r,s,l,a=0;if(ge.isFunction(e))return this.each(function(t){ge(this).addClass(e.call(this,t,Y(this)))});if("string"==typeof e&&e)for(t=e.match(ke)||[];n=this[a++];)if(o=Y(n),i=1===n.nodeType&&" "+W(o)+" "){for(s=0;r=t[s++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");l=W(i),o!==l&&n.setAttribute("class",l)}return this},removeClass:function(e){var t,n,i,o,r,s,l,a=0;if(ge.isFunction(e))return this.each(function(t){ge(this).removeClass(e.call(this,t,Y(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(ke)||[];n=this[a++];)if(o=Y(n),i=1===n.nodeType&&" "+W(o)+" "){for(s=0;r=t[s++];)for(;i.indexOf(" "+r+" ")>-1;)i=i.replace(" "+r+" "," ");l=W(i),o!==l&&n.setAttribute("class",l)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):ge.isFunction(e)?this.each(function(n){ge(this).toggleClass(e.call(this,n,Y(this),t),t)}):this.each(function(){var t,i,o,r;if("string"===n)for(i=0,o=ge(this),r=e.match(ke)||[];t=r[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||(t=Y(this),t&&Pe.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":Pe.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+W(Y(n))+" ").indexOf(t)>-1)return!0;return!1}});var Ct=/\r/g;ge.fn.extend({val:function(e){var t,n,i,o=this[0];return arguments.length?(i=ge.isFunction(e),this.each(function(n){var o;1===this.nodeType&&(o=i?e.call(this,n,ge(this).val()):e,null==o?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=ge.map(o,function(e){return null==e?"":e+""})),t=ge.valHooks[this.type]||ge.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))})):o?(t=ge.valHooks[o.type]||ge.valHooks[o.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:(n=o.value,"string"==typeof n?n.replace(Ct,""):null==n?"":n)):void 0}}),ge.extend({valHooks:{option:{get:function(e){var t=ge.find.attr(e,"value");return null!=t?t:W(ge.text(e))}},select:{get:function(e){var t,n,i,r=e.options,s=e.selectedIndex,l="select-one"===e.type,a=l?null:[],u=l?s+1:r.length;for(i=s<0?u:l?s:0;i<u;i++)if(n=r[i],(n.selected||i===s)&&!n.disabled&&(!n.parentNode.disabled||!o(n.parentNode,"optgroup"))){if(t=ge(n).val(),l)return t;a.push(t)}return a},set:function(e,t){for(var n,i,o=e.options,r=ge.makeArray(t),s=o.length;s--;)i=o[s],(i.selected=ge.inArray(ge.valHooks.option.get(i),r)>-1)&&(n=!0);return n||(e.selectedIndex=-1),r}}}}),ge.each(["radio","checkbox"],function(){ge.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=ge.inArray(ge(e).val(),t)>-1}},pe.checkOn||(ge.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Ft=/^(?:focusinfocus|focusoutblur)$/;ge.extend(ge.event,{trigger:function(t,n,i,o){var r,s,l,a,u,c,d,h=[i||ne],p=ce.call(t,"type")?t.type:t,f=ce.call(t,"namespace")?t.namespace.split("."):[];if(s=l=i=i||ne,3!==i.nodeType&&8!==i.nodeType&&!Ft.test(p+ge.event.triggered)&&(p.indexOf(".")>-1&&(f=p.split("."),p=f.shift(),f.sort()),u=p.indexOf(":")<0&&"on"+p,t=t[ge.expando]?t:new ge.Event(p,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=f.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:ge.makeArray(n,[t]),d=ge.event.special[p]||{},o||!d.trigger||d.trigger.apply(i,n)!==!1)){if(!o&&!d.noBubble&&!ge.isWindow(i)){for(a=d.delegateType||p,Ft.test(a+p)||(s=s.parentNode);s;s=s.parentNode)h.push(s),l=s;l===(i.ownerDocument||ne)&&h.push(l.defaultView||l.parentWindow||e)}for(r=0;(s=h[r++])&&!t.isPropagationStopped();)t.type=r>1?a:d.bindType||p,c=(Pe.get(s,"events")||{})[t.type]&&Pe.get(s,"handle"),c&&c.apply(s,n),c=u&&s[u],c&&c.apply&&De(s)&&(t.result=c.apply(s,n),t.result===!1&&t.preventDefault());return t.type=p,o||t.isDefaultPrevented()||d._default&&d._default.apply(h.pop(),n)!==!1||!De(i)||u&&ge.isFunction(i[p])&&!ge.isWindow(i)&&(l=i[u],l&&(i[u]=null),ge.event.triggered=p,i[p](),ge.event.triggered=void 0,l&&(i[u]=l)),t.result}},simulate:function(e,t,n){var i=ge.extend(new ge.Event,n,{type:e,isSimulated:!0});ge.event.trigger(i,null,t)}}),ge.fn.extend({trigger:function(e,t){return this.each(function(){ge.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return ge.event.trigger(e,t,n,!0)}}),ge.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){ge.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),ge.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),pe.focusin="onfocusin"in e,pe.focusin||ge.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){ge.event.simulate(t,e.target,ge.event.fix(e))};ge.event.special[t]={setup:function(){var i=this.ownerDocument||this,o=Pe.access(i,t);o||i.addEventListener(e,n,!0),Pe.access(i,t,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=Pe.access(i,t)-1;o?Pe.access(i,t,o):(i.removeEventListener(e,n,!0),Pe.remove(i,t))}}});var At=e.location,xt=ge.now(),St=/\?/;ge.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||ge.error("Invalid XML: "+t),n};var Tt=/\[\]$/,Ot=/\r?\n/g,Nt=/^(?:submit|button|image|reset|file)$/i,kt=/^(?:input|select|textarea|keygen)/i;ge.param=function(e,t){var n,i=[],o=function(e,t){var n=ge.isFunction(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!ge.isPlainObject(e))ge.each(e,function(){o(this.name,this.value)});else for(n in e)K(n,e[n],t,o);return i.join("&")},ge.fn.extend({serialize:function(){return ge.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ge.prop(this,"elements");return e?ge.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ge(this).is(":disabled")&&kt.test(this.nodeName)&&!Nt.test(e)&&(this.checked||!ze.test(e))}).map(function(e,t){var n=ge(this).val();return null==n?null:Array.isArray(n)?ge.map(n,function(e){return{name:t.name,value:e.replace(Ot,"\r\n")}}):{name:t.name,value:n.replace(Ot,"\r\n")}}).get()}});var It=/%20/g,Lt=/#.*$/,Rt=/([?&])_=[^&]*/,Dt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Mt=/^(?:GET|HEAD)$/,$t=/^\/\//,Bt={},jt={},Ht="*/".concat("*"),Gt=ne.createElement("a");Gt.href=At.href,ge.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:At.href,type:"GET",isLocal:Pt.test(At.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ht,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":ge.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Q(Q(e,ge.ajaxSettings),t):Q(ge.ajaxSettings,e)},ajaxPrefilter:X(Bt),ajaxTransport:X(jt),ajax:function(t,n){function i(t,n,i,l){var u,h,p,w,_,E=n;c||(c=!0,a&&e.clearTimeout(a),o=void 0,s=l||"",C.readyState=t>0?4:0,u=t>=200&&t<300||304===t,i&&(w=Z(f,C,i)),w=ee(f,w,C,u),u?(f.ifModified&&(_=C.getResponseHeader("Last-Modified"),_&&(ge.lastModified[r]=_),_=C.getResponseHeader("etag"),_&&(ge.etag[r]=_)),204===t||"HEAD"===f.type?E="nocontent":304===t?E="notmodified":(E=w.state,h=w.data,p=w.error,u=!p)):(p=E,!t&&E||(E="error",t<0&&(t=0))),C.status=t,C.statusText=(n||E)+"",u?v.resolveWith(g,[h,E,C]):v.rejectWith(g,[C,E,p]),C.statusCode(b),b=void 0,d&&m.trigger(u?"ajaxSuccess":"ajaxError",[C,f,u?h:p]),y.fireWith(g,[C,E]),d&&(m.trigger("ajaxComplete",[C,f]),--ge.active||ge.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var o,r,s,l,a,u,c,d,h,p,f=ge.ajaxSetup({},n),g=f.context||f,m=f.context&&(g.nodeType||g.jquery)?ge(g):ge.event,v=ge.Deferred(),y=ge.Callbacks("once memory"),b=f.statusCode||{},w={},_={},E="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(c){if(!l)for(l={};t=Dt.exec(s);)l[t[1].toLowerCase()]=t[2];t=l[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return c?s:null},setRequestHeader:function(e,t){return null==c&&(e=_[e.toLowerCase()]=_[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==c&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)C.always(e[C.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||E;return o&&o.abort(t),i(0,t),this}};if(v.promise(C),f.url=((t||f.url||At.href)+"").replace($t,At.protocol+"//"),f.type=n.method||n.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(ke)||[""],null==f.crossDomain){u=ne.createElement("a");try{u.href=f.url,u.href=u.href,f.crossDomain=Gt.protocol+"//"+Gt.host!=u.protocol+"//"+u.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=ge.param(f.data,f.traditional)),J(Bt,f,n,C),c)return C;d=ge.event&&f.global,d&&0===ge.active++&&ge.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Mt.test(f.type),r=f.url.replace(Lt,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(It,"+")):(p=f.url.slice(r.length),f.data&&(r+=(St.test(r)?"&":"?")+f.data,delete f.data),f.cache===!1&&(r=r.replace(Rt,"$1"),p=(St.test(r)?"&":"?")+"_="+xt++ +p),f.url=r+p),f.ifModified&&(ge.lastModified[r]&&C.setRequestHeader("If-Modified-Since",ge.lastModified[r]),ge.etag[r]&&C.setRequestHeader("If-None-Match",ge.etag[r])),(f.data&&f.hasContent&&f.contentType!==!1||n.contentType)&&C.setRequestHeader("Content-Type",f.contentType),C.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Ht+"; q=0.01":""):f.accepts["*"]);for(h in f.headers)C.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(f.beforeSend.call(g,C,f)===!1||c))return C.abort();if(E="abort",y.add(f.complete),C.done(f.success),C.fail(f.error),o=J(jt,f,n,C)){if(C.readyState=1,d&&m.trigger("ajaxSend",[C,f]),c)return C;f.async&&f.timeout>0&&(a=e.setTimeout(function(){C.abort("timeout")},f.timeout));try{c=!1,o.send(w,i)}catch(e){if(c)throw e;i(-1,e)}}else i(-1,"No Transport");return C},getJSON:function(e,t,n){return ge.get(e,t,n,"json")},getScript:function(e,t){return ge.get(e,void 0,t,"script")}}),ge.each(["get","post"],function(e,t){ge[t]=function(e,n,i,o){return ge.isFunction(n)&&(o=o||i,i=n,n=void 0),ge.ajax(ge.extend({url:e,type:t,dataType:o,data:n,success:i},ge.isPlainObject(e)&&e))}}),ge._evalUrl=function(e){return ge.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},ge.fn.extend({wrapAll:function(e){var t;return this[0]&&(ge.isFunction(e)&&(e=e.call(this[0])),t=ge(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return ge.isFunction(e)?this.each(function(t){ge(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ge(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ge.isFunction(e);return this.each(function(n){ge(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){ge(this).replaceWith(this.childNodes)}),this}}),ge.expr.pseudos.hidden=function(e){return!ge.expr.pseudos.visible(e)},ge.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},ge.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Vt={0:200,1223:204},qt=ge.ajaxSettings.xhr();pe.cors=!!qt&&"withCredentials"in qt,pe.ajax=qt=!!qt,ge.ajaxTransport(function(t){var n,i;if(pe.cors||qt&&!t.crossDomain)return{send:function(o,r){var s,l=t.xhr();if(l.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)l[s]=t.xhrFields[s];t.mimeType&&l.overrideMimeType&&l.overrideMimeType(t.mimeType),t.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");for(s in o)l.setRequestHeader(s,o[s]);n=function(e){return function(){n&&(n=i=l.onload=l.onerror=l.onabort=l.onreadystatechange=null,"abort"===e?l.abort():"error"===e?"number"!=typeof l.status?r(0,"error"):r(l.status,l.statusText):r(Vt[l.status]||l.status,l.statusText,"text"!==(l.responseType||"text")||"string"!=typeof l.responseText?{binary:l.response}:{text:l.responseText},l.getAllResponseHeaders()))}},l.onload=n(),i=l.onerror=n("error"),void 0!==l.onabort?l.onabort=i:l.onreadystatechange=function(){4===l.readyState&&e.setTimeout(function(){n&&i()})},n=n("abort");try{l.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),ge.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),ge.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return ge.globalEval(e),e}}}),ge.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),ge.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,o){t=ge("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),ne.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Ut=[],zt=/(=)\?(?=&|$)|\?\?/;ge.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ut.pop()||ge.expando+"_"+xt++;return this[e]=!0,e}}),ge.ajaxPrefilter("json jsonp",function(t,n,i){var o,r,s,l=t.jsonp!==!1&&(zt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&zt.test(t.data)&&"data");if(l||"jsonp"===t.dataTypes[0])return o=t.jsonpCallback=ge.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,l?t[l]=t[l].replace(zt,"$1"+o):t.jsonp!==!1&&(t.url+=(St.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return s||ge.error(o+" was not called"),s[0]},t.dataTypes[0]="json",r=e[o],e[o]=function(){s=arguments},i.always(function(){void 0===r?ge(e).removeProp(o):e[o]=r,t[o]&&(t.jsonpCallback=n.jsonpCallback,Ut.push(o)),s&&ge.isFunction(r)&&r(s[0]),s=r=void 0}),"script"}),pe.createHTMLDocument=function(){var e=ne.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),ge.parseHTML=function(e,t,n){if("string"!=typeof e)return[];"boolean"==typeof t&&(n=t,t=!1);var i,o,r;return t||(pe.createHTMLDocument?(t=ne.implementation.createHTMLDocument(""),i=t.createElement("base"),i.href=ne.location.href,t.head.appendChild(i)):t=ne),o=Fe.exec(e),r=!n&&[],o?[t.createElement(o[1])]:(o=w([e],t,r),r&&r.length&&ge(r).remove(),ge.merge([],o.childNodes))},ge.fn.load=function(e,t,n){var i,o,r,s=this,l=e.indexOf(" ");return l>-1&&(i=W(e.slice(l)),e=e.slice(0,l)),ge.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),s.length>0&&ge.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){r=arguments,s.html(i?ge("<div>").append(ge.parseHTML(e)).find(i):e)}).always(n&&function(e,t){s.each(function(){n.apply(this,r||[e.responseText,t,e])})}),this},ge.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ge.fn[t]=function(e){return this.on(t,e)}}),ge.expr.pseudos.animated=function(e){return ge.grep(ge.timers,function(t){return e===t.elem}).length},ge.offset={setOffset:function(e,t,n){var i,o,r,s,l,a,u,c=ge.css(e,"position"),d=ge(e),h={};"static"===c&&(e.style.position="relative"),l=d.offset(),r=ge.css(e,"top"),a=ge.css(e,"left"),u=("absolute"===c||"fixed"===c)&&(r+a).indexOf("auto")>-1,u?(i=d.position(),s=i.top,o=i.left):(s=parseFloat(r)||0,o=parseFloat(a)||0),ge.isFunction(t)&&(t=t.call(e,n,ge.extend({},l))),null!=t.top&&(h.top=t.top-l.top+s),null!=t.left&&(h.left=t.left-l.left+o),"using"in t?t.using.call(e,h):d.css(h)}},ge.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ge.offset.setOffset(this,e,t)});var t,n,i,o,r=this[0];return r?r.getClientRects().length?(i=r.getBoundingClientRect(),t=r.ownerDocument,n=t.documentElement,o=t.defaultView,{top:i.top+o.pageYOffset-n.clientTop,left:i.left+o.pageXOffset-n.clientLeft}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===ge.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),o(e[0],"html")||(i=e.offset()),i={top:i.top+ge.css(e[0],"borderTopWidth",!0),left:i.left+ge.css(e[0],"borderLeftWidth",!0)}),{top:t.top-i.top-ge.css(n,"marginTop",!0),left:t.left-i.left-ge.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===ge.css(e,"position");)e=e.offsetParent;return e||Je})}}),ge.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;ge.fn[e]=function(i){return Re(this,function(e,i,o){var r;return ge.isWindow(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===o?r?r[t]:e[i]:void(r?r.scrollTo(n?r.pageXOffset:o,n?o:r.pageYOffset):e[i]=o)},e,i,arguments.length)}}),ge.each(["top","left"],function(e,t){ge.cssHooks[t]=L(pe.pixelPosition,function(e,n){if(n)return n=I(e,t),lt.test(n)?ge(e).position()[t]+"px":n})}),ge.each({Height:"height",Width:"width"},function(e,t){ge.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){ge.fn[i]=function(o,r){var s=arguments.length&&(n||"boolean"!=typeof o),l=n||(o===!0||r===!0?"margin":"border");return Re(this,function(t,n,o){var r;return ge.isWindow(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===o?ge.css(t,n,l):ge.style(t,n,o,l)},t,s?o:void 0,s)}})}),ge.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),ge.holdReady=function(e){e?ge.readyWait++:ge.ready(!0)},ge.isArray=Array.isArray,ge.parseJSON=JSON.parse,ge.nodeName=o,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ge});var Wt=e.jQuery,Yt=e.$;return ge.noConflict=function(t){return e.$===ge&&(e.$=Yt),t&&e.jQuery===ge&&(e.jQuery=Wt),ge},t||(e.jQuery=e.$=ge),ge}),"undefined"==typeof jQuery.migrateMute&&(jQuery.migrateMute=!0),function(e,t){"use strict";function n(n){var i=t.console;o[n]||(o[n]=!0,e.migrateWarnings.push(n),i&&i.warn&&!e.migrateMute&&(i.warn("JQMIGRATE: "+n),e.migrateTrace&&i.trace&&i.trace()))}function i(e,t,i,o){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return n(o),i}})}e.migrateVersion="3.0.0",function(){var n=t.console&&t.console.log&&function(){t.console.log.apply(t.console,arguments)},i=/^[12]\./;n&&(e&&!i.test(e.fn.jquery)||n("JQMIGRATE: jQuery 3.0.0+ REQUIRED"),e.migrateWarnings&&n("JQMIGRATE: Migrate plugin loaded multiple times"),n("JQMIGRATE: Migrate is installed"+(e.migrateMute?"":" with logging active")+", version "+e.migrateVersion))}();var o={};e.migrateWarnings=[],void 0===e.migrateTrace&&(e.migrateTrace=!0),e.migrateReset=function(){o={},e.migrateWarnings.length=0},"BackCompat"===document.compatMode&&n("jQuery is not compatible with Quirks Mode");var r=e.fn.init,s=e.isNumeric,l=e.find,a=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,u=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g;e.fn.init=function(e){var t=Array.prototype.slice.call(arguments);return"string"==typeof e&&"#"===e&&(n("jQuery( '#' ) is not a valid selector"),t[0]=[]),r.apply(this,t)},e.fn.init.prototype=e.fn,e.find=function(e){var t=Array.prototype.slice.call(arguments);if("string"==typeof e&&a.test(e))try{document.querySelector(e)}catch(i){e=e.replace(u,function(e,t,n,i){return"["+t+n+'"'+i+'"]'});try{document.querySelector(e),n("Attribute selector with '#' must be quoted: "+t[0]),t[0]=e}catch(e){n("Attribute selector with '#' was not fixed: "+t[0])}}return l.apply(this,t)};var c;for(c in l)Object.prototype.hasOwnProperty.call(l,c)&&(e.find[c]=l[c]);e.fn.size=function(){return n("jQuery.fn.size() is deprecated; use the .length property"),this.length},e.parseJSON=function(){return n("jQuery.parseJSON is deprecated; use JSON.parse"),JSON.parse.apply(null,arguments)},e.isNumeric=function(t){function i(t){var n=t&&t.toString();return!e.isArray(t)&&n-parseFloat(n)+1>=0}var o=s(t),r=i(t);return o!==r&&n("jQuery.isNumeric() should not be called on constructed objects"),r},i(e,"unique",e.uniqueSort,"jQuery.unique is deprecated, use jQuery.uniqueSort"),i(e.expr,"filters",e.expr.pseudos,"jQuery.expr.filters is now jQuery.expr.pseudos"),i(e.expr,":",e.expr.pseudos,'jQuery.expr[":"] is now jQuery.expr.pseudos');var d=e.ajax;e.ajax=function(){var e=d.apply(this,arguments);return e.promise&&(i(e,"success",e.done,"jQXHR.success is deprecated and removed"),i(e,"error",e.fail,"jQXHR.error is deprecated and removed"),i(e,"complete",e.always,"jQXHR.complete is deprecated and removed")),e};var h=e.fn.removeAttr,p=e.fn.toggleClass,f=/\S+/g;e.fn.removeAttr=function(t){var i=this;return e.each(t.match(f),function(t,o){e.expr.match.bool.test(o)&&(n("jQuery.fn.removeAttr no longer sets boolean properties: "+o),i.prop(o,!1))}),h.apply(this,arguments)},e.fn.toggleClass=function(t){return void 0!==t&&"boolean"!=typeof t?p.apply(this,arguments):(n("jQuery.fn.toggleClass( boolean ) is deprecated"),this.each(function(){var n=this.getAttribute&&this.getAttribute("class")||"";n&&e.data(this,"__className__",n),this.setAttribute&&this.setAttribute("class",n||t===!1?"":e.data(this,"__className__")||"")}))};var g=!1;e.swap&&e.each(["height","width","reliableMarginRight"],function(t,n){var i=e.cssHooks[n]&&e.cssHooks[n].get;i&&(e.cssHooks[n].get=function(){var e;return g=!0,e=i.apply(this,arguments),g=!1,e})}),e.swap=function(e,t,i,o){var r,s,l={};g||n("jQuery.swap() is undocumented and deprecated");for(s in t)l[s]=e.style[s],e.style[s]=t[s];r=i.apply(e,o||[]);for(s in t)e.style[s]=l[s];return r};var m=e.data;e.data=function(t,i,o){var r;return i&&i!==e.camelCase(i)&&(r=e.hasData(t)&&m.call(this,t),r&&i in r)?(n("jQuery.data() always sets/gets camelCased names: "+i),arguments.length>2&&(r[i]=o),r[i]):m.apply(this,arguments)};var v=e.Tween.prototype.run;e.Tween.prototype.run=function(t){e.easing[this.easing].length>1&&(n('easing function "jQuery.easing.'+this.easing.toString()+'" should use only first argument'),e.easing[this.easing]=e.easing[this.easing].bind(e.easing,t,this.options.duration*t,0,1,this.options.duration)),v.apply(this,arguments)};var y=e.fn.load,b=e.event.fix;e.event.props=[],e.event.fixHooks={},e.event.fix=function(t){var i,o=t.type,r=this.fixHooks[o],s=e.event.props;if(s.length)for(n("jQuery.event.props are deprecated and removed: "+s.join());s.length;)e.event.addProp(s.pop());if(r&&!r._migrated_&&(r._migrated_=!0,n("jQuery.event.fixHooks are deprecated and removed: "+o),(s=r.props)&&s.length))for(;s.length;)e.event.addProp(s.pop());return i=b.call(this,t),r&&r.filter?r.filter(i,t):i},e.each(["load","unload","error"],function(t,i){e.fn[i]=function(){var e=Array.prototype.slice.call(arguments,0);return"load"===i&&"string"==typeof e[0]?y.apply(this,e):(n("jQuery.fn."+i+"() is deprecated"),e.splice(0,0,i),arguments.length?this.on.apply(this,e):(this.triggerHandler.apply(this,e),this))}}),e(function(){e(document).triggerHandler("ready")}),e.event.special.ready={setup:function(){this===document&&n("'ready' event is deprecated")}},e.fn.extend({bind:function(e,t,i){return n("jQuery.fn.bind() is deprecated"),this.on(e,null,t,i)},unbind:function(e,t){return n("jQuery.fn.unbind() is deprecated"),this.off(e,null,t)},delegate:function(e,t,i,o){return n("jQuery.fn.delegate() is deprecated"),this.on(t,e,i,o)},undelegate:function(e,t,i){return n("jQuery.fn.undelegate() is deprecated"),1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}});var w=e.fn.offset;e.fn.offset=function(){var t,i=this[0],o={top:0,left:0};return i&&i.nodeType?(t=(i.ownerDocument||document).documentElement,e.contains(t,i)?w.apply(this,arguments):(n("jQuery.fn.offset() requires an element connected to a document"),o)):(n("jQuery.fn.offset() requires a valid DOM element"),o)};var _=e.param;e.param=function(t,i){var o=e.ajaxSettings&&e.ajaxSettings.traditional;return void 0===i&&o&&(n("jQuery.param() no longer uses jQuery.ajaxSettings.traditional"),i=o),_.call(this,t,i)};var E=e.fn.andSelf||e.fn.addBack;e.fn.andSelf=function(){return n("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),E.apply(this,arguments)};var C=e.Deferred,F=[["resolve","done",e.Callbacks("once memory"),e.Callbacks("once memory"),"resolved"],["reject","fail",e.Callbacks("once memory"),e.Callbacks("once memory"),"rejected"],["notify","progress",e.Callbacks("memory"),e.Callbacks("memory")]];e.Deferred=function(t){var i=C(),o=i.promise();return i.pipe=o.pipe=function(){var t=arguments;return n("deferred.pipe() is deprecated"),e.Deferred(function(n){e.each(F,function(r,s){var l=e.isFunction(t[r])&&t[r];i[s[1]](function(){var t=l&&l.apply(this,arguments);t&&e.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s[0]+"With"](this===o?n.promise():this,l?[t]:arguments)})}),t=null}).promise()},t&&t.call(i,i),i}}(jQuery,window),define("jquery-migrate",function(){}),function(){function e(e){function t(t,n,i,o,r,s){for(;r>=0&&s>r;r+=e){var l=o?o[r]:r;i=n(i,t[l],l,t)}return i}return function(n,i,o,r){i=b(i,r,4);var s=!x(n)&&y.keys(n),l=(s||n).length,a=e>0?0:l-1;return arguments.length<3&&(o=n[s?s[a]:a],a+=e),t(n,i,o,s,a,l)}}function t(e){return function(t,n,i){n=w(n,i);for(var o=A(t),r=e>0?0:o-1;r>=0&&o>r;r+=e)if(n(t[r],r,t))return r;return-1}}function n(e,t,n){return function(i,o,r){var s=0,l=A(i);if("number"==typeof r)e>0?s=r>=0?r:Math.max(r+l,s):l=r>=0?Math.min(r+1,l):r+l+1;else if(n&&r&&l)return r=n(i,o),i[r]===o?r:-1;if(o!==o)return r=t(c.call(i,s,l),y.isNaN),r>=0?r+s:-1;for(r=e>0?s:l-1;r>=0&&l>r;r+=e)if(i[r]===o)return r;return-1}}function i(e,t){var n=k.length,i=e.constructor,o=y.isFunction(i)&&i.prototype||l,r="constructor";for(y.has(e,r)&&!y.contains(t,r)&&t.push(r);n--;)r=k[n],r in e&&e[r]!==o[r]&&!y.contains(t,r)&&t.push(r)}var o=this,r=o._,s=Array.prototype,l=Object.prototype,a=Function.prototype,u=s.push,c=s.slice,d=l.toString,h=l.hasOwnProperty,p=Array.isArray,f=Object.keys,g=a.bind,m=Object.create,v=function(){},y=function(e){return e instanceof y?e:this instanceof y?void(this._wrapped=e):new y(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=y),exports._=y):o._=y,y.VERSION="1.8.3";var b=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,o){return e.call(t,n,i,o)};case 4:return function(n,i,o,r){return e.call(t,n,i,o,r)}}return function(){return e.apply(t,arguments)}},w=function(e,t,n){return null==e?y.identity:y.isFunction(e)?b(e,t,n):y.isObject(e)?y.matcher(e):y.property(e)};y.iteratee=function(e,t){return w(e,t,1/0)};var _=function(e,t){return function(n){
var i=arguments.length;if(2>i||null==n)return n;for(var o=1;i>o;o++)for(var r=arguments[o],s=e(r),l=s.length,a=0;l>a;a++){var u=s[a];t&&void 0!==n[u]||(n[u]=r[u])}return n}},E=function(e){if(!y.isObject(e))return{};if(m)return m(e);v.prototype=e;var t=new v;return v.prototype=null,t},C=function(e){return function(t){return null==t?void 0:t[e]}},F=Math.pow(2,53)-1,A=C("length"),x=function(e){var t=A(e);return"number"==typeof t&&t>=0&&F>=t};y.each=y.forEach=function(e,t,n){t=b(t,n);var i,o;if(x(e))for(i=0,o=e.length;o>i;i++)t(e[i],i,e);else{var r=y.keys(e);for(i=0,o=r.length;o>i;i++)t(e[r[i]],r[i],e)}return e},y.map=y.collect=function(e,t,n){t=w(t,n);for(var i=!x(e)&&y.keys(e),o=(i||e).length,r=Array(o),s=0;o>s;s++){var l=i?i[s]:s;r[s]=t(e[l],l,e)}return r},y.reduce=y.foldl=y.inject=e(1),y.reduceRight=y.foldr=e(-1),y.find=y.detect=function(e,t,n){var i;return i=x(e)?y.findIndex(e,t,n):y.findKey(e,t,n),void 0!==i&&i!==-1?e[i]:void 0},y.filter=y.select=function(e,t,n){var i=[];return t=w(t,n),y.each(e,function(e,n,o){t(e,n,o)&&i.push(e)}),i},y.reject=function(e,t,n){return y.filter(e,y.negate(w(t)),n)},y.every=y.all=function(e,t,n){t=w(t,n);for(var i=!x(e)&&y.keys(e),o=(i||e).length,r=0;o>r;r++){var s=i?i[r]:r;if(!t(e[s],s,e))return!1}return!0},y.some=y.any=function(e,t,n){t=w(t,n);for(var i=!x(e)&&y.keys(e),o=(i||e).length,r=0;o>r;r++){var s=i?i[r]:r;if(t(e[s],s,e))return!0}return!1},y.contains=y.includes=y.include=function(e,t,n,i){return x(e)||(e=y.values(e)),("number"!=typeof n||i)&&(n=0),y.indexOf(e,t,n)>=0},y.invoke=function(e,t){var n=c.call(arguments,2),i=y.isFunction(t);return y.map(e,function(e){var o=i?t:e[t];return null==o?o:o.apply(e,n)})},y.pluck=function(e,t){return y.map(e,y.property(t))},y.where=function(e,t){return y.filter(e,y.matcher(t))},y.findWhere=function(e,t){return y.find(e,y.matcher(t))},y.max=function(e,t,n){var i,o,r=-1/0,s=-1/0;if(null==t&&null!=e){e=x(e)?e:y.values(e);for(var l=0,a=e.length;a>l;l++)i=e[l],i>r&&(r=i)}else t=w(t,n),y.each(e,function(e,n,i){o=t(e,n,i),(o>s||o===-1/0&&r===-1/0)&&(r=e,s=o)});return r},y.min=function(e,t,n){var i,o,r=1/0,s=1/0;if(null==t&&null!=e){e=x(e)?e:y.values(e);for(var l=0,a=e.length;a>l;l++)i=e[l],r>i&&(r=i)}else t=w(t,n),y.each(e,function(e,n,i){o=t(e,n,i),(s>o||1/0===o&&1/0===r)&&(r=e,s=o)});return r},y.shuffle=function(e){for(var t,n=x(e)?e:y.values(e),i=n.length,o=Array(i),r=0;i>r;r++)t=y.random(0,r),t!==r&&(o[r]=o[t]),o[t]=n[r];return o},y.sample=function(e,t,n){return null==t||n?(x(e)||(e=y.values(e)),e[y.random(e.length-1)]):y.shuffle(e).slice(0,Math.max(0,t))},y.sortBy=function(e,t,n){return t=w(t,n),y.pluck(y.map(e,function(e,n,i){return{value:e,index:n,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index-t.index}),"value")};var S=function(e){return function(t,n,i){var o={};return n=w(n,i),y.each(t,function(i,r){var s=n(i,r,t);e(o,i,s)}),o}};y.groupBy=S(function(e,t,n){y.has(e,n)?e[n].push(t):e[n]=[t]}),y.indexBy=S(function(e,t,n){e[n]=t}),y.countBy=S(function(e,t,n){y.has(e,n)?e[n]++:e[n]=1}),y.toArray=function(e){return e?y.isArray(e)?c.call(e):x(e)?y.map(e,y.identity):y.values(e):[]},y.size=function(e){return null==e?0:x(e)?e.length:y.keys(e).length},y.partition=function(e,t,n){t=w(t,n);var i=[],o=[];return y.each(e,function(e,n,r){(t(e,n,r)?i:o).push(e)}),[i,o]},y.first=y.head=y.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:y.initial(e,e.length-t)},y.initial=function(e,t,n){return c.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},y.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:y.rest(e,Math.max(0,e.length-t))},y.rest=y.tail=y.drop=function(e,t,n){return c.call(e,null==t||n?1:t)},y.compact=function(e){return y.filter(e,y.identity)};var T=function(e,t,n,i){for(var o=[],r=0,s=i||0,l=A(e);l>s;s++){var a=e[s];if(x(a)&&(y.isArray(a)||y.isArguments(a))){t||(a=T(a,t,n));var u=0,c=a.length;for(o.length+=c;c>u;)o[r++]=a[u++]}else n||(o[r++]=a)}return o};y.flatten=function(e,t){return T(e,t,!1)},y.without=function(e){return y.difference(e,c.call(arguments,1))},y.uniq=y.unique=function(e,t,n,i){y.isBoolean(t)||(i=n,n=t,t=!1),null!=n&&(n=w(n,i));for(var o=[],r=[],s=0,l=A(e);l>s;s++){var a=e[s],u=n?n(a,s,e):a;t?(s&&r===u||o.push(a),r=u):n?y.contains(r,u)||(r.push(u),o.push(a)):y.contains(o,a)||o.push(a)}return o},y.union=function(){return y.uniq(T(arguments,!0,!0))},y.intersection=function(e){for(var t=[],n=arguments.length,i=0,o=A(e);o>i;i++){var r=e[i];if(!y.contains(t,r)){for(var s=1;n>s&&y.contains(arguments[s],r);s++);s===n&&t.push(r)}}return t},y.difference=function(e){var t=T(arguments,!0,!0,1);return y.filter(e,function(e){return!y.contains(t,e)})},y.zip=function(){return y.unzip(arguments)},y.unzip=function(e){for(var t=e&&y.max(e,A).length||0,n=Array(t),i=0;t>i;i++)n[i]=y.pluck(e,i);return n},y.object=function(e,t){for(var n={},i=0,o=A(e);o>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},y.findIndex=t(1),y.findLastIndex=t(-1),y.sortedIndex=function(e,t,n,i){n=w(n,i,1);for(var o=n(t),r=0,s=A(e);s>r;){var l=Math.floor((r+s)/2);n(e[l])<o?r=l+1:s=l}return r},y.indexOf=n(1,y.findIndex,y.sortedIndex),y.lastIndexOf=n(-1,y.findLastIndex),y.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var i=Math.max(Math.ceil((t-e)/n),0),o=Array(i),r=0;i>r;r++,e+=n)o[r]=e;return o};var O=function(e,t,n,i,o){if(!(i instanceof t))return e.apply(n,o);var r=E(e.prototype),s=e.apply(r,o);return y.isObject(s)?s:r};y.bind=function(e,t){if(g&&e.bind===g)return g.apply(e,c.call(arguments,1));if(!y.isFunction(e))throw new TypeError("Bind must be called on a function");var n=c.call(arguments,2),i=function(){return O(e,i,t,this,n.concat(c.call(arguments)))};return i},y.partial=function(e){var t=c.call(arguments,1),n=function(){for(var i=0,o=t.length,r=Array(o),s=0;o>s;s++)r[s]=t[s]===y?arguments[i++]:t[s];for(;i<arguments.length;)r.push(arguments[i++]);return O(e,n,this,this,r)};return n},y.bindAll=function(e){var t,n,i=arguments.length;if(1>=i)throw new Error("bindAll must be passed function names");for(t=1;i>t;t++)n=arguments[t],e[n]=y.bind(e[n],e);return e},y.memoize=function(e,t){var n=function(i){var o=n.cache,r=""+(t?t.apply(this,arguments):i);return y.has(o,r)||(o[r]=e.apply(this,arguments)),o[r]};return n.cache={},n},y.delay=function(e,t){var n=c.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},y.defer=y.partial(y.delay,y,1),y.throttle=function(e,t,n){var i,o,r,s=null,l=0;n||(n={});var a=function(){l=n.leading===!1?0:y.now(),s=null,r=e.apply(i,o),s||(i=o=null)};return function(){var u=y.now();l||n.leading!==!1||(l=u);var c=t-(u-l);return i=this,o=arguments,0>=c||c>t?(s&&(clearTimeout(s),s=null),l=u,r=e.apply(i,o),s||(i=o=null)):s||n.trailing===!1||(s=setTimeout(a,c)),r}},y.debounce=function(e,t,n){var i,o,r,s,l,a=function(){var u=y.now()-s;t>u&&u>=0?i=setTimeout(a,t-u):(i=null,n||(l=e.apply(r,o),i||(r=o=null)))};return function(){r=this,o=arguments,s=y.now();var u=n&&!i;return i||(i=setTimeout(a,t)),u&&(l=e.apply(r,o),r=o=null),l}},y.wrap=function(e,t){return y.partial(t,e)},y.negate=function(e){return function(){return!e.apply(this,arguments)}},y.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}},y.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},y.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=null),n}},y.once=y.partial(y.before,2);var N=!{toString:null}.propertyIsEnumerable("toString"),k=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];y.keys=function(e){if(!y.isObject(e))return[];if(f)return f(e);var t=[];for(var n in e)y.has(e,n)&&t.push(n);return N&&i(e,t),t},y.allKeys=function(e){if(!y.isObject(e))return[];var t=[];for(var n in e)t.push(n);return N&&i(e,t),t},y.values=function(e){for(var t=y.keys(e),n=t.length,i=Array(n),o=0;n>o;o++)i[o]=e[t[o]];return i},y.mapObject=function(e,t,n){t=w(t,n);for(var i,o=y.keys(e),r=o.length,s={},l=0;r>l;l++)i=o[l],s[i]=t(e[i],i,e);return s},y.pairs=function(e){for(var t=y.keys(e),n=t.length,i=Array(n),o=0;n>o;o++)i[o]=[t[o],e[t[o]]];return i},y.invert=function(e){for(var t={},n=y.keys(e),i=0,o=n.length;o>i;i++)t[e[n[i]]]=n[i];return t},y.functions=y.methods=function(e){var t=[];for(var n in e)y.isFunction(e[n])&&t.push(n);return t.sort()},y.extend=_(y.allKeys),y.extendOwn=y.assign=_(y.keys),y.findKey=function(e,t,n){t=w(t,n);for(var i,o=y.keys(e),r=0,s=o.length;s>r;r++)if(i=o[r],t(e[i],i,e))return i},y.pick=function(e,t,n){var i,o,r={},s=e;if(null==s)return r;y.isFunction(t)?(o=y.allKeys(s),i=b(t,n)):(o=T(arguments,!1,!1,1),i=function(e,t,n){return t in n},s=Object(s));for(var l=0,a=o.length;a>l;l++){var u=o[l],c=s[u];i(c,u,s)&&(r[u]=c)}return r},y.omit=function(e,t,n){if(y.isFunction(t))t=y.negate(t);else{var i=y.map(T(arguments,!1,!1,1),String);t=function(e,t){return!y.contains(i,t)}}return y.pick(e,t,n)},y.defaults=_(y.allKeys,!0),y.create=function(e,t){var n=E(e);return t&&y.extendOwn(n,t),n},y.clone=function(e){return y.isObject(e)?y.isArray(e)?e.slice():y.extend({},e):e},y.tap=function(e,t){return t(e),e},y.isMatch=function(e,t){var n=y.keys(t),i=n.length;if(null==e)return!i;for(var o=Object(e),r=0;i>r;r++){var s=n[r];if(t[s]!==o[s]||!(s in o))return!1}return!0};var I=function(e,t,n,i){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof y&&(e=e._wrapped),t instanceof y&&(t=t._wrapped);var o=d.call(e);if(o!==d.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var r="[object Array]"===o;if(!r){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,l=t.constructor;if(s!==l&&!(y.isFunction(s)&&s instanceof s&&y.isFunction(l)&&l instanceof l)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],i=i||[];for(var a=n.length;a--;)if(n[a]===e)return i[a]===t;if(n.push(e),i.push(t),r){if(a=e.length,a!==t.length)return!1;for(;a--;)if(!I(e[a],t[a],n,i))return!1}else{var u,c=y.keys(e);if(a=c.length,y.keys(t).length!==a)return!1;for(;a--;)if(u=c[a],!y.has(t,u)||!I(e[u],t[u],n,i))return!1}return n.pop(),i.pop(),!0};y.isEqual=function(e,t){return I(e,t)},y.isEmpty=function(e){return null==e||(x(e)&&(y.isArray(e)||y.isString(e)||y.isArguments(e))?0===e.length:0===y.keys(e).length)},y.isElement=function(e){return!(!e||1!==e.nodeType)},y.isArray=p||function(e){return"[object Array]"===d.call(e)},y.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},y.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){y["is"+e]=function(t){return d.call(t)==="[object "+e+"]"}}),y.isArguments(arguments)||(y.isArguments=function(e){return y.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(y.isFunction=function(e){return"function"==typeof e||!1}),y.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},y.isNaN=function(e){return y.isNumber(e)&&e!==+e},y.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===d.call(e)},y.isNull=function(e){return null===e},y.isUndefined=function(e){return void 0===e},y.has=function(e,t){return null!=e&&h.call(e,t)},y.noConflict=function(){return o._=r,this},y.identity=function(e){return e},y.constant=function(e){return function(){return e}},y.noop=function(){},y.property=C,y.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},y.matcher=y.matches=function(e){return e=y.extendOwn({},e),function(t){return y.isMatch(t,e)}},y.times=function(e,t,n){var i=Array(Math.max(0,e));t=b(t,n,1);for(var o=0;e>o;o++)i[o]=t(o);return i},y.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},y.now=Date.now||function(){return(new Date).getTime()};var L={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},R=y.invert(L),D=function(e){var t=function(t){return e[t]},n="(?:"+y.keys(e).join("|")+")",i=RegExp(n),o=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(o,t):e}};y.escape=D(L),y.unescape=D(R),y.result=function(e,t,n){var i=null==e?void 0:e[t];return void 0===i&&(i=n),y.isFunction(i)?i.call(e):i};var P=0;y.uniqueId=function(e){var t=++P+"";return e?e+t:t},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var M=/(.)^/,$={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\u2028|\u2029/g,j=function(e){return"\\"+$[e]};y.template=function(e,t,n){!t&&n&&(t=n),t=y.defaults({},t,y.templateSettings);var i=RegExp([(t.escape||M).source,(t.interpolate||M).source,(t.evaluate||M).source].join("|")+"|$","g"),o=0,r="__p+='";e.replace(i,function(t,n,i,s,l){return r+=e.slice(o,l).replace(B,j),o=l+t.length,n?r+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?r+="'+\n((__t=("+i+"))==null?'':__t)+\n'":s&&(r+="';\n"+s+"\n__p+='"),t}),r+="';\n",t.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{var s=new Function(t.variable||"obj","_",r)}catch(e){throw e.source=r,e}var l=function(e){return s.call(this,e,y)},a=t.variable||"obj";return l.source="function("+a+"){\n"+r+"}",l},y.chain=function(e){var t=y(e);return t._chain=!0,t};var H=function(e,t){return e._chain?y(t).chain():t};y.mixin=function(e){y.each(y.functions(e),function(t){var n=y[t]=e[t];y.prototype[t]=function(){var e=[this._wrapped];return u.apply(e,arguments),H(this,n.apply(y,e))}})},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=s[e];y.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],H(this,n)}}),y.each(["concat","join","slice"],function(e){var t=s[e];y.prototype[e]=function(){return H(this,t.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return y})}.call(this),!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define("async",["exports"],t):t(e.async=e.async||{})}(this,function(e){"use strict";function t(e,t){t|=0;for(var n=Math.max(e.length-t,0),i=Array(n),o=0;o<n;o++)i[o]=e[t+o];return i}function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function i(e){setTimeout(e,0)}function o(e){return function(n){var i=t(arguments,1);e(function(){n.apply(null,i)})}}function r(e){return rt(function(t,i){var o;try{o=e.apply(this,t)}catch(e){return i(e)}n(o)&&"function"==typeof o.then?o.then(function(e){s(i,null,e)},function(e){s(i,e.message?e:new Error(e))}):i(null,o)})}function s(e,t,n){try{e(t,n)}catch(e){at(l,e)}}function l(e){throw e}function a(e){return ut&&"AsyncFunction"===e[Symbol.toStringTag]}function u(e){return a(e)?r(e):e}function c(e){return function(n){var i=t(arguments,1),o=rt(function(t,i){var o=this;return e(n,function(e,n){u(e).apply(o,t.concat(n))},i)});return i.length?o.apply(this,i):o}}function d(e){var t=gt.call(e,vt),n=e[vt];try{e[vt]=void 0;var i=!0}catch(e){}var o=mt.call(e);return i&&(t?e[vt]=n:delete e[vt]),o}function h(e){return bt.call(e)}function p(e){return null==e?void 0===e?_t:wt:(e=Object(e),Et&&Et in e?d(e):h(e))}function f(e){if(!n(e))return!1;var t=p(e);return t==Ft||t==At||t==Ct||t==xt}function g(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=St}function m(e){return null!=e&&g(e.length)&&!f(e)}function v(){}function y(e){return function(){if(null!==e){var t=e;e=null,t.apply(this,arguments)}}}function b(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function w(e){return null!=e&&"object"==typeof e}function _(e){return w(e)&&p(e)==kt}function E(){return!1}function C(e,t){return t=null==t?Vt:t,!!t&&("number"==typeof e||qt.test(e))&&e>-1&&e%1==0&&e<t}function F(e){return w(e)&&g(e.length)&&!!mn[p(e)]}function A(e){return function(t){return e(t)}}function x(e,t){var n=Pt(e),i=!n&&Dt(e),o=!n&&!i&&Gt(e),r=!n&&!i&&!o&&Cn(e),s=n||i||o||r,l=s?b(e.length,String):[],a=l.length;for(var u in e)!t&&!An.call(e,u)||s&&("length"==u||o&&("offset"==u||"parent"==u)||r&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||C(u,a))||l.push(u);return l}function S(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||xn;return e===n}function T(e,t){return function(n){return e(t(n))}}function O(e){if(!S(e))return Sn(e);var t=[];for(var n in Object(e))On.call(e,n)&&"constructor"!=n&&t.push(n);return t}function N(e){return m(e)?x(e):O(e)}function k(e){var t=-1,n=e.length;return function(){return++t<n?{value:e[t],key:t}:null}}function I(e){var t=-1;return function(){var n=e.next();return n.done?null:(t++,{value:n.value,key:t})}}function L(e){var t=N(e),n=-1,i=t.length;return function(){var o=t[++n];return n<i?{value:e[o],key:o}:null}}function R(e){if(m(e))return k(e);var t=Nt(e);return t?I(t):L(e)}function D(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}function P(e){return function(t,n,i){function o(e,t){if(a-=1,e)l=!0,i(e);else{if(t===Tt||l&&a<=0)return l=!0,i(null);r()}}function r(){for(;a<e&&!l;){var t=s();if(null===t)return l=!0,void(a<=0&&i(null));a+=1,n(t.value,t.key,D(o))}}if(i=y(i||v),e<=0||!t)return i(null);var s=R(t),l=!1,a=0;r()}}function M(e,t,n,i){P(t)(e,u(n),i)}function $(e,t){return function(n,i,o){return e(n,t,i,o)}}function B(e,t,n){function i(e,t){e?n(e):++r!==s&&t!==Tt||n(null)}n=y(n||v);var o=0,r=0,s=e.length;for(0===s&&n(null);o<s;o++)t(e[o],o,D(i))}function j(e){return function(t,n,i){return e(kn,t,u(n),i)}}function H(e,t,n,i){i=i||v,t=t||[];var o=[],r=0,s=u(n);e(t,function(e,t,n){var i=r++;s(e,function(e,t){o[i]=t,n(e)})},function(e){i(e,o)})}function G(e){return function(t,n,i,o){return e(P(n),t,u(i),o)}}function V(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&t(e[n],n,e)!==!1;);return e}function q(e){return function(t,n,i){for(var o=-1,r=Object(t),s=i(t),l=s.length;l--;){var a=s[e?l:++o];if(n(r[a],a,r)===!1)break}return t}}function U(e,t){return e&&$n(e,t,N)}function z(e,t,n,i){for(var o=e.length,r=n+(i?1:-1);i?r--:++r<o;)if(t(e[r],r,e))return r;return-1}function W(e){return e!==e}function Y(e,t,n){for(var i=n-1,o=e.length;++i<o;)if(e[i]===t)return i;return-1}function K(e,t,n){return t===t?Y(e,t,n):z(e,W,n)}function X(e,t){for(var n=-1,i=null==e?0:e.length,o=Array(i);++n<i;)o[n]=t(e[n],n,e);return o}function J(e){return"symbol"==typeof e||w(e)&&p(e)==jn}function Q(e){if("string"==typeof e)return e;if(Pt(e))return X(e,Q)+"";if(J(e))return Vn?Vn.call(e):"";var t=e+"";return"0"==t&&1/e==-Hn?"-0":t}function Z(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),n=n>o?o:n,n<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var r=Array(o);++i<o;)r[i]=e[i+t];return r}function ee(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:Z(e,t,n)}function te(e,t){for(var n=e.length;n--&&K(t,e[n],0)>-1;);return n}function ne(e,t){for(var n=-1,i=e.length;++n<i&&K(t,e[n],0)>-1;);return n}function ie(e){return e.split("")}function oe(e){return Kn.test(e)}function re(e){return e.match(pi)||[]}function se(e){return oe(e)?re(e):ie(e)}function le(e){return null==e?"":Q(e)}function ae(e,t,n){if(e=le(e),e&&(n||void 0===t))return e.replace(fi,"");if(!e||!(t=Q(t)))return e;var i=se(e),o=se(t),r=ne(i,o),s=te(i,o)+1;return ee(i,r,s).join("")}function ue(e){return e=e.toString().replace(yi,""),e=e.match(gi)[2].replace(" ",""),e=e?e.split(mi):[],e=e.map(function(e){return ae(e.replace(vi,""))})}function ce(e,t){var n={};U(e,function(e,t){function i(t,n){var i=X(o,function(e){return t[e]});i.push(n),u(e).apply(null,i)}var o,r=a(e),s=!r&&1===e.length||r&&0===e.length;if(Pt(e))o=e.slice(0,-1),e=e[e.length-1],n[t]=o.concat(o.length>0?i:e);else if(s)n[t]=e;else{if(o=ue(e),0===e.length&&!r&&0===o.length)throw new Error("autoInject task functions require explicit parameters.");r||o.pop(),n[t]=o.concat(i)}}),Bn(n,t)}function de(){this.head=this.tail=null,this.length=0}function he(e,t){e.length=1,e.head=e.tail=t}function pe(e,t,n){function i(e,t,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(c.started=!0,Pt(e)||(e=[e]),0===e.length&&c.idle())return at(function(){c.drain()});for(var i=0,o=e.length;i<o;i++){var r={data:e[i],callback:n||v};t?c._tasks.unshift(r):c._tasks.push(r)}at(c.process)}function o(e){return function(t){s-=1;for(var n=0,i=e.length;n<i;n++){var o=e[n],r=K(l,o,0);r>=0&&l.splice(r,1),o.callback.apply(o,arguments),null!=t&&c.error(t,o.data)}s<=c.concurrency-c.buffer&&c.unsaturated(),c.idle()&&c.drain(),c.process()}}if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var r=u(e),s=0,l=[],a=!1,c={_tasks:new de,concurrency:t,payload:n,saturated:v,unsaturated:v,buffer:t/4,empty:v,drain:v,error:v,started:!1,paused:!1,push:function(e,t){i(e,!1,t)},kill:function(){c.drain=v,c._tasks.empty()},unshift:function(e,t){i(e,!0,t)},remove:function(e){c._tasks.remove(e)},process:function(){if(!a){for(a=!0;!c.paused&&s<c.concurrency&&c._tasks.length;){var e=[],t=[],n=c._tasks.length;c.payload&&(n=Math.min(n,c.payload));for(var i=0;i<n;i++){var u=c._tasks.shift();e.push(u),l.push(u),t.push(u.data)}s+=1,0===c._tasks.length&&c.empty(),s===c.concurrency&&c.saturated();var d=D(o(e));r(t,d)}a=!1}},length:function(){return c._tasks.length},running:function(){return s},workersList:function(){return l},idle:function(){return c._tasks.length+s===0},pause:function(){c.paused=!0},resume:function(){c.paused!==!1&&(c.paused=!1,at(c.process))}};return c}function fe(e,t){return pe(e,1,t)}function ge(e,t,n,i){i=y(i||v);var o=u(n);wi(e,function(e,n,i){o(t,e,function(e,n){t=n,i(e)})},function(e){i(e,t)})}function me(){var e=X(arguments,u);return function(){var n=t(arguments),i=this,o=n[n.length-1];"function"==typeof o?n.pop():o=v,ge(e,n,function(e,n,o){n.apply(i,e.concat(function(e){var n=t(arguments,1);o(e,n)}))},function(e,t){o.apply(i,[e].concat(t))})}}function ve(e){return e}function ye(e,t){return function(n,i,o,r){r=r||v;var s,l=!1;n(i,function(n,i,r){o(n,function(i,o){i?r(i):e(o)&&!s?(l=!0,s=t(!0,n),r(null,Tt)):r()})},function(e){e?r(e):r(null,l?s:t(!1))})}}function be(e,t){return t}function we(e){return function(n){var i=t(arguments,1);i.push(function(n){var i=t(arguments,1);"object"==typeof console&&(n?console.error&&console.error(n):console[e]&&V(i,function(t){console[e](t)}))}),u(n).apply(null,i)}}function _e(e,n,i){function o(e){if(e)return i(e);var n=t(arguments,1);n.push(r),l.apply(this,n)}function r(e,t){return e?i(e):t?void s(o):i(null)}i=D(i||v);var s=u(e),l=u(n);r(null,!0)}function Ee(e,n,i){i=D(i||v);var o=u(e),r=function(e){if(e)return i(e);var s=t(arguments,1);return n.apply(this,s)?o(r):void i.apply(null,[null].concat(s))};o(r)}function Ce(e,t,n){Ee(e,function(){return!t.apply(this,arguments)},n)}function Fe(e,t,n){function i(e){return e?n(e):void s(o)}function o(e,t){return e?n(e):t?void r(i):n(null)}n=D(n||v);var r=u(t),s=u(e);s(o)}function Ae(e){return function(t,n,i){return e(t,i)}}function xe(e,t,n){kn(e,Ae(u(t)),n)}function Se(e,t,n,i){P(t)(e,Ae(u(n)),i)}function Te(e){return a(e)?e:rt(function(t,n){var i=!0;t.push(function(){var e=arguments;i?at(function(){n.apply(null,e)}):n.apply(null,e)}),e.apply(this,t),i=!1})}function Oe(e){return!e}function Ne(e){return function(t){return null==t?void 0:t[e]}}function ke(e,t,n,i){var o=new Array(t.length);e(t,function(e,t,i){n(e,function(e,n){o[t]=!!n,i(e)})},function(e){if(e)return i(e);for(var n=[],r=0;r<t.length;r++)o[r]&&n.push(t[r]);i(null,n)})}function Ie(e,t,n,i){var o=[];e(t,function(e,t,i){n(e,function(n,r){n?i(n):(r&&o.push({index:t,value:e}),i())})},function(e){e?i(e):i(null,X(o.sort(function(e,t){return e.index-t.index}),Ne("value")))})}function Le(e,t,n,i){var o=m(t)?ke:Ie;o(e,t,u(n),i||v)}function Re(e,t){function n(e){return e?i(e):void o(n)}var i=D(t||v),o=u(Te(e));n()}function De(e,t,n,i){i=y(i||v);var o={},r=u(n);M(e,t,function(e,t,n){r(e,t,function(e,i){return e?n(e):(o[t]=i,void n())})},function(e){i(e,o)})}function Pe(e,t){return t in e}function Me(e,n){var i=Object.create(null),o=Object.create(null);n=n||ve;var r=u(e),s=rt(function(e,s){var l=n.apply(null,e);Pe(i,l)?at(function(){s.apply(null,i[l])}):Pe(o,l)?o[l].push(s):(o[l]=[s],r.apply(null,e.concat(function(){var e=t(arguments);i[l]=e;var n=o[l];delete o[l];for(var r=0,s=n.length;r<s;r++)n[r].apply(null,e)})))});return s.memo=i,s.unmemoized=e,s}function $e(e,n,i){i=i||v;var o=m(n)?[]:{};e(n,function(e,n,i){u(e)(function(e,r){arguments.length>2&&(r=t(arguments,1)),o[n]=r,i(e)})},function(e){i(e,o)})}function Be(e,t){$e(kn,e,t)}function je(e,t,n){$e(P(t),e,n)}function He(e,t){if(t=y(t||v),!Pt(e))return t(new TypeError("First argument to race must be an array of functions"));if(!e.length)return t();for(var n=0,i=e.length;n<i;n++)u(e[n])(t)}function Ge(e,n,i,o){var r=t(e).reverse();ge(r,n,i,o)}function Ve(e){var n=u(e);return rt(function(e,i){return e.push(function(e,n){if(e)i(null,{error:e});else{var o;o=arguments.length<=2?n:t(arguments,1),i(null,{value:o})}}),n.apply(this,e)})}function qe(e,t,n,i){Le(e,t,function(e,t){n(e,function(e,n){t(e,!n)})},i)}function Ue(e){var t;return Pt(e)?t=X(e,Ve):(t={},U(e,function(e,n){t[n]=Ve.call(this,e)})),t}function ze(e){return function(){return e}}function We(e,t,n){function i(e,t){if("object"==typeof t)e.times=+t.times||r,e.intervalFunc="function"==typeof t.interval?t.interval:ze(+t.interval||s),e.errorFilter=t.errorFilter;else{if("number"!=typeof t&&"string"!=typeof t)throw new Error("Invalid arguments for async.retry");e.times=+t||r}}function o(){a(function(e){e&&c++<l.times&&("function"!=typeof l.errorFilter||l.errorFilter(e))?setTimeout(o,l.intervalFunc(c)):n.apply(null,arguments)})}var r=5,s=0,l={times:r,intervalFunc:ze(s)};if(arguments.length<3&&"function"==typeof e?(n=t||v,t=e):(i(l,e),n=n||v),"function"!=typeof t)throw new Error("Invalid arguments for async.retry");var a=u(t),c=1;o()}function Ye(e,t){$e(wi,e,t)}function Ke(e,t,n){function i(e,t){var n=e.criteria,i=t.criteria;return n<i?-1:n>i?1:0}var o=u(t);In(e,function(e,t){o(e,function(n,i){return n?t(n):void t(null,{value:e,criteria:i})})},function(e,t){return e?n(e):void n(null,X(t.sort(i),Ne("value")))})}function Xe(e,t,n){var i=u(e);return rt(function(o,r){function s(){var t=e.name||"anonymous",i=new Error('Callback function "'+t+'" timed out.');i.code="ETIMEDOUT",n&&(i.info=n),a=!0,r(i)}var l,a=!1;o.push(function(){a||(r.apply(null,arguments),clearTimeout(l))}),l=setTimeout(s,t),i.apply(null,o)})}function Je(e,t,n,i){for(var o=-1,r=to(eo((t-e)/(n||1)),0),s=Array(r);r--;)s[i?r:++o]=e,e+=n;return s}function Qe(e,t,n,i){var o=u(n);Rn(Je(0,e,1),t,o,i)}function Ze(e,t,n,i){arguments.length<=3&&(i=n,n=t,t=Pt(e)?[]:{}),i=y(i||v);var o=u(n);kn(e,function(e,n,i){o(t,e,n,i)},function(e){i(e,t)})}function et(e,n){var i,o=null;n=n||v,ki(e,function(e,n){u(e)(function(e,r){i=arguments.length>2?t(arguments,1):r,o=e,n(!e)})},function(){n(o,i)})}function tt(e){return function(){return(e.unmemoized||e).apply(null,arguments)}}function nt(e,n,i){i=D(i||v);var o=u(n);if(!e())return i(null);var r=function(n){if(n)return i(n);if(e())return o(r);var s=t(arguments,1);i.apply(null,[null].concat(s))};o(r)}function it(e,t,n){nt(function(){return!e.apply(this,arguments)},t,n)}var ot,rt=function(e){return function(){var n=t(arguments),i=n.pop();e.call(this,n,i)}},st="function"==typeof setImmediate&&setImmediate,lt="object"==typeof process&&"function"==typeof process.nextTick;ot=st?setImmediate:lt?process.nextTick:i;var at=o(ot),ut="function"==typeof Symbol,ct="object"==typeof global&&global&&global.Object===Object&&global,dt="object"==typeof self&&self&&self.Object===Object&&self,ht=ct||dt||Function("return this")(),pt=ht.Symbol,ft=Object.prototype,gt=ft.hasOwnProperty,mt=ft.toString,vt=pt?pt.toStringTag:void 0,yt=Object.prototype,bt=yt.toString,wt="[object Null]",_t="[object Undefined]",Et=pt?pt.toStringTag:void 0,Ct="[object AsyncFunction]",Ft="[object Function]",At="[object GeneratorFunction]",xt="[object Proxy]",St=9007199254740991,Tt={},Ot="function"==typeof Symbol&&Symbol.iterator,Nt=function(e){return Ot&&e[Ot]&&e[Ot]()},kt="[object Arguments]",It=Object.prototype,Lt=It.hasOwnProperty,Rt=It.propertyIsEnumerable,Dt=_(function(){return arguments}())?_:function(e){return w(e)&&Lt.call(e,"callee")&&!Rt.call(e,"callee")},Pt=Array.isArray,Mt="object"==typeof e&&e&&!e.nodeType&&e,$t=Mt&&"object"==typeof module&&module&&!module.nodeType&&module,Bt=$t&&$t.exports===Mt,jt=Bt?ht.Buffer:void 0,Ht=jt?jt.isBuffer:void 0,Gt=Ht||E,Vt=9007199254740991,qt=/^(?:0|[1-9]\d*)$/,Ut="[object Arguments]",zt="[object Array]",Wt="[object Boolean]",Yt="[object Date]",Kt="[object Error]",Xt="[object Function]",Jt="[object Map]",Qt="[object Number]",Zt="[object Object]",en="[object RegExp]",tn="[object Set]",nn="[object String]",on="[object WeakMap]",rn="[object ArrayBuffer]",sn="[object DataView]",ln="[object Float32Array]",an="[object Float64Array]",un="[object Int8Array]",cn="[object Int16Array]",dn="[object Int32Array]",hn="[object Uint8Array]",pn="[object Uint8ClampedArray]",fn="[object Uint16Array]",gn="[object Uint32Array]",mn={};mn[ln]=mn[an]=mn[un]=mn[cn]=mn[dn]=mn[hn]=mn[pn]=mn[fn]=mn[gn]=!0,mn[Ut]=mn[zt]=mn[rn]=mn[Wt]=mn[sn]=mn[Yt]=mn[Kt]=mn[Xt]=mn[Jt]=mn[Qt]=mn[Zt]=mn[en]=mn[tn]=mn[nn]=mn[on]=!1;var vn="object"==typeof e&&e&&!e.nodeType&&e,yn=vn&&"object"==typeof module&&module&&!module.nodeType&&module,bn=yn&&yn.exports===vn,wn=bn&&ct.process,_n=function(){try{return wn&&wn.binding("util")}catch(e){}}(),En=_n&&_n.isTypedArray,Cn=En?A(En):F,Fn=Object.prototype,An=Fn.hasOwnProperty,xn=Object.prototype,Sn=T(Object.keys,Object),Tn=Object.prototype,On=Tn.hasOwnProperty,Nn=$(M,1/0),kn=function(e,t,n){var i=m(e)?B:Nn;i(e,u(t),n)},In=j(H),Ln=c(In),Rn=G(H),Dn=$(Rn,1),Pn=c(Dn),Mn=function(e){var n=t(arguments,1);return function(){var i=t(arguments);return e.apply(null,n.concat(i))}},$n=q(),Bn=function(e,n,i){function o(e,t){w.push(function(){a(e,t)})}function r(){if(0===w.length&&0===g)return i(null,f);for(;w.length&&g<n;){var e=w.shift();e()}}function s(e,t){var n=b[e];n||(n=b[e]=[]),n.push(t)}function l(e){var t=b[e]||[];V(t,function(e){e()}),r()}function a(e,n){if(!m){var o=D(function(n,o){if(g--,arguments.length>2&&(o=t(arguments,1)),n){var r={};U(f,function(e,t){r[t]=e}),r[e]=o,m=!0,b=Object.create(null),i(n,r)}else f[e]=o,l(e)});g++;var r=u(n[n.length-1]);n.length>1?r(f,o):r(o)}}function c(){for(var e,t=0;_.length;)e=_.pop(),t++,V(d(e),function(e){0===--E[e]&&_.push(e)});if(t!==p)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}function d(t){var n=[];return U(e,function(e,i){Pt(e)&&K(e,t,0)>=0&&n.push(i)}),n}"function"==typeof n&&(i=n,n=null),i=y(i||v);var h=N(e),p=h.length;if(!p)return i(null);n||(n=p);var f={},g=0,m=!1,b=Object.create(null),w=[],_=[],E={};U(e,function(t,n){if(!Pt(t))return o(n,[t]),void _.push(n);var i=t.slice(0,t.length-1),r=i.length;return 0===r?(o(n,t),void _.push(n)):(E[n]=r,void V(i,function(l){if(!e[l])throw new Error("async.auto task `"+n+"` has a non-existent dependency `"+l+"` in "+i.join(", "));s(l,function(){r--,0===r&&o(n,t)})}))}),c(),r()},jn="[object Symbol]",Hn=1/0,Gn=pt?pt.prototype:void 0,Vn=Gn?Gn.toString:void 0,qn="\\ud800-\\udfff",Un="\\u0300-\\u036f\\ufe20-\\ufe23",zn="\\u20d0-\\u20f0",Wn="\\ufe0e\\ufe0f",Yn="\\u200d",Kn=RegExp("["+Yn+qn+Un+zn+Wn+"]"),Xn="\\ud800-\\udfff",Jn="\\u0300-\\u036f\\ufe20-\\ufe23",Qn="\\u20d0-\\u20f0",Zn="\\ufe0e\\ufe0f",ei="["+Xn+"]",ti="["+Jn+Qn+"]",ni="\\ud83c[\\udffb-\\udfff]",ii="(?:"+ti+"|"+ni+")",oi="[^"+Xn+"]",ri="(?:\\ud83c[\\udde6-\\uddff]){2}",si="[\\ud800-\\udbff][\\udc00-\\udfff]",li="\\u200d",ai=ii+"?",ui="["+Zn+"]?",ci="(?:"+li+"(?:"+[oi,ri,si].join("|")+")"+ui+ai+")*",di=ui+ai+ci,hi="(?:"+[oi+ti+"?",ti,ri,si,ei].join("|")+")",pi=RegExp(ni+"(?="+ni+")|"+hi+di,"g"),fi=/^\s+|\s+$/g,gi=/^(?:async\s+)?(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,mi=/,/,vi=/(=.+)?(\s*)$/,yi=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;
de.prototype.removeLink=function(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,e.prev=e.next=null,this.length-=1,e},de.prototype.empty=function(){for(;this.head;)this.shift();return this},de.prototype.insertAfter=function(e,t){t.prev=e,t.next=e.next,e.next?e.next.prev=t:this.tail=t,e.next=t,this.length+=1},de.prototype.insertBefore=function(e,t){t.prev=e.prev,t.next=e,e.prev?e.prev.next=t:this.head=t,e.prev=t,this.length+=1},de.prototype.unshift=function(e){this.head?this.insertBefore(this.head,e):he(this,e)},de.prototype.push=function(e){this.tail?this.insertAfter(this.tail,e):he(this,e)},de.prototype.shift=function(){return this.head&&this.removeLink(this.head)},de.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},de.prototype.toArray=function(){for(var e=Array(this.length),t=this.head,n=0;n<this.length;n++)e[n]=t.data,t=t.next;return e},de.prototype.remove=function(e){for(var t=this.head;t;){var n=t.next;e(t)&&this.removeLink(t),t=n}return this};var bi,wi=$(M,1),_i=function(){return me.apply(null,t(arguments).reverse())},Ei=Array.prototype.concat,Ci=function(e,n,i,o){o=o||v;var r=u(i);Rn(e,n,function(e,n){r(e,function(e){return e?n(e):n(null,t(arguments,1))})},function(e,t){for(var n=[],i=0;i<t.length;i++)t[i]&&(n=Ei.apply(n,t[i]));return o(e,n)})},Fi=$(Ci,1/0),Ai=$(Ci,1),xi=function(){var e=t(arguments),n=[null].concat(e);return function(){var e=arguments[arguments.length-1];return e.apply(this,n)}},Si=j(ye(ve,be)),Ti=G(ye(ve,be)),Oi=$(Ti,1),Ni=we("dir"),ki=$(Se,1),Ii=j(ye(Oe,Oe)),Li=G(ye(Oe,Oe)),Ri=$(Li,1),Di=j(Le),Pi=G(Le),Mi=$(Pi,1),$i=function(e,t,n,i){i=i||v;var o=u(n);Rn(e,t,function(e,t){o(e,function(n,i){return n?t(n):t(null,{key:i,val:e})})},function(e,t){for(var n={},o=Object.prototype.hasOwnProperty,r=0;r<t.length;r++)if(t[r]){var s=t[r].key,l=t[r].val;o.call(n,s)?n[s].push(l):n[s]=[l]}return i(e,n)})},Bi=$($i,1/0),ji=$($i,1),Hi=we("log"),Gi=$(De,1/0),Vi=$(De,1);bi=lt?process.nextTick:st?setImmediate:i;var qi=o(bi),Ui=function(e,t){var n=u(e);return pe(function(e,t){n(e[0],t)},t,1)},zi=function(e,t){var n=Ui(e,t);return n.push=function(e,t,i){if(null==i&&(i=v),"function"!=typeof i)throw new Error("task callback must be a function");if(n.started=!0,Pt(e)||(e=[e]),0===e.length)return at(function(){n.drain()});t=t||0;for(var o=n._tasks.head;o&&t>=o.priority;)o=o.next;for(var r=0,s=e.length;r<s;r++){var l={data:e[r],priority:t,callback:i};o?n._tasks.insertBefore(o,l):n._tasks.push(l)}at(n.process)},delete n.unshift,n},Wi=j(qe),Yi=G(qe),Ki=$(Yi,1),Xi=function(e,t){t||(t=e,e=null);var n=u(t);return rt(function(t,i){function o(e){n.apply(null,t.concat(e))}e?We(e,o,i):We(o,i)})},Ji=j(ye(Boolean,ve)),Qi=G(ye(Boolean,ve)),Zi=$(Qi,1),eo=Math.ceil,to=Math.max,no=$(Qe,1/0),io=$(Qe,1),oo=function(e,n){function i(t){var n=u(e[r++]);t.push(D(o)),n.apply(null,t)}function o(o){return o||r===e.length?n.apply(null,arguments):void i(t(arguments,1))}if(n=y(n||v),!Pt(e))return n(new Error("First argument to waterfall must be an array of functions"));if(!e.length)return n();var r=0;i([])},ro={applyEach:Ln,applyEachSeries:Pn,apply:Mn,asyncify:r,auto:Bn,autoInject:ce,cargo:fe,compose:_i,concat:Fi,concatLimit:Ci,concatSeries:Ai,constant:xi,detect:Si,detectLimit:Ti,detectSeries:Oi,dir:Ni,doDuring:_e,doUntil:Ce,doWhilst:Ee,during:Fe,each:xe,eachLimit:Se,eachOf:kn,eachOfLimit:M,eachOfSeries:wi,eachSeries:ki,ensureAsync:Te,every:Ii,everyLimit:Li,everySeries:Ri,filter:Di,filterLimit:Pi,filterSeries:Mi,forever:Re,groupBy:Bi,groupByLimit:$i,groupBySeries:ji,log:Hi,map:In,mapLimit:Rn,mapSeries:Dn,mapValues:Gi,mapValuesLimit:De,mapValuesSeries:Vi,memoize:Me,nextTick:qi,parallel:Be,parallelLimit:je,priorityQueue:zi,queue:Ui,race:He,reduce:ge,reduceRight:Ge,reflect:Ve,reflectAll:Ue,reject:Wi,rejectLimit:Yi,rejectSeries:Ki,retry:We,retryable:Xi,seq:me,series:Ye,setImmediate:at,some:Ji,someLimit:Qi,someSeries:Zi,sortBy:Ke,timeout:Xe,times:no,timesLimit:Qe,timesSeries:io,transform:Ze,tryEach:et,unmemoize:tt,until:it,waterfall:oo,whilst:nt,all:Ii,any:Ji,forEach:xe,forEachSeries:ki,forEachLimit:Se,forEachOf:kn,forEachOfSeries:wi,forEachOfLimit:M,inject:ge,foldl:ge,foldr:Ge,select:Di,selectLimit:Pi,selectSeries:Mi,wrapSync:r};e.default=ro,e.applyEach=Ln,e.applyEachSeries=Pn,e.apply=Mn,e.asyncify=r,e.auto=Bn,e.autoInject=ce,e.cargo=fe,e.compose=_i,e.concat=Fi,e.concatLimit=Ci,e.concatSeries=Ai,e.constant=xi,e.detect=Si,e.detectLimit=Ti,e.detectSeries=Oi,e.dir=Ni,e.doDuring=_e,e.doUntil=Ce,e.doWhilst=Ee,e.during=Fe,e.each=xe,e.eachLimit=Se,e.eachOf=kn,e.eachOfLimit=M,e.eachOfSeries=wi,e.eachSeries=ki,e.ensureAsync=Te,e.every=Ii,e.everyLimit=Li,e.everySeries=Ri,e.filter=Di,e.filterLimit=Pi,e.filterSeries=Mi,e.forever=Re,e.groupBy=Bi,e.groupByLimit=$i,e.groupBySeries=ji,e.log=Hi,e.map=In,e.mapLimit=Rn,e.mapSeries=Dn,e.mapValues=Gi,e.mapValuesLimit=De,e.mapValuesSeries=Vi,e.memoize=Me,e.nextTick=qi,e.parallel=Be,e.parallelLimit=je,e.priorityQueue=zi,e.queue=Ui,e.race=He,e.reduce=ge,e.reduceRight=Ge,e.reflect=Ve,e.reflectAll=Ue,e.reject=Wi,e.rejectLimit=Yi,e.rejectSeries=Ki,e.retry=We,e.retryable=Xi,e.seq=me,e.series=Ye,e.setImmediate=at,e.some=Ji,e.someLimit=Qi,e.someSeries=Zi,e.sortBy=Ke,e.timeout=Xe,e.times=no,e.timesLimit=Qe,e.timesSeries=io,e.transform=Ze,e.tryEach=et,e.unmemoize=tt,e.until=it,e.waterfall=oo,e.whilst=nt,e.all=Ii,e.allLimit=Li,e.allSeries=Ri,e.any=Ji,e.anyLimit=Qi,e.anySeries=Zi,e.find=Si,e.findLimit=Ti,e.findSeries=Oi,e.forEach=xe,e.forEachSeries=ki,e.forEachLimit=Se,e.forEachOf=kn,e.forEachOfSeries=wi,e.forEachOfLimit=M,e.inject=ge,e.foldl=ge,e.foldr=Ge,e.select=Di,e.selectLimit=Pi,e.selectSeries=Mi,e.wrapSync=r,Object.defineProperty(e,"__esModule",{value:!0})}),function(e){var t="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global;if("function"==typeof define&&define.amd)define("backbone",["underscore","jquery","exports"],function(n,i,o){t.Backbone=e(t,o,n,i)});else if("undefined"!=typeof exports){var n,i=require("underscore");try{n=require("jquery")}catch(e){}e(t,exports,i,n)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(function(e,t,n,i){var o=e.Backbone,r=Array.prototype.slice;t.VERSION="1.3.3",t.$=i,t.noConflict=function(){return e.Backbone=o,this},t.emulateHTTP=!1,t.emulateJSON=!1;var s=function(e,t,i){switch(e){case 1:return function(){return n[t](this[i])};case 2:return function(e){return n[t](this[i],e)};case 3:return function(e,o){return n[t](this[i],a(e,this),o)};case 4:return function(e,o,r){return n[t](this[i],a(e,this),o,r)};default:return function(){var e=r.call(arguments);return e.unshift(this[i]),n[t].apply(n,e)}}},l=function(e,t,i){n.each(t,function(t,o){n[o]&&(e.prototype[o]=s(t,o,i))})},a=function(e,t){return n.isFunction(e)?e:n.isObject(e)&&!t._isModel(e)?u(e):n.isString(e)?function(t){return t.get(e)}:e},u=function(e){var t=n.matches(e);return function(e){return t(e.attributes)}},c=t.Events={},d=/\s+/,h=function(e,t,i,o,r){var s,l=0;if(i&&"object"==typeof i){void 0!==o&&"context"in r&&void 0===r.context&&(r.context=o);for(s=n.keys(i);l<s.length;l++)t=h(e,t,s[l],i[s[l]],r)}else if(i&&d.test(i))for(s=i.split(d);l<s.length;l++)t=e(t,s[l],o,r);else t=e(t,i,o,r);return t};c.on=function(e,t,n){return p(this,e,t,n)};var p=function(e,t,n,i,o){if(e._events=h(f,e._events||{},t,n,{context:i,ctx:e,listening:o}),o){var r=e._listeners||(e._listeners={});r[o.id]=o}return e};c.listenTo=function(e,t,i){if(!e)return this;var o=e._listenId||(e._listenId=n.uniqueId("l")),r=this._listeningTo||(this._listeningTo={}),s=r[o];if(!s){var l=this._listenId||(this._listenId=n.uniqueId("l"));s=r[o]={obj:e,objId:o,id:l,listeningTo:r,count:0}}return p(e,t,i,this,s),this};var f=function(e,t,n,i){if(n){var o=e[t]||(e[t]=[]),r=i.context,s=i.ctx,l=i.listening;l&&l.count++,o.push({callback:n,context:r,ctx:r||s,listening:l})}return e};c.off=function(e,t,n){return this._events?(this._events=h(g,this._events,e,t,{context:n,listeners:this._listeners}),this):this},c.stopListening=function(e,t,i){var o=this._listeningTo;if(!o)return this;for(var r=e?[e._listenId]:n.keys(o),s=0;s<r.length;s++){var l=o[r[s]];if(!l)break;l.obj.off(t,i,this)}return this};var g=function(e,t,i,o){if(e){var r,s=0,l=o.context,a=o.listeners;if(t||i||l){for(var u=t?[t]:n.keys(e);s<u.length;s++){t=u[s];var c=e[t];if(!c)break;for(var d=[],h=0;h<c.length;h++){var p=c[h];i&&i!==p.callback&&i!==p.callback._callback||l&&l!==p.context?d.push(p):(r=p.listening,r&&0===--r.count&&(delete a[r.id],delete r.listeningTo[r.objId]))}d.length?e[t]=d:delete e[t]}return e}for(var f=n.keys(a);s<f.length;s++)r=a[f[s]],delete a[r.id],delete r.listeningTo[r.objId]}};c.once=function(e,t,i){var o=h(m,{},e,t,n.bind(this.off,this));return"string"==typeof e&&null==i&&(t=void 0),this.on(o,t,i)},c.listenToOnce=function(e,t,i){var o=h(m,{},t,i,n.bind(this.stopListening,this,e));return this.listenTo(e,o)};var m=function(e,t,i,o){if(i){var r=e[t]=n.once(function(){o(t,r),i.apply(this,arguments)});r._callback=i}return e};c.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),n=Array(t),i=0;i<t;i++)n[i]=arguments[i+1];return h(v,this._events,e,void 0,n),this};var v=function(e,t,n,i){if(e){var o=e[t],r=e.all;o&&r&&(r=r.slice()),o&&y(o,i),r&&y(r,[t].concat(i))}return e},y=function(e,t){var n,i=-1,o=e.length,r=t[0],s=t[1],l=t[2];switch(t.length){case 0:for(;++i<o;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<o;)(n=e[i]).callback.call(n.ctx,r);return;case 2:for(;++i<o;)(n=e[i]).callback.call(n.ctx,r,s);return;case 3:for(;++i<o;)(n=e[i]).callback.call(n.ctx,r,s,l);return;default:for(;++i<o;)(n=e[i]).callback.apply(n.ctx,t);return}};c.bind=c.on,c.unbind=c.off,n.extend(t,c);var b=t.Model=function(e,t){var i=e||{};t||(t={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(i=this.parse(i,t)||{});var o=n.result(this,"defaults");i=n.defaults(n.extend({},o,i),o),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(b.prototype,c,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!n.iteratee(e,this)(this.attributes)},set:function(e,t,i){if(null==e)return this;var o;if("object"==typeof e?(o=e,i=t):(o={})[e]=t,i||(i={}),!this._validate(o,i))return!1;var r=i.unset,s=i.silent,l=[],a=this._changing;this._changing=!0,a||(this._previousAttributes=n.clone(this.attributes),this.changed={});var u=this.attributes,c=this.changed,d=this._previousAttributes;for(var h in o)t=o[h],n.isEqual(u[h],t)||l.push(h),n.isEqual(d[h],t)?delete c[h]:c[h]=t,r?delete u[h]:u[h]=t;if(this.idAttribute in o&&(this.id=this.get(this.idAttribute)),!s){l.length&&(this._pending=i);for(var p=0;p<l.length;p++)this.trigger("change:"+l[p],this,u[l[p]],i)}if(a)return this;if(!s)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&n.clone(this.changed);var t=this._changing?this._previousAttributes:this.attributes,i={};for(var o in e){var r=e[o];n.isEqual(t[o],r)||(i[o]=r)}return!!n.size(i)&&i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=n.extend({parse:!0},e);var t=this,i=e.success;return e.success=function(n){var o=e.parse?t.parse(n,e):n;return!!t.set(o,e)&&(i&&i.call(e.context,t,n,e),void t.trigger("sync",t,n,e))},H(this,e),this.sync("read",this,e)},save:function(e,t,i){var o;null==e||"object"==typeof e?(o=e,i=t):(o={})[e]=t,i=n.extend({validate:!0,parse:!0},i);var r=i.wait;if(o&&!r){if(!this.set(o,i))return!1}else if(!this._validate(o,i))return!1;var s=this,l=i.success,a=this.attributes;i.success=function(e){s.attributes=a;var t=i.parse?s.parse(e,i):e;return r&&(t=n.extend({},o,t)),!(t&&!s.set(t,i))&&(l&&l.call(i.context,s,e,i),void s.trigger("sync",s,e,i))},H(this,i),o&&r&&(this.attributes=n.extend({},a,o));var u=this.isNew()?"create":i.patch?"patch":"update";"patch"!==u||i.attrs||(i.attrs=o);var c=this.sync(u,this,i);return this.attributes=a,c},destroy:function(e){e=e?n.clone(e):{};var t=this,i=e.success,o=e.wait,r=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(n){o&&r(),i&&i.call(e.context,t,n,e),t.isNew()||t.trigger("sync",t,n,e)};var s=!1;return this.isNew()?n.defer(e.success):(H(this,e),s=this.sync("delete",this,e)),o||r(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||j();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend({},e,{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return!i||(this.trigger("invalid",this,i,n.extend(t,{validationError:i})),!1)}});var w={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};l(b,w,"attributes");var _=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},E={add:!0,remove:!0,merge:!0},C={add:!0,remove:!1},F=function(e,t,n){n=Math.min(Math.max(n,0),e.length);var i,o=Array(e.length-n),r=t.length;for(i=0;i<o.length;i++)o[i]=e[i+n];for(i=0;i<r;i++)e[i+n]=t[i];for(i=0;i<o.length;i++)e[i+r+n]=o[i]};n.extend(_.prototype,c,{model:b,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,C))},remove:function(e,t){t=n.extend({},t);var i=!n.isArray(e);e=i?[e]:e.slice();var o=this._removeModels(e,t);return!t.silent&&o.length&&(t.changes={added:[],merged:[],removed:o},this.trigger("update",this,t)),i?o[0]:o},set:function(e,t){if(null!=e){t=n.extend({},E,t),t.parse&&!this._isModel(e)&&(e=this.parse(e,t)||[]);var i=!n.isArray(e);e=i?[e]:e.slice();var o=t.at;null!=o&&(o=+o),o>this.length&&(o=this.length),o<0&&(o+=this.length+1);var r,s,l=[],a=[],u=[],c=[],d={},h=t.add,p=t.merge,f=t.remove,g=!1,m=this.comparator&&null==o&&t.sort!==!1,v=n.isString(this.comparator)?this.comparator:null;for(s=0;s<e.length;s++){r=e[s];var y=this.get(r);if(y){if(p&&r!==y){var b=this._isModel(r)?r.attributes:r;t.parse&&(b=y.parse(b,t)),y.set(b,t),u.push(y),m&&!g&&(g=y.hasChanged(v))}d[y.cid]||(d[y.cid]=!0,l.push(y)),e[s]=y}else h&&(r=e[s]=this._prepareModel(r,t),r&&(a.push(r),this._addReference(r,t),d[r.cid]=!0,l.push(r)))}if(f){for(s=0;s<this.length;s++)r=this.models[s],d[r.cid]||c.push(r);c.length&&this._removeModels(c,t)}var w=!1,_=!m&&h&&f;if(l.length&&_?(w=this.length!==l.length||n.some(this.models,function(e,t){return e!==l[t]}),this.models.length=0,F(this.models,l,0),this.length=this.models.length):a.length&&(m&&(g=!0),F(this.models,a,null==o?this.length:o),this.length=this.models.length),g&&this.sort({silent:!0}),!t.silent){for(s=0;s<a.length;s++)null!=o&&(t.index=o+s),r=a[s],r.trigger("add",r,this,t);(g||w)&&this.trigger("sort",this,t),(a.length||c.length||u.length)&&(t.changes={added:a,removed:c,merged:u},this.trigger("update",this,t))}return i?e[0]:e}},reset:function(e,t){t=t?n.clone(t):{};for(var i=0;i<this.models.length;i++)this._removeReference(this.models[i],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return r.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[this.modelId(e.attributes||e)]||e.cid&&this._byId[e.cid]},has:function(e){return null!=this.get(e)},at:function(e){return e<0&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var i=t.length;return n.isFunction(t)&&(t=n.bind(t,this)),1===i||n.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return this.map(e+"")},fetch:function(e){e=n.extend({parse:!0},e);var t=e.success,i=this;return e.success=function(n){var o=e.reset?"reset":"set";i[o](n,e),t&&t.call(e.context,i,n,e),i.trigger("sync",i,n,e)},H(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};var i=t.wait;if(e=this._prepareModel(e,t),!e)return!1;i||this.add(e,t);var o=this,r=t.success;return t.success=function(e,t,n){i&&o.add(e,n),r&&r.call(n.context,e,t,n)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;t=t?n.clone(t):{},t.collection=this;var i=new this.model(e,t);return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},_removeModels:function(e,t){for(var n=[],i=0;i<e.length;i++){var o=this.get(e[i]);if(o){var r=this.indexOf(o);this.models.splice(r,1),this.length--,delete this._byId[o.cid];var s=this.modelId(o.attributes);null!=s&&delete this._byId[s],t.silent||(t.index=r,o.trigger("remove",o,this,t)),n.push(o),this._removeReference(o,t)}}return n},_isModel:function(e){return e instanceof b},_addReference:function(e,t){this._byId[e.cid]=e;var n=this.modelId(e.attributes);null!=n&&(this._byId[n]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var n=this.modelId(e.attributes);null!=n&&delete this._byId[n],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){if(t){if(("add"===e||"remove"===e)&&n!==this)return;if("destroy"===e&&this.remove(t,i),"change"===e){var o=this.modelId(t.previousAttributes()),r=this.modelId(t.attributes);o!==r&&(null!=o&&delete this._byId[o],null!=r&&(this._byId[r]=t))}}this.trigger.apply(this,arguments)}});var A={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};l(_,A,"models");var x=t.View=function(e){this.cid=n.uniqueId("view"),n.extend(this,n.pick(e,T)),this._ensureElement(),this.initialize.apply(this,arguments)},S=/^(\S+)\s*(.*)$/,T=["model","collection","el","id","attributes","className","tagName","events"];n.extend(x.prototype,c,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=n.result(this,"events")),!e)return this;this.undelegateEvents();for(var t in e){var i=e[t];if(n.isFunction(i)||(i=this[i]),i){var o=t.match(S);this.delegate(o[1],o[2],n.bind(i,this))}}return this},delegate:function(e,t,n){return this.$el.on(e+".delegateEvents"+this.cid,t,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){return this.$el.off(e+".delegateEvents"+this.cid,t,n),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,i,o){var r=O[e];n.defaults(o||(o={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var s={type:r,dataType:"json"};if(o.url||(s.url=n.result(i,"url")||j()),null!=o.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(s.contentType="application/json",s.data=JSON.stringify(o.attrs||i.toJSON(o))),o.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),o.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){s.type="POST",o.emulateJSON&&(s.data._method=r);var l=o.beforeSend;o.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",r),l)return l.apply(this,arguments)}}"GET"===s.type||o.emulateJSON||(s.processData=!1);var a=o.error;o.error=function(e,t,n){o.textStatus=t,o.errorThrown=n,a&&a.call(o.context,e,t,n)};var u=o.xhr=t.ajax(n.extend(s,o));return i.trigger("request",i,u,o),u};var O={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var N=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,I=/(\(\?)?:\w+/g,L=/\*\w+/g,R=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(N.prototype,c,{initialize:function(){},route:function(e,i,o){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(i)&&(o=i,i=""),o||(o=this[i]);var r=this;return t.history.route(e,function(n){var s=r._extractParameters(e,n);r.execute(o,s,i)!==!1&&(r.trigger.apply(r,["route:"+i].concat(s)),r.trigger("route",i,s),t.history.trigger("route",r,i,s))}),this},execute:function(e,t,n){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(R,"\\$&").replace(k,"(?:$1)?").replace(I,function(e,t){return t?e:"([^/?]+)"}).replace(L,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return n.map(i,function(e,t){return t===i.length-1?e||null:e?decodeURIComponent(e):null})}});var D=t.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},P=/^[#\/]|\s+$/g,M=/^\/+|\/+$/g,$=/#.*$/;D.started=!1,n.extend(D.prototype,c,{interval:50,atRoot:function(){var e=this.location.pathname.replace(/[^\/]$/,"$&/");return e===this.root&&!this.getSearch()},matchRoot:function(){var e=this.decodeFragment(this.location.pathname),t=e.slice(0,this.root.length-1)+"/";return t===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(P,"")},start:function(e){if(D.started)throw new Error("Backbone.history has already been started");if(D.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(M,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var i=document.body,o=i.insertBefore(this.iframe,i.firstChild).contentWindow;o.document.open(),o.document.close(),o.location.hash="#"+this.fragment}var r=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};if(this._usePushState?r("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?r("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),D.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t!==this.fragment&&(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(e){return!!this.matchRoot()&&(e=this.fragment=this.getFragment(e),n.some(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0}))},navigate:function(e,t){if(!D.started)return!1;t&&t!==!0||(t={trigger:!!t}),e=this.getFragment(e||"");var n=this.root;""!==e&&"?"!==e.charAt(0)||(n=n.slice(0,-1)||"/");var i=n+e;if(e=this.decodeFragment(e.replace($,"")),this.fragment!==e){if(this.fragment=e,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var o=this.iframe.contentWindow;t.replace||(o.document.open(),o.document.close()),this._updateHash(o.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),t.history=new D;var B=function(e,t){var i,o=this;return i=e&&n.has(e,"constructor")?e.constructor:function(){return o.apply(this,arguments)},n.extend(i,o,t),i.prototype=n.create(o.prototype,e),i.prototype.constructor=i,i.__super__=o.prototype,i};b.extend=_.extend=N.extend=x.extend=D.extend=B;var j=function(){throw new Error('A "url" property or function must be specified')},H=function(e,t){var n=t.error;t.error=function(i){n&&n.call(t.context,e,i,t),e.trigger("error",e,i,t)}};return t}),function(e){"function"==typeof define&&define.amd?define("plugins/jquery.queryString",["jquery"],e):e(jQuery)}(function(e){e.queryString=function(e){return function(e){if(!e)return{};for(var t={},n=0;n<e.length;++n){var i=e[n].split("=");if(2==i.length)if(/\[\]$/.exec(i[0])){var o=i[0].slice(0,i[0].length-2);t.hasOwnProperty(o)||(t[o]=[]),t[o].push(decodeURIComponent(i[1].replace(/\+/g," ")))}else t[i[0]]=decodeURIComponent(i[1].replace(/\+/g," "))}return t}((e||window.location.search).substr(1).split("&"))}}),define("backbone.fetchOrQueue",["require","exports","module"],function(e,t,n){Backbone.Model.prototype.fetchOrQueue=Backbone.Collection.prototype.fetchOrQueue=function(e,t){var n=this;return t||(t={}),n.loaded&&Date.now()-n.loaded.getTime()<12e4?(e&&setTimeout(function(){e(!1,n)},0),n):(e&&(n._pending_callbacks||(n._pending_callbacks=[]),n._pending_callbacks.push(e),n.fetching||(t.success=function(){n.loaded=new Date,n.fetching=!1,n._pending_callbacks.map(function(e){e(!1,n)}),delete n._pending_callbacks},t.error=function(){n.loaded=!1,n.fetching=!1,n._pending_callbacks.map(function(e){e(!0)}),delete n._pending_callbacks},n.fetch(t),n.fetching=!0)),n)}}),define("models/Access",["require","exports","module","backbone","underscore"],function(e,t,n){var i=e("backbone"),o=e("underscore"),r=i.Model.extend({idAttribute:"user",revoke:function(e,t){"string"==typeof e&&(e=[e]),this.set("permissions",o.difference(this.get("permissions"),e)),this.save(null,{wait:!0,success:function(e){t&&t(!1,e)},error:function(e){t&&t(!0,e)}})},grant:function(e,t){"string"==typeof e&&(e=[e]),this.set("permissions",o.union(e,this.get("permissions"))),this.save(null,{wait:!0,success:function(e){t&&t(!1,e)},error:function(e){t&&t(!0,e)}})},applyRole:function(e,t){"read"==e?this.revoke(["write","admin","clone"],t):"clone"==e?this.revoke(["write","admin"],function(e){return e?t?t(e):e:void this.grant("clone",t)}.bind(this)):"write"==e?this.revoke("admin",function(e){return e?t?t(e):e:void this.grant(["write","clone"],t)}.bind(this)):"admin"==e?this.grant(["write","admin","clone"],t):(console.error("invalid role:",e),t&&t("invalid role"))},displayName:function(){return this.get("name")?this.get("name"):this.get("email")},isMe:function(){return window.getCoggleUser().id===this.id}}),s=i.Collection.extend({model:r,initialize:function(e,t){var n=t.resource.url;"string"!=typeof n&&(n=t.resource.url()),this.url=n+"/access"},comparator:function(e,t){var n=e.get("name")+e.get("email")||"",i=t.get("name")+t.get("email")||"";return n.localeCompare(i)},getMe:function(){var e=this.get(this.myId());return e||(e=new n.exports.AccessModel({user:this.myId(),permissions:[]})),e.url=this.url+"/me",e},myId:function(){return window.getCoggleUser().id},search:function(e){return e=e.toLowerCase(),this.filter(function(t){var n=o.union([t.get("name").toLowerCase(),t.get("email").toLowerCase()],t.get("name").toLowerCase().split(/[\s,]+/),t.get("email").toLowerCase().split(/[\s,@]+/));return o.any(n,function(t){return 0===t.indexOf(e)})})}});n.exports.AccessModel=r,n.exports.AccessCollection=s}),define("models/Invite",["require","exports","module","backbone","models/Access"],function(e,t,n){var i=e("backbone"),o=e("models/Access").AccessModel,r=o.extend({idAttribute:"email",sync:function(e,t,n){n.resend&&(n.url=_.result(t,"url")+"?resend=true"),o.prototype.sync.apply(this,arguments)},displayName:function(){return this.get("email")}}),s=i.Collection.extend({model:r,initialize:function(e,t){this.options=t},url:function(){var e=_.result(this.options.resource,"url");return e+"/invites"},comparator:function(e,t){return e.get("email").localeCompare(t.get("email"))},search:function(e){return e=e.toLowerCase(),this.filter(function(t){var n=_.union([t.get("email").toLowerCase()],t.get("email").toLowerCase().split(/[\s,@]+/));
return _.any(n,function(t){return 0===t.indexOf(e)})})}});n.exports.InviteModel=r,n.exports.InviteCollection=s}),define("models/PrivateLink",["require","exports","module","underscore","backbone"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=o.Model.extend({idAttribute:"key",hasTag:function(e){return this.get("tags").indexOf(e)!=-1},toggleClone:function(){var e=this.get("permissions");e=e.indexOf("clone")==-1?i.union(e,["clone"]):i.without(e,"clone"),this.save({permissions:e},{wait:!0})},toggleWrite:function(){var e=this.get("permissions");e.indexOf("write")==-1?(getCoggleUser().getActions().perform("made-writable-link"),e=i.union(e,["write","list"])):e=i.without(e,"write"),this.save({permissions:e},{wait:!0})}}),s=o.Collection.extend({model:r,initialize:function(e,t){this.diagram=t.resource,this.url=t.resource.url()+"/links"},ofType:function(e){return _filter(this,function(t){return t.hasTag(e)})}});n.exports.PrivateLinkModel=r,n.exports.PrivateLinkCollection=s}),define("models/Delta",["require","exports","module","backbone"],function(e,t,n){var i=e("backbone"),o=i.Model.extend({idAttribute:"_id"}),r=i.Collection.extend({model:o,lastDelta:function(){return this.at(this.length-1)},poll:function(e){this.fetch({data:{from:this.lastDelta()?this.lastDelta().get("_id"):void 0,from_date:this.lastDelta()?this.lastDelta().get("action_ts"):0},wait:!0,add:!0,remove:!1,merge:!1,success:function(){e&&e()},error:function(){e&&e(new Error("poll failed"))}})}});n.exports.DeltaModel=o,n.exports.DeltaCollection=r}),define("encodeji",[],function(){function e(e){var t=!1;return function(){if(t)return e;t=!0;for(var n=0;n<e.length;n++){9!==e[n].length&&console.log("pack error:",n,e[n]);for(var i=["name","unified","short_name","short_names","category","sort_order","skin_variations","text","texts"],o={},r=0;r<i.length;r++)o[i[r]]=e[n][r];e[n]=o}return e}}function t(e,n){for(var i,o,r=/IFRAME|NOFRAMES|NOSCRIPT|SCRIPT|SELECT|STYLE|TEXTAREA|[a-z]/,s=e.childNodes,l=s.length;l--;)i=s[l],o=i.nodeType,3===o?n.push(i):1!==o||r.test(i.nodeName)||t(i,n);return n}function n(e){var t=parseInt("0x"+e);if(t>65535){var n=Math.floor((t-65536)/1024)+55296,i=(t-65536)%1024+56320;return String.fromCharCode(n)+String.fromCharCode(i)}return String.fromCharCode(t)}function i(e){return e.split("-").map(n).join("")}function o(e){var t=this;this.data=r().slice(),e&&e.extendData&&e.extendData.forEach(function(e){for(var n,i=!1,o=0;o<t.data.length;o++)if(n=t.data[o],e.name&&e.name==n.name||e.unified&&e.unified==n.unified){i=n;break}if(i)for(var r in e)e.hasOwnProperty(r)&&("short_names"==r?i.short_names=i.short_names.concat(e.short_names):i[r]=e[r]);else t.data.push(e)}),this._warn_duplicates=e&&e.warnDuplicates,this.buildShortNameIndex()}var r=e([["COPYRIGHT SIGN","00A9","copyright",["copyright"],"Symbols",197,null,null,null],["REGISTERED SIGN","00AE","registered",["registered"],"Symbols",198,null,null,null],["DOUBLE EXCLAMATION MARK","203C","bangbang",["bangbang"],"Symbols",89,null,null,null],["EXCLAMATION QUESTION MARK","2049","interrobang",["interrobang"],"Symbols",90,null,null,null],["TRADE MARK SIGN","2122","tm",["tm"],"Symbols",196,null,null,null],["INFORMATION SOURCE","2139","information_source",["information_source"],"Symbols",130,null,null,null],["LEFT RIGHT ARROW","2194","left_right_arrow",["left_right_arrow"],"Symbols",178,null,null,null],["UP DOWN ARROW","2195","arrow_up_down",["arrow_up_down"],"Symbols",177,null,null,null],["NORTH WEST ARROW","2196","arrow_upper_left",["arrow_upper_left"],"Symbols",176,null,null,null],["NORTH EAST ARROW","2197","arrow_upper_right",["arrow_upper_right"],"Symbols",173,null,null,null],["SOUTH EAST ARROW","2198","arrow_lower_right",["arrow_lower_right"],"Symbols",174,null,null,null],["SOUTH WEST ARROW","2199","arrow_lower_left",["arrow_lower_left"],"Symbols",175,null,null,null],["LEFTWARDS ARROW WITH HOOK","21A9","leftwards_arrow_with_hook",["leftwards_arrow_with_hook"],"Symbols",180,null,null,null],["RIGHTWARDS ARROW WITH HOOK","21AA","arrow_right_hook",["arrow_right_hook"],"Symbols",179,null,null,null],["WATCH","231A","watch",["watch"],"Objects",1,null,null,null],["HOURGLASS","231B","hourglass",["hourglass"],"Objects",36,null,null,null],["KEYBOARD","2328","keyboard",["keyboard"],"Objects",5,null,null,null],["EJECT SYMBOL","23CF","eject",["eject"],"Symbols",158,null,null,null],["BLACK RIGHT-POINTING DOUBLE TRIANGLE","23E9","fast_forward",["fast_forward"],"Symbols",162,null,null,null],["BLACK LEFT-POINTING DOUBLE TRIANGLE","23EA","rewind",["rewind"],"Symbols",163,null,null,null],["BLACK UP-POINTING DOUBLE TRIANGLE","23EB","arrow_double_up",["arrow_double_up"],"Symbols",164,null,null,null],["BLACK DOWN-POINTING DOUBLE TRIANGLE","23EC","arrow_double_down",["arrow_double_down"],"Symbols",165,null,null,null],["BLACK RIGHT-POINTING DOUBLE TRIANGLE WITH VERTICAL BAR","23ED","black_right_pointing_double_triangle_with_vertical_bar",["black_right_pointing_double_triangle_with_vertical_bar"],"Symbols",160,null,null,null],["BLACK LEFT-POINTING DOUBLE TRIANGLE WITH VERTICAL BAR","23EE","black_left_pointing_double_triangle_with_vertical_bar",["black_left_pointing_double_triangle_with_vertical_bar"],"Symbols",161,null,null,null],["BLACK RIGHT-POINTING TRIANGLE WITH DOUBLE VERTICAL BAR","23EF","black_right_pointing_triangle_with_double_vertical_bar",["black_right_pointing_triangle_with_double_vertical_bar"],"Symbols",156,null,null,null],["ALARM CLOCK","23F0","alarm_clock",["alarm_clock"],"Objects",34,null,null,null],["STOPWATCH","23F1","stopwatch",["stopwatch"],"Objects",32,null,null,null],["TIMER CLOCK","23F2","timer_clock",["timer_clock"],"Objects",33,null,null,null],["HOURGLASS WITH FLOWING SAND","23F3","hourglass_flowing_sand",["hourglass_flowing_sand"],"Objects",37,null,null,null],["DOUBLE VERTICAL BAR","23F8","double_vertical_bar",["double_vertical_bar"],"Symbols",155,null,null,null],["BLACK SQUARE FOR STOP","23F9","black_square_for_stop",["black_square_for_stop"],"Symbols",157,null,null,null],["BLACK CIRCLE FOR RECORD","23FA","black_circle_for_record",["black_circle_for_record"],"Symbols",159,null,null,null],["CIRCLED LATIN CAPITAL LETTER M","24C2","m",["m"],"Symbols",108,null,null,null],["BLACK SMALL SQUARE","25AA","black_small_square",["black_small_square"],"Symbols",222,null,null,null],["WHITE SMALL SQUARE","25AB","white_small_square",["white_small_square"],"Symbols",223,null,null,null],["BLACK RIGHT-POINTING TRIANGLE","25B6","arrow_forward",["arrow_forward"],"Symbols",154,null,null,null],["BLACK LEFT-POINTING TRIANGLE","25C0","arrow_backward",["arrow_backward"],"Symbols",166,null,null,null],["WHITE MEDIUM SQUARE","25FB","white_medium_square",["white_medium_square"],"Symbols",227,null,null,null],["BLACK MEDIUM SQUARE","25FC","black_medium_square",["black_medium_square"],"Symbols",226,null,null,null],["WHITE MEDIUM SMALL SQUARE","25FD","white_medium_small_square",["white_medium_small_square"],"Symbols",225,null,null,null],["BLACK MEDIUM SMALL SQUARE","25FE","black_medium_small_square",["black_medium_small_square"],"Symbols",224,null,null,null],["BLACK SUN WITH RAYS","2600","sunny",["sunny"],"Nature",138,null,null,null],["CLOUD","2601","cloud",["cloud"],"Nature",144,null,null,null],["UMBRELLA","2602","umbrella",["umbrella"],"People",293,null,null,null],["SNOWMAN","2603","snowman",["snowman"],"Nature",149,null,null,null],["COMET","2604","comet",["comet"],"Nature",137,null,null,null],["BLACK TELEPHONE","260E","phone",["phone","telephone"],"Objects",24,null,null,null],["BALLOT BOX WITH CHECK","2611","ballot_box_with_check",["ballot_box_with_check"],"Symbols",208,null,null,null],["UMBRELLA WITH RAIN DROPS","2614","umbrella_with_rain_drops",["umbrella_with_rain_drops"],"Nature",159,null,null,null],["HOT BEVERAGE","2615","coffee",["coffee"],"Foods",73,null,null,null],["SHAMROCK","2618","shamrock",["shamrock"],"Nature",96,null,null,null],["WHITE UP POINTING INDEX","261D","point_up",["point_up"],"People",116,!0,null,null],["SKULL AND CROSSBONES","2620","skull_and_crossbones",["skull_and_crossbones"],"People",83,null,null,null],["RADIOACTIVE SIGN","2622","radioactive_sign",["radioactive_sign"],"Symbols",44,null,null,null],["BIOHAZARD SIGN","2623","biohazard_sign",["biohazard_sign"],"Symbols",45,null,null,null],["ORTHODOX CROSS","2626","orthodox_cross",["orthodox_cross"],"Symbols",26,null,null,null],["STAR AND CRESCENT","262A","star_and_crescent",["star_and_crescent"],"Symbols",19,null,null,null],["PEACE SYMBOL","262E","peace_symbol",["peace_symbol"],"Symbols",17,null,null,null],["YIN YANG","262F","yin_yang",["yin_yang"],"Symbols",25,null,null,null],["WHEEL OF DHARMA","2638","wheel_of_dharma",["wheel_of_dharma"],"Symbols",21,null,null,null],["WHITE FROWNING FACE","2639","white_frowning_face",["white_frowning_face"],"People",38,null,null,null],["WHITE SMILING FACE","263A","relaxed",["relaxed"],"People",9,null,null,null],["FEMALE SIGN","2640","female_sign",["female_sign"],"Symbols",274,null,null,null],["MALE SIGN","2642","male_sign",["male_sign"],"Symbols",275,null,null,null],["ARIES","2648","aries",["aries"],"Symbols",29,null,null,null],["TAURUS","2649","taurus",["taurus"],"Symbols",30,null,null,null],["GEMINI","264A","gemini",["gemini"],"Symbols",31,null,null,null],["CANCER","264B","cancer",["cancer"],"Symbols",32,null,null,null],["LEO","264C","leo",["leo"],"Symbols",33,null,null,null],["VIRGO","264D","virgo",["virgo"],"Symbols",34,null,null,null],["LIBRA","264E","libra",["libra"],"Symbols",35,null,null,null],["SCORPIUS","264F","scorpius",["scorpius"],"Symbols",36,null,null,null],["SAGITTARIUS","2650","sagittarius",["sagittarius"],"Symbols",37,null,null,null],["CAPRICORN","2651","capricorn",["capricorn"],"Symbols",38,null,null,null],["AQUARIUS","2652","aquarius",["aquarius"],"Symbols",39,null,null,null],["PISCES","2653","pisces",["pisces"],"Symbols",40,null,null,null],["BLACK SPADE SUIT","2660","spades",["spades"],"Symbols",243,null,null,null],["BLACK CLUB SUIT","2663","clubs",["clubs"],"Symbols",244,null,null,null],["BLACK HEART SUIT","2665","hearts",["hearts"],"Symbols",245,null,null,null],["BLACK DIAMOND SUIT","2666","diamonds",["diamonds"],"Symbols",246,null,null,null],["HOT SPRINGS","2668","hotsprings",["hotsprings"],"Symbols",77,null,null,null],["BLACK UNIVERSAL RECYCLING SYMBOL","267B","recycle",["recycle"],"Symbols",99,null,null,null],["WHEELCHAIR SYMBOL","267F","wheelchair",["wheelchair"],"Symbols",113,null,null,null],["HAMMER AND PICK","2692","hammer_and_pick",["hammer_and_pick"],"Objects",57,null,null,null],["ANCHOR","2693","anchor",["anchor"],"Places",53,null,null,null],["CROSSED SWORDS","2694","crossed_swords",["crossed_swords"],"Objects",67,null,null,null],["STAFF OF AESCULAPIUS","2695","staff_of_aesculapius",["staff_of_aesculapius"],"Symbols",276,null,null,null],["SCALES","2696","scales",["scales"],"Objects",54,null,null,null],["ALEMBIC","2697","alembic",["alembic"],"Objects",76,null,null,null],["GEAR","2699","gear",["gear"],"Objects",61,null,null,null],["ATOM SYMBOL","269B","atom_symbol",["atom_symbol"],"Symbols",42,null,null,null],["FLEUR-DE-LIS","269C","fleur_de_lis",["fleur_de_lis"],"Symbols",97,null,null,null],["WARNING SIGN","26A0","warning",["warning"],"Symbols",94,null,null,null],["HIGH VOLTAGE SIGN","26A1","zap",["zap"],"Nature",134,null,null,null],["MEDIUM WHITE CIRCLE","26AA","white_circle",["white_circle"],"Symbols",210,null,null,null],["MEDIUM BLACK CIRCLE","26AB","black_circle",["black_circle"],"Symbols",211,null,null,null],["COFFIN","26B0","coffin",["coffin"],"Objects",70,null,null,null],["FUNERAL URN","26B1","funeral_urn",["funeral_urn"],"Objects",71,null,null,null],["SOCCER BALL","26BD","soccer",["soccer"],"Activity",1,null,null,null],["BASEBALL","26BE","baseball",["baseball"],"Activity",4,null,null,null],["SNOWMAN WITHOUT SNOW","26C4","snowman_without_snow",["snowman_without_snow"],"Nature",150,null,null,null],["SUN BEHIND CLOUD","26C5","partly_sunny",["partly_sunny"],"Nature",140,null,null,null],["THUNDER CLOUD AND RAIN","26C8","thunder_cloud_and_rain",["thunder_cloud_and_rain"],"Nature",146,null,null,null],["OPHIUCHUS","26CE","ophiuchus",["ophiuchus"],"Symbols",28,null,null,null],["PICK","26CF","pick",["pick"],"Objects",59,null,null,null],["HELMET WITH WHITE CROSS","26D1","helmet_with_white_cross",["helmet_with_white_cross"],"People",284,null,null,null],["CHAINS","26D3","chains",["chains"],"Objects",62,null,null,null],["NO ENTRY","26D4","no_entry",["no_entry"],"Symbols",72,null,null,null],["SHINTO SHRINE","26E9","shinto_shrine",["shinto_shrine"],"Places",104,null,null,null],["CHURCH","26EA","church",["church"],"Places",100,null,null,null],["MOUNTAIN","26F0","mountain",["mountain"],"Places",73,null,null,null],["UMBRELLA ON GROUND","26F1","umbrella_on_ground",["umbrella_on_ground"],"Places",70,null,null,null],["FOUNTAIN","26F2","fountain",["fountain"],"Places",62,null,null,null],["FLAG IN HOLE","26F3","golf",["golf"],"Activity",15,null,null,null],["FERRY","26F4","ferry",["ferry"],"Places",51,null,null,null],["SAILBOAT","26F5","boat",["boat","sailboat"],"Places",47,null,null,null],["SKIER","26F7","skier",["skier"],"Activity",22,null,null,null],["ICE SKATE","26F8","ice_skate",["ice_skate"],"Activity",20,null,null,null],["PERSON WITH BALL","26F9","person_with_ball",["person_with_ball"],"Activity",34,!0,null,null],["TENT","26FA","tent",["tent"],"Places",79,null,null,null],["FUEL PUMP","26FD","fuelpump",["fuelpump"],"Places",55,null,null,null],["BLACK SCISSORS","2702","scissors",["scissors"],"Objects",160,null,null,null],["WHITE HEAVY CHECK MARK","2705","white_check_mark",["white_check_mark"],"Symbols",100,null,null,null],["AIRPLANE","2708","airplane",["airplane"],"Places",40,null,null,null],["ENVELOPE","2709","email",["email","envelope"],"Objects",107,null,null,null],["RAISED FIST","270A","fist",["fist"],"People",105,!0,null,null],["RAISED HAND","270B","hand",["hand","raised_hand"],"People",117,!0,null,null],["VICTORY HAND","270C","v",["v"],"People",109,!0,null,null],["WRITING HAND","270D","writing_hand",["writing_hand"],"People",125,!0,null,null],["PENCIL","270F","pencil2",["pencil2"],"Objects",167,null,null,null],["BLACK NIB","2712","black_nib",["black_nib"],"Objects",163,null,null,null],["HEAVY CHECK MARK","2714","heavy_check_mark",["heavy_check_mark"],"Symbols",207,null,null,null],["HEAVY MULTIPLICATION X","2716","heavy_multiplication_x",["heavy_multiplication_x"],"Symbols",193,null,null,null],["LATIN CROSS","271D","latin_cross",["latin_cross"],"Symbols",18,null,null,null],["STAR OF DAVID","2721","star_of_david",["star_of_david"],"Symbols",22,null,null,null],["SPARKLES","2728","sparkles",["sparkles"],"Nature",133,null,null,null],["EIGHT SPOKED ASTERISK","2733","eight_spoked_asterisk",["eight_spoked_asterisk"],"Symbols",104,null,null,null],["EIGHT POINTED BLACK STAR","2734","eight_pointed_black_star",["eight_pointed_black_star"],"Symbols",53,null,null,null],["SNOWFLAKE","2744","snowflake",["snowflake"],"Nature",151,null,null,null],["SPARKLE","2747","sparkle",["sparkle"],"Symbols",103,null,null,null],["CROSS MARK","274C","x",["x"],"Symbols",69,null,null,null],["NEGATIVE SQUARED CROSS MARK","274E","negative_squared_cross_mark",["negative_squared_cross_mark"],"Symbols",105,null,null,null],["BLACK QUESTION MARK ORNAMENT","2753","question",["question"],"Symbols",87,null,null,null],["WHITE QUESTION MARK ORNAMENT","2754","grey_question",["grey_question"],"Symbols",88,null,null,null],["WHITE EXCLAMATION MARK ORNAMENT","2755","grey_exclamation",["grey_exclamation"],"Symbols",86,null,null,null],["HEAVY EXCLAMATION MARK SYMBOL","2757","exclamation",["exclamation","heavy_exclamation_mark"],"Symbols",85,null,null,null],["HEAVY HEART EXCLAMATION MARK ORNAMENT","2763","heavy_heart_exclamation_mark_ornament",["heavy_heart_exclamation_mark_ornament"],"Symbols",8,null,null,null],["HEAVY BLACK HEART","2764","heart",["heart"],"Symbols",1,null,"<3",["<3"]],["HEAVY PLUS SIGN","2795","heavy_plus_sign",["heavy_plus_sign"],"Symbols",190,null,null,null],["HEAVY MINUS SIGN","2796","heavy_minus_sign",["heavy_minus_sign"],"Symbols",191,null,null,null],["HEAVY DIVISION SIGN","2797","heavy_division_sign",["heavy_division_sign"],"Symbols",192,null,null,null],["BLACK RIGHTWARDS ARROW","27A1","arrow_right",["arrow_right"],"Symbols",169,null,null,null],["CURLY LOOP","27B0","curly_loop",["curly_loop"],"Symbols",200,null,null,null],["DOUBLE CURLY LOOP","27BF","loop",["loop"],"Symbols",201,null,null,null],["ARROW POINTING RIGHTWARDS THEN CURVING UPWARDS","2934","arrow_heading_up",["arrow_heading_up"],"Symbols",181,null,null,null],["ARROW POINTING RIGHTWARDS THEN CURVING DOWNWARDS","2935","arrow_heading_down",["arrow_heading_down"],"Symbols",182,null,null,null],["LEFTWARDS BLACK ARROW","2B05","arrow_left",["arrow_left"],"Symbols",170,null,null,null],["UPWARDS BLACK ARROW","2B06","arrow_up",["arrow_up"],"Symbols",171,null,null,null],["DOWNWARDS BLACK ARROW","2B07","arrow_down",["arrow_down"],"Symbols",172,null,null,null],["BLACK LARGE SQUARE","2B1B","black_large_square",["black_large_square"],"Symbols",228,null,null,null],["WHITE LARGE SQUARE","2B1C","white_large_square",["white_large_square"],"Symbols",229,null,null,null],["WHITE MEDIUM STAR","2B50","star",["star"],"Nature",131,null,null,null],["HEAVY LARGE CIRCLE","2B55","o",["o"],"Symbols",70,null,null,null],["WAVY DASH","3030","wavy_dash",["wavy_dash"],"Symbols",199,null,null,null],["PART ALTERNATION MARK","303D","part_alternation_mark",["part_alternation_mark"],"Symbols",93,null,null,null],["CIRCLED IDEOGRAPH CONGRATULATION","3297","congratulations",["congratulations"],"Symbols",58,null,null,null],["CIRCLED IDEOGRAPH SECRET","3299","secret",["secret"],"Symbols",57,null,null,null],["MAHJONG TILE RED DRAGON","1F004","mahjong",["mahjong"],"Symbols",249,null,null,null],["PLAYING CARD BLACK JOKER","1F0CF","black_joker",["black_joker"],"Symbols",247,null,null,null],["NEGATIVE SQUARED LATIN CAPITAL LETTER A","1F170","a",["a"],"Symbols",63,null,null,null],["NEGATIVE SQUARED LATIN CAPITAL LETTER B","1F171","b",["b"],"Symbols",64,null,null,null],["NEGATIVE SQUARED LATIN CAPITAL LETTER O","1F17E","o2",["o2"],"Symbols",67,null,null,null],["NEGATIVE SQUARED LATIN CAPITAL LETTER P","1F17F","parking",["parking"],"Symbols",114,null,null,null],["NEGATIVE SQUARED AB","1F18E","ab",["ab"],"Symbols",65,null,null,null],["SQUARED CL","1F191","cl",["cl"],"Symbols",66,null,null,null],["SQUARED COOL","1F192","cool",["cool"],"Symbols",137,null,null,null],["SQUARED FREE","1F193","free",["free"],"Symbols",139,null,null,null],["SQUARED ID","1F194","id",["id"],"Symbols",41,null,null,null],["SQUARED NEW","1F195","new",["new"],"Symbols",138,null,null,null],["SQUARED NG","1F196","ng",["ng"],"Symbols",134,null,null,null],["SQUARED OK","1F197","ok",["ok"],"Symbols",135,null,null,null],["SQUARED SOS","1F198","sos",["sos"],"Symbols",68,null,null,null],["SQUARED UP WITH EXCLAMATION MARK","1F199","up",["up"],"Symbols",136,null,null,null],["SQUARED VS","1F19A","vs",["vs"],"Symbols",54,null,null,null],["SQUARED KATAKANA KOKO","1F201","koko",["koko"],"Symbols",128,null,null,null],["SQUARED KATAKANA SA","1F202","sa",["sa"],"Symbols",116,null,null,null],["SQUARED CJK UNIFIED IDEOGRAPH-7121","1F21A","u7121",["u7121"],"Symbols",49,null,null,null],["SQUARED CJK UNIFIED IDEOGRAPH-6307","1F22F","u6307",["u6307"],"Symbols",101,null,null,null],["SQUARED CJK UNIFIED IDEOGRAPH-7981","1F232","u7981",["u7981"],"Symbols",62,null,null,null],["SQUARED CJK UNIFIED IDEOGRAPH-7A7A","1F233","u7a7a",["u7a7a"],"Symbols",115,null,null,null],["SQUARED CJK UNIFIED IDEOGRAPH-5408","1F234","u5408",["u5408"],"Symbols",59,null,null,null],["SQUARED CJK UNIFIED IDEOGRAPH-6E80","1F235","u6e80",["u6e80"],"Symbols",60,null,null,null],["SQUARED CJK UNIFIED IDEOGRAPH-6709","1F236","u6709",["u6709"],"Symbols",48,null,null,null],["SQUARED CJK UNIFIED IDEOGRAPH-6708","1F237","u6708",["u6708"],"Symbols",52,null,null,null],["SQUARED CJK UNIFIED IDEOGRAPH-7533","1F238","u7533",["u7533"],"Symbols",50,null,null,null],["SQUARED CJK UNIFIED IDEOGRAPH-5272","1F239","u5272",["u5272"],"Symbols",61,null,null,null],["SQUARED CJK UNIFIED IDEOGRAPH-55B6","1F23A","u55b6",["u55b6"],"Symbols",51,null,null,null],["CIRCLED IDEOGRAPH ADVANTAGE","1F250","ideograph_advantage",["ideograph_advantage"],"Symbols",56,null,null,null],["CIRCLED IDEOGRAPH ACCEPT","1F251","accept",["accept"],"Symbols",43,null,null,null],["CYCLONE","1F300","cyclone",["cyclone"],"Symbols",109,null,null,null],["FOGGY","1F301","foggy",["foggy"],"Places",119,null,null,null],["CLOSED UMBRELLA","1F302","closed_umbrella",["closed_umbrella"],"People",292,null,null,null],["NIGHT WITH STARS","1F303","night_with_stars",["night_with_stars"],"Places",116,null,null,null],["SUNRISE OVER MOUNTAINS","1F304","sunrise_over_mountains",["sunrise_over_mountains"],"Places",109,null,null,null],["SUNRISE","1F305","sunrise",["sunrise"],"Places",108,null,null,null],["CITYSCAPE AT DUSK","1F306","city_sunset",["city_sunset"],"Places",114,null,null,null],["SUNSET OVER BUILDINGS","1F307","city_sunrise",["city_sunrise"],"Places",113,null,null,null],["RAINBOW","1F308","rainbow",["rainbow"],"Nature",143,null,null,null],["BRIDGE AT NIGHT","1F309","bridge_at_night",["bridge_at_night"],"Places",118,null,null,null],["WATER WAVE","1F30A","ocean",["ocean"],"Nature",156,null,null,null],["VOLCANO","1F30B","volcano",["volcano"],"Places",76,null,null,null],["MILKY WAY","1F30C","milky_way",["milky_way"],"Places",117,null,null,null],["EARTH GLOBE EUROPE-AFRICA","1F30D","earth_africa",["earth_africa"],"Nature",114,null,null,null],["EARTH GLOBE AMERICAS","1F30E","earth_americas",["earth_americas"],"Nature",113,null,null,null],["EARTH GLOBE ASIA-AUSTRALIA","1F30F","earth_asia",["earth_asia"],"Nature",115,null,null,null],["GLOBE WITH MERIDIANS","1F310","globe_with_meridians",["globe_with_meridians"],"Symbols",106,null,null,null],["NEW MOON SYMBOL","1F311","new_moon",["new_moon"],"Nature",120,null,null,null],["WAXING CRESCENT MOON SYMBOL","1F312","waxing_crescent_moon",["waxing_crescent_moon"],"Nature",121,null,null,null],["FIRST QUARTER MOON SYMBOL","1F313","first_quarter_moon",["first_quarter_moon"],"Nature",122,null,null,null],["WAXING GIBBOUS MOON SYMBOL","1F314","moon",["moon","waxing_gibbous_moon"],"Nature",123,null,null,null],["FULL MOON SYMBOL","1F315","full_moon",["full_moon"],"Nature",116,null,null,null],["WANING GIBBOUS MOON SYMBOL","1F316","waning_gibbous_moon",["waning_gibbous_moon"],"Nature",117,null,null,null],["LAST QUARTER MOON SYMBOL","1F317","last_quarter_moon",["last_quarter_moon"],"Nature",118,null,null,null],["WANING CRESCENT MOON SYMBOL","1F318","waning_crescent_moon",["waning_crescent_moon"],"Nature",119,null,null,null],["CRESCENT MOON","1F319","crescent_moon",["crescent_moon"],"Nature",129,null,null,null],["NEW MOON WITH FACE","1F31A","new_moon_with_face",["new_moon_with_face"],"Nature",124,null,null,null],["FIRST QUARTER MOON WITH FACE","1F31B","first_quarter_moon_with_face",["first_quarter_moon_with_face"],"Nature",127,null,null,null],["LAST QUARTER MOON WITH FACE","1F31C","last_quarter_moon_with_face",["last_quarter_moon_with_face"],"Nature",128,null,null,null],["FULL MOON WITH FACE","1F31D","full_moon_with_face",["full_moon_with_face"],"Nature",125,null,null,null],["SUN WITH FACE","1F31E","sun_with_face",["sun_with_face"],"Nature",126,null,null,null],["GLOWING STAR","1F31F","star2",["star2"],"Nature",132,null,null,null],["SHOOTING STAR","1F320","stars",["stars"],"Places",110,null,null,null],["THERMOMETER","1F321","thermometer",["thermometer"],"Objects",82,null,null,null],["WHITE SUN WITH SMALL CLOUD","1F324","mostly_sunny",["mostly_sunny","sun_small_cloud"],"Nature",139,null,null,null],["WHITE SUN BEHIND CLOUD","1F325","barely_sunny",["barely_sunny","sun_behind_cloud"],"Nature",141,null,null,null],["WHITE SUN BEHIND CLOUD WITH RAIN","1F326","partly_sunny_rain",["partly_sunny_rain","sun_behind_rain_cloud"],"Nature",142,null,null,null],["CLOUD WITH RAIN","1F327","rain_cloud",["rain_cloud"],"Nature",145,null,null,null],["CLOUD WITH SNOW","1F328","snow_cloud",["snow_cloud"],"Nature",148,null,null,null],["CLOUD WITH LIGHTNING","1F329","lightning",["lightning","lightning_cloud"],"Nature",147,null,null,null],["CLOUD WITH TORNADO","1F32A","tornado",["tornado","tornado_cloud"],"Nature",154,null,null,null],["FOG","1F32B","fog",["fog"],"Nature",155,null,null,null],["WIND BLOWING FACE","1F32C","wind_blowing_face",["wind_blowing_face"],"Nature",152,null,null,null],["HOT DOG","1F32D","hotdog",["hotdog"],"Foods",39,null,null,null],["TACO","1F32E","taco",["taco"],"Foods",43,null,null,null],["BURRITO","1F32F","burrito",["burrito"],"Foods",44,null,null,null],["CHESTNUT","1F330","chestnut",["chestnut"],"Foods",24,null,null,null],["SEEDLING","1F331","seedling",["seedling"],"Nature",94,null,null,null],["EVERGREEN TREE","1F332","evergreen_tree",["evergreen_tree"],"Nature",91,null,null,null],["DECIDUOUS TREE","1F333","deciduous_tree",["deciduous_tree"],"Nature",92,null,null,null],["PALM TREE","1F334","palm_tree",["palm_tree"],"Nature",93,null,null,null],["CACTUS","1F335","cactus",["cactus"],"Nature",89,null,null,null],["HOT PEPPER","1F336","hot_pepper",["hot_pepper"],"Foods",21,null,null,null],["TULIP","1F337","tulip",["tulip"],"Nature",106,null,null,null],["CHERRY BLOSSOM","1F338","cherry_blossom",["cherry_blossom"],"Nature",111,null,null,null],["ROSE","1F339","rose",["rose"],"Nature",107,null,null,null],["HIBISCUS","1F33A","hibiscus",["hibiscus"],"Nature",112,null,null,null],["SUNFLOWER","1F33B","sunflower",["sunflower"],"Nature",109,null,null,null],["BLOSSOM","1F33C","blossom",["blossom"],"Nature",110,null,null,null],["EAR OF MAIZE","1F33D","corn",["corn"],"Foods",20,null,null,null],["EAR OF RICE","1F33E","ear_of_rice",["ear_of_rice"],"Nature",104,null,null,null],["HERB","1F33F","herb",["herb"],"Nature",95,null,null,null],["FOUR LEAF CLOVER","1F340","four_leaf_clover",["four_leaf_clover"],"Nature",97,null,null,null],["MAPLE LEAF","1F341","maple_leaf",["maple_leaf"],"Nature",102,null,null,null],["FALLEN LEAF","1F342","fallen_leaf",["fallen_leaf"],"Nature",101,null,null,null],["LEAF FLUTTERING IN WIND","1F343","leaves",["leaves"],"Nature",100,null,null,null],["MUSHROOM","1F344","mushroom",["mushroom"],"Nature",103,null,null,null],["TOMATO","1F345","tomato",["tomato"],"Foods",16,null,null,null],["AUBERGINE","1F346","eggplant",["eggplant"],"Foods",17,null,null,null],["GRAPES","1F347","grapes",["grapes"],"Foods",8,null,null,null],["MELON","1F348","melon",["melon"],"Foods",10,null,null,null],["WATERMELON","1F349","watermelon",["watermelon"],"Foods",7,null,null,null],["TANGERINE","1F34A","tangerine",["tangerine"],"Foods",4,null,null,null],["LEMON","1F34B","lemon",["lemon"],"Foods",5,null,null,null],["BANANA","1F34C","banana",["banana"],"Foods",6,null,null,null],["PINEAPPLE","1F34D","pineapple",["pineapple"],"Foods",13,null,null,null],["RED APPLE","1F34E","apple",["apple"],"Foods",2,null,null,null],["GREEN APPLE","1F34F","green_apple",["green_apple"],"Foods",1,null,null,null],["PEAR","1F350","pear",["pear"],"Foods",3,null,null,null],["PEACH","1F351","peach",["peach"],"Foods",12,null,null,null],["CHERRIES","1F352","cherries",["cherries"],"Foods",11,null,null,null],["STRAWBERRY","1F353","strawberry",["strawberry"],"Foods",9,null,null,null],["HAMBURGER","1F354","hamburger",["hamburger"],"Foods",40,null,null,null],["SLICE OF PIZZA","1F355","pizza",["pizza"],"Foods",38,null,null,null],["MEAT ON BONE","1F356","meat_on_bone",["meat_on_bone"],"Foods",37,null,null,null],["POULTRY LEG","1F357","poultry_leg",["poultry_leg"],"Foods",36,null,null,null],["RICE CRACKER","1F358","rice_cracker",["rice_cracker"],"Foods",56,null,null,null],["RICE BALL","1F359","rice_ball",["rice_ball"],"Foods",55,null,null,null],["COOKED RICE","1F35A","rice",["rice"],"Foods",54,null,null,null],["CURRY AND RICE","1F35B","curry",["curry"],"Foods",53,null,null,null],["STEAMING BOWL","1F35C","ramen",["ramen"],"Foods",48,null,null,null],["SPAGHETTI","1F35D","spaghetti",["spaghetti"],"Foods",47,null,null,null],["BREAD","1F35E","bread",["bread"],"Foods",28,null,null,null],["FRENCH FRIES","1F35F","fries",["fries"],"Foods",41,null,null,null],["ROASTED SWEET POTATO","1F360","sweet_potato",["sweet_potato"],"Foods",23,null,null,null],["DANGO","1F361","dango",["dango"],"Foods",58,null,null,null],["ODEN","1F362","oden",["oden"],"Foods",57,null,null,null],["SUSHI","1F363","sushi",["sushi"],"Foods",51,null,null,null],["FRIED SHRIMP","1F364","fried_shrimp",["fried_shrimp"],"Foods",35,null,null,null],["FISH CAKE WITH SWIRL DESIGN","1F365","fish_cake",["fish_cake"],"Foods",50,null,null,null],["SOFT ICE CREAM","1F366","icecream",["icecream"],"Foods",61,null,null,null],["SHAVED ICE","1F367","shaved_ice",["shaved_ice"],"Foods",59,null,null,null],["ICE CREAM","1F368","ice_cream",["ice_cream"],"Foods",60,null,null,null],["DOUGHNUT","1F369","doughnut",["doughnut"],"Foods",69,null,null,null],["COOKIE","1F36A","cookie",["cookie"],"Foods",70,null,null,null],["CHOCOLATE BAR","1F36B","chocolate_bar",["chocolate_bar"],"Foods",67,null,null,null],["CANDY","1F36C","candy",["candy"],"Foods",66,null,null,null],["LOLLIPOP","1F36D","lollipop",["lollipop"],"Foods",65,null,null,null],["CUSTARD","1F36E","custard",["custard"],"Foods",64,null,null,null],["HONEY POT","1F36F","honey_pot",["honey_pot"],"Foods",26,null,null,null],["SHORTCAKE","1F370","cake",["cake"],"Foods",62,null,null,null],["BENTO BOX","1F371","bento",["bento"],"Foods",52,null,null,null],["POT OF FOOD","1F372","stew",["stew"],"Foods",49,null,null,null],["COOKING","1F373","fried_egg",["fried_egg","cooking"],"Foods",32,null,null,null],["FORK AND KNIFE","1F374","fork_and_knife",["fork_and_knife"],"Foods",85,null,null,null],["TEACUP WITHOUT HANDLE","1F375","tea",["tea"],"Foods",74,null,null,null],["SAKE BOTTLE AND CUP","1F376","sake",["sake"],"Foods",75,null,null,null],["WINE GLASS","1F377","wine_glass",["wine_glass"],"Foods",79,null,null,null],["COCKTAIL GLASS","1F378","cocktail",["cocktail"],"Foods",81,null,null,null],["TROPICAL DRINK","1F379","tropical_drink",["tropical_drink"],"Foods",82,null,null,null],["BEER MUG","1F37A","beer",["beer"],"Foods",76,null,null,null],["CLINKING BEER MUGS","1F37B","beers",["beers"],"Foods",77,null,null,null],["BABY BOTTLE","1F37C","baby_bottle",["baby_bottle"],"Foods",72,null,null,null],["FORK AND KNIFE WITH PLATE","1F37D","knife_fork_plate",["knife_fork_plate"],"Foods",86,null,null,null],["BOTTLE WITH POPPING CORK","1F37E","champagne",["champagne"],"Foods",83,null,null,null],["POPCORN","1F37F","popcorn",["popcorn"],"Foods",68,null,null,null],["RIBBON","1F380","ribbon",["ribbon"],"Objects",101,null,null,null],["WRAPPED PRESENT","1F381","gift",["gift"],"Objects",98,null,null,null],["BIRTHDAY CAKE","1F382","birthday",["birthday"],"Foods",63,null,null,null],["JACK-O-LANTERN","1F383","jack_o_lantern",["jack_o_lantern"],"People",87,null,null,null],["CHRISTMAS TREE","1F384","christmas_tree",["christmas_tree"],"Nature",90,null,null,null],["FATHER CHRISTMAS","1F385","santa",["santa"],"People",194,!0,null,null],["FIREWORKS","1F386","fireworks",["fireworks"],"Places",112,null,null,null],["FIREWORK SPARKLER","1F387","sparkler",["sparkler"],"Places",111,null,null,null],["BALLOON","1F388","balloon",["balloon"],"Objects",99,null,null,null],["PARTY POPPER","1F389","tada",["tada"],"Objects",103,null,null,null],["CONFETTI BALL","1F38A","confetti_ball",["confetti_ball"],"Objects",102,null,null,null],["TANABATA TREE","1F38B","tanabata_tree",["tanabata_tree"],"Nature",99,null,null,null],["CROSSED FLAGS","1F38C","crossed_flags",["crossed_flags"],"Flags",118,null,null,null],["PINE DECORATION","1F38D","bamboo",["bamboo"],"Nature",98,null,null,null],["JAPANESE DOLLS","1F38E","dolls",["dolls"],"Objects",104,null,null,null],["CARP STREAMER","1F38F","flags",["flags"],"Objects",100,null,null,null],["WIND CHIME","1F390","wind_chime",["wind_chime"],"Objects",106,null,null,null],["MOON VIEWING CEREMONY","1F391","rice_scene",["rice_scene"],"Places",106,null,null,null],["SCHOOL SATCHEL","1F392","school_satchel",["school_satchel"],"People",285,null,null,null],["GRADUATION CAP","1F393","mortar_board",["mortar_board"],"People",282,null,null,null],["MILITARY MEDAL","1F396","medal",["medal"],"Activity",56,null,null,null],["REMINDER RIBBON","1F397","reminder_ribbon",["reminder_ribbon"],"Activity",62,null,null,null],["STUDIO MICROPHONE","1F399","studio_microphone",["studio_microphone"],"Objects",29,null,null,null],["LEVEL SLIDER","1F39A","level_slider",["level_slider"],"Objects",30,null,null,null],["CONTROL KNOBS","1F39B","control_knobs",["control_knobs"],"Objects",31,null,null,null],["FILM FRAMES","1F39E","film_frames",["film_frames"],"Objects",22,null,null,null],["ADMISSION TICKETS","1F39F","admission_tickets",["admission_tickets"],"Activity",64,null,null,null],["CAROUSEL HORSE","1F3A0","carousel_horse",["carousel_horse"],"Places",69,null,null,null],["FERRIS WHEEL","1F3A1","ferris_wheel",["ferris_wheel"],"Places",67,null,null,null],["ROLLER COASTER","1F3A2","roller_coaster",["roller_coaster"],"Places",68,null,null,null],["FISHING POLE AND FISH","1F3A3","fishing_pole_and_fish",["fishing_pole_and_fish"],"Activity",17,null,null,null],["MICROPHONE","1F3A4","microphone",["microphone"],"Activity",72,null,null,null],["MOVIE CAMERA","1F3A5","movie_camera",["movie_camera"],"Objects",20,null,null,null],["CINEMA","1F3A6","cinema",["cinema"],"Symbols",126,null,null,null],["HEADPHONE","1F3A7","headphones",["headphones"],"Activity",73,null,null,null],["ARTIST PALETTE","1F3A8","art",["art"],"Activity",70,null,null,null],["TOP HAT","1F3A9","tophat",["tophat"],"People",281,null,null,null],["CIRCUS TENT","1F3AA","circus_tent",["circus_tent"],"Activity",65,null,null,null],["TICKET","1F3AB","ticket",["ticket"],"Activity",63,null,null,null],["CLAPPER BOARD","1F3AC","clapper",["clapper"],"Activity",71,null,null,null],["PERFORMING ARTS","1F3AD","performing_arts",["performing_arts"],"Activity",69,null,null,null],["VIDEO GAME","1F3AE","video_game",["video_game"],"Activity",84,null,null,null],["DIRECT HIT","1F3AF","dart",["dart"],"Activity",82,null,null,null],["SLOT MACHINE","1F3B0","slot_machine",["slot_machine"],"Activity",85,null,null,null],["BILLIARDS","1F3B1","8ball",["8ball"],"Activity",8,null,null,null],["GAME DIE","1F3B2","game_die",["game_die"],"Activity",81,null,null,null],["BOWLING","1F3B3","bowling",["bowling"],"Activity",83,null,null,null],["FLOWER PLAYING CARDS","1F3B4","flower_playing_cards",["flower_playing_cards"],"Symbols",248,null,null,null],["MUSICAL NOTE","1F3B5","musical_note",["musical_note"],"Symbols",188,null,null,null],["MULTIPLE MUSICAL NOTES","1F3B6","notes",["notes"],"Symbols",189,null,null,null],["SAXOPHONE","1F3B7","saxophone",["saxophone"],"Activity",77,null,null,null],["GUITAR","1F3B8","guitar",["guitar"],"Activity",79,null,null,null],["MUSICAL KEYBOARD","1F3B9","musical_keyboard",["musical_keyboard"],"Activity",75,null,null,null],["TRUMPET","1F3BA","trumpet",["trumpet"],"Activity",78,null,null,null],["VIOLIN","1F3BB","violin",["violin"],"Activity",80,null,null,null],["MUSICAL SCORE","1F3BC","musical_score",["musical_score"],"Activity",74,null,null,null],["RUNNING SHIRT WITH SASH","1F3BD","running_shirt_with_sash",["running_shirt_with_sash"],"Activity",54,null,null,null],["TENNIS RACQUET AND BALL","1F3BE","tennis",["tennis"],"Activity",5,null,null,null],["SKI AND SKI BOOT","1F3BF","ski",["ski"],"Activity",21,null,null,null],["BASKETBALL AND HOOP","1F3C0","basketball",["basketball"],"Activity",2,null,null,null],["CHEQUERED FLAG","1F3C1","checkered_flag",["checkered_flag"],"Flags",3,null,null,null],["SNOWBOARDER","1F3C2","snowboarder",["snowboarder"],"Activity",23,!0,null,null],["RUNNER","1F3C3","runner",["runner","running"],"People",233,!0,null,null],["SURFER","1F3C4","surfer",["surfer"],"Activity",41,!0,null,null],["SPORTS MEDAL","1F3C5","sports_medal",["sports_medal"],"Activity",55,null,null,null],["TROPHY","1F3C6","trophy",["trophy"],"Activity",60,null,null,null],["HORSE RACING","1F3C7","horse_racing",["horse_racing"],"Activity",49,!0,null,null],["AMERICAN FOOTBALL","1F3C8","football",["football"],"Activity",3,null,null,null],["RUGBY FOOTBALL","1F3C9","rugby_football",["rugby_football"],"Activity",7,null,null,null],["SWIMMER","1F3CA","swimmer",["swimmer"],"Activity",43,!0,null,null],["WEIGHT LIFTER","1F3CB","weight_lifter",["weight_lifter"],"Activity",25,!0,null,null],["GOLFER","1F3CC","golfer",["golfer"],"Activity",39,!0,null,null],["RACING MOTORCYCLE","1F3CD","racing_motorcycle",["racing_motorcycle"],"Places",17,null,null,null],["RACING CAR","1F3CE","racing_car",["racing_car"],"Places",6,null,null,null],["CRICKET BAT AND BALL","1F3CF","cricket_bat_and_ball",["cricket_bat_and_ball"],"Activity",14,null,null,null],["VOLLEYBALL","1F3D0","volleyball",["volleyball"],"Activity",6,null,null,null],["FIELD HOCKEY STICK AND BALL","1F3D1","field_hockey_stick_and_ball",["field_hockey_stick_and_ball"],"Activity",13,null,null,null],["ICE HOCKEY STICK AND PUCK","1F3D2","ice_hockey_stick_and_puck",["ice_hockey_stick_and_puck"],"Activity",12,null,null,null],["TABLE TENNIS PADDLE AND BALL","1F3D3","table_tennis_paddle_and_ball",["table_tennis_paddle_and_ball"],"Activity",9,null,null,null],["SNOW CAPPED MOUNTAIN","1F3D4","snow_capped_mountain",["snow_capped_mountain"],"Places",74,null,null,null],["CAMPING","1F3D5","camping",["camping"],"Places",78,null,null,null],["BEACH WITH UMBRELLA","1F3D6","beach_with_umbrella",["beach_with_umbrella"],"Places",71,null,null,null],["BUILDING CONSTRUCTION","1F3D7","building_construction",["building_construction"],"Places",82,null,null,null],["HOUSE BUILDINGS","1F3D8","house_buildings",["house_buildings"],"Places",86,null,null,null],["CITYSCAPE","1F3D9","cityscape",["cityscape"],"Places",115,null,null,null],["DERELICT HOUSE BUILDING","1F3DA","derelict_house_building",["derelict_house_building"],"Places",87,null,null,null],["CLASSICAL BUILDING","1F3DB","classical_building",["classical_building"],"Places",99,null,null,null],["DESERT","1F3DC","desert",["desert"],"Places",77,null,null,null],["DESERT ISLAND","1F3DD","desert_island",["desert_island"],"Places",72,null,null,null],["NATIONAL PARK","1F3DE","national_park",["national_park"],"Places",107,null,null,null],["STADIUM","1F3DF","stadium",["stadium"],"Places",66,null,null,null],["HOUSE BUILDING","1F3E0","house",["house"],"Places",84,null,null,null],["HOUSE WITH GARDEN","1F3E1","house_with_garden",["house_with_garden"],"Places",85,null,null,null],["OFFICE BUILDING","1F3E2","office",["office"],"Places",88,null,null,null],["JAPANESE POST OFFICE","1F3E3","post_office",["post_office"],"Places",90,null,null,null],["EUROPEAN POST OFFICE","1F3E4","european_post_office",["european_post_office"],"Places",91,null,null,null],["HOSPITAL","1F3E5","hospital",["hospital"],"Places",92,null,null,null],["BANK","1F3E6","bank",["bank"],"Places",93,null,null,null],["AUTOMATED TELLER MACHINE","1F3E7","atm",["atm"],"Symbols",111,null,null,null],["HOTEL","1F3E8","hotel",["hotel"],"Places",94,null,null,null],["LOVE HOTEL","1F3E9","love_hotel",["love_hotel"],"Places",97,null,null,null],["CONVENIENCE STORE","1F3EA","convenience_store",["convenience_store"],"Places",95,null,null,null],["SCHOOL","1F3EB","school",["school"],"Places",96,null,null,null],["DEPARTMENT STORE","1F3EC","department_store",["department_store"],"Places",89,null,null,null],["FACTORY","1F3ED","factory",["factory"],"Places",83,null,null,null],["IZAKAYA LANTERN","1F3EE","izakaya_lantern",["izakaya_lantern","lantern"],"Objects",105,null,null,null],["JAPANESE CASTLE","1F3EF","japanese_castle",["japanese_castle"],"Places",65,null,null,null],["EUROPEAN CASTLE","1F3F0","european_castle",["european_castle"],"Places",64,null,null,null],["WAVING WHITE FLAG","1F3F3","waving_white_flag",["waving_white_flag"],"Flags",1,null,null,null],["WAVING BLACK FLAG","1F3F4","waving_black_flag",["waving_black_flag"],"Flags",2,null,null,null],["ROSETTE","1F3F5","rosette",["rosette"],"Activity",61,null,null,null],["LABEL","1F3F7","label",["label"],"Objects",115,null,null,null],["BADMINTON RACQUET AND SHUTTLECOCK","1F3F8","badminton_racquet_and_shuttlecock",["badminton_racquet_and_shuttlecock"],"Activity",10,null,null,null],["BOW AND ARROW","1F3F9","bow_and_arrow",["bow_and_arrow"],"Activity",16,null,null,null],["AMPHORA","1F3FA","amphora",["amphora"],"Objects",72,null,null,null],["EMOJI MODIFIER FITZPATRICK TYPE-1-2","1F3FB","skin-tone-2",["skin-tone-2"],"Skin Tones",1,null,null,null],["EMOJI MODIFIER FITZPATRICK TYPE-3","1F3FC","skin-tone-3",["skin-tone-3"],"Skin Tones",2,null,null,null],["EMOJI MODIFIER FITZPATRICK TYPE-4","1F3FD","skin-tone-4",["skin-tone-4"],"Skin Tones",3,null,null,null],["EMOJI MODIFIER FITZPATRICK TYPE-5","1F3FE","skin-tone-5",["skin-tone-5"],"Skin Tones",4,null,null,null],["EMOJI MODIFIER FITZPATRICK TYPE-6","1F3FF","skin-tone-6",["skin-tone-6"],"Skin Tones",5,null,null,null],["RAT","1F400","rat",["rat"],"Nature",84,null,null,null],["MOUSE","1F401","mouse2",["mouse2"],"Nature",83,null,null,null],["OX","1F402","ox",["ox"],"Nature",63,null,null,null],["WATER BUFFALO","1F403","water_buffalo",["water_buffalo"],"Nature",62,null,null,null],["COW","1F404","cow2",["cow2"],"Nature",64,null,null,null],["TIGER","1F405","tiger2",["tiger2"],"Nature",61,null,null,null],["LEOPARD","1F406","leopard",["leopard"],"Nature",60,null,null,null],["RABBIT","1F407","rabbit2",["rabbit2"],"Nature",82,null,null,null],["CAT","1F408","cat2",["cat2"],"Nature",78,null,null,null],["DRAGON","1F409","dragon",["dragon"],"Nature",87,null,null,null],["CROCODILE","1F40A","crocodile",["crocodile"],"Nature",59,null,null,null],["WHALE","1F40B","whale2",["whale2"],"Nature",58,null,null,null],["SNAIL","1F40C","snail",["snail"],"Nature",38,null,null,null],["SNAKE","1F40D","snake",["snake"],"Nature",45,null,null,null],["HORSE","1F40E","racehorse",["racehorse"],"Nature",71,null,null,null],["RAM","1F40F","ram",["ram"],"Nature",74,null,null,null],["GOAT","1F410","goat",["goat"],"Nature",73,null,null,null],["SHEEP","1F411","sheep",["sheep"],"Nature",75,null,null,null],["MONKEY","1F412","monkey",["monkey"],"Nature",20,null,null,null],["ROOSTER","1F413","rooster",["rooster"],"Nature",79,null,null,null],["CHICKEN","1F414","chicken",["chicken"],"Nature",21,null,null,null],["DOG","1F415","dog2",["dog2"],"Nature",76,null,null,null],["PIG","1F416","pig2",["pig2"],"Nature",72,null,null,null],["BOAR","1F417","boar",["boar"],"Nature",32,null,null,null],["ELEPHANT","1F418","elephant",["elephant"],"Nature",68,null,null,null],["OCTOPUS","1F419","octopus",["octopus"],"Nature",50,null,null,null],["SPIRAL SHELL","1F41A","shell",["shell"],"Nature",39,null,null,null],["BUG","1F41B","bug",["bug"],"Nature",36,null,null,null],["ANT","1F41C","ant",["ant"],"Nature",41,null,null,null],["HONEYBEE","1F41D","bee",["bee","honeybee"],"Nature",35,null,null,null],["LADY BEETLE","1F41E","beetle",["beetle"],"Nature",40,null,null,null],["FISH","1F41F","fish",["fish"],"Nature",53,null,null,null],["TROPICAL FISH","1F420","tropical_fish",["tropical_fish"],"Nature",52,null,null,null],["BLOWFISH","1F421","blowfish",["blowfish"],"Nature",54,null,null,null],["TURTLE","1F422","turtle",["turtle"],"Nature",44,null,null,null],["HATCHING CHICK","1F423","hatching_chick",["hatching_chick"],"Nature",25,null,null,null],["BABY CHICK","1F424","baby_chick",["baby_chick"],"Nature",24,null,null,null],["FRONT-FACING BABY CHICK","1F425","hatched_chick",["hatched_chick"],"Nature",26,null,null,null],["BIRD","1F426","bird",["bird"],"Nature",23,null,null,null],["PENGUIN","1F427","penguin",["penguin"],"Nature",22,null,null,null],["KOALA","1F428","koala",["koala"],"Nature",9,null,null,null],["POODLE","1F429","poodle",["poodle"],"Nature",77,null,null,null],["DROMEDARY CAMEL","1F42A","dromedary_camel",["dromedary_camel"],"Nature",66,null,null,null],["BACTRIAN CAMEL","1F42B","camel",["camel"],"Nature",67,null,null,null],["DOLPHIN","1F42C","dolphin",["dolphin","flipper"],"Nature",55,null,null,null],["MOUSE FACE","1F42D","mouse",["mouse"],"Nature",3,null,null,null],["COW FACE","1F42E","cow",["cow"],"Nature",12,null,null,null],["TIGER FACE","1F42F","tiger",["tiger"],"Nature",10,null,null,null],["RABBIT FACE","1F430","rabbit",["rabbit"],"Nature",5,null,null,null],["CAT FACE","1F431","cat",["cat"],"Nature",2,null,null,null],["DRAGON FACE","1F432","dragon_face",["dragon_face"],"Nature",88,null,null,null],["SPOUTING WHALE","1F433","whale",["whale"],"Nature",57,null,null,null],["HORSE FACE","1F434","horse",["horse"],"Nature",33,null,null,null],["MONKEY FACE","1F435","monkey_face",["monkey_face"],"Nature",16,null,null,[":o)"]],["DOG FACE","1F436","dog",["dog"],"Nature",1,null,null,null],["PIG FACE","1F437","pig",["pig"],"Nature",13,null,null,null],["FROG FACE","1F438","frog",["frog"],"Nature",15,null,null,null],["HAMSTER FACE","1F439","hamster",["hamster"],"Nature",4,null,null,null],["WOLF FACE","1F43A","wolf",["wolf"],"Nature",31,null,null,null],["BEAR FACE","1F43B","bear",["bear"],"Nature",7,null,null,null],["PANDA FACE","1F43C","panda_face",["panda_face"],"Nature",8,null,null,null],["PIG NOSE","1F43D","pig_nose",["pig_nose"],"Nature",14,null,null,null],["PAW PRINTS","1F43E","feet",["feet","paw_prints"],"Nature",86,null,null,null],["CHIPMUNK","1F43F","chipmunk",["chipmunk"],"Nature",85,null,null,null],["EYES","1F440","eyes",["eyes"],"People",137,null,null,null],["EYE","1F441","eye",["eye"],"People",136,null,null,null],["EAR","1F442","ear",["ear"],"People",133,!0,null,null],["NOSE","1F443","nose",["nose"],"People",134,!0,null,null],["MOUTH","1F444","lips",["lips"],"People",131,null,null,null],["TONGUE","1F445","tongue",["tongue"],"People",132,null,null,null],["WHITE UP POINTING BACKHAND INDEX","1F446","point_up_2",["point_up_2"],"People",114,!0,null,null],["WHITE DOWN POINTING BACKHAND INDEX","1F447","point_down",["point_down"],"People",115,!0,null,null],["WHITE LEFT POINTING BACKHAND INDEX","1F448","point_left",["point_left"],"People",112,!0,null,null],["WHITE RIGHT POINTING BACKHAND INDEX","1F449","point_right",["point_right"],"People",113,!0,null,null],["FISTED HAND SIGN","1F44A","facepunch",["facepunch","punch"],"People",104,!0,null,null],["WAVING HAND SIGN","1F44B","wave",["wave"],"People",121,!0,null,null],["OK HAND SIGN","1F44C","ok_hand",["ok_hand"],"People",111,!0,null,null],["THUMBS UP SIGN","1F44D","+1",["+1","thumbsup"],"People",102,!0,null,null],["THUMBS DOWN SIGN","1F44E","-1",["-1","thumbsdown"],"People",103,!0,null,null],["CLAPPING HANDS SIGN","1F44F","clap",["clap"],"People",99,!0,null,null],["OPEN HANDS SIGN","1F450","open_hands",["open_hands"],"People",97,!0,null,null],["CROWN","1F451","crown",["crown"],"People",283,null,null,null],["WOMANS HAT","1F452","womans_hat",["womans_hat"],"People",280,null,null,null],["EYEGLASSES","1F453","eyeglasses",["eyeglasses"],"People",290,null,null,null],["NECKTIE","1F454","necktie",["necktie"],"People",271,null,null,null],["T-SHIRT","1F455","shirt",["shirt","tshirt"],"People",269,null,null,null],["JEANS","1F456","jeans",["jeans"],"People",270,null,null,null],["DRESS","1F457","dress",["dress"],"People",272,null,null,null],["KIMONO","1F458","kimono",["kimono"],"People",274,null,null,null],["BIKINI","1F459","bikini",["bikini"],"People",273,null,null,null],["WOMANS CLOTHES","1F45A","womans_clothes",["womans_clothes"],"People",268,null,null,null],["PURSE","1F45B","purse",["purse"],"People",287,null,null,null],["HANDBAG","1F45C","handbag",["handbag"],"People",288,null,null,null],["POUCH","1F45D","pouch",["pouch"],"People",286,null,null,null],["MANS SHOE","1F45E","mans_shoe",["mans_shoe","shoe"],"People",278,null,null,null],["ATHLETIC SHOE","1F45F","athletic_shoe",["athletic_shoe"],"People",279,null,null,null],["HIGH-HEELED SHOE","1F460","high_heel",["high_heel"],"People",275,null,null,null],["WOMANS SANDAL","1F461","sandal",["sandal"],"People",276,null,null,null],["WOMANS BOOTS","1F462","boot",["boot"],"People",277,null,null,null],["FOOTPRINTS","1F463","footprints",["footprints"],"People",135,null,null,null],["BUST IN SILHOUETTE","1F464","bust_in_silhouette",["bust_in_silhouette"],"People",139,null,null,null],["BUSTS IN SILHOUETTE","1F465","busts_in_silhouette",["busts_in_silhouette"],"People",140,null,null,null],["BOY","1F466","boy",["boy"],"People",142,!0,null,null],["GIRL","1F467","girl",["girl"],"People",143,!0,null,null],["MAN","1F468","man",["man"],"People",144,!0,null,null],["WOMAN","1F469","woman",["woman"],"People",145,!0,null,null],["FAMILY","1F46A","family",["family","man-woman-boy"],"People",243,null,null,null],["MAN AND WOMAN HOLDING HANDS","1F46B","couple",["couple","man_and_woman_holding_hands"],"People",234,null,null,null],["TWO MEN HOLDING HANDS","1F46C","two_men_holding_hands",["two_men_holding_hands"],"People",236,null,null,null],["TWO WOMEN HOLDING HANDS","1F46D","two_women_holding_hands",["two_women_holding_hands"],"People",235,null,null,null],["POLICE OFFICER","1F46E","cop",["cop"],"People",154,!0,null,null],["WOMAN WITH BUNNY EARS","1F46F","dancers",["dancers"],"People",228,null,null,null],["BRIDE WITH VEIL","1F470","bride_with_veil",["bride_with_veil"],"People",197,!0,null,null],["PERSON WITH BLOND HAIR","1F471","person_with_blond_hair",["person_with_blond_hair"],"People",147,!0,null,null],["MAN WITH GUA PI MAO","1F472","man_with_gua_pi_mao",["man_with_gua_pi_mao"],"People",150,!0,null,null],["MAN WITH TURBAN","1F473","man_with_turban",["man_with_turban"],"People",152,!0,null,null],["OLDER MAN","1F474","older_man",["older_man"],"People",148,!0,null,null],["OLDER WOMAN","1F475","older_woman",["older_woman"],"People",149,!0,null,null],["BABY","1F476","baby",["baby"],"People",141,!0,null,null],["CONSTRUCTION WORKER","1F477","construction_worker",["construction_worker"],"People",156,!0,null,null],["PRINCESS","1F478","princess",["princess"],"People",195,!0,null,null],["JAPANESE OGRE","1F479","japanese_ogre",["japanese_ogre"],"People",78,null,null,null],["JAPANESE GOBLIN","1F47A","japanese_goblin",["japanese_goblin"],"People",79,null,null,null],["GHOST","1F47B","ghost",["ghost"],"People",81,null,null,null],["BABY ANGEL","1F47C","angel",["angel"],"People",199,!0,null,null],["EXTRATERRESTRIAL ALIEN","1F47D","alien",["alien"],"People",84,null,null,null],["ALIEN MONSTER","1F47E","space_invader",["space_invader"],"People",85,null,null,null],["IMP","1F47F","imp",["imp"],"People",77,null,null,null],["SKULL","1F480","skull",["skull"],"People",82,null,null,null],["INFORMATION DESK PERSON","1F481","information_desk_person",["information_desk_person"],"People",203,!0,null,null],["GUARDSMAN","1F482","guardsman",["guardsman"],"People",158,!0,null,null],["DANCER","1F483","dancer",["dancer"],"People",226,!0,null,null],["LIPSTICK","1F484","lipstick",["lipstick"],"People",129,null,null,null],["NAIL POLISH","1F485","nail_care",["nail_care"],"People",127,!0,null,null],["FACE MASSAGE","1F486","massage",["massage"],"People",223,!0,null,null],["HAIRCUT","1F487","haircut",["haircut"],"People",221,!0,null,null],["BARBER POLE","1F488","barber",["barber"],"Objects",75,null,null,null],["SYRINGE","1F489","syringe",["syringe"],"Objects",81,null,null,null],["PILL","1F48A","pill",["pill"],"Objects",80,null,null,null],["KISS MARK","1F48B","kiss",["kiss"],"People",130,null,null,null],["LOVE LETTER","1F48C","love_letter",["love_letter"],"Objects",111,null,null,null],["RING","1F48D","ring",["ring"],"People",128,null,null,null],["GEM STONE","1F48E","gem",["gem"],"Objects",53,null,null,null],["KISS","1F48F","couplekiss",["couplekiss"],"People",240,null,null,null],["BOUQUET","1F490","bouquet",["bouquet"],"Nature",105,null,null,null],["COUPLE WITH HEART","1F491","couple_with_heart",["couple_with_heart"],"People",237,null,null,null],["WEDDING","1F492","wedding",["wedding"],"Places",98,null,null,null],["BEATING HEART","1F493","heartbeat",["heartbeat"],"Symbols",11,null,null,null],["BROKEN HEART","1F494","broken_heart",["broken_heart"],"Symbols",7,null,"</3",["</3"]],["TWO HEARTS","1F495","two_hearts",["two_hearts"],"Symbols",9,null,null,null],["SPARKLING HEART","1F496","sparkling_heart",["sparkling_heart"],"Symbols",13,null,null,null],["GROWING HEART","1F497","heartpulse",["heartpulse"],"Symbols",12,null,null,null],["HEART WITH ARROW","1F498","cupid",["cupid"],"Symbols",14,null,null,null],["BLUE HEART","1F499","blue_heart",["blue_heart"],"Symbols",4,null,"<3",null],["GREEN HEART","1F49A","green_heart",["green_heart"],"Symbols",3,null,"<3",null],["YELLOW HEART","1F49B","yellow_heart",["yellow_heart"],"Symbols",2,null,"<3",null],["PURPLE HEART","1F49C","purple_heart",["purple_heart"],"Symbols",5,null,"<3",null],["HEART WITH RIBBON","1F49D","gift_heart",["gift_heart"],"Symbols",15,null,null,null],["REVOLVING HEARTS","1F49E","revolving_hearts",["revolving_hearts"],"Symbols",10,null,null,null],["HEART DECORATION","1F49F","heart_decoration",["heart_decoration"],"Symbols",16,null,null,null],["DIAMOND SHAPE WITH A DOT INSIDE","1F4A0","diamond_shape_with_a_dot_inside",["diamond_shape_with_a_dot_inside"],"Symbols",107,null,null,null],["ELECTRIC LIGHT BULB","1F4A1","bulb",["bulb"],"Objects",41,null,null,null],["ANGER SYMBOL","1F4A2","anger",["anger"],"Symbols",76,null,null,null],["BOMB","1F4A3","bomb",["bomb"],"Objects",64,null,null,null],["SLEEPING SYMBOL","1F4A4","zzz",["zzz"],"Symbols",110,null,null,null],["COLLISION SYMBOL","1F4A5","boom",["boom","collision"],"Nature",136,null,null,null],["SPLASHING SWEAT SYMBOL","1F4A6","sweat_drops",["sweat_drops"],"Nature",158,null,null,null],["DROPLET","1F4A7","droplet",["droplet"],"Nature",157,null,null,null],["DASH SYMBOL","1F4A8","dash",["dash"],"Nature",153,null,null,null],["PILE OF POO","1F4A9","hankey",["hankey","poop","shit"],"People",80,null,null,null],["FLEXED BICEPS","1F4AA","muscle",["muscle"],"People",123,!0,null,null],["DIZZY SYMBOL","1F4AB","dizzy",["dizzy"],"Nature",130,null,null,null],["SPEECH BALLOON","1F4AC","speech_balloon",["speech_balloon"],"Symbols",239,null,null,null],["THOUGHT BALLOON","1F4AD","thought_balloon",["thought_balloon"],"Symbols",241,null,null,null],["WHITE FLOWER","1F4AE","white_flower",["white_flower"],"Symbols",55,null,null,null],["HUNDRED POINTS SYMBOL","1F4AF","100",["100"],"Symbols",75,null,null,null],["MONEY BAG","1F4B0","moneybag",["moneybag"],"Objects",51,null,null,null],["CURRENCY EXCHANGE","1F4B1","currency_exchange",["currency_exchange"],"Symbols",195,null,null,null],["HEAVY DOLLAR SIGN","1F4B2","heavy_dollar_sign",["heavy_dollar_sign"],"Symbols",194,null,null,null],["CREDIT CARD","1F4B3","credit_card",["credit_card"],"Objects",52,null,null,null],["BANKNOTE WITH YEN SIGN","1F4B4","yen",["yen"],"Objects",48,null,null,null],["BANKNOTE WITH DOLLAR SIGN","1F4B5","dollar",["dollar"],"Objects",47,null,null,null],["BANKNOTE WITH EURO SIGN","1F4B6","euro",["euro"],"Objects",49,null,null,null],["BANKNOTE WITH POUND SIGN","1F4B7","pound",["pound"],"Objects",50,null,null,null],["MONEY WITH WINGS","1F4B8","money_with_wings",["money_with_wings"],"Objects",46,null,null,null],["CHART WITH UPWARDS TREND AND YEN SIGN","1F4B9","chart",["chart"],"Symbols",102,null,null,null],["SEAT","1F4BA","seat",["seat"],"Places",45,null,null,null],["PERSONAL COMPUTER","1F4BB","computer",["computer"],"Objects",4,null,null,null],["BRIEFCASE","1F4BC","briefcase",["briefcase"],"People",289,null,null,null],["MINIDISC","1F4BD","minidisc",["minidisc"],"Objects",12,null,null,null],["FLOPPY DISK","1F4BE","floppy_disk",["floppy_disk"],"Objects",13,null,null,null],["OPTICAL DISC","1F4BF","cd",["cd"],"Objects",14,null,null,null],["DVD","1F4C0","dvd",["dvd"],"Objects",15,null,null,null],["FILE FOLDER","1F4C1","file_folder",["file_folder"],"Objects",138,null,null,null],["OPEN FILE FOLDER","1F4C2","open_file_folder",["open_file_folder"],"Objects",139,null,null,null],["PAGE WITH CURL","1F4C3","page_with_curl",["page_with_curl"],"Objects",123,null,null,null],["PAGE FACING UP","1F4C4","page_facing_up",["page_facing_up"],"Objects",124,null,null,null],["CALENDAR","1F4C5","date",["date"],"Objects",132,null,null,null],["TEAR-OFF CALENDAR","1F4C6","calendar",["calendar"],"Objects",131,null,null,null],["CARD INDEX","1F4C7","card_index",["card_index"],"Objects",133,null,null,null],["CHART WITH UPWARDS TREND","1F4C8","chart_with_upwards_trend",["chart_with_upwards_trend"],"Objects",127,null,null,null],["CHART WITH DOWNWARDS TREND","1F4C9","chart_with_downwards_trend",["chart_with_downwards_trend"],"Objects",128,null,null,null],["BAR CHART","1F4CA","bar_chart",["bar_chart"],"Objects",126,null,null,null],["CLIPBOARD","1F4CB","clipboard",["clipboard"],"Objects",137,null,null,null],["PUSHPIN","1F4CC","pushpin",["pushpin"],"Objects",158,null,null,null],["ROUND PUSHPIN","1F4CD","round_pushpin",["round_pushpin"],"Objects",159,null,null,null],["PAPERCLIP","1F4CE","paperclip",["paperclip"],"Objects",154,null,null,null],["STRAIGHT RULER","1F4CF","straight_ruler",["straight_ruler"],"Objects",157,null,null,null],["TRIANGULAR RULER","1F4D0","triangular_ruler",["triangular_ruler"],"Objects",156,null,null,null],["BOOKMARK TABS","1F4D1","bookmark_tabs",["bookmark_tabs"],"Objects",125,null,null,null],["LEDGER","1F4D2","ledger",["ledger"],"Objects",145,null,null,null],["NOTEBOOK","1F4D3","notebook",["notebook"],"Objects",143,null,null,null],["NOTEBOOK WITH DECORATIVE COVER","1F4D4","notebook_with_decorative_cover",["notebook_with_decorative_cover"],"Objects",144,null,null,null],["CLOSED BOOK","1F4D5","closed_book",["closed_book"],"Objects",146,null,null,null],["OPEN BOOK","1F4D6","book",["book","open_book"],"Objects",151,null,null,null],["GREEN BOOK","1F4D7","green_book",["green_book"],"Objects",147,null,null,null],["BLUE BOOK","1F4D8","blue_book",["blue_book"],"Objects",148,null,null,null],["ORANGE BOOK","1F4D9","orange_book",["orange_book"],"Objects",149,null,null,null],["BOOKS","1F4DA","books",["books"],"Objects",150,null,null,null],["NAME BADGE","1F4DB","name_badge",["name_badge"],"Symbols",73,null,null,null],["SCROLL","1F4DC","scroll",["scroll"],"Objects",122,null,null,null],["MEMO","1F4DD","memo",["memo","pencil"],"Objects",166,null,null,null],["TELEPHONE RECEIVER","1F4DE","telephone_receiver",["telephone_receiver"],"Objects",23,null,null,null],["PAGER","1F4DF","pager",["pager"],"Objects",25,null,null,null],["FAX MACHINE","1F4E0","fax",["fax"],"Objects",26,null,null,null],["SATELLITE ANTENNA","1F4E1","satellite_antenna",["satellite_antenna"],"Objects",38,null,null,null],["PUBLIC ADDRESS LOUDSPEAKER","1F4E2","loudspeaker",["loudspeaker"],"Symbols",237,null,null,null],["CHEERING MEGAPHONE","1F4E3","mega",["mega"],"Symbols",236,null,null,null],["OUTBOX TRAY","1F4E4","outbox_tray",["outbox_tray"],"Objects",113,null,null,null],["INBOX TRAY","1F4E5","inbox_tray",["inbox_tray"],"Objects",112,null,null,null],["PACKAGE","1F4E6","package",["package"],"Objects",114,null,null,null],["E-MAIL SYMBOL","1F4E7","e-mail",["e-mail"],"Objects",110,null,null,null],["INCOMING ENVELOPE","1F4E8","incoming_envelope",["incoming_envelope"],"Objects",109,null,null,null],["ENVELOPE WITH DOWNWARDS ARROW ABOVE","1F4E9","envelope_with_arrow",["envelope_with_arrow"],"Objects",108,null,null,null],["CLOSED MAILBOX WITH LOWERED FLAG","1F4EA","mailbox_closed",["mailbox_closed"],"Objects",116,null,null,null],["CLOSED MAILBOX WITH RAISED FLAG","1F4EB","mailbox",["mailbox"],"Objects",117,null,null,null],["OPEN MAILBOX WITH RAISED FLAG","1F4EC","mailbox_with_mail",["mailbox_with_mail"],"Objects",118,null,null,null],["OPEN MAILBOX WITH LOWERED FLAG","1F4ED","mailbox_with_no_mail",["mailbox_with_no_mail"],"Objects",119,null,null,null],["POSTBOX","1F4EE","postbox",["postbox"],"Objects",120,null,null,null],["POSTAL HORN","1F4EF","postal_horn",["postal_horn"],"Objects",121,null,null,null],["NEWSPAPER","1F4F0","newspaper",["newspaper"],"Objects",142,null,null,null],["MOBILE PHONE","1F4F1","iphone",["iphone"],"Objects",2,null,null,null],["MOBILE PHONE WITH RIGHTWARDS ARROW AT LEFT","1F4F2","calling",["calling"],"Objects",3,null,null,null],["VIBRATION MODE","1F4F3","vibration_mode",["vibration_mode"],"Symbols",47,null,null,null],["MOBILE PHONE OFF","1F4F4","mobile_phone_off",["mobile_phone_off"],"Symbols",46,null,null,null],["NO MOBILE PHONES","1F4F5","no_mobile_phones",["no_mobile_phones"],"Symbols",83,null,null,null],["ANTENNA WITH BARS","1F4F6","signal_strength",["signal_strength"],"Symbols",127,null,null,null],["CAMERA","1F4F7","camera",["camera"],"Objects",17,null,null,null],["CAMERA WITH FLASH","1F4F8","camera_with_flash",["camera_with_flash"],"Objects",18,null,null,null],["VIDEO CAMERA","1F4F9","video_camera",["video_camera"],"Objects",19,null,null,null],["TELEVISION","1F4FA","tv",["tv"],"Objects",27,null,null,null],["RADIO","1F4FB","radio",["radio"],"Objects",28,null,null,null],["VIDEOCASSETTE","1F4FC","vhs",["vhs"],"Objects",16,null,null,null],["FILM PROJECTOR","1F4FD","film_projector",["film_projector"],"Objects",21,null,null,null],["PRAYER BEADS","1F4FF","prayer_beads",["prayer_beads"],"Objects",74,null,null,null],["TWISTED RIGHTWARDS ARROWS","1F500","twisted_rightwards_arrows",["twisted_rightwards_arrows"],"Symbols",183,null,null,null],["CLOCKWISE RIGHTWARDS AND LEFTWARDS OPEN CIRCLE ARROWS","1F501","repeat",["repeat"],"Symbols",184,null,null,null],["CLOCKWISE RIGHTWARDS AND LEFTWARDS OPEN CIRCLE ARROWS WITH CIRCLED ONE OVERLAY","1F502","repeat_one",["repeat_one"],"Symbols",185,null,null,null],["CLOCKWISE DOWNWARDS AND UPWARDS OPEN CIRCLE ARROWS","1F503","arrows_clockwise",["arrows_clockwise"],"Symbols",187,null,null,null],["ANTICLOCKWISE DOWNWARDS AND UPWARDS OPEN CIRCLE ARROWS","1F504","arrows_counterclockwise",["arrows_counterclockwise"],"Symbols",186,null,null,null],["LOW BRIGHTNESS SYMBOL","1F505","low_brightness",["low_brightness"],"Symbols",91,null,null,null],["HIGH BRIGHTNESS SYMBOL","1F506","high_brightness",["high_brightness"],"Symbols",92,null,null,null],["SPEAKER WITH CANCELLATION STROKE","1F507","mute",["mute"],"Symbols",231,null,null,null],["SPEAKER","1F508","speaker",["speaker"],"Symbols",230,null,null,null],["SPEAKER WITH ONE SOUND WAVE","1F509","sound",["sound"],"Symbols",232,null,null,null],["SPEAKER WITH THREE SOUND WAVES","1F50A","loud_sound",["loud_sound"],"Symbols",233,null,null,null],["BATTERY","1F50B","battery",["battery"],"Objects",39,null,null,null],["ELECTRIC PLUG","1F50C","electric_plug",["electric_plug"],"Objects",40,null,null,null],["LEFT-POINTING MAGNIFYING GLASS","1F50D","mag",["mag"],"Objects",168,null,null,null],["RIGHT-POINTING MAGNIFYING GLASS","1F50E","mag_right",["mag_right"],"Objects",169,null,null,null],["LOCK WITH INK PEN","1F50F","lock_with_ink_pen",["lock_with_ink_pen"],"Objects",170,null,null,null],["CLOSED LOCK WITH KEY","1F510","closed_lock_with_key",["closed_lock_with_key"],"Objects",171,null,null,null],["KEY","1F511","key",["key"],"Objects",89,null,null,null],["LOCK","1F512","lock",["lock"],"Objects",172,null,null,null],["OPEN LOCK","1F513","unlock",["unlock"],"Objects",173,null,null,null],["BELL","1F514","bell",["bell"],"Symbols",234,null,null,null],["BELL WITH CANCELLATION STROKE","1F515","no_bell",["no_bell"],"Symbols",235,null,null,null],["BOOKMARK","1F516","bookmark",["bookmark"],"Objects",152,null,null,null],["LINK SYMBOL","1F517","link",["link"],"Objects",153,null,null,null],["RADIO BUTTON","1F518","radio_button",["radio_button"],"Symbols",209,null,null,null],["BACK WITH LEFTWARDS ARROW ABOVE","1F519","back",["back"],"Symbols",203,null,null,null],["END WITH LEFTWARDS ARROW ABOVE","1F51A","end",["end"],"Symbols",202,null,null,null],["ON WITH EXCLAMATION MARK WITH LEFT RIGHT ARROW ABOVE","1F51B","on",["on"],"Symbols",204,null,null,null],["SOON WITH RIGHTWARDS ARROW ABOVE","1F51C","soon",["soon"],"Symbols",206,null,null,null],["TOP WITH UPWARDS ARROW ABOVE","1F51D","top",["top"],"Symbols",205,null,null,null],["NO ONE UNDER EIGHTEEN SYMBOL","1F51E","underage",["underage"],"Symbols",82,null,null,null],["KEYCAP TEN","1F51F","keycap_ten",["keycap_ten"],"Symbols",150,null,null,null],["INPUT SYMBOL FOR LATIN CAPITAL LETTERS","1F520","capital_abcd",["capital_abcd"],"Symbols",133,null,null,null],["INPUT SYMBOL FOR LATIN SMALL LETTERS","1F521","abcd",["abcd"],"Symbols",132,null,null,null],["INPUT SYMBOL FOR NUMBERS","1F522","1234",["1234"],"Symbols",151,null,null,null],["INPUT SYMBOL FOR SYMBOLS","1F523","symbols",["symbols"],"Symbols",129,null,null,null],["INPUT SYMBOL FOR LATIN LETTERS","1F524","abc",["abc"],"Symbols",131,null,null,null],["FIRE","1F525","fire",["fire"],"Nature",135,null,null,null],["ELECTRIC TORCH","1F526","flashlight",["flashlight"],"Objects",42,null,null,null],["WRENCH","1F527","wrench",["wrench"],"Objects",55,null,null,null],["HAMMER","1F528","hammer",["hammer"],"Objects",56,null,null,null],["NUT AND BOLT","1F529","nut_and_bolt",["nut_and_bolt"],"Objects",60,null,null,null],["HOCHO","1F52A","hocho",["hocho","knife"],"Objects",65,null,null,null],["PISTOL","1F52B","gun",["gun"],"Objects",63,null,null,null],["MICROSCOPE","1F52C","microscope",["microscope"],"Objects",78,null,null,null],["TELESCOPE","1F52D","telescope",["telescope"],"Objects",77,null,null,null],["CRYSTAL BALL","1F52E","crystal_ball",["crystal_ball"],"Objects",73,null,null,null],["SIX POINTED STAR WITH MIDDLE DOT","1F52F","six_pointed_star",["six_pointed_star"],"Symbols",23,null,null,null],["JAPANESE SYMBOL FOR BEGINNER","1F530","beginner",["beginner"],"Symbols",98,null,null,null],["TRIDENT EMBLEM","1F531","trident",["trident"],"Symbols",96,null,null,null],["BLACK SQUARE BUTTON","1F532","black_square_button",["black_square_button"],"Symbols",221,null,null,null],["WHITE SQUARE BUTTON","1F533","white_square_button",["white_square_button"],"Symbols",220,null,null,null],["LARGE RED CIRCLE","1F534","red_circle",["red_circle"],"Symbols",212,null,null,null],["LARGE BLUE CIRCLE","1F535","large_blue_circle",["large_blue_circle"],"Symbols",213,null,null,null],["LARGE ORANGE DIAMOND","1F536","large_orange_diamond",["large_orange_diamond"],"Symbols",218,null,null,null],["LARGE BLUE DIAMOND","1F537","large_blue_diamond",["large_blue_diamond"],"Symbols",219,null,null,null],["SMALL ORANGE DIAMOND","1F538","small_orange_diamond",["small_orange_diamond"],"Symbols",216,null,null,null],["SMALL BLUE DIAMOND","1F539","small_blue_diamond",["small_blue_diamond"],"Symbols",217,null,null,null],["UP-POINTING RED TRIANGLE","1F53A","small_red_triangle",["small_red_triangle"],"Symbols",214,null,null,null],["DOWN-POINTING RED TRIANGLE","1F53B","small_red_triangle_down",["small_red_triangle_down"],"Symbols",215,null,null,null],["UP-POINTING SMALL RED TRIANGLE","1F53C","arrow_up_small",["arrow_up_small"],"Symbols",167,null,null,null],["DOWN-POINTING SMALL RED TRIANGLE","1F53D","arrow_down_small",["arrow_down_small"],"Symbols",168,null,null,null],["OM SYMBOL","1F549","om_symbol",["om_symbol"],"Symbols",20,null,null,null],["DOVE OF PEACE","1F54A","dove_of_peace",["dove_of_peace"],"Nature",81,null,null,null],["KAABA","1F54B","kaaba",["kaaba"],"Places",103,null,null,null],["MOSQUE","1F54C","mosque",["mosque"],"Places",101,null,null,null],["SYNAGOGUE","1F54D","synagogue",["synagogue"],"Places",102,null,null,null],["MENORAH WITH NINE BRANCHES","1F54E","menorah_with_nine_branches",["menorah_with_nine_branches"],"Symbols",24,null,null,null],["CLOCK FACE ONE OCLOCK","1F550","clock1",["clock1"],"Symbols",250,null,null,null],["CLOCK FACE TWO OCLOCK","1F551","clock2",["clock2"],"Symbols",251,null,null,null],["CLOCK FACE THREE OCLOCK","1F552","clock3",["clock3"],"Symbols",252,null,null,null],["CLOCK FACE FOUR OCLOCK","1F553","clock4",["clock4"],"Symbols",253,null,null,null],["CLOCK FACE FIVE OCLOCK","1F554","clock5",["clock5"],"Symbols",254,null,null,null],["CLOCK FACE SIX OCLOCK","1F555","clock6",["clock6"],"Symbols",255,null,null,null],["CLOCK FACE SEVEN OCLOCK","1F556","clock7",["clock7"],"Symbols",256,null,null,null],["CLOCK FACE EIGHT OCLOCK","1F557","clock8",["clock8"],"Symbols",257,null,null,null],["CLOCK FACE NINE OCLOCK","1F558","clock9",["clock9"],"Symbols",258,null,null,null],["CLOCK FACE TEN OCLOCK","1F559","clock10",["clock10"],"Symbols",259,null,null,null],["CLOCK FACE ELEVEN OCLOCK","1F55A","clock11",["clock11"],"Symbols",260,null,null,null],["CLOCK FACE TWELVE OCLOCK","1F55B","clock12",["clock12"],"Symbols",261,null,null,null],["CLOCK FACE ONE-THIRTY","1F55C","clock130",["clock130"],"Symbols",262,null,null,null],["CLOCK FACE TWO-THIRTY","1F55D","clock230",["clock230"],"Symbols",263,null,null,null],["CLOCK FACE THREE-THIRTY","1F55E","clock330",["clock330"],"Symbols",264,null,null,null],["CLOCK FACE FOUR-THIRTY","1F55F","clock430",["clock430"],"Symbols",265,null,null,null],["CLOCK FACE FIVE-THIRTY","1F560","clock530",["clock530"],"Symbols",266,null,null,null],["CLOCK FACE SIX-THIRTY","1F561","clock630",["clock630"],"Symbols",267,null,null,null],["CLOCK FACE SEVEN-THIRTY","1F562","clock730",["clock730"],"Symbols",268,null,null,null],["CLOCK FACE EIGHT-THIRTY","1F563","clock830",["clock830"],"Symbols",269,null,null,null],["CLOCK FACE NINE-THIRTY","1F564","clock930",["clock930"],"Symbols",270,null,null,null],["CLOCK FACE TEN-THIRTY","1F565","clock1030",["clock1030"],"Symbols",271,null,null,null],["CLOCK FACE ELEVEN-THIRTY","1F566","clock1130",["clock1130"],"Symbols",272,null,null,null],["CLOCK FACE TWELVE-THIRTY","1F567","clock1230",["clock1230"],"Symbols",273,null,null,null],["CANDLE","1F56F","candle",["candle"],"Objects",43,null,null,null],["MANTELPIECE CLOCK","1F570","mantelpiece_clock",["mantelpiece_clock"],"Objects",35,null,null,null],["HOLE","1F573","hole",["hole"],"Objects",79,null,null,null],["MAN IN BUSINESS SUIT LEVITATING","1F574","man_in_business_suit_levitating",["man_in_business_suit_levitating"],"People",225,!0,null,null],["SLEUTH OR SPY","1F575","sleuth_or_spy",["sleuth_or_spy"],"People",160,!0,null,null],["DARK SUNGLASSES","1F576","dark_sunglasses",["dark_sunglasses"],"People",291,null,null,null],["SPIDER","1F577","spider",["spider"],"Nature",42,null,null,null],["SPIDER WEB","1F578","spider_web",["spider_web"],"Nature",43,null,null,null],["JOYSTICK","1F579","joystick",["joystick"],"Objects",10,null,null,null],["MAN DANCING","1F57A","man_dancing",["man_dancing"],"People",227,!0,null,null],["LINKED PAPERCLIPS","1F587","linked_paperclips",["linked_paperclips"],"Objects",155,null,null,null],["LOWER LEFT BALLPOINT PEN","1F58A","lower_left_ballpoint_pen",["lower_left_ballpoint_pen"],"Objects",161,null,null,null],["LOWER LEFT FOUNTAIN PEN","1F58B","lower_left_fountain_pen",["lower_left_fountain_pen"],"Objects",162,null,null,null],["LOWER LEFT PAINTBRUSH","1F58C","lower_left_paintbrush",["lower_left_paintbrush"],"Objects",164,null,null,null],["LOWER LEFT CRAYON","1F58D","lower_left_crayon",["lower_left_crayon"],"Objects",165,null,null,null],["RAISED HAND WITH FINGERS SPLAYED","1F590","raised_hand_with_fingers_splayed",["raised_hand_with_fingers_splayed"],"People",119,!0,null,null],["REVERSED HAND WITH MIDDLE FINGER EXTENDED","1F595","middle_finger",["middle_finger","reversed_hand_with_middle_finger_extended"],"People",124,!0,null,null],["RAISED HAND WITH PART BETWEEN MIDDLE AND RING FINGERS","1F596","spock-hand",["spock-hand"],"People",120,!0,null,null],["BLACK HEART","1F5A4","black_heart",["black_heart"],"Symbols",6,null,null,null],["DESKTOP COMPUTER","1F5A5","desktop_computer",["desktop_computer"],"Objects",6,null,null,null],["PRINTER","1F5A8","printer",["printer"],"Objects",7,null,null,null],["THREE BUTTON MOUSE","1F5B1","three_button_mouse",["three_button_mouse"],"Objects",8,null,null,null],["TRACKBALL","1F5B2","trackball",["trackball"],"Objects",9,null,null,null],["FRAME WITH PICTURE","1F5BC","frame_with_picture",["frame_with_picture"],"Objects",95,null,null,null],["CARD INDEX DIVIDERS","1F5C2","card_index_dividers",["card_index_dividers"],"Objects",140,null,null,null],["CARD FILE BOX","1F5C3","card_file_box",["card_file_box"],"Objects",134,null,null,null],["FILE CABINET","1F5C4","file_cabinet",["file_cabinet"],"Objects",136,null,null,null],["WASTEBASKET","1F5D1","wastebasket",["wastebasket"],"Objects",44,null,null,null],["SPIRAL NOTE PAD","1F5D2","spiral_note_pad",["spiral_note_pad"],"Objects",129,null,null,null],["SPIRAL CALENDAR PAD","1F5D3","spiral_calendar_pad",["spiral_calendar_pad"],"Objects",130,null,null,null],["COMPRESSION","1F5DC","compression",["compression"],"Objects",11,null,null,null],["OLD KEY","1F5DD","old_key",["old_key"],"Objects",90,null,null,null],["ROLLED-UP NEWSPAPER","1F5DE","rolled_up_newspaper",["rolled_up_newspaper"],"Objects",141,null,null,null],["DAGGER KNIFE","1F5E1","dagger_knife",["dagger_knife"],"Objects",66,null,null,null],["SPEAKING HEAD IN SILHOUETTE","1F5E3","speaking_head_in_silhouette",["speaking_head_in_silhouette"],"People",138,null,null,null],["LEFT SPEECH BUBBLE","1F5E8","left_speech_bubble",["left_speech_bubble"],"Symbols",240,null,null,null],["RIGHT ANGER BUBBLE","1F5EF","right_anger_bubble",["right_anger_bubble"],"Symbols",242,null,null,null],["BALLOT BOX WITH BALLOT","1F5F3","ballot_box_with_ballot",["ballot_box_with_ballot"],"Objects",135,null,null,null],["WORLD MAP","1F5FA","world_map",["world_map"],"Places",59,null,null,null],["MOUNT FUJI","1F5FB","mount_fuji",["mount_fuji"],"Places",75,null,null,null],["TOKYO TOWER","1F5FC","tokyo_tower",["tokyo_tower"],"Places",63,null,null,null],["STATUE OF LIBERTY","1F5FD","statue_of_liberty",["statue_of_liberty"],"Places",61,null,null,null],["SILHOUETTE OF JAPAN","1F5FE","japan",["japan"],"Places",105,null,null,null],["MOYAI","1F5FF","moyai",["moyai"],"Places",60,null,null,null],["GRINNING FACE","1F600","grinning",["grinning"],"People",1,null,":D",null],["GRINNING FACE WITH SMILING EYES","1F601","grin",["grin"],"People",4,null,null,null],["FACE WITH TEARS OF JOY","1F602","joy",["joy"],"People",7,null,null,null],["SMILING FACE WITH OPEN MOUTH","1F603","smiley",["smiley"],"People",2,null,":)",["=)","=-)"]],["SMILING FACE WITH OPEN MOUTH AND SMILING EYES","1F604","smile",["smile"],"People",3,null,":)",["C:","c:",":D",":-D"]],["SMILING FACE WITH OPEN MOUTH AND COLD SWEAT","1F605","sweat_smile",["sweat_smile"],"People",6,null,null,null],["SMILING FACE WITH OPEN MOUTH AND TIGHTLY-CLOSED EYES","1F606","laughing",["laughing","satisfied"],"People",5,null,null,[":>",":->"]],["SMILING FACE WITH HALO","1F607","innocent",["innocent"],"People",11,null,null,null],["SMILING FACE WITH HORNS","1F608","smiling_imp",["smiling_imp"],"People",76,null,null,null],["WINKING FACE","1F609","wink",["wink"],"People",14,null,";)",[";)",";-)"]],["SMILING FACE WITH SMILING EYES","1F60A","blush",["blush"],"People",10,null,":)",null],["FACE SAVOURING DELICIOUS FOOD","1F60B","yum",["yum"],"People",21,null,null,null],["RELIEVED FACE","1F60C","relieved",["relieved"],"People",15,null,null,null],["SMILING FACE WITH HEART-SHAPED EYES","1F60D","heart_eyes",["heart_eyes"],"People",16,null,null,null],["SMILING FACE WITH SUNGLASSES","1F60E","sunglasses",["sunglasses"],"People",28,null,null,["8)"]],["SMIRKING FACE","1F60F","smirk",["smirk"],"People",31,null,null,null],["NEUTRAL FACE","1F610","neutral_face",["neutral_face"],"People",47,null,null,[":|",":-|"]],["EXPRESSIONLESS FACE","1F611","expressionless",["expressionless"],"People",48,null,null,null],["UNAMUSED FACE","1F612","unamused",["unamused"],"People",32,null,":(",null],["FACE WITH COLD SWEAT","1F613","sweat",["sweat"],"People",63,null,null,null],["PENSIVE FACE","1F614","pensive",["pensive"],"People",34,null,null,null],["CONFUSED FACE","1F615","confused",["confused"],"People",36,null,null,[":\\",":-\\",":/",":-/"]],["CONFOUNDED FACE","1F616","confounded",["confounded"],"People",40,null,null,null],["KISSING FACE","1F617","kissing",["kissing"],"People",18,null,null,null],["FACE THROWING A KISS","1F618","kissing_heart",["kissing_heart"],"People",17,null,null,[":*",":-*"]],["KISSING FACE WITH SMILING EYES","1F619","kissing_smiling_eyes",["kissing_smiling_eyes"],"People",19,null,null,null],["KISSING FACE WITH CLOSED EYES","1F61A","kissing_closed_eyes",["kissing_closed_eyes"],"People",20,null,null,null],["FACE WITH STUCK-OUT TONGUE","1F61B","stuck_out_tongue",["stuck_out_tongue"],"People",24,null,":p",[":p",":-p",":P",":-P",":b",":-b"]],["FACE WITH STUCK-OUT TONGUE AND WINKING EYE","1F61C","stuck_out_tongue_winking_eye",["stuck_out_tongue_winking_eye"],"People",22,null,";p",[";p",";-p",";b",";-b",";P",";-P"]],["FACE WITH STUCK-OUT TONGUE AND TIGHTLY-CLOSED EYES","1F61D","stuck_out_tongue_closed_eyes",["stuck_out_tongue_closed_eyes"],"People",23,null,null,null],["DISAPPOINTED FACE","1F61E","disappointed",["disappointed"],"People",33,null,":(",["):",":(",":-("]],["WORRIED FACE","1F61F","worried",["worried"],"People",35,null,null,null],["ANGRY FACE","1F620","angry",["angry"],"People",44,null,null,[">:(",">:-("]],["POUTING FACE","1F621","rage",["rage"],"People",45,null,null,null],["CRYING FACE","1F622","cry",["cry"],"People",59,null,":'(",[":'("]],["PERSEVERING FACE","1F623","persevere",["persevere"],"People",39,null,null,null],["FACE WITH LOOK OF TRIUMPH","1F624","triumph",["triumph"],"People",43,null,null,null],["DISAPPOINTED BUT RELIEVED FACE","1F625","disappointed_relieved",["disappointed_relieved"],"People",60,null,null,null],["FROWNING FACE WITH OPEN MOUTH","1F626","frowning",["frowning"],"People",50,null,null,null],["ANGUISHED FACE","1F627","anguished",["anguished"],"People",51,null,null,["D:"]],["FEARFUL FACE","1F628","fearful",["fearful"],"People",57,null,null,null],["WEARY FACE","1F629","weary",["weary"],"People",42,null,null,null],["SLEEPY FACE","1F62A","sleepy",["sleepy"],"People",64,null,null,null],["TIRED FACE","1F62B","tired_face",["tired_face"],"People",41,null,null,null],["GRIMACING FACE","1F62C","grimacing",["grimacing"],"People",69,null,null,null],["LOUDLY CRYING FACE","1F62D","sob",["sob"],"People",62,null,":'(",null],["FACE WITH OPEN MOUTH","1F62E","open_mouth",["open_mouth"],"People",52,null,null,[":o",":-o",":O",":-O"]],["HUSHED FACE","1F62F","hushed",["hushed"],"People",49,null,null,null],["FACE WITH OPEN MOUTH AND COLD SWEAT","1F630","cold_sweat",["cold_sweat"],"People",58,null,null,null],["FACE SCREAMING IN FEAR","1F631","scream",["scream"],"People",56,null,null,null],["ASTONISHED FACE","1F632","astonished",["astonished"],"People",53,null,null,null],["FLUSHED FACE","1F633","flushed",["flushed"],"People",55,null,null,null],["SLEEPING FACE","1F634","sleeping",["sleeping"],"People",65,null,null,null],["DIZZY FACE","1F635","dizzy_face",["dizzy_face"],"People",54,null,null,null],["FACE WITHOUT MOUTH","1F636","no_mouth",["no_mouth"],"People",46,null,null,null],["FACE WITH MEDICAL MASK","1F637","mask",["mask"],"People",73,null,null,null],["GRINNING CAT FACE WITH SMILING EYES","1F638","smile_cat",["smile_cat"],"People",89,null,null,null],["CAT FACE WITH TEARS OF JOY","1F639","joy_cat",["joy_cat"],"People",90,null,null,null],["SMILING CAT FACE WITH OPEN MOUTH","1F63A","smiley_cat",["smiley_cat"],"People",88,null,null,null],["SMILING CAT FACE WITH HEART-SHAPED EYES","1F63B","heart_eyes_cat",["heart_eyes_cat"],"People",91,null,null,null],["CAT FACE WITH WRY SMILE","1F63C","smirk_cat",["smirk_cat"],"People",92,null,null,null],["KISSING CAT FACE WITH CLOSED EYES","1F63D","kissing_cat",["kissing_cat"],"People",93,null,null,null],["POUTING CAT FACE","1F63E","pouting_cat",["pouting_cat"],"People",96,null,null,null],["CRYING CAT FACE","1F63F","crying_cat_face",["crying_cat_face"],"People",95,null,null,null],["WEARY CAT FACE","1F640","scream_cat",["scream_cat"],"People",94,null,null,null],["SLIGHTLY FROWNING FACE","1F641","slightly_frowning_face",["slightly_frowning_face"],"People",37,null,null,null],["SLIGHTLY SMILING FACE","1F642","slightly_smiling_face",["slightly_smiling_face"],"People",12,null,null,[":)","(:",":-)"]],["UPSIDE-DOWN FACE","1F643","upside_down_face",["upside_down_face"],"People",13,null,null,null],["FACE WITH ROLLING EYES","1F644","face_with_rolling_eyes",["face_with_rolling_eyes"],"People",66,null,null,null],["FACE WITH NO GOOD GESTURE","1F645","no_good",["no_good"],"People",205,!0,null,null],["FACE WITH OK GESTURE","1F646","ok_woman",["ok_woman"],"People",207,!0,null,null],["PERSON BOWING DEEPLY","1F647","bow",["bow"],"People",202,!0,null,null],["SEE-NO-EVIL MONKEY","1F648","see_no_evil",["see_no_evil"],"Nature",17,null,null,null],["HEAR-NO-EVIL MONKEY","1F649","hear_no_evil",["hear_no_evil"],"Nature",18,null,null,null],["SPEAK-NO-EVIL MONKEY","1F64A","speak_no_evil",["speak_no_evil"],"Nature",19,null,null,null],["HAPPY PERSON RAISING ONE HAND","1F64B","raising_hand",["raising_hand"],"People",209,!0,null,null],["PERSON RAISING BOTH HANDS IN CELEBRATION","1F64C","raised_hands",["raised_hands"],"People",98,!0,null,null],["PERSON FROWNING","1F64D","person_frowning",["person_frowning"],"People",219,!0,null,null],["PERSON WITH POUTING FACE","1F64E","person_with_pouting_face",["person_with_pouting_face"],"People",217,!0,null,null],["PERSON WITH FOLDED HANDS","1F64F","pray",["pray"],"People",100,!0,null,null],["ROCKET","1F680","rocket",["rocket"],"Places",43,null,null,null],["HELICOPTER","1F681","helicopter",["helicopter"],"Places",38,null,null,null],["STEAM LOCOMOTIVE","1F682","steam_locomotive",["steam_locomotive"],"Places",33,null,null,null],["RAILWAY CAR","1F683","railway_car",["railway_car"],"Places",26,null,null,null],["HIGH-SPEED TRAIN","1F684","bullettrain_side",["bullettrain_side"],"Places",30,null,null,null],["HIGH-SPEED TRAIN WITH BULLET NOSE","1F685","bullettrain_front",["bullettrain_front"],"Places",31,null,null,null],["TRAIN","1F686","train2",["train2"],"Places",34,null,null,null],["METRO","1F687","metro",["metro"],"Places",35,null,null,null],["LIGHT RAIL","1F688","light_rail",["light_rail"],"Places",32,null,null,null],["STATION","1F689","station",["station"],"Places",37,null,null,null],["TRAM","1F68A","tram",["tram"],"Places",36,null,null,null],["TRAM CAR","1F68B","train",["train"],"Places",27,null,null,null],["BUS","1F68C","bus",["bus"],"Places",4,null,null,null],["ONCOMING BUS","1F68D","oncoming_bus",["oncoming_bus"],"Places",20,null,null,null],["TROLLEYBUS","1F68E","trolleybus",["trolleybus"],"Places",5,null,null,null],["BUS STOP","1F68F","busstop",["busstop"],"Places",56,null,null,null],["MINIBUS","1F690","minibus",["minibus"],"Places",10,null,null,null],["AMBULANCE","1F691","ambulance",["ambulance"],"Places",8,null,null,null],["FIRE ENGINE","1F692","fire_engine",["fire_engine"],"Places",9,null,null,null],["POLICE CAR","1F693","police_car",["police_car"],"Places",7,null,null,null],["ONCOMING POLICE CAR","1F694","oncoming_police_car",["oncoming_police_car"],"Places",19,null,null,null],["TAXI","1F695","taxi",["taxi"],"Places",2,null,null,null],["ONCOMING TAXI","1F696","oncoming_taxi",["oncoming_taxi"],"Places",22,null,null,null],["AUTOMOBILE","1F697","car",["car","red_car"],"Places",1,null,null,null],["ONCOMING AUTOMOBILE","1F698","oncoming_automobile",["oncoming_automobile"],"Places",21,null,null,null],["RECREATIONAL VEHICLE","1F699","blue_car",["blue_car"],"Places",3,null,null,null],["DELIVERY TRUCK","1F69A","truck",["truck"],"Places",11,null,null,null],["ARTICULATED LORRY","1F69B","articulated_lorry",["articulated_lorry"],"Places",12,null,null,null],["TRACTOR","1F69C","tractor",["tractor"],"Places",13,null,null,null],["MONORAIL","1F69D","monorail",["monorail"],"Places",29,null,null,null],["MOUNTAIN RAILWAY","1F69E","mountain_railway",["mountain_railway"],"Places",28,null,null,null],["SUSPENSION RAILWAY","1F69F","suspension_railway",["suspension_railway"],"Places",25,null,null,null],["MOUNTAIN CABLEWAY","1F6A0","mountain_cableway",["mountain_cableway"],"Places",24,null,null,null],["AERIAL TRAMWAY","1F6A1","aerial_tramway",["aerial_tramway"],"Places",23,null,null,null],["SHIP","1F6A2","ship",["ship"],"Places",52,null,null,null],["ROWBOAT","1F6A3","rowboat",["rowboat"],"Activity",48,!0,null,null],["SPEEDBOAT","1F6A4","speedboat",["speedboat"],"Places",49,null,null,null],["HORIZONTAL TRAFFIC LIGHT","1F6A5","traffic_light",["traffic_light"],"Places",58,null,null,null],["VERTICAL TRAFFIC LIGHT","1F6A6","vertical_traffic_light",["vertical_traffic_light"],"Places",57,null,null,null],["CONSTRUCTION SIGN","1F6A7","construction",["construction"],"Places",54,null,null,null],["POLICE CARS REVOLVING LIGHT","1F6A8","rotating_light",["rotating_light"],"Places",18,null,null,null],["TRIANGULAR FLAG ON POST","1F6A9","triangular_flag_on_post",["triangular_flag_on_post"],"Flags",4,null,null,null],["DOOR","1F6AA","door",["door"],"Objects",91,null,null,null],["NO ENTRY SIGN","1F6AB","no_entry_sign",["no_entry_sign"],"Symbols",74,null,null,null],["SMOKING SYMBOL","1F6AC","smoking",["smoking"],"Objects",69,null,null,null],["NO SMOKING SYMBOL","1F6AD","no_smoking",["no_smoking"],"Symbols",84,null,null,null],["PUT LITTER IN ITS PLACE SYMBOL","1F6AE","put_litter_in_its_place",["put_litter_in_its_place"],"Symbols",125,null,null,null],["DO NOT LITTER SYMBOL","1F6AF","do_not_litter",["do_not_litter"],"Symbols",79,null,null,null],["POTABLE WATER SYMBOL","1F6B0","potable_water",["potable_water"],"Objects",84,null,null,null],["NON-POTABLE WATER SYMBOL","1F6B1","non-potable_water",["non-potable_water"],"Symbols",81,null,null,null],["BICYCLE","1F6B2","bike",["bike"],"Places",15,null,null,null],["NO BICYCLES","1F6B3","no_bicycles",["no_bicycles"],"Symbols",80,null,null,null],["BICYCLIST","1F6B4","bicyclist",["bicyclist"],"Activity",51,!0,null,null],["MOUNTAIN BICYCLIST","1F6B5","mountain_bicyclist",["mountain_bicyclist"],"Activity",53,!0,null,null],["PEDESTRIAN","1F6B6","walking",["walking"],"People",231,!0,null,null],["NO PEDESTRIANS","1F6B7","no_pedestrians",["no_pedestrians"],"Symbols",78,null,null,null],["CHILDREN CROSSING","1F6B8","children_crossing",["children_crossing"],"Symbols",95,null,null,null],["MENS SYMBOL","1F6B9","mens",["mens"],"Symbols",121,null,null,null],["WOMENS SYMBOL","1F6BA","womens",["womens"],"Symbols",122,null,null,null],["RESTROOM","1F6BB","restroom",["restroom"],"Symbols",124,null,null,null],["BABY SYMBOL","1F6BC","baby_symbol",["baby_symbol"],"Symbols",123,null,null,null],["TOILET","1F6BD","toilet",["toilet"],"Objects",83,null,null,null],["WATER CLOSET","1F6BE","wc",["wc"],"Symbols",112,null,null,null],["SHOWER","1F6BF","shower",["shower"],"Objects",85,null,null,null],["BATH","1F6C0","bath",["bath"],"Objects",87,!0,null,null],["BATHTUB","1F6C1","bathtub",["bathtub"],"Objects",86,null,null,null],["PASSPORT CONTROL","1F6C2","passport_control",["passport_control"],"Symbols",117,null,null,null],["CUSTOMS","1F6C3","customs",["customs"],"Symbols",118,null,null,null],["BAGGAGE CLAIM","1F6C4","baggage_claim",["baggage_claim"],"Symbols",119,null,null,null],["LEFT LUGGAGE","1F6C5","left_luggage",["left_luggage"],"Symbols",120,null,null,null],["COUCH AND LAMP","1F6CB","couch_and_lamp",["couch_and_lamp"],"Objects",92,null,null,null],["SLEEPING ACCOMMODATION","1F6CC","sleeping_accommodation",["sleeping_accommodation"],"Objects",94,!0,null,null],["SHOPPING BAGS","1F6CD","shopping_bags",["shopping_bags"],"Objects",96,null,null,null],["BELLHOP BELL","1F6CE","bellhop_bell",["bellhop_bell"],"Objects",88,null,null,null],["BED","1F6CF","bed",["bed"],"Objects",93,null,null,null],["PLACE OF WORSHIP","1F6D0","place_of_worship",["place_of_worship"],"Symbols",27,null,null,null],["OCTAGONAL SIGN","1F6D1","octagonal_sign",["octagonal_sign"],"Symbols",71,null,null,null],["SHOPPING TROLLEY","1F6D2","shopping_trolley",["shopping_trolley"],"Objects",97,null,null,null],["HAMMER AND WRENCH","1F6E0","hammer_and_wrench",["hammer_and_wrench"],"Objects",58,null,null,null],["SHIELD","1F6E1","shield",["shield"],"Objects",68,null,null,null],["OIL DRUM","1F6E2","oil_drum",["oil_drum"],"Objects",45,null,null,null],["MOTORWAY","1F6E3","motorway",["motorway"],"Places",81,null,null,null],["RAILWAY TRACK","1F6E4","railway_track",["railway_track"],"Places",80,null,null,null],["MOTOR BOAT","1F6E5","motor_boat",["motor_boat"],"Places",48,null,null,null],["SMALL AIRPLANE","1F6E9","small_airplane",["small_airplane"],"Places",39,null,null,null],["AIRPLANE DEPARTURE","1F6EB","airplane_departure",["airplane_departure"],"Places",41,null,null,null],["AIRPLANE ARRIVING","1F6EC","airplane_arriving",["airplane_arriving"],"Places",42,null,null,null],["SATELLITE","1F6F0","satellite",["satellite"],"Places",44,null,null,null],["PASSENGER SHIP","1F6F3","passenger_ship",["passenger_ship"],"Places",50,null,null,null],["SCOOTER","1F6F4","scooter",["scooter"],"Places",14,null,null,null],["MOTOR SCOOTER","1F6F5","motor_scooter",["motor_scooter"],"Places",16,null,null,null],["CANOE","1F6F6","canoe",["canoe"],"Places",46,null,null,null],["ZIPPER-MOUTH FACE","1F910","zipper_mouth_face",["zipper_mouth_face"],"People",70,null,null,null],["MONEY-MOUTH FACE","1F911","money_mouth_face",["money_mouth_face"],"People",25,null,null,null],["FACE WITH THERMOMETER","1F912","face_with_thermometer",["face_with_thermometer"],"People",74,null,null,null],["NERD FACE","1F913","nerd_face",["nerd_face"],"People",27,null,null,null],["THINKING FACE","1F914","thinking_face",["thinking_face"],"People",67,null,null,null],["FACE WITH HEAD-BANDAGE","1F915","face_with_head_bandage",["face_with_head_bandage"],"People",75,null,null,null],["ROBOT FACE","1F916","robot_face",["robot_face"],"People",86,null,null,null],["HUGGING FACE","1F917","hugging_face",["hugging_face"],"People",26,null,null,null],["SIGN OF THE HORNS","1F918","the_horns",["the_horns","sign_of_the_horns"],"People",110,!0,null,null],["CALL ME HAND","1F919","call_me_hand",["call_me_hand"],"People",122,!0,null,null],["RAISED BACK OF HAND","1F91A","raised_back_of_hand",["raised_back_of_hand"],"People",118,!0,null,null],["LEFT-FACING FIST","1F91B","left-facing_fist",["left-facing_fist"],"People",106,!0,null,null],["RIGHT-FACING FIST","1F91C","right-facing_fist",["right-facing_fist"],"People",107,!0,null,null],["HANDSHAKE","1F91D","handshake",["handshake"],"People",101,null,null,null],["HAND WITH INDEX AND MIDDLE FINGERS CROSSED","1F91E","hand_with_index_and_middle_fingers_crossed",["hand_with_index_and_middle_fingers_crossed"],"People",108,!0,null,null],["FACE WITH COWBOY HAT","1F920","face_with_cowboy_hat",["face_with_cowboy_hat"],"People",30,null,null,null],["CLOWN FACE","1F921","clown_face",["clown_face"],"People",29,null,null,null],["NAUSEATED FACE","1F922","nauseated_face",["nauseated_face"],"People",71,null,null,null],["ROLLING ON THE FLOOR LAUGHING","1F923","rolling_on_the_floor_laughing",["rolling_on_the_floor_laughing"],"People",8,null,null,null],["DROOLING FACE","1F924","drooling_face",["drooling_face"],"People",61,null,null,null],["LYING FACE","1F925","lying_face",["lying_face"],"People",68,null,null,null],["FACE PALM","1F926","face_palm",["face_palm"],"People",211,!0,null,null],["SNEEZING FACE","1F927","sneezing_face",["sneezing_face"],"People",72,null,null,null],["PREGNANT WOMAN","1F930","pregnant_woman",["pregnant_woman"],"People",200,!0,null,null],["SELFIE","1F933","selfie",["selfie"],"People",126,!0,null,null],["PRINCE","1F934","prince",["prince"],"People",196,!0,null,null],["MAN IN TUXEDO","1F935","man_in_tuxedo",["man_in_tuxedo"],"People",198,!0,null,null],["MOTHER CHRISTMAS","1F936","mother_christmas",["mother_christmas"],"People",193,!0,null,null],["SHRUG","1F937","shrug",["shrug"],"People",214,!0,null,null],["PERSON DOING CARTWHEEL","1F938","person_doing_cartwheel",["person_doing_cartwheel"],"Activity",30,!0,null,null],["JUGGLING","1F939","juggling",["juggling"],"Activity",66,!0,null,null],["FENCER","1F93A","fencer",["fencer"],"Activity",26,null,null,null],["WRESTLERS","1F93C","wrestlers",["wrestlers"],"Activity",27,null,null,null],["WATER POLO","1F93D","water_polo",["water_polo"],"Activity",44,!0,null,null],["HANDBALL","1F93E","handball",["handball"],"Activity",35,!0,null,null],["WILTED FLOWER","1F940","wilted_flower",["wilted_flower"],"Nature",108,null,null,null],["DRUM WITH DRUMSTICKS","1F941","drum_with_drumsticks",["drum_with_drumsticks"],"Activity",76,null,null,null],["CLINKING GLASSES","1F942","clinking_glasses",["clinking_glasses"],"Foods",78,null,null,null],["TUMBLER GLASS","1F943","tumbler_glass",["tumbler_glass"],"Foods",80,null,null,null],["SPOON","1F944","spoon",["spoon"],"Foods",84,null,null,null],["GOAL NET","1F945","goal_net",["goal_net"],"Activity",11,null,null,null],["FIRST PLACE MEDAL","1F947","first_place_medal",["first_place_medal"],"Activity",57,null,null,null],["SECOND PLACE MEDAL","1F948","second_place_medal",["second_place_medal"],"Activity",58,null,null,null],["THIRD PLACE MEDAL","1F949","third_place_medal",["third_place_medal"],"Activity",59,null,null,null],["BOXING GLOVE","1F94A","boxing_glove",["boxing_glove"],"Activity",18,null,null,null],["MARTIAL ARTS UNIFORM","1F94B","martial_arts_uniform",["martial_arts_uniform"],"Activity",19,null,null,null],["CROISSANT","1F950","croissant",["croissant"],"Foods",27,null,null,null],["AVOCADO","1F951","avocado",["avocado"],"Foods",15,null,null,null],["CUCUMBER","1F952","cucumber",["cucumber"],"Foods",18,null,null,null],["BACON","1F953","bacon",["bacon"],"Foods",33,null,null,null],["POTATO","1F954","potato",["potato"],"Foods",22,null,null,null],["CARROT","1F955","carrot",["carrot"],"Foods",19,null,null,null],["BAGUETTE BREAD","1F956","baguette_bread",["baguette_bread"],"Foods",29,null,null,null],["GREEN SALAD","1F957","green_salad",["green_salad"],"Foods",45,null,null,null],["SHALLOW PAN OF FOOD","1F958","shallow_pan_of_food",["shallow_pan_of_food"],"Foods",46,null,null,null],["STUFFED FLATBREAD","1F959","stuffed_flatbread",["stuffed_flatbread"],"Foods",42,null,null,null],["EGG","1F95A","egg",["egg"],"Foods",31,null,null,null],["GLASS OF MILK","1F95B","glass_of_milk",["glass_of_milk"],"Foods",71,null,null,null],["PEANUTS","1F95C","peanuts",["peanuts"],"Foods",25,null,null,null],["KIWIFRUIT","1F95D","kiwifruit",["kiwifruit"],"Foods",14,null,null,null],["PANCAKES","1F95E","pancakes",["pancakes"],"Foods",34,null,null,null],["CRAB","1F980","crab",["crab"],"Nature",48,null,null,null],["LION FACE","1F981","lion_face",["lion_face"],"Nature",11,null,null,null],["SCORPION","1F982","scorpion",["scorpion"],"Nature",47,null,null,null],["TURKEY","1F983","turkey",["turkey"],"Nature",80,null,null,null],["UNICORN FACE","1F984","unicorn_face",["unicorn_face"],"Nature",34,null,null,null],["EAGLE","1F985","eagle",["eagle"],"Nature",28,null,null,null],["DUCK","1F986","duck",["duck"],"Nature",27,null,null,null],["BAT","1F987","bat",["bat"],"Nature",30,null,null,null],["SHARK","1F988","shark",["shark"],"Nature",56,null,null,null],["OWL","1F989","owl",["owl"],"Nature",29,null,null,null],["FOX FACE","1F98A","fox_face",["fox_face"],"Nature",6,null,null,null],["BUTTERFLY","1F98B","butterfly",["butterfly"],"Nature",37,null,null,null],["DEER","1F98C","deer",["deer"],"Nature",65,null,null,null],["GORILLA","1F98D","gorilla",["gorilla"],"Nature",70,null,null,null],["LIZARD","1F98E","lizard",["lizard"],"Nature",46,null,null,null],["RHINOCEROS","1F98F","rhinoceros",["rhinoceros"],"Nature",69,null,null,null],["SHRIMP","1F990","shrimp",["shrimp"],"Nature",51,null,null,null],["SQUID","1F991","squid",["squid"],"Nature",49,null,null,null],["CHEESE WEDGE","1F9C0","cheese_wedge",["cheese_wedge"],"Foods",30,null,null,null],["HASH KEY","0023-20E3","hash",["hash"],"Symbols",152,null,null,null],[null,"002A-20E3","keycap_star",["keycap_star"],"Symbols",153,null,null,null],["KEYCAP 0","0030-20E3","zero",["zero"],"Symbols",140,null,null,null],["KEYCAP 1","0031-20E3","one",["one"],"Symbols",141,null,null,null],["KEYCAP 2","0032-20E3","two",["two"],"Symbols",142,null,null,null],["KEYCAP 3","0033-20E3","three",["three"],"Symbols",143,null,null,null],["KEYCAP 4","0034-20E3","four",["four"],"Symbols",144,null,null,null],["KEYCAP 5","0035-20E3","five",["five"],"Symbols",145,null,null,null],["KEYCAP 6","0036-20E3","six",["six"],"Symbols",146,null,null,null],["KEYCAP 7","0037-20E3","seven",["seven"],"Symbols",147,null,null,null],["KEYCAP 8","0038-20E3","eight",["eight"],"Symbols",148,null,null,null],["KEYCAP 9","0039-20E3","nine",["nine"],"Symbols",149,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS AC","1F1E6-1F1E8","flag-ac",["flag-ac"],"Flags",254,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS AD","1F1E6-1F1E9","flag-ad",["flag-ad"],"Flags",11,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS AE","1F1E6-1F1EA","flag-ae",["flag-ae"],"Flags",239,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS AF","1F1E6-1F1EB","flag-af",["flag-af"],"Flags",6,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS AG","1F1E6-1F1EC","flag-ag",["flag-ag"],"Flags",15,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS AI","1F1E6-1F1EE","flag-ai",["flag-ai"],"Flags",13,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS AL","1F1E6-1F1F1","flag-al",["flag-al"],"Flags",8,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS AM","1F1E6-1F1F2","flag-am",["flag-am"],"Flags",17,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS AO","1F1E6-1F1F4","flag-ao",["flag-ao"],"Flags",12,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS AQ","1F1E6-1F1F6","flag-aq",["flag-aq"],"Flags",14,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS AR","1F1E6-1F1F7","flag-ar",["flag-ar"],"Flags",16,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS AS","1F1E6-1F1F8","flag-as",["flag-as"],"Flags",10,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS AT","1F1E6-1F1F9","flag-at",["flag-at"],"Flags",20,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS AU","1F1E6-1F1FA","flag-au",["flag-au"],"Flags",19,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS AW","1F1E6-1F1FC","flag-aw",["flag-aw"],"Flags",18,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS AX","1F1E6-1F1FD","flag-ax",["flag-ax"],"Flags",7,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS AZ","1F1E6-1F1FF","flag-az",["flag-az"],"Flags",21,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS BA","1F1E7-1F1E6","flag-ba",["flag-ba"],"Flags",34,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS BB","1F1E7-1F1E7","flag-bb",["flag-bb"],"Flags",25,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS BD","1F1E7-1F1E9","flag-bd",["flag-bd"],"Flags",24,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS BE","1F1E7-1F1EA","flag-be",["flag-be"],"Flags",27,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS BF","1F1E7-1F1EB","flag-bf",["flag-bf"],"Flags",41,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS BG","1F1E7-1F1EC","flag-bg",["flag-bg"],"Flags",40,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS BH","1F1E7-1F1ED","flag-bh",["flag-bh"],"Flags",23,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS BI","1F1E7-1F1EE","flag-bi",["flag-bi"],"Flags",42,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS BJ","1F1E7-1F1EF","flag-bj",["flag-bj"],"Flags",29,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS BL","1F1E7-1F1F1","flag-bl",["flag-bl"],"Flags",191,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS BM","1F1E7-1F1F2","flag-bm",["flag-bm"],"Flags",30,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS BN","1F1E7-1F1F3","flag-bn",["flag-bn"],"Flags",39,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS BO","1F1E7-1F1F4","flag-bo",["flag-bo"],"Flags",32,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS BQ","1F1E7-1F1F6","flag-bq",["flag-bq"],"Flags",33,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS BR","1F1E7-1F1F7","flag-br",["flag-br"],"Flags",36,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS BS","1F1E7-1F1F8","flag-bs",["flag-bs"],"Flags",22,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS BT","1F1E7-1F1F9","flag-bt",["flag-bt"],"Flags",31,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS BV","1F1E7-1F1FB","flag-bv",["flag-bv"],"Flags",255,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS BW","1F1E7-1F1FC","flag-bw",["flag-bw"],"Flags",35,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS BY","1F1E7-1F1FE","flag-by",["flag-by"],"Flags",26,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS BZ","1F1E7-1F1FF","flag-bz",["flag-bz"],"Flags",28,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS CA","1F1E8-1F1E6","flag-ca",["flag-ca"],"Flags",46,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS CC","1F1E8-1F1E8","flag-cc",["flag-cc"],"Flags",54,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS CD","1F1E8-1F1E9","flag-cd",["flag-cd"],"Flags",58,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS CF","1F1E8-1F1EB","flag-cf",["flag-cf"],"Flags",49,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS CG","1F1E8-1F1EC","flag-cg",["flag-cg"],"Flags",57,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS CH","1F1E8-1F1ED","flag-ch",["flag-ch"],"Flags",221,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS CI","1F1E8-1F1EE","flag-ci",["flag-ci"],"Flags",61,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS CK","1F1E8-1F1F0","flag-ck",["flag-ck"],"Flags",59,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS CL","1F1E8-1F1F1","flag-cl",["flag-cl"],"Flags",51,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS CM","1F1E8-1F1F2","flag-cm",["flag-cm"],"Flags",45,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS CN","1F1E8-1F1F3","flag-cn",["flag-cn","cn"],"Flags",52,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS CO","1F1E8-1F1F4","flag-co",["flag-co"],"Flags",55,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS CP","1F1E8-1F1F5","flag-cp",["flag-cp"],"Flags",256,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS CR","1F1E8-1F1F7","flag-cr",["flag-cr"],"Flags",60,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS CU","1F1E8-1F1FA","flag-cu",["flag-cu"],"Flags",63,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS CV","1F1E8-1F1FB","flag-cv",["flag-cv"],"Flags",43,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS CW","1F1E8-1F1FC","flag-cw",["flag-cw"],"Flags",64,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS CX","1F1E8-1F1FD","flag-cx",["flag-cx"],"Flags",53,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS CY","1F1E8-1F1FE","flag-cy",["flag-cy"],"Flags",65,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS CZ","1F1E8-1F1FF","flag-cz",["flag-cz"],"Flags",66,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS DE","1F1E9-1F1EA","flag-de",["flag-de","de"],"Flags",90,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS DG","1F1E9-1F1EC","flag-dg",["flag-dg"],"Flags",257,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS DJ","1F1E9-1F1EF","flag-dj",["flag-dj"],"Flags",68,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS DK","1F1E9-1F1F0","flag-dk",["flag-dk"],"Flags",67,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS DM","1F1E9-1F1F2","flag-dm",["flag-dm"],"Flags",69,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS DO","1F1E9-1F1F4","flag-do",["flag-do"],"Flags",70,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS DZ","1F1E9-1F1FF","flag-dz",["flag-dz"],"Flags",9,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS EA","1F1EA-1F1E6","flag-ea",["flag-ea"],"Flags",258,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS EC","1F1EA-1F1E8","flag-ec",["flag-ec"],"Flags",71,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS EE","1F1EA-1F1EA","flag-ee",["flag-ee"],"Flags",76,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS EG","1F1EA-1F1EC","flag-eg",["flag-eg"],"Flags",72,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS EH","1F1EA-1F1ED","flag-eh",["flag-eh"],"Flags",250,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS ER","1F1EA-1F1F7","flag-er",["flag-er"],"Flags",75,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS ES","1F1EA-1F1F8","flag-es",["flag-es","es"],"Flags",215,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS ET","1F1EA-1F1F9","flag-et",["flag-et"],"Flags",77,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS EU","1F1EA-1F1FA","flag-eu",["flag-eu"],"Flags",78,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS FI","1F1EB-1F1EE","flag-fi",["flag-fi"],"Flags",82,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS FJ","1F1EB-1F1EF","flag-fj",["flag-fj"],"Flags",81,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS FK","1F1EB-1F1F0","flag-fk",["flag-fk"],"Flags",79,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS FM","1F1EB-1F1F2","flag-fm",["flag-fm"],"Flags",150,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS FO","1F1EB-1F1F4","flag-fo",["flag-fo"],"Flags",80,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS FR","1F1EB-1F1F7","flag-fr",["flag-fr","fr"],"Flags",83,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS GA","1F1EC-1F1E6","flag-ga",["flag-ga"],"Flags",87,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS GB","1F1EC-1F1E7","flag-gb",["flag-gb","gb","uk"],"Flags",240,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS GD","1F1EC-1F1E9","flag-gd",["flag-gd"],"Flags",95,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS GE","1F1EC-1F1EA","flag-ge",["flag-ge"],"Flags",89,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS GF","1F1EC-1F1EB","flag-gf",["flag-gf"],"Flags",84,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS GG","1F1EC-1F1EC","flag-gg",["flag-gg"],"Flags",99,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS GH","1F1EC-1F1ED","flag-gh",["flag-gh"],"Flags",91,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS GI","1F1EC-1F1EE","flag-gi",["flag-gi"],"Flags",92,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS GL","1F1EC-1F1F1","flag-gl",["flag-gl"],"Flags",94,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS GM","1F1EC-1F1F2","flag-gm",["flag-gm"],"Flags",88,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS GN","1F1EC-1F1F3","flag-gn",["flag-gn"],"Flags",100,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS GP","1F1EC-1F1F5","flag-gp",["flag-gp"],"Flags",96,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS GQ","1F1EC-1F1F6","flag-gq",["flag-gq"],"Flags",74,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS GR","1F1EC-1F1F7","flag-gr",["flag-gr"],"Flags",93,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS GS","1F1EC-1F1F8","flag-gs",["flag-gs"],"Flags",212,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS GT","1F1EC-1F1F9","flag-gt",["flag-gt"],"Flags",98,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS GU","1F1EC-1F1FA","flag-gu",["flag-gu"],"Flags",97,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS GW","1F1EC-1F1FC","flag-gw",["flag-gw"],"Flags",101,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS GY","1F1EC-1F1FE","flag-gy",["flag-gy"],"Flags",102,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS HK","1F1ED-1F1F0","flag-hk",["flag-hk"],"Flags",105,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS HM","1F1ED-1F1F2","flag-hm",["flag-hm"],"Flags",259,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS HN","1F1ED-1F1F3","flag-hn",["flag-hn"],"Flags",104,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS HR","1F1ED-1F1F7","flag-hr",["flag-hr"],"Flags",62,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS HT","1F1ED-1F1F9","flag-ht",["flag-ht"],"Flags",103,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS HU","1F1ED-1F1FA","flag-hu",["flag-hu"],"Flags",106,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS IC","1F1EE-1F1E8","flag-ic",["flag-ic"],"Flags",47,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS ID","1F1EE-1F1E9","flag-id",["flag-id"],"Flags",109,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS IE","1F1EE-1F1EA","flag-ie",["flag-ie"],"Flags",112,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS IL","1F1EE-1F1F1","flag-il",["flag-il"],"Flags",114,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS IM","1F1EE-1F1F2","flag-im",["flag-im"],"Flags",113,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS IN","1F1EE-1F1F3","flag-in",["flag-in"],"Flags",108,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS IO","1F1EE-1F1F4","flag-io",["flag-io"],"Flags",37,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS IQ","1F1EE-1F1F6","flag-iq",["flag-iq"],"Flags",111,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS IR","1F1EE-1F1F7","flag-ir",["flag-ir"],"Flags",110,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS IS","1F1EE-1F1F8","flag-is",["flag-is"],"Flags",107,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS IT","1F1EE-1F1F9","flag-it",["flag-it","it"],"Flags",115,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS JE","1F1EF-1F1EA","flag-je",["flag-je"],"Flags",119,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS JM","1F1EF-1F1F2","flag-jm",["flag-jm"],"Flags",116,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS JO","1F1EF-1F1F4","flag-jo",["flag-jo"],"Flags",120,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS JP","1F1EF-1F1F5","flag-jp",["flag-jp","jp"],"Flags",117,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS KE","1F1F0-1F1EA","flag-ke",["flag-ke"],"Flags",122,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS KG","1F1F0-1F1EC","flag-kg",["flag-kg"],"Flags",126,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS KH","1F1F0-1F1ED","flag-kh",["flag-kh"],"Flags",44,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS KI","1F1F0-1F1EE","flag-ki",["flag-ki"],"Flags",123,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS KM","1F1F0-1F1F2","flag-km",["flag-km"],"Flags",56,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS KN","1F1F0-1F1F3","flag-kn",["flag-kn"],"Flags",193,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS KP","1F1F0-1F1F5","flag-kp",["flag-kp"],"Flags",171,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS KR","1F1F0-1F1F7","flag-kr",["flag-kr","kr"],"Flags",213,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS KW","1F1F0-1F1FC","flag-kw",["flag-kw"],"Flags",125,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS KY","1F1F0-1F1FE","flag-ky",["flag-ky"],"Flags",48,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS KZ","1F1F0-1F1FF","flag-kz",["flag-kz"],"Flags",121,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS LA","1F1F1-1F1E6","flag-la",["flag-la"],"Flags",127,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS LB","1F1F1-1F1E7","flag-lb",["flag-lb"],"Flags",129,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS LC","1F1F1-1F1E8","flag-lc",["flag-lc"],"Flags",194,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS LI","1F1F1-1F1EE","flag-li",["flag-li"],"Flags",133,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS LK","1F1F1-1F1F0","flag-lk",["flag-lk"],"Flags",216,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS LR","1F1F1-1F1F7","flag-lr",["flag-lr"],"Flags",131,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS LS","1F1F1-1F1F8","flag-ls",["flag-ls"],"Flags",130,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS LT","1F1F1-1F1F9","flag-lt",["flag-lt"],"Flags",134,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS LU","1F1F1-1F1FA","flag-lu",["flag-lu"],"Flags",135,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS LV","1F1F1-1F1FB","flag-lv",["flag-lv"],"Flags",128,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS LY","1F1F1-1F1FE","flag-ly",["flag-ly"],"Flags",132,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS MA","1F1F2-1F1E6","flag-ma",["flag-ma"],"Flags",156,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS MC","1F1F2-1F1E8","flag-mc",["flag-mc"],"Flags",152,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS MD","1F1F2-1F1E9","flag-md",["flag-md"],"Flags",151,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS ME","1F1F2-1F1EA","flag-me",["flag-me"],"Flags",154,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS MF","1F1F2-1F1EB","flag-mf",["flag-mf"],"Flags",260,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS MG","1F1F2-1F1EC","flag-mg",["flag-mg"],"Flags",138,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS MH","1F1F2-1F1ED","flag-mh",["flag-mh"],"Flags",144,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS MK","1F1F2-1F1F0","flag-mk",["flag-mk"],"Flags",137,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS ML","1F1F2-1F1F1","flag-ml",["flag-ml"],"Flags",142,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS MM","1F1F2-1F1F2","flag-mm",["flag-mm"],"Flags",158,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS MN","1F1F2-1F1F3","flag-mn",["flag-mn"],"Flags",153,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS MO","1F1F2-1F1F4","flag-mo",["flag-mo"],"Flags",136,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS MP","1F1F2-1F1F5","flag-mp",["flag-mp"],"Flags",170,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS MQ","1F1F2-1F1F6","flag-mq",["flag-mq"],"Flags",145,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS MR","1F1F2-1F1F7","flag-mr",["flag-mr"],"Flags",146,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS MS","1F1F2-1F1F8","flag-ms",["flag-ms"],"Flags",155,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS MT","1F1F2-1F1F9","flag-mt",["flag-mt"],"Flags",143,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS MU","1F1F2-1F1FA","flag-mu",["flag-mu"],"Flags",147,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS MV","1F1F2-1F1FB","flag-mv",["flag-mv"],"Flags",141,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS MW","1F1F2-1F1FC","flag-mw",["flag-mw"],"Flags",139,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS MX","1F1F2-1F1FD","flag-mx",["flag-mx"],"Flags",149,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS MY","1F1F2-1F1FE","flag-my",["flag-my"],"Flags",140,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS MZ","1F1F2-1F1FF","flag-mz",["flag-mz"],"Flags",157,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS NA","1F1F3-1F1E6","flag-na",["flag-na"],"Flags",159,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS NC","1F1F3-1F1E8","flag-nc",["flag-nc"],"Flags",163,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS NE","1F1F3-1F1EA","flag-ne",["flag-ne"],"Flags",166,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS NF","1F1F3-1F1EB","flag-nf",["flag-nf"],"Flags",169,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS NG","1F1F3-1F1EC","flag-ng",["flag-ng"],"Flags",167,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS NI","1F1F3-1F1EE","flag-ni",["flag-ni"],"Flags",165,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS NL","1F1F3-1F1F1","flag-nl",["flag-nl"],"Flags",162,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS NO","1F1F3-1F1F4","flag-no",["flag-no"],"Flags",172,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS NP","1F1F3-1F1F5","flag-np",["flag-np"],"Flags",161,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS NR","1F1F3-1F1F7","flag-nr",["flag-nr"],"Flags",160,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS NU","1F1F3-1F1FA","flag-nu",["flag-nu"],"Flags",168,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS NZ","1F1F3-1F1FF","flag-nz",["flag-nz"],"Flags",164,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS OM","1F1F4-1F1F2","flag-om",["flag-om"],"Flags",173,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS PA","1F1F5-1F1E6","flag-pa",["flag-pa"],"Flags",177,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS PE","1F1F5-1F1EA","flag-pe",["flag-pe"],"Flags",180,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS PF","1F1F5-1F1EB","flag-pf",["flag-pf"],"Flags",85,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS PG","1F1F5-1F1EC","flag-pg",["flag-pg"],"Flags",178,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS PH","1F1F5-1F1ED","flag-ph",["flag-ph"],"Flags",181,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS PK","1F1F5-1F1F0","flag-pk",["flag-pk"],"Flags",174,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS PL","1F1F5-1F1F1","flag-pl",["flag-pl"],"Flags",183,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS PM","1F1F5-1F1F2","flag-pm",["flag-pm"],"Flags",195,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS PN","1F1F5-1F1F3","flag-pn",["flag-pn"],"Flags",182,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS PR","1F1F5-1F1F7","flag-pr",["flag-pr"],"Flags",185,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS PS","1F1F5-1F1F8","flag-ps",["flag-ps"],"Flags",176,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS PT","1F1F5-1F1F9","flag-pt",["flag-pt"],"Flags",184,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS PW","1F1F5-1F1FC","flag-pw",["flag-pw"],"Flags",175,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS PY","1F1F5-1F1FE","flag-py",["flag-py"],"Flags",179,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS QA","1F1F6-1F1E6","flag-qa",["flag-qa"],"Flags",186,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS RE","1F1F7-1F1EA","flag-re",["flag-re"],"Flags",187,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS RO","1F1F7-1F1F4","flag-ro",["flag-ro"],"Flags",188,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS RS","1F1F7-1F1F8","flag-rs",["flag-rs"],"Flags",202,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS RU","1F1F7-1F1FA","flag-ru",["flag-ru","ru"],"Flags",189,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS RW","1F1F7-1F1FC","flag-rw",["flag-rw"],"Flags",190,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS SA","1F1F8-1F1E6","flag-sa",["flag-sa"],"Flags",200,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS SB","1F1F8-1F1E7","flag-sb",["flag-sb"],"Flags",209,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS SC","1F1F8-1F1E8","flag-sc",["flag-sc"],"Flags",203,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS SD","1F1F8-1F1E9","flag-sd",["flag-sd"],"Flags",217,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS SE","1F1F8-1F1EA","flag-se",["flag-se"],"Flags",220,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS SG","1F1F8-1F1EC","flag-sg",["flag-sg"],"Flags",205,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS SH","1F1F8-1F1ED","flag-sh",["flag-sh"],"Flags",192,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS SI","1F1F8-1F1EE","flag-si",["flag-si"],"Flags",208,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS SJ","1F1F8-1F1EF","flag-sj",["flag-sj"],"Flags",261,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS SK","1F1F8-1F1F0","flag-sk",["flag-sk"],"Flags",207,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS SL","1F1F8-1F1F1","flag-sl",["flag-sl"],"Flags",204,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS SM","1F1F8-1F1F2","flag-sm",["flag-sm"],"Flags",198,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS SN","1F1F8-1F1F3","flag-sn",["flag-sn"],"Flags",201,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS SO","1F1F8-1F1F4","flag-so",["flag-so"],"Flags",210,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS SR","1F1F8-1F1F7","flag-sr",["flag-sr"],"Flags",218,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS SS","1F1F8-1F1F8","flag-ss",["flag-ss"],"Flags",214,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS ST","1F1F8-1F1F9","flag-st",["flag-st"],"Flags",199,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS SV","1F1F8-1F1FB","flag-sv",["flag-sv"],"Flags",73,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS SX","1F1F8-1F1FD","flag-sx",["flag-sx"],"Flags",206,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS SY","1F1F8-1F1FE","flag-sy",["flag-sy"],"Flags",222,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS SZ","1F1F8-1F1FF","flag-sz",["flag-sz"],"Flags",219,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS TA","1F1F9-1F1E6","flag-ta",["flag-ta"],"Flags",262,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS TC","1F1F9-1F1E8","flag-tc",["flag-tc"],"Flags",235,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS TD","1F1F9-1F1E9","flag-td",["flag-td"],"Flags",50,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS TF","1F1F9-1F1EB","flag-tf",["flag-tf"],"Flags",86,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS TG","1F1F9-1F1EC","flag-tg",["flag-tg"],"Flags",228,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS TH","1F1F9-1F1ED","flag-th",["flag-th"],"Flags",226,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS TJ","1F1F9-1F1EF","flag-tj",["flag-tj"],"Flags",224,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS TK","1F1F9-1F1F0","flag-tk",["flag-tk"],"Flags",229,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS TL","1F1F9-1F1F1","flag-tl",["flag-tl"],"Flags",227,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS TM","1F1F9-1F1F2","flag-tm",["flag-tm"],"Flags",234,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS TN","1F1F9-1F1F3","flag-tn",["flag-tn"],"Flags",232,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS TO","1F1F9-1F1F4","flag-to",["flag-to"],"Flags",230,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS TR","1F1F9-1F1F7","flag-tr",["flag-tr"],"Flags",233,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS TT","1F1F9-1F1F9","flag-tt",["flag-tt"],"Flags",231,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS TV","1F1F9-1F1FB","flag-tv",["flag-tv"],"Flags",236,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS TW","1F1F9-1F1FC","flag-tw",["flag-tw"],"Flags",223,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS TZ","1F1F9-1F1FF","flag-tz",["flag-tz"],"Flags",225,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS UA","1F1FA-1F1E6","flag-ua",["flag-ua"],"Flags",238,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS UG","1F1FA-1F1EC","flag-ug",["flag-ug"],"Flags",237,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS UM","1F1FA-1F1F2","flag-um",["flag-um"],"Flags",263,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS UN","1F1FA-1F1F3","flag-un",["flag-un"],"Flags",264,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS US","1F1FA-1F1F8","flag-us",["flag-us","us"],"Flags",241,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS UY","1F1FA-1F1FE","flag-uy",["flag-uy"],"Flags",243,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS UZ","1F1FA-1F1FF","flag-uz",["flag-uz"],"Flags",244,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS VA","1F1FB-1F1E6","flag-va",["flag-va"],"Flags",246,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS VC","1F1FB-1F1E8","flag-vc",["flag-vc"],"Flags",196,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS VE","1F1FB-1F1EA","flag-ve",["flag-ve"],"Flags",247,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS VG","1F1FB-1F1EC","flag-vg",["flag-vg"],"Flags",38,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS VI","1F1FB-1F1EE","flag-vi",["flag-vi"],"Flags",242,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS VN","1F1FB-1F1F3","flag-vn",["flag-vn"],"Flags",248,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS VU","1F1FB-1F1FA","flag-vu",["flag-vu"],"Flags",245,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS WF","1F1FC-1F1EB","flag-wf",["flag-wf"],"Flags",249,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS WS","1F1FC-1F1F8","flag-ws",["flag-ws"],"Flags",197,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS XK","1F1FD-1F1F0","flag-xk",["flag-xk"],"Flags",124,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS YE","1F1FE-1F1EA","flag-ye",["flag-ye"],"Flags",251,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS YT","1F1FE-1F1F9","flag-yt",["flag-yt"],"Flags",148,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS ZA","1F1FF-1F1E6","flag-za",["flag-za"],"Flags",211,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS ZM","1F1FF-1F1F2","flag-zm",["flag-zm"],"Flags",252,null,null,null],["REGIONAL INDICATOR SYMBOL LETTERS ZW","1F1FF-1F1FC","flag-zw",["flag-zw"],"Flags",253,null,null,null],[null,"1F468-200D-1F33E","male-farmer",["male-farmer"],"People",164,!0,null,null],[null,"1F468-200D-1F373","male-cook",["male-cook"],"People",166,!0,null,null],[null,"1F468-200D-1F393","male-student",["male-student"],"People",168,!0,null,null],[null,"1F468-200D-1F3A4","male-singer",["male-singer"],"People",170,!0,null,null],[null,"1F468-200D-1F3A8","male-artist",["male-artist"],"People",184,!0,null,null],[null,"1F468-200D-1F3EB","male-teacher",["male-teacher"],"People",172,!0,null,null],[null,"1F468-200D-1F3ED","male-factory-worker",["male-factory-worker"],"People",174,!0,null,null],[null,"1F468-200D-1F466","man-boy",["man-boy"],"People",263,null,null,null],[null,"1F468-200D-1F467","man-girl",["man-girl"],"People",264,null,null,null],[null,"1F468-200D-1F4BB","male-technologist",["male-technologist"],"People",176,!0,null,null],[null,"1F468-200D-1F4BC","male-office-worker",["male-office-worker"],"People",178,!0,null,null],[null,"1F468-200D-1F527","male-mechanic",["male-mechanic"],"People",180,!0,null,null],[null,"1F468-200D-1F52C","male-scientist",["male-scientist"],"People",182,!0,null,null],[null,"1F468-200D-1F680","male-astronaut",["male-astronaut"],"People",190,!0,null,null],[null,"1F468-200D-1F692","male-firefighter",["male-firefighter"],"People",186,!0,null,null],[null,"1F469-200D-1F33E","female-farmer",["female-farmer"],"People",163,!0,null,null],[null,"1F469-200D-1F373","female-cook",["female-cook"],"People",165,!0,null,null],[null,"1F469-200D-1F393","female-student",["female-student"],"People",167,!0,null,null],[null,"1F469-200D-1F3A4","female-singer",["female-singer"],"People",169,!0,null,null],[null,"1F469-200D-1F3A8","female-artist",["female-artist"],"People",183,!0,null,null],[null,"1F469-200D-1F3EB","female-teacher",["female-teacher"],"People",171,!0,null,null],[null,"1F469-200D-1F3ED","female-factory-worker",["female-factory-worker"],"People",173,!0,null,null],[null,"1F469-200D-1F466","woman-boy",["woman-boy"],"People",258,null,null,null],[null,"1F469-200D-1F467","woman-girl",["woman-girl"],"People",259,null,null,null],[null,"1F469-200D-1F4BB","female-technologist",["female-technologist"],"People",175,!0,null,null],[null,"1F469-200D-1F4BC","female-office-worker",["female-office-worker"],"People",177,!0,null,null],[null,"1F469-200D-1F527","female-mechanic",["female-mechanic"],"People",179,!0,null,null],[null,"1F469-200D-1F52C","female-scientist",["female-scientist"],"People",181,!0,null,null],[null,"1F469-200D-1F680","female-astronaut",["female-astronaut"],"People",189,!0,null,null],[null,"1F469-200D-1F692","female-firefighter",["female-firefighter"],"People",185,!0,null,null],[null,"1F3C3-200D-2640-FE0F","woman-running",["woman-running"],"People",232,!0,null,null],[null,"1F3C3-200D-2642-FE0F","man-running",["man-running"],"People",304,!0,null,null],[null,"1F3C4-200D-2640-FE0F","woman-surfing",["woman-surfing"],"Activity",40,!0,null,null],[null,"1F3C4-200D-2642-FE0F","man-surfing",["man-surfing"],"Activity",89,!0,null,null],[null,"1F3CA-200D-2640-FE0F","woman-swimming",["woman-swimming"],"Activity",42,!0,null,null],[null,"1F3CA-200D-2642-FE0F","man-swimming",["man-swimming"],"Activity",90,!0,null,null],[null,"1F3CB-FE0F-200D-2640-FE0F","woman-lifting-weights",["woman-lifting-weights"],"Activity",24,!0,null,null],[null,"1F3CB-FE0F-200D-2642-FE0F","man-lifting-weights",["man-lifting-weights"],"Activity",87,!0,null,null],[null,"1F3CC-FE0F-200D-2640-FE0F","woman-golfing",["woman-golfing"],"Activity",38,!0,null,null],[null,"1F3CC-FE0F-200D-2642-FE0F","man-golfing",["man-golfing"],"Activity",88,!0,null,null],[null,"1F3F3-FE0F-200D-1F308","rainbow-flag",["rainbow-flag"],"Flags",5,null,null,null],[null,"1F441-FE0F-200D-1F5E8-FE0F","eye-in-speech-bubble",["eye-in-speech-bubble"],"Symbols",238,null,null,null],[null,"1F468-200D-1F466-200D-1F466","man-boy-boy",["man-boy-boy"],"People",266,null,null,null],[null,"1F468-200D-1F467-200D-1F466","man-girl-boy",["man-girl-boy"],"People",265,null,null,null],[null,"1F468-200D-1F467-200D-1F467","man-girl-girl",["man-girl-girl"],"People",267,null,null,null],[null,"1F468-200D-1F468-200D-1F466","man-man-boy",["man-man-boy"],"People",253,null,null,null],[null,"1F468-200D-1F468-200D-1F466-200D-1F466","man-man-boy-boy",["man-man-boy-boy"],"People",256,null,null,null],[null,"1F468-200D-1F468-200D-1F467","man-man-girl",["man-man-girl"],"People",254,null,null,null],[null,"1F468-200D-1F468-200D-1F467-200D-1F466","man-man-girl-boy",["man-man-girl-boy"],"People",255,null,null,null],[null,"1F468-200D-1F468-200D-1F467-200D-1F467","man-man-girl-girl",["man-man-girl-girl"],"People",257,null,null,null],[null,"1F468-200D-1F469-200D-1F466","man-woman-boy",["man-woman-boy","family"],"People",294,null,null,null],[null,"1F468-200D-1F469-200D-1F466-200D-1F466","man-woman-boy-boy",["man-woman-boy-boy"],"People",246,null,null,null],[null,"1F468-200D-1F469-200D-1F467","man-woman-girl",["man-woman-girl"],"People",244,null,null,null],[null,"1F468-200D-1F469-200D-1F467-200D-1F466","man-woman-girl-boy",["man-woman-girl-boy"],"People",245,null,null,null],[null,"1F468-200D-1F469-200D-1F467-200D-1F467","man-woman-girl-girl",["man-woman-girl-girl"],"People",247,null,null,null],[null,"1F468-200D-2695-FE0F","male-doctor",["male-doctor"],"People",162,!0,null,null],[null,"1F468-200D-2696-FE0F","male-judge",["male-judge"],"People",192,!0,null,null],[null,"1F468-200D-2708-FE0F","male-pilot",["male-pilot"],"People",188,!0,null,null],[null,"1F468-200D-2764-FE0F-200D-1F468","man-heart-man",["man-heart-man"],"People",239,null,null,null],[null,"1F468-200D-2764-FE0F-200D-1F48B-200D-1F468","man-kiss-man",["man-kiss-man"],"People",242,null,null,null],[null,"1F469-200D-1F466-200D-1F466","woman-boy-boy",["woman-boy-boy"],"People",261,null,null,null],[null,"1F469-200D-1F467-200D-1F466","woman-girl-boy",["woman-girl-boy"],"People",260,null,null,null],[null,"1F469-200D-1F467-200D-1F467","woman-girl-girl",["woman-girl-girl"],"People",262,null,null,null],[null,"1F469-200D-1F469-200D-1F466","woman-woman-boy",["woman-woman-boy"],"People",248,null,null,null],[null,"1F469-200D-1F469-200D-1F466-200D-1F466","woman-woman-boy-boy",["woman-woman-boy-boy"],"People",251,null,null,null],[null,"1F469-200D-1F469-200D-1F467","woman-woman-girl",["woman-woman-girl"],"People",249,null,null,null],[null,"1F469-200D-1F469-200D-1F467-200D-1F466","woman-woman-girl-boy",["woman-woman-girl-boy"],"People",250,null,null,null],[null,"1F469-200D-1F469-200D-1F467-200D-1F467","woman-woman-girl-girl",["woman-woman-girl-girl"],"People",252,null,null,null],[null,"1F469-200D-2695-FE0F","female-doctor",["female-doctor"],"People",161,!0,null,null],[null,"1F469-200D-2696-FE0F","female-judge",["female-judge"],"People",191,!0,null,null],[null,"1F469-200D-2708-FE0F","female-pilot",["female-pilot"],"People",187,!0,null,null],[null,"1F469-200D-2764-FE0F-200D-1F468","woman-heart-man",["woman-heart-man"],"People",295,null,null,null],[null,"1F469-200D-2764-FE0F-200D-1F469","woman-heart-woman",["woman-heart-woman"],"People",238,null,null,null],[null,"1F469-200D-2764-FE0F-200D-1F48B-200D-1F468","woman-kiss-man",["woman-kiss-man"],"People",296,null,null,null],[null,"1F469-200D-2764-FE0F-200D-1F48B-200D-1F469","woman-kiss-woman",["woman-kiss-woman"],"People",241,null,null,null],[null,"1F46E-200D-2640-FE0F","female-police-officer",["female-police-officer"],"People",153,!0,null,null],[null,"1F46E-200D-2642-FE0F","male-police-officer",["male-police-officer"],"People",297,!0,null,null],[null,"1F46F-200D-2640-FE0F","woman-with-bunny-ears-partying",["woman-with-bunny-ears-partying"],"People",303,null,null,null],[null,"1F46F-200D-2642-FE0F","man-with-bunny-ears-partying",["man-with-bunny-ears-partying"],"People",229,null,null,null],[null,"1F471-200D-2640-FE0F","blond-haired-woman",["blond-haired-woman"],"People",146,!0,null,null],[null,"1F471-200D-2642-FE0F","blond-haired-man",["blond-haired-man"],"People",298,!0,null,null],[null,"1F473-200D-2640-FE0F","woman-wearing-turban",["woman-wearing-turban"],"People",151,!0,null,null],[null,"1F473-200D-2642-FE0F","man-wearing-turban",["man-wearing-turban"],"People",299,!0,null,null],[null,"1F477-200D-2640-FE0F","female-construction-worker",["female-construction-worker"],"People",155,!0,null,null],[null,"1F477-200D-2642-FE0F","male-construction-worker",["male-construction-worker"],"People",300,!0,null,null],[null,"1F481-200D-2640-FE0F","woman-tipping-hand",["woman-tipping-hand"],"People",308,!0,null,null],[null,"1F481-200D-2642-FE0F","man-tipping-hand",["man-tipping-hand"],"People",204,!0,null,null],[null,"1F482-200D-2640-FE0F","female-guard",["female-guard"],"People",157,!0,null,null],[null,"1F482-200D-2642-FE0F","male-guard",["male-guard"],"People",301,!0,null,null],[null,"1F486-200D-2640-FE0F","woman-getting-massage",["woman-getting-massage"],"People",305,!0,null,null],[null,"1F486-200D-2642-FE0F","man-getting-massage",["man-getting-massage"],"People",224,!0,null,null],[null,"1F487-200D-2640-FE0F","woman-getting-haircut",["woman-getting-haircut"],"People",306,!0,null,null],[null,"1F487-200D-2642-FE0F","man-getting-haircut",["man-getting-haircut"],"People",222,!0,null,null],[null,"1F575-FE0F-200D-2640-FE0F","female-detective",["female-detective"],"People",159,!0,null,null],[null,"1F575-FE0F-200D-2642-FE0F","male-detective",["male-detective"],"People",302,!0,null,null],[null,"1F645-200D-2640-FE0F","woman-gesturing-no",["woman-gesturing-no"],"People",309,!0,null,null],[null,"1F645-200D-2642-FE0F","man-gesturing-no",["man-gesturing-no"],"People",206,!0,null,null],[null,"1F646-200D-2640-FE0F","woman-gesturing-ok",["woman-gesturing-ok"],"People",310,!0,null,null],[null,"1F646-200D-2642-FE0F","man-gesturing-ok",["man-gesturing-ok"],"People",208,!0,null,null],[null,"1F647-200D-2640-FE0F","woman-bowing",["woman-bowing"],"People",201,!0,null,null],[null,"1F647-200D-2642-FE0F","man-bowing",["man-bowing"],"People",311,!0,null,null],[null,"1F64B-200D-2640-FE0F","woman-raising-hand",["woman-raising-hand"],"People",312,!0,null,null],[null,"1F64B-200D-2642-FE0F","man-raising-hand",["man-raising-hand"],"People",210,!0,null,null],[null,"1F64D-200D-2640-FE0F","woman-frowning",["woman-frowning"],"People",313,!0,null,null],[null,"1F64D-200D-2642-FE0F","man-frowning",["man-frowning"],"People",220,!0,null,null],[null,"1F64E-200D-2640-FE0F","woman-pouting",["woman-pouting"],"People",314,!0,null,null],[null,"1F64E-200D-2642-FE0F","man-pouting",["man-pouting"],"People",218,!0,null,null],[null,"1F6A3-200D-2640-FE0F","woman-rowing-boat",["woman-rowing-boat"],"Activity",47,!0,null,null],[null,"1F6A3-200D-2642-FE0F","man-rowing-boat",["man-rowing-boat"],"Activity",91,!0,null,null],[null,"1F6B4-200D-2640-FE0F","woman-biking",["woman-biking"],"Activity",50,!0,null,null],[null,"1F6B4-200D-2642-FE0F","man-biking",["man-biking"],"Activity",92,!0,null,null],[null,"1F6B5-200D-2640-FE0F","woman-mountain-biking",["woman-mountain-biking"],"Activity",52,!0,null,null],[null,"1F6B5-200D-2642-FE0F","man-mountain-biking",["man-mountain-biking"],"Activity",93,!0,null,null],[null,"1F6B6-200D-2640-FE0F","woman-walking",["woman-walking"],"People",230,!0,null,null],[null,"1F6B6-200D-2642-FE0F","man-walking",["man-walking"],"People",307,!0,null,null],[null,"1F926-200D-2640-FE0F","woman-facepalming",["woman-facepalming"],"People",212,!0,null,null],[null,"1F926-200D-2642-FE0F","man-facepalming",["man-facepalming"],"People",213,!0,null,null],[null,"1F937-200D-2640-FE0F","woman-shrugging",["woman-shrugging"],"People",215,!0,null,null],[null,"1F937-200D-2642-FE0F","man-shrugging",["man-shrugging"],"People",216,!0,null,null],[null,"1F938-200D-2640-FE0F","woman-cartwheeling",["woman-cartwheeling"],"Activity",31,!0,null,null],[null,"1F938-200D-2642-FE0F","man-cartwheeling",["man-cartwheeling"],"Activity",32,!0,null,null],[null,"1F939-200D-2640-FE0F","woman-juggling",["woman-juggling"],"Activity",67,!0,null,null],[null,"1F939-200D-2642-FE0F","man-juggling",["man-juggling"],"Activity",68,!0,null,null],[null,"1F93C-200D-2640-FE0F","woman-wrestling",["woman-wrestling"],"Activity",28,null,null,null],[null,"1F93C-200D-2642-FE0F","man-wrestling",["man-wrestling"],"Activity",29,null,null,null],[null,"1F93D-200D-2640-FE0F","woman-playing-water-polo",["woman-playing-water-polo"],"Activity",45,!0,null,null],[null,"1F93D-200D-2642-FE0F","man-playing-water-polo",["man-playing-water-polo"],"Activity",46,!0,null,null],[null,"1F93E-200D-2640-FE0F","woman-playing-handball",["woman-playing-handball"],"Activity",36,!0,null,null],[null,"1F93E-200D-2642-FE0F","man-playing-handball",["man-playing-handball"],"Activity",37,!0,null,null],[null,"26F9-FE0F-200D-2640-FE0F","woman-bouncing-ball",["woman-bouncing-ball"],"Activity",33,!0,null,null],[null,"26F9-FE0F-200D-2642-FE0F","man-bouncing-ball",["man-bouncing-ball"],"Activity",86,!0,null,null]]);
return o.prototype.buildShortNameIndex=function(){var e={},t=[],n=function(t){return function(n,i){if(e.hasOwnProperty(n))return t&&console&&console.warn&&console.warn('duplicate short name "'+n+'" from',i,"first seen in:",e[n]),!0}}(this._warn_duplicates);this.data.forEach(function(i){n(i.short_name,i)&&e[i.short_name].short_name===i.short_name||(e[i.short_name]=i,t.push(i.short_name),i.short_names&&i.short_names.length&&i.short_names.forEach(function(o){o!==i.short_name&&(n(o,i)||(e[o]=i,t.push(o)))}))}),this.dataByShortName=e,this.allShortNames=t},o.prototype.codepoints=function(e,t){return e=e.toLowerCase(),this.dataByShortName.hasOwnProperty(e)&&(t||this.dataByShortName[e].short_name===e)?this.dataByShortName[e].unified:null},o.prototype.encodeShortName=function(e,t){var n,o=/([^:]*)::(skin-tone-[2-6])/.exec(e);if(o){var r=this.codepoints(o[2],t),s=this.codepoints(o[1],t);if(r){if(s){var l=/(.*)-(200D-.*)/i.exec(s);return i(l?l[1]+"-"+r+"-"+l[2]:s+"-"+r)}}else if(s)return i(s)+":"+o[2]}else if(n=this.codepoints(e,t))return i(n);return e},o.prototype._replaceColonsStr=function(e){for(var t,n,i=0,o=/^:([^ :]+(::skin-tone-[2-6])?):/,r="";e.length;){if(i=e.indexOf(":"),!(i>=0)){r+=e;break}r+=e.substring(0,i),e=e.substring(i),t=o.exec(e),t?(n=this.encodeShortName(t[1]),r+=n!=t[1]?n:t[0],e=e.substring(t[0].length)):(r+=e.substring(0,1),e=e.substring(1))}return r},o.prototype._replaceColonsNode=function(e){var n=t(e,[]),i=this;n.forEach(function(e){var t=e.nodeValue,n=i._replaceColonsStr(t);if(n!==t){var o=document.createDocumentFragment();o.appendChild(document.createTextNode(n)),e.parentNode.replaceChild(o,e)}})},o.prototype.replaceColons=function(e){return"string"==typeof e?this._replaceColonsStr(e):this._replaceColonsNode(e)},o.prototype.primaryShortName=function(e){if(e=e.toLowerCase(),this.dataByShortName.hasOwnProperty(e))return this.dataByShortName[e].short_name;var t=/([^:]*)::(skin-tone-[2-6])/.exec(e);if(t){var n=this.primaryShortName(t[1]);if(n&&this.dataByShortName.hasOwnProperty(n)&&this.dataByShortName[n].skin_variations){var i=this.primaryShortName(t[2]);if(n&&i)return n+"::"+i}}return null},o.prototype.possibleShortNames=function(e){var t=new RegExp(e.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&"),"i");return this.allShortNames.filter(function(e){return t.exec(e)})},o}),function(){function e(e){this.tokens=[],this.tokens.links={},this.options=e||u.defaults,this.rules=c.normal,this.options.gfm&&(this.options.tables?this.rules=c.tables:this.rules=c.gfm)}function t(e,t){if(this.options=t||u.defaults,this.links=e,this.rules=d.normal,this.renderer=this.options.renderer||new n,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=d.breaks:this.rules=d.gfm:this.options.pedantic&&(this.rules=d.pedantic)}function n(){}function i(e){this.tokens=[],this.token=null,this.options=e||u.defaults,this.options.renderer=this.options.renderer||new n,this.renderer=this.options.renderer}function o(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function r(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/g,function(e,t){return t=t.toLowerCase(),"colon"===t?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function s(e,t){return e=e.source,t=t||"",function n(i,o){return i?(o=o.source||o,o=o.replace(/(^|[^\[])\^/g,"$1"),e=e.replace(i,o),n):new RegExp(e,t)}}function l(){}function a(e){for(var t,n,i=1;i<arguments.length;i++){t=arguments[i];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}function u(t,n,r){if(r||"function"==typeof n){r||(r=n,n=null),n=a({},u.defaults,n||{});var s,l,c=n.highlight;try{s=e.lex(t,n)}catch(e){return r(e)}l=s.length;var d=function(){var e,t;try{e=i.parse(s,n)}catch(e){t=e}return n.highlight=c,t?r(t):r(null,e)};return d()}try{return n&&(n=a({},u.defaults,n)),i.parse(e.lex(t,n),n)}catch(e){if(e.message+="\nPlease report this to oops@coggle.it",(n||u.defaults).silent)return'<div class="error" title="'+o(e.message+"",!0)+'">error</div>';throw e}}var c={newline:/^\n/,code:/^( {4}[^\n]+\n*)+/,fences:l,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]*)(?:\n|$)/,nptable:l,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]*(\n[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(']([^\n]+)[")'])?imgsize *(?:\n+|$)/,table:l,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n?/,text:/^[^\n]+/};c._imgsize=/(\s+([0-9]+)\s*x?\s*([0-9]+)?)?/,c.def=s(c.def)("imgsize",c._imgsize)(),c.taskbullet=/(- \[([xX\/\\ ])\])/,c.olbullet=/\d+\.|taskbullet/,c.bullet=/(?:taskbullet|[*+-]|olbullet)/,c.bullet=s(c.bullet)("olbullet",c.olbullet)("taskbullet",c.taskbullet)(),c.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,c.item=s(c.item,"gm")(/bull/g,c.bullet)(),c.list=s(c.list)(/bull/g,c.bullet)("hr",/\n+(?=(?: *[-*_]){3,} *(?:\n+|$))/)(),c._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|@)\\b",c.html=s(c.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,c._tag)(),c.paragraph=s(c.paragraph)("hr",c.hr)("heading",c.heading)("lheading",c.lheading)("blockquote",c.blockquote)("tag","<"+c._tag)("def",c.def)(),c.normal=a({},c),c.gfm=a({},c.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),c.gfm.paragraph=s(c.paragraph)("(?!","(?!"+c.gfm.fences.source.replace("\\1","\\2")+"|"+c.list.source.replace("\\1","\\3")+"|")(),c.tables=a({},c.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),e.rules=c,e.lex=function(t,n){var i=new e(n);return i.lex(t)},e.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0,0)},e.prototype.token=function(e,t,n){var i,o,r,s,l,a,u,d,h,p,f,g,e=e.replace(/^ +$/gm,"");for(n=n||0;e;)if(r=this.rules.newline.exec(e))e=e.substring(r[0].length),r[0].length&&this.tokens.push({type:"newline",position:n}),n+=r[0].length;else if(r=this.rules.code.exec(e))e=e.substring(r[0].length),r=r[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",position:n,text:this.options.pedantic?r:r.replace(/\n+$/,"")}),n+=r[0].length;else if(r=this.rules.fences.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"code",position:n,lang:r[2],text:r[3]}),n+=r[0].length;else if(r=this.rules.heading.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"heading",position:n+(r[0].length-r[2].length),depth:r[1].length,text:r[2]}),n+=r[0].length;else if(t&&(r=this.rules.nptable.exec(e))){for(e=e.substring(r[0].length),h={type:"table",position:n,header:r[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3].replace(/\n$/,"").split("\n")},f=0;f<h.align.length;f++)/^ *-+: *$/.test(h.align[f])?h.align[f]="right":/^ *:-+: *$/.test(h.align[f])?h.align[f]="center":/^ *:-+ *$/.test(h.align[f])?h.align[f]="left":h.align[f]=null;for(f=0;f<h.cells.length;f++)h.cells[f]=h.cells[f].split(/ *\| */);this.tokens.push(h),n+=r[0].length}else if(r=this.rules.lheading.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"heading",position:n,depth:"="===r[2]?1:2,text:r[1]}),n+=r[0].length;else if(r=this.rules.hr.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"hr",position:n}),n+=r[0].length;else if(r=this.rules.blockquote.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"blockquote_start",position:n}),n+=r[0].length,r=r[0].replace(/^ *> ?/gm,""),this.token(r,t),this.tokens.push({type:"blockquote_end"});else if(r=this.rules.list.exec(e)){e=e.substring(r[0].length),s=r[2],l=c.taskbullet.exec(s),this.tokens.push({type:"list_start",position:n,ordered:c.olbullet.test(s),olstart:s.replace(/[^0-9]/,""),tasklist:!!l}),r=r[0].match(this.rules.item),i=!1,g=r.length,f=0;for(var m=0;f<g;f++){h=r[f];var v=h.length;p=h.length,a=c.bullet.exec(h)[0],h=h.replace(a,""),d=c.taskbullet.exec(a),~h.indexOf("\n ")&&(p-=h.length,h=this.options.pedantic?h.replace(/^ {1,4}/gm,""):h.replace(new RegExp("^ {1,"+p+"}","gm"),"")),this.options.smartLists&&f!==g-1&&(u=c.bullet.exec(r[f+1])[0],s===u||d&&l||s.length>1&&u.length>1||(e=r.slice(f+1).join("\n")+e,f=g-1)),o=i||/\n\n(?!\s*$)/.test(h),f!==g-1&&(i="\n"===h.charAt(h.length-1),o||(o=i)),this.tokens.push({type:o?"loose_item_start":"list_item_start",position:n+m,taskstate:d?d[2]:void 0}),this.token(h,!1,n+m+v-h.length),this.tokens.push({type:"list_item_end"}),m+=r[f].length}this.tokens.push({type:"list_end"}),n+=r[0].length}else if(r=this.rules.html.exec(e))e=e.substring(r[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",position:n,pre:"pre"===r[1]||"script"===r[1]||"style"===r[1],text:r[0]}),this.tokens.push({type:"newline",position:n+r[0].length-1}),n+=r[0].length;else if(t&&(r=this.rules.def.exec(e)))e=e.substring(r[0].length),this.tokens.links[r[1].toLowerCase()]={href:r[2],title:r[3]},n+=r[0].length;else if(t&&(r=this.rules.table.exec(e))){for(e=e.substring(r[0].length),h={type:"table",position:n,header:r[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3].replace(/(?: *\| *)?\n$/,"").split("\n")},f=0;f<h.align.length;f++)/^ *-+: *$/.test(h.align[f])?h.align[f]="right":/^ *:-+: *$/.test(h.align[f])?h.align[f]="center":/^ *:-+ *$/.test(h.align[f])?h.align[f]="left":h.align[f]=null;for(f=0;f<h.cells.length;f++)h.cells[f]=h.cells[f].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(h),n+=r[0].length}else if(t&&(r=this.rules.paragraph.exec(e)))e=e.substring(r[0].length),this.tokens.push({type:"paragraph",position:n,text:"\n"===r[1].charAt(r[1].length-1)?r[1].slice(0,-1):r[1]}),/\n\n$/.exec(r[0])&&this.tokens.push({type:"newline",position:n+r[0].length-1}),n+=r[0].length;else if(r=this.rules.text.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"text",position:n,text:r[0]}),n+=r[0].length;else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var d={escape:/^\\([\\@`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+|#([^ >]+))>/,url:l,email:/^[^\s:[`\]]+@[a-zA-Z0-9.-]{2,200}/,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(hrefimgsize\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)([\s\S]*?[^`])\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:l,text:/^(?:[\s\S]+?(?=[\\<!\[_*`@]| {2,}\n|$)|[\s\S]+\s+?(?=\S+@\S+))/,latex:/^(\$\$([\s\S]*?)\$\$|\\\\\[([\s\S]*?)\\\\\]|\\\\\(([\s\S]*?)\\\\\))/,tagged:/^@(?:([^\s]+)|([a-zA-Z0-9_.-]+[a-zA-Z0-9.-]))/};d._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,d._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,d.link=s(d.link)("inside",d._inside)("href",d._href)("imgsize",c._imgsize)(),d.reflink=s(d.reflink)("inside",d._inside)(),d.normal=a({},d),d.pedantic=a({},d.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),d.gfm=a({},d.normal,{escape:s(d.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:s(d.text)("]|","~]|https?://|")()}),d.breaks=a({},d.gfm,{br:s(d.br)("{2,}","*")(),text:s(d.gfm.text)("{2,}","*")()}),t.rules=d,t.output=function(e,n,i,o){var r=new t(n,i);return r.output(e,o||0)},t.prototype.output=function(e,t){var n,i,r,s,l="";for(t=t||0;e;)if(s=this.rules.latex.exec(e)){e=e.substring(s[0].length);for(var a=s[0];a;)if(s=this.rules.escape.exec(a))a=a.substring(s[0].length),l+=s[1];else if(s=this.rules.text.exec(a))a=a.substring(s[0].length),l+=s[0];else if(a)throw new Error("Infinite loop on latex byte: "+a.charCodeAt(0));t+=s[0].length}else if(s=this.rules.escape.exec(e))e=e.substring(s[0].length),l+=s[1],t+=s[0].length;else if(s=this.rules.autolink.exec(e))e=e.substring(s[0].length),"@"===s[2]?(i=":"===s[1].charAt(6)?this.mangle(s[1].substring(7)):this.mangle(s[1]),r=this.mangle("mailto:")+i):(i=o(s[1]),r=i),l+=this.renderer.link(r,null,i,t),t+=s[0].length;else if(s=this.rules.url.exec(e))e=e.substring(s[0].length),i=o(s[1]),r=i,l+=this.renderer.link(r,null,i,t),t+=s[0].length;else if(s=this.rules.email.exec(e))e=e.substring(s[0].length),i=o(s[0]),l+=this.renderer.link("mailto:"+s[0],null,i,t),t+=s[0].length;else if(s=this.rules.tag.exec(e))e=e.substring(s[0].length),l+=this.options.sanitize?o(s[0]):s[0],t+=s[0].length;else if(s=this.rules.link.exec(e))e=e.substring(s[0].length),l+=this.outputLink(s,{href:s[2],title:s[3],width:s[5],height:s[6]},t),t+=s[0].length;else if((s=this.rules.reflink.exec(e))||(s=this.rules.nolink.exec(e))){if(e=e.substring(s[0].length),n=(s[2]||s[1]).replace(/\s+/g," "),n=this.links[n.toLowerCase()],!n||!n.href){l+=s[0].charAt(0),e=s[0].substring(1)+e,t+=1;continue}l+=this.outputLink(s,n,t),t+=s[0].length}else if(s=this.rules.strong.exec(e))e=e.substring(s[0].length),l+=this.renderer.strong(this.output(s[2]||s[1],t)),t+=s[0].length;else if(s=this.rules.em.exec(e))e=e.substring(s[0].length),l+=this.renderer.em(this.output(s[2]||s[1],t)),t+=s[0].length;else if(s=this.rules.code.exec(e))e=e.substring(s[0].length),l+=this.renderer.codespan(o(s[2].trim(),!0)),t+=s[0].length;else if(s=this.rules.br.exec(e))e=e.substring(s[0].length),l+=this.renderer.br(),t+=s[0].length;else if(s=this.rules.del.exec(e))e=e.substring(s[0].length),l+=this.renderer.del(this.output(s[1],t)),t+=s[0].length;else if(s=this.rules.tagged.exec(e))e=e.substring(s[0].length),t+=s[0].length,l+=this.renderer.tagged(s[1]||s[2]);else if(s=this.rules.text.exec(e))e=e.substring(s[0].length),l+=o(this.smartypants(s[0])),t+=s[0].length;else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return l},t.prototype.outputLink=function(e,t,n){var i=o(t.href),r=t.title?o(t.title):null,s=t.width?o(t.width)+"px":null,l=t.height?o(t.height)+"px":null;return"!"!==e[0].charAt(0)?this.renderer.link(i,r,this.output(e[1],n),n):this.renderer.image(i,r,o(e[1]),s,l)},t.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/--/g,"—").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},t.prototype.mangle=function(e){for(var t,n="",i=e.length,o=0;o<i;o++)t=e.charCodeAt(o),Math.random()>.5&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},n.prototype.code=function(e,t){return t?'<pre><code class="lang-'+t+'">'+o(e)+"\n</code></pre>\n":"<pre><code>"+o(e,!0)+"\n</code></pre>"},n.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},n.prototype.html=function(e){return e},n.prototype.heading=function(e,t,n,i){return"<h"+t+">"+e+"</h"+t+">\n"},n.prototype.hr=function(){return"<hr>\n"},n.prototype.br=function(){return"<br>\n"},n.prototype.list=function(e,t,n,i){var o=t?'ol start="'+n+'"':"ul";return"<"+o+(i?' class = "tasklist"':"")+">\n"+e+"</"+o+">\n"},n.prototype.listitem=function(e){return"<li>"+e+"</li>\n"};var h=0;n.prototype.checkbox=function(e){var t="";return h+=1,t+='<input type="checkbox" class="tasklist-checkbox" id="tasklist-checkable-'+h+'"',e&&(t+=" checked"),t+='><label class="tasklist-checkwidget" for="tasklist-checkable-'+h+'"></label>'},n.prototype.paragraph=function(e){return"<p><span>"+e+"</span></p>\n"},n.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},n.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},n.prototype.tablecell=function(e,t){var n=t.header?"th":"td",i=t.align?"<"+n+' style="text-align:'+t.align+'">':"<"+n+">";return i+e+"</"+n+">\n"},n.prototype.strong=function(e){return"<strong>"+e+"</strong>"},n.prototype.em=function(e){return"<em>"+e+"</em>"},n.prototype.codespan=function(e){return"<code>"+e+"</code>"},n.prototype.br=function(){return"<br>"},n.prototype.del=function(e){return"<del>"+e+"</del>"},n.prototype.tagged=function(e){return'<a class="at-tagged">'+e+"</a>"},n.prototype.link=function(e,t,n,i){var o={javascript:1,vbscript:1,data:1},s=decodeURIComponent(r(e)).replace(/[^\w:]/g,"").split(":")[0].toLowerCase();s in o&&(e="");var l='<a href="'+e+'"';return t&&(l+=' title="'+t+'"'),i&&(l+=' data-marked="'+i+'"'),/^#\S+$/.exec(e)&&(l+=' class="hashlink"'),l+=">"+n+"</a>"},n.prototype.image=function(e,t,n,i,o){var r=/^https:/.exec(e),s=e;r?/^https:\/\/coggle-images\.s3\.amazonaws\.com\//.exec(e)&&(e=e.replace(/^https:\/\/coggle-images\.s3\.amazonaws\.com\//,"https://imagecdn.coggle.it/")):e="https://d10bhphodx99fk.cloudfront.net/1/display?key=d248b9c63afc4ce4b9b82af3f6004806&url="+encodeURIComponent(e);var l='<img src="'+e+'" data-origsrc="'+s+'" alt="'+n+'"';return t&&(l+=' title="'+t+'"'),i||o||(l+=' class="unsized"'),i&&(l+=' width="'+i+'"'),o&&(l+=' height="'+o+'"'),l+=">"},i.parse=function(e,t,n){var o=new i(t,n);return o.parse(e)},i.prototype.parse=function(e){this.inline=new t(e.links,this.options,this.renderer),this.tokens=e.reverse();for(var n="";this.next();)n+=this.tok();return n},i.prototype.next=function(){return this.token=this.tokens.pop()},i.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},i.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e,0)},i.prototype.tok=function(){switch(this.token.type){case"space":return"";case"newline":return this.renderer.br();case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text,this.token.position),this.token.depth);case"code":return this.renderer.code(this.token.text,this.token.lang);case"table":var e,t,n,i,o,r="",s="";for(n="",e=0;e<this.token.header.length;e++)i={header:!0,align:this.token.align[e]},n+=this.renderer.tablecell(this.inline.output(this.token.header[e],this.token.position),{header:!0,align:this.token.align[e]});for(r+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",o=0;o<t.length;o++)n+=this.renderer.tablecell(this.inline.output(t[o],this.token.position),{header:!1,align:this.token.align[o]});s+=this.renderer.tablerow(n)}return this.renderer.table(r,s);case"blockquote_start":for(var s="";"blockquote_end"!==this.next().type;)s+=this.tok();return this.renderer.blockquote(s);case"list_start":for(var s="",l=this.token.ordered,a=isNaN(this.token.olstart)?1:this.token.olstart,u=this.token.tasklist;"list_end"!==this.next().type;)s+=this.tok();return this.renderer.list(s,l,a,u);case"list_item_start":var s="",c="undefined"!=typeof this.token.taskstate,d=this.token.taskstate&&/\S/.test(this.token.taskstate);for(c&&(s+=this.renderer.checkbox(d));"list_item_end"!==this.next().type;)s+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(s);case"loose_item_start":var s="",c="undefined"!=typeof this.token.taskstate,d=this.token.taskstate&&/\S/.test(this.token.taskstate);for(c&&(s+=this.renderer.checkbox(d));"list_item_end"!==this.next().type;)s+=this.tok();return this.renderer.listitem(s);case"html":var h=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text,this.token.position);return this.renderer.html(h);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text,this.token.position));case"text":return this.renderer.paragraph(this.parseText())}},l.exec=l,u.options=u.setOptions=function(e){return a(u.defaults,e),u},u.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!0,smartLists:!1,silent:!1,smartypants:!1,renderer:new n},u.Parser=i,u.parser=i.parse,u.Renderer=n,u.Lexer=e,u.lexer=e.lex,u.InlineLexer=t,u.inlineLexer=t.output,u.parse=u,"object"==typeof exports?module.exports=u:"function"==typeof define&&define.amd?define("marked",[],function(){return u}):this.marked=u}.call(function(){return this||("undefined"!=typeof window?window:global)}()),define("controllers/LinkOMaticRenderer",["require","exports","module","marked"],function(e,t,n){function i(){}var o=e("marked"),r=function(e,t){return t||(t=""),'<div class="youtubecontainer"><iframe width="280" height="157" src="https://www.youtube-nocookie.com/embed/'+e+"?color=white&theme=light"+t+'" frameborder="0" allowfullscreen></iframe></div>'},s=function(e){var t=/t=(?:([0-9]+)h)?(?:([0-9]+)m)?(?:([0-9]+)s)?/.exec(e);if(t){var n=3600*parseInt(t[1]||0)+60*parseInt(t[2]||0)+parseInt(t[3]||0);return"&start="+n}return""},l=function(e,t,n){if(n==e||!n.replace(/[^\s]*/g,"")){var i=/v=([^&]+)/.exec(e);if(i&&i[1])return r(i[1],s(e))}},a=function(e,t,n){if(n==e||!n.replace(/[^\s]*/g,"")){var i=/\.be\/([^&?#]+)/.exec(e);if(i&&i[1])return r(i[1],s(e))}},u={"youtube.com":l,"www.youtube.com":l,"youtu.be":a};i.prototype=new o.Renderer;var c=function(e){var t;return t=e.indexOf("://")!=-1?e.split("/")[2]:e.split("/")[0],t.split(":")[0]},d=function(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/g,function(e,t){return t=t.toLowerCase(),"colon"===t?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})},h=function(e){for(var t,n,i=[],o=0;o<e.length;o++)if("%"===e[o]){t=e.slice(o,o+2);try{n=decodeURIComponent(t)}catch(e){n=null}null!==n?(i.push(n),o+=2):i.push(e[o])}else i.push(e[o]);return i.join("")};i.prototype.link=function(e,t,n,i){var o={javascript:1,vbscript:1,data:1},r=h(d(e)).replace(/[^\w:]/g,"").split(":")[0].toLowerCase(),s=e.split("?")[0].split("#")[0];r in o?e="":s.indexOf(".")>0&&!/^\.{0,2}\//.exec(s)&&!/^[a-zA-Z+]+:/.exec(s)&&(e="http://"+e);var l,a=c(e),p=u[a.toLowerCase()];return p&&(l=p(e,t,n))?l:(l='<a href="'+e+'"',t&&(l+=' title="'+t+'"'),i&&(l+='data-marked="'+i+'"'),l+=/^#\S+$/.exec(e)?' class="hashlink"':' target="blank"',l+=">"+n+"</a>")},n.exports=i}),define("utils/marked",["require","exports","module","marked","controllers/LinkOMaticRenderer","plugins/jquery.queryString"],function(e,t,n){var i=e("marked"),o=e("controllers/LinkOMaticRenderer");e("plugins/jquery.queryString"),i.setOptions({gfm:!0,tables:!1,breaks:!0,pedantic:!1,sanitize:!0,smartLists:!0,smartypants:!1,silent:!0}),$.queryString().print||i.setOptions({renderer:new o}),n.exports=i}),!function(e,t){function n(n,u,c){var p=[];u=1==u?{entropy:!0}:u||{};var y=s(r(u.entropy?[n,a(e)]:null==n?l():n,3),p),b=new i(p),w=function(){for(var e=b.g(h),t=g,n=0;e<m;)e=(e+n)*d,t*=d,n=b.g(1);for(;e>=v;)e/=2,t/=2,n>>>=1;return(e+n)/t};return w.int32=function(){return 0|b.g(4)},w.quick=function(){return b.g(4)/4294967296},w.double=w,s(a(b.S),e),(u.pass||c||function(e,n,i,r){return r&&(r.S&&o(r,b),e.state=function(){return o(b,{})}),i?(t[f]=e,n):e})(w,y,"global"in u?u.global:this==t,u.state)}function i(e){var t,n=e.length,i=this,o=0,r=i.i=i.j=0,s=i.S=[];for(n||(e=[n++]);o<d;)s[o]=o++;for(o=0;o<d;o++)s[o]=s[r=y&r+e[o%n]+(t=s[o])],s[r]=t;(i.g=function(e){for(var t,n=0,o=i.i,r=i.j,s=i.S;e--;)t=s[o=y&o+1],n=n*d+s[y&(s[o]=s[r=y&r+t])+(s[r]=t)];return i.i=o,i.j=r,n})(d)}function o(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function r(e,t){var n,i=[],o=typeof e;if(t&&"object"==o)for(n in e)try{i.push(r(e[n],t-1))}catch(e){}return i.length?i:"string"==o?e:e+"\0"}function s(e,t){for(var n,i=e+"",o=0;o<i.length;)t[y&o]=y&(n^=19*t[y&o])+i.charCodeAt(o++);return a(t)}function l(){try{var t;return u&&(t=u.randomBytes)?t=t(d):(t=new Uint8Array(d),(c.crypto||c.msCrypto).getRandomValues(t)),a(t)}catch(t){var n=c.navigator,i=n&&n.plugins;return[+new Date,c,i,c.screen,a(e)]}}function a(e){return String.fromCharCode.apply(0,e)}var u,c=this,d=256,h=6,p=52,f="random",g=t.pow(d,h),m=t.pow(2,p),v=2*m,y=d-1;if(t["seed"+f]=n,s(t.random(),e),"object"==typeof module&&module.exports){module.exports=n;try{u=require("crypto")}catch(e){}}else"function"==typeof define&&define.amd&&define("seedrandom",[],function(){return n})}([],Math),define("models/Node",["require","exports","module","underscore","backbone","utils/marked","seedrandom"],function(e,t,n){function i(e){if(0!==e.length)return 1==e.length?e[0]:(e.sort(function(e,t){return e-t}),e[Math.floor(e.length/2)])}var o=e("underscore"),r=e("backbone"),s=e("utils/marked");e("seedrandom");var l,a=window.crypto||window.msCrypto;a&&"function"==typeof a.getRandomValues&&"Uint8Array"in window?l=function(){var e=new Uint8Array(4);return a.getRandomValues(e),o.map(e,function(e){var t=e.toString(16);return("00"+t).substring(t.length,t.length+2)}).join("")}:(console.warn("using un-random random"),l=function(){var e=Math.floor(4294967296*Math.random()).toString(16);return("00000000"+e).substring(e.length,e.length+8)},!window.randomSeeded&&Math.seedrandom&&(Math.seedrandom(),window.randomSeeded=!0));var u=r.Model.extend({defaults:{scale:1,width:null,line_weight:null,line_style:"solid",join:null,text:"",hidden:!1,colour:"#b4b4b4"},idAttribute:"node_id",initialize:function(){this.has_children=0,this._children={},this._normalised_text=null,this.last_sync_state=o.clone(this.attributes),this.on("change:pos change:parent_id ancestor_moved",function(){this._x=void 0,this._y=void 0}),this.on("path_changed",function(){this._path_to_root=void 0}.bind(this)),this.on("change:pos change:parent_id",function(){this.depthFirst(function(e){e.trigger("ancestor_moved")})}.bind(this)),this.on("change:parent_id",function(){this.depthFirst(function(e){e.trigger("path_changed")});var e=this.collection.get(this.previous("parent_id")),t=this.parent();t&&t.trigger("child_added",this),e&&e.trigger("child_removed",this)}.bind(this)),this.on("child_added",function(e){if(!e)throw new Error("child_added event is missing target child");this._children[e.id]=e,this.has_children+=1}.bind(this)),this.on("child_removed",function(e){if(!e)throw new Error("child_removed event is missing target child");this._children[e.id]=void 0,this.has_children-=1}.bind(this)),this.on("remove",function(){var e=this.parent();e&&e.collection&&e.trigger("child_removed",this)}.bind(this)),this.on("destroy",function(){this.children().map(function(e){e.destroy()})}.bind(this)),this.on("change:text",function(){var e=this.get("text");e&&e.length>u.MAX_TEXT_LENGTH&&this.set("text",e.slice(0,u.MAX_TEXT_LENGTH)),this._normalised_text=null}.bind(this))},shortId:function(){return this.id.substr(0,6)},stillExists:function(){return!!this.collection&&!!this.collection.get(this.id)},isRoot:function(){return"root parent"===this.get("parent_id")},isTitle:function(){return!(!this.isRoot()||!(this.collection&&1===this.collection.getRoots().length||this.get("title")))},parent:function(){if(!this.collection)return console.error("no collection",this);var e=this.get("parent_id");return"root parent"==e?null:this.collection.get(e)},isDecendedFrom:function(e){return this.pathToRoot().indexOf(e)!==-1},isLoopedWith:function(e){return!!this.isDecendedFrom(e)||this.allChildren().indexOf(e)!==-1},reparentTo:function(e){if(!this.isTitle())if(e){if(this.id==e.id)return;var t=this.parent();if(t&&t.id==e.id)return;if(e.isDecendedFrom(this))return console.error("cannot reparent to a descendant");this.set("parent_id",e.id)}else{if(!this.parent())return;this.set("parent_id","root parent")}},setJoinedNode:function(e){e&&e.id&&this.set("join",e.id)},joinedNode:function(){if(this.stillExists())return this.collection.get(this.get("join"))},level:function(){return this.pathToRoot().length-1},pathToRoot:function(){if(this.isRoot())return[this];if(!this._path_to_root){var e=this.parent().pathToRoot().slice(0);e.push(this),this._path_to_root=e}return this._path_to_root},children:function(e){if(!this.stillExists())return[];if(!this._children)return[];var t=o.compact(o.values(this._children));return e?t.filter(function(t){return t.side()===e}):t},hasChildren:function(){return!!this.has_children},siblings:function(){if(this.isRoot())return[];var e=this.parent().isRoot()?this.side():void 0;return o.without(this.parent().children(e),this)},allChildren:function(){var e=[],t=[],n=function(i){i.children().map(function(t){e=o.union(e,[t]),n(t)});var r=i.joinedNode();r&&t.indexOf(r)===-1&&(t=o.union(t,[r]),n(r))};return n(this),o.union(e,t)},addChild:function(e){e.node_id||(e.node_id=u.newNodeId()),e||(e={}),e.pos||(e.pos={x:50,y:50}),e.colour||(e.colour=this.colour()),e.parent_id=this.id;var t=this.collection.add(e);return this.trigger("child_added",t),t},text:function(){var e=this.get("text");return e&&0!==e.trim().length?e:""},normalisedText:function(){if(null===this._normalised_text){var e=$(s(this.text())).text(),t=o.filter(o.map(e.split(/[\s_#[\]()&.,;:!<>-]/,20),function(e){return e.replace(/'/g,"").toLowerCase()}),function(e){return e.length});this._normalised_text=t?t.join("-"):""}return this._normalised_text},width:function(){return this.get("width")},scale:function(){return this.get("scale")},colour:function(){var e=this.get("colour");return e&&"#"!=e.slice(0,1)?"#"+e:e},setColour:function(e,t){this.set("colour",e),t&&this.children().map(function(n){n.setColour(e,t)})},lineWeight:function(){var e=this.get("line_weight");if(e)return e;var t=(18*Math.pow(.91,this.level())+2)/2;return Math.max(2,t)},setLineWeight:function(e,t){this.set("line_weight",e),t&&this.children().map(function(n){n.setLineWeight(e,t)})},lineStyle:function(){return this.get("line_style")||"solid"},setLineStyle:function(e,t){this.set("line_style",e),t&&this.children().map(function(n){n.setLineStyle(e,t)})},pos:function(){return this.get("pos")},absolutePosition:function(){return{x:this.x(),y:this.y()}},x:function(){return this._x||(this.isRoot()?this._x=this.relX():this._x=this.relX()+this.parent().x()),this._x},y:function(){return this._y||(this.isRoot()?this._y=this.relY():this._y=this.relY()+this.parent().y()),this._y},relX:function(){return this.isRoot()?this.pos().x:this.parent().ltr()*this.pos().x},relY:function(){return this.pos().y},ltr:function(){return this.isRoot()?1:-1+2*(this.x()>this.parent().x())},ttb:function(e){return!e&&this.isRoot()?1:(e||(e=this.parent()),-1+2*(this.y()>1+e.y()))},side:function(){return this.isRoot()?"right":1===this.level()&&Math.abs(this.relY())>Math.abs(this.relX())?this.relY()>0?"bottom":"top":this.ltr()>0?"right":"left"},distanceTo:function(e,t){return Math.sqrt((this.x()-e)*(this.x()-e)+(this.y()-t)*(this.y()-t))},positionAbsolutely:function(e,t){if(!this.isTitle()){var n,i;this.isRoot()?(n=e,i=t):(n=(e-this.parent().x())*this.parent().ltr(),i=t-this.parent().y()),this.set("pos",{x:n,y:i})}},getMedianRelX:function(e,t){t||(t=this.children());var n=[];return t.map(function(t){e&&1==t.level()?t.side()==e&&n.push(t.relX()):n.push(t.relX())}.bind(this)),i(n)},getSiblingMedianRelX:function(){return this.getMedianRelX(this.side(),this.siblings())},hidden:function(){return this.get("hidden")},collapseChildren:function(e,t){void 0===t&&(t=!0),this.children().map(function(n){this.isRoot()&&"undefined"!=typeof e&&n.side()!=e||(n.set("hidden",!0),t&&n.collapseChildren(e,t),this.trigger("collapsed"))}.bind(this))},expandChildren:function(e,t){void 0===t&&(t=!1),this.children().map(function(n){this.isRoot()&&"undefined"!=typeof e&&n.side()!=e||(n.set("hidden",!1),t&&n.expandChildren(e,t),this.trigger("expanded"))}.bind(this))},hiddenChildren:function(e){return o.filter(this.children(),function(t){return(!this.isRoot()||t.side()==e)&&t.hidden()}.bind(this))},depthFirst:function(e){e(this);for(var t=this.children(),n=t.length,i=0;i<n;i++)t[i].depthFirst(e)},url:function(){return""},save:function(){console.error("save should not be called on node")},sync:function(){},deltarize:function(e){if(!this.last_sync_state)throw"Expected last_sync_state to be set already!";
var t=o.clone(this.last_sync_state);e||(e=o.clone(this.attributes)),e=o.omit(e,function(e,n){return o.isEqual(e,t[n])}),this.set(e);var n=o.omit(t,function(t,n){return!e.hasOwnProperty(n)});0!==o.values(e).length&&this.trigger("delta",this,e,n),e.parent_id&&("root parent"!==e.parent_id&&"root parent"===this.last_sync_state.parent_id?getCoggleUser().getActions().unique("node:attach"):"root parent"===e.parent_id&&"root parent"!==this.last_sync_state.parent_id&&getCoggleUser().getActions().unique("node:detach")),o.extend(this.last_sync_state,e)},matchesLink:function(e){return!(e.length<1)&&(0===this.id.toLowerCase().indexOf(e.toLowerCase())||0===this.normalisedText().indexOf(e.toLowerCase()))},extractLocalLinks:function(e){var t=e||s(this.text()),n=$(t).find("a"),i=[];return n.each(function(e,t){var n=$(this).attr("href");n&&0===n.indexOf("#")&&i.push(n.slice(0))}),i},linksTo:function(e){var t=this.extractLocalLinks(e),n={};return t.map(function(e){if(this.collection){var t=this.collection.matchingLink(e);t&&(n[e]=t)}}.bind(this)),n},serialise:function(){var e=this.toJSON();return delete e.tagged,delete e.hidden,delete e.action_ts,delete e.owner_id,delete e.parent_id,e.children=this.children().map(function(e){return e.serialise()}),e},closest:function(e){function t(t){return t!=n&&(!e||e(t))}if(!this.collection)return null;var n=this;return this.collection.closest(this.x(),this.y(),t)},isInRegion:function(e){return this.x()>e.left&&this.x()<e.right&&this.y()>e.top&&this.y()<e.bottom}});u.newNodeId=function(){return l()+l()+l()+l()};var c=["patch","node edited","root edited","node painted","node resized","node scaled","node moved","node reparented"],d=function(e){if("node reparented"==e.type?(e.data.parent_id=e.data.new_parent_id,e.old_data||(e.old_data={parent_id:data.old_parent_id}),delete data.new_parent_id,delete data.old_parent_id):"root node added"===e.type&&(data.parent_id="root parent"),e.data.old){e.old_data||(e.old_data={});for(var t in e.data.old)e.data.hasOwnProperty(t)&&(e.old_data[t]=e.data.old[t]);delete e.data.old}},h=r.Collection.extend({model:u,getRoots:function(){var e=this.where({parent_id:"root parent"});return e.sort(function(e,t){return new Date(e.get("action_ts")).getTime()-new Date(t.get("action_ts")).getTime()}),e},addRoot:function(e){e.node_id||(e.node_id=u.newNodeId()),e||(e={}),e.pos||(e.pos={x:50,y:50}),e.colour||(e.colour="#b4b4b4"),e.parent_id="root parent";var t=this.add(e);return this.trigger("node_added",t),t},onDeltaV1:function(e){return e.node_id?void("node removed"==e.type?this.onNodeRemovedV1(e):"node added"==e.type||"root node added"==e.type?this.onNodeAddedV1(e):"node focused"==e.type||"focus cleared"==e.type?this.onNodeFocusedV1(e):c.indexOf(e.type)!==-1&&(d(e),this.onPatch(e))):console.error("delta missing node_id",e)},onNodeRemovedV1:function(e){var t=this.get(e.node_id);return t?void t.destroy():console.warn("tried to remove non-existent node",e)},onNodeAddedV1:function(e){var t=this.get(e.node_id);if(t)return this.onPropertySettingDeltaV1(e),console.warn("node already exists, not adding again...",e);if(!e.data||!e.data.parent_id)return console.warn("cannot add node "+e.node_id+": (no parent ID!)",e);e.data.pos||(e.data.pos={x:0,y:0}),"number"!=typeof e.data.pos.x&&(e.data.pos.x=0),"number"!=typeof e.data.pos.y&&(e.data.pos.y=0);var n;return"root node added"!==e.type&&e.data&&e.data.parent_id&&"root parent"!=e.data.parent_id&&(n=this.get(e.data.parent_id),!n)?console.warn("parent (",e.data.parent_id,") doesn't exist for node",e.node_id):(t=new u(o.extend({},e.data,{node_id:e.node_id,action_ts:e.action_ts,owner_id:e.owner_id,hidden:n&&n.hidden()})),this.add(t),void(n&&n.trigger("child_added",t)))},onNodeFocusedV1:function(e){var t=this.get(e.node_id);return"node focused"==e.type?void(t&&t.trigger("focused",e.data.socket)):"focus cleared"==e.type?void(t&&t.trigger("blurred",e.data.socket)):void 0},onPatch:function(e){var t=this.get(e.node_id);if(!t)return console.warn("node doesn't exist",e);if(e.data.parent_id){var n=!1;if("root parent"!==e.data.parent_id){var i=this.get(e.data.parent_id);if(!i)return console.warn("new parent doesn't exist",e);n=i.hidden()}var o=t.parent();o&&o.id==e.data.parent_id||(t.set("parent_id",e.data.parent_id),n?(t.set("hidden",!0),t.collapseChildren()):t.hidden()&&(t.set("hidden",!1),t.expandChildren(void 0,!0)))}t.set(e.data),e.action_ts&&t.set("action_ts",e.action_ts),e.owner_id&&t.set("owner_id",e.owner_id)},onPropertySettingDeltaV1:function(e){var t=this.get(e.node_id);return t?(e.data&&t.set(e.data),e.action_ts&&t.set("action_ts",e.action_ts),void(e.owner_id&&t.set("owner_id",e.owner_id))):console.warn("delta for node that shouldn't exist",e)},closest:function(e,t,n){var i=null,o=null,r=function(n){var i=n.x(),o=n.y();return(i-e)*(i-e)+(o-t)*(o-t)};return this.each(function(e){n&&!n(e)||(null===o||r(e)<o)&&(i=e,o=r(e))}),i},byRegion:function(e){var t={outside:[],inside:[]};return this.each(function(n){n.isInRegion(e)?t.inside.push(n):t.outside.push(n)}),t},matchingLink:function(e){return e&&0===e.indexOf("#")&&(e=e.slice(1)),this.find(function(t){return t.matchesLink(e)})},nonEmpty:function(){return this.filter(function(e){return e.text().length>0})}});u.MAX_TEXT_LENGTH=4e3,n.exports.NodeModel=u,n.exports.NodeCollection=h}),define("models/Notification",["require","exports","module","underscore","backbone"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=o.Model.extend({idAttribute:"_id",parse:function(e){return e.tags=i.union(e.tags||[],r.extractTags(e.message)),e},messageWithTags:function(){var e=this.get("message"),t=r.extractTags(e);t.map(function(t){var n="#"+t;e=e.replace("<"+n+">",n),e=e.replace(n,"<"+n+">")});var n=i.difference(this.get("tags"),t),o=n.map(function(e){return" <#"+e+">"});return e+=o.join("")}});r.extractTags=function(e){if(!e)return[];var t=i.compact(i.uniq(e.trim().split(" ")));return i.uniq(i.compact(i.map(t,function(e){return e=e.replace("<","").replace(">",""),0===e.lastIndexOf("#")&&e.length>1&&e.substr(1)})))};var s=o.Collection.extend({model:r,comparator:function(e){return new Date(e.get("timestamp")).getTime()},initialize:function(e,t){this.options=t},url:function(){return this.options.resource.url()+"/notifications"},endReached:!1,more:i.debounce(function(){if(this.endReached)return!1;var e=500;return this.skip=this.length,this.fetch({data:{skip:this.skip,limit:e},merge:!0,remove:!1,add:!0,success:function(t,n){this.endReached=n.length<e,this.endReached&&this.trigger("ended")}.bind(this)}),!0},20,!0),withTags:function(e){return this.filter(function(t){var n=t.get("tags");return i.intersection(n,e).length>0})},lastNotifiction:function(){return this.at(this.length-1)},addWidget:function(e,t){t||(t={}),"undefined"==typeof t.time&&(t.time=(new Date).toISOString());var n={_id:t.id,type:"widget",timestamp:t.time,view:e};t.id&&(n.id=t.id),this.add(new r(n))},usersTagged:function(e,t){if(!e||0===e.length)return null;var n=e.map(function(e){return e.get("name")});return this.create({tagged:i.pluck(e,"id"),type:"tag",message:getCoggleUser().get("given_name")+" tagged "+n.join(", ")+" in [an item](#"+t.shortId()+")"},{wait:!0})},poll:function(e){var t=this.lastNotifiction(),n=t?t.get("timestamp"):new Date;this.fetch({data:{from:n},wait:!0,add:!0,remove:!1,merge:!0,success:function(t,n){e&&e(!1,n)},error:function(){e&&e(!0)}})},loadAllNew:function(){this.poll(function(e,t){e||0!==t.length&&this.loadAllNew()}.bind(this))}});n.exports.NotificationModel=r,n.exports.NotificationCollection=s}),define("env",["jquery"],function(e){"use strict";var t={};return window.CONFIG&&(t=e.extend(!0,{},t,window.CONFIG)),t}),define("models/Diagram",["require","exports","module","underscore","backbone","backbone.fetchOrQueue","models/Access","models/Invite","models/PrivateLink","models/Delta","models/Node","models/Node","models/Notification","utils/marked","env","env","env","env","env","env","env"],function(e,t,n){var i=(e("underscore"),e("backbone"));e("backbone.fetchOrQueue");var o=e("models/Access").AccessCollection,r=e("models/Invite").InviteCollection,s=e("models/PrivateLink").PrivateLinkCollection,l=e("models/Delta").DeltaCollection,a=e("models/Node").NodeCollection,u=e("models/Node").NodeModel,c=e("models/Notification").NotificationCollection,d=e("utils/marked"),h=i.Model.extend({idAttribute:"short_id",initialize:function(e,t){this.options=t},urlRoot:e("env").api.url+"/api/1/diagrams",docURL:function(){return"/diagram/"+this.get("short_id")},url:function(){var e=this.options.token?"/"+this.options.token:"";return i.Model.prototype.url.apply(this)+e},uploadURL:function(){var t=this.options.token?"/"+this.options.token:"";return e("env").api.url+"/diagram/"+this.id+t+"/upload/image"},socketUrl:function(){var t=this.options.token?"/"+this.options.token:"",n=e("env").sockets.url,i=this.getDeltas().lastDelta();if(!i)throw new Error("missing last delta for socket url");return n+"/services/sockets/api/1/diagrams/"+this.get("short_id")+t+"/changes?from="+i.get("_id")+"&from_date="+i.get("action_ts")+"&version="+Coggle_JS_Version},setToken:function(e){this.options||(this.options={}),this.options.token=e},insertRootDelta:function(e){this.getDeltas().create({node_id:u.newNodeId(),type:"node added",data:{parent_id:"root parent",text:this.get("title"),pos:{x:0,y:0}}},{wait:!0,success:function(){e()},error:function(){e(!0)}})},cleanTitle:function(){return $(d(this.get("title"))).text()},isModified:function(){var e=new Date(this.get("last_modified")),t=new Date(this.get("last_viewed"));return e.getTime()>t.getTime()},accessViaToken:function(){return!!this.options.token},subscribe:function(){this.save({subscribed:!0}),getCoggleUser().getActions().perform("emails:transactional:subscribe")},unsubscribe:function(){this.save({subscribed:!1}),getCoggleUser().getActions().perform("emails:transactional:unsubscribe")},getAccess:function(e){return this.accessCollection||(this.accessCollection=new o([],{resource:this})),this.accessCollection.fetchOrQueue(e)},canList:function(){return this.get("my_access")&&this.get("my_access").indexOf("list")!==-1},canRead:function(){return this.get("my_access")&&this.get("my_access").indexOf("read")!==-1},canClone:function(){return this.get("my_access")&&this.get("my_access").indexOf("clone")!==-1},canWrite:function(){return this.get("my_access")&&this.get("my_access").indexOf("write")!==-1},accessIsEphemeral:function(){return this.get("ephemeral_access")&&this.get("ephemeral_access").indexOf("read")!==-1},getInvites:function(e){return this.inviteCollection||(this.inviteCollection=new r([],{resource:this})),this.inviteCollection.fetchOrQueue(e)},getPrivateLinks:function(e){return this.privateLinkCollection||(this.privateLinkCollection=new s([],{resource:this})),this.privateLinkCollection.fetchOrQueue(e)},getDeltas:function(){return this.deltas||(this.deltas=new l,this.deltas.url=this.url()+"/changes"),this.deltas},getNodes:function(){return this.nodes||(this.nodes=new a([])),this.nodes},getNotifications:function(){return this.notifications||(this.notifications=new c([],{resource:this})),this.notifications},resetState:function(){this.nodes&&(this.nodes.reset([]),this.nodes=void 0),this.deltas&&(this.deltas.reset([]),this.deltas=void 0),this.notifications&&(this.notifications.reset([]),this.notifications=void 0),this.inviteCollection&&(this.inviteCollection=void 0),this.privateLinkCollection&&(this.privateLinkCollection=void 0),this.accessCollection&&(this.accessCollection=void 0)}}),p=i.Collection.extend({model:h,comparator:function(e){return-e.get("order")},url:e("env").api.url+"/api/1/diagrams",makeClone:function(e,t){getCoggleUser().getActions().perform("diagram:clone"),ga("send","event","Clone","Current"),this.create({},{type:"post",url:this.url+"/"+e+"?clone[]=content&clone[]=folder&clone[]=title",wait:!0,success:t})}});p.getPublicGallery=function(t){return this.public_gallery||(this.public_gallery=new p,this.public_gallery.url=e("env").api.url+"/api/1/gallery"),this.public_gallery.fetchOrQueue(t)},p.getPublicReviewCollection=function(t,n){if("function"==typeof t&&(n=t,t={}),!this.public_gallery_review){var i=p.extend({model:h.extend({urlRoot:e("env").api.url+"/api/1/gallery/review"}),url:e("env").api.url+"/api/1/gallery/review"});this.public_gallery_review=new i}return this.public_gallery_review.fetchOrQueue(n,t)},n.exports.DiagramModel=h,n.exports.DiagramCollection=p}),define("models/Folder",["require","exports","module","backbone","backbone.fetchOrQueue","models/Access","models/Invite","models/Diagram","env","env"],function(e,t,n){var i=e("backbone");e("backbone.fetchOrQueue");var o=e("models/Access").AccessCollection,r=e("models/Invite").InviteCollection,s=e("models/Diagram").DiagramCollection,l=i.Model.extend({idAttribute:"_id",url:function(){return e("env").api.url+"/api/1/folders"+(this.id?"/"+this.id:"")},getDiagrams:function(e,t){return this.diagrams||(this.diagrams=new s([])),t||(t={}),t.data||(t.data={}),t.data.folder=this.id,this.diagrams.fetchOrQueue(e,t)},getAccess:function(e){return this.accessCollection||(this.accessCollection=new o([],{resource:this})),this.accessCollection.fetchOrQueue(e)},getInvites:function(e){return this.inviteCollection||(this.inviteCollection=new r([],{resource:this})),this.inviteCollection.fetchOrQueue(e)},getFolders:function(e){return this.folders||(this.folders=new a([])),this.folders.fetchOrQueue(e,{data:{folder:this.id}})},createDiagram:function(e){var t=_.max(this.getDiagrams().pluck("order")),n=getCoggleUser().reachedPrivateLimit();getCoggleUser().getActiveOrg().id&&(n=!1);this.getDiagrams().create({folder:this.isShared()?"root":this.id,order:t+1,public:n},{wait:!0,success:function(t){var n=t.get("public");return setTimeout(function(){getCoggleUser().getActions().perform("created-diagram"),getCoggleUser().getActions().perform("diagram:created:"+(n?"public":"private"))},1e3),ga("send","event","CreateDiagram","Create",n?"Public":"Private"),e(!1,t)},error:function(t){return e(!0)}})},isVirtual:function(){return this.isShared()||this.isRoot()},isShared:function(){return"shared"==this.id},isRoot:function(){return"root"==this.id},canRead:function(){return this.get("my_access")&&this.get("my_access").indexOf("read")!==-1},canWrite:function(){return this.get("my_access")&&this.get("my_access").indexOf("write")!==-1},isAdmin:function(){return this.get("my_access")&&this.get("my_access").indexOf("admin")!==-1}}),a=i.Collection.extend({model:l,initialize:function(){},comparator:function(e,t){return e.isRoot()?-1:t.isRoot()?1:e.isVirtual()?-1:t.isVirtual()?1:(e=e.get("name"),t=t.get("name"),void 0===e?-1:void 0===t?1:e.localeCompare(t))},url:e("env").api.url+"/api/1/folders",createFolder:function(e){var t=this.create({},{wait:!0,success:function(n,i){ga("send","event","Folder","Create"),e(!1,t)},error:function(){e(!0)}})}});n.exports.FolderModel=l,n.exports.FolderCollection=a}),define("models/Customer",["require","exports","module","backbone","env","env"],function(e,t,n){var i=e("backbone"),o=i.Model.extend({idAttribute:"id",urlRoot:e("env").api.url+"/api/1/coupons",apply:function(e){return this.get("percent_off")?Math.max(0,(100-this.get("percent_off"))*e/100):this.get("amount_off")?Math.max(0,e-this.get("amount_off")):e}}),r=i.Model.extend({idAttribute:"id",url:function(){return e("env").api.url+"/api/1/me/customer"},getCoupon:function(e){return this.coupon&&this.coupon.id==this.get("coupon")||(this.coupon=new o({id:this.get("coupon")})),this.coupon.fetchOrQueue(e)}});n.exports=r}),define("models/Invoice",["require","exports","module","backbone","env","env"],function(e,t,n){var i=e("backbone"),o=i.Model.extend({idAttribute:"id",url:function(){return this.collection?this.collection().url()+"/"+this.id:e("env").api.url+"/api/1/me/invoices/"+this.id}}),r=i.Collection.extend({model:o,url:e("env").api.url+"/api/1/me/invoices"});n.exports.InvoiceModel=o,n.exports.InvoiceCollection=r}),define("models/Plans",["require","exports","module","backbone"],function(e,t,n){var i=e("backbone"),o=i.Model.extend({idAttribute:"plan"}),r=i.Collection.extend({model:o,initialize:function(e,t){this.url=function(){return t.resource.url()+"/plans"},this.options=t},switchTo:function(e,t){var n={wait:!0,success:function(){t(!1,this.getActivePlan())}.bind(this),error:function(e,n){var i=n.responseJSON||!0;t(i,this.getActivePlan())}.bind(this)},i=this.get(e);i?i.save({active:!0},n):i=this.create({plan:e,active:!0},n)},getActivePlan:function(){var e=this.find(function(e){return e.get("active")&&!e.get("ending")});return e?e:this.find(function(e){return e.get("active")&&e.get("ending")})}});n.exports.PlanModel=o,n.exports.PlansCollection=r}),define("models/Domain",["require","exports","module","backbone"],function(e,t,n){var i=e("backbone"),o=i.Model.extend({idAttribute:"id"}),r=i.Collection.extend({model:o});n.exports.DomainModel=o,n.exports.DomainCollection=r}),define("models/GuestMember",["require","exports","module","backbone"],function(e,t,n){var i=e("backbone"),o=i.Model.extend({idAttribute:"_id"}),r=i.Collection.extend({model:o,search:function(e){return e=e.toLowerCase(),this.filter(function(t){var n=_.union([t.get("name").toLowerCase(),t.get("email").toLowerCase()],t.get("name").toLowerCase().split(/[\s,]+/),t.get("email").toLowerCase().split(/[\s,@]+/));return _.any(n,function(t){return 0===t.indexOf(e)})})}});n.exports.GuestMember=o,n.exports.GuestMemberCollection=r}),define("models/Organisation",["require","exports","module","underscore","backbone","backbone.fetchOrQueue","models/Access","models/Invite","models/Folder","models/Diagram","models/Customer","models/Invoice","models/Plans","models/Domain","models/GuestMember","env","env","env"],function(e,t,n){var i=e("underscore"),o=e("backbone");e("backbone.fetchOrQueue");var r=e("models/Access").AccessCollection,s=e("models/Invite").InviteCollection,l=e("models/Folder").FolderCollection,a=e("models/Diagram").DiagramCollection,u=e("models/Customer"),c=e("models/Invoice").InvoiceCollection,d=e("models/Plans").PlansCollection,h=e("models/Domain").DomainCollection,p=e("models/GuestMember").GuestMemberCollection,f=o.Model.extend({idAttribute:"_id",urlRoot:e("env").api.url+"/api/1/organisations",defaults:{slug:null,picture:null},getAccess:function(e){return this.accessCollection||(this.accessCollection=new r([],{resource:this})),this.accessCollection.fetchOrQueue(e)},getInvites:function(e){return this.inviteCollection||(this.inviteCollection=new s([],{resource:this})),this.inviteCollection.fetchOrQueue(e)},getCustomer:function(e){if(this.id)return this.customer||(this.customer=new u,this.customer.url=this.url()+"/customer"),this.customer.fetchOrQueue(e)},getInvoices:function(e){if(this.id)return this.invoiceCollection||(this.invoiceCollection=new c,this.invoiceCollection.url=this.url()+"/invoices"),this.invoiceCollection.fetchOrQueue(e)},getPlans:function(e){return this.plansCollection||(this.plansCollection=new d(void 0,{resource:this})),this.plansCollection.fetchOrQueue(e)},getDiagrams:function(e){return this.diagrams||(this.diagrams=new a([]),this.diagrams.url=this.url()+"/diagrams"),this.diagrams.fetchOrQueue(e)},getFolders:function(e){return this.folders||(this.folders=new l),this.folders.fetchOrQueue(e)},allowsSharing:function(){return!this.id||this.get("allow_sharing")},getDomains:function(e){return this.domainCollection||(this.domainCollection=new h([]),this.domainCollection.url=this.url()+"/domains"),this.domainCollection.fetchOrQueue(e)},getGuestMembers:function(e){return this.guestMemberCollection||(this.guestMemberCollection=new p([]),this.guestMemberCollection.url=this.url()+"/guests"),this.guestMemberCollection.fetchOrQueue(e)},hasActivePlan:function(){var e=i.filter(this.get("plans"),function(e){return"organisation"==e.split(":")[0]});return e.length>0},hasActiveEnterprisePlan:function(){return this.get("plans").indexOf("organisation:enterprise")!==-1},getMonthlyUserPrice:function(){return this.get("amount")/100},canRead:function(){return this.get("my_access")&&this.get("my_access").indexOf("read")!==-1},canWrite:function(){return this.get("my_access")&&this.get("my_access").indexOf("write")!==-1},isAdmin:function(){return this.get("my_access")&&this.get("my_access").indexOf("admin")!==-1},search:function(t){var n=new a([]);return n.url=e("env").api.url+"/api/1/search",n.fetch({data:{query:t},error:function(e,t,i){n.trigger("search-failed",t)}.bind(this)}),n},findDiagramById:function(e){var t=null,n=function(t){return t.get("_id")==e||t.get("short_id")==e};return this.getFolders().each(function(e){t||(t=e.getDiagrams().find(n))}),t},hasSamlConfig:function(){var e=this.get("sso");return e&&e.saml&&e.saml.entryPoint&&e.saml.cert},loginUrl:function(){return this.hasSamlConfig()?"/auth/saml/"+this.get("slug"):"/auth/google?redirectTo="+encodeURIComponent("/"+this.get("slug"))}}),g=o.Collection.extend({model:f,url:e("env").api.url+"/api/1/organisations",forSlug:function(e){return e?this.findWhere({slug:e.toLowerCase()}):null},comparator:function(e,t){return e=e.get("name"),t=t.get("name"),void 0===e?-1:void 0===t?1:e.localeCompare(t)}});n.exports.OrganisationModel=f,n.exports.OrganisationCollection=g}),define("utils/cogglitude",["require","exports","module"],function(e,t,n){var i=[],o={},r=null,s=null;o.onAmplitude=function(e){return r||s?e(r,s):void i.push(e)};var l=function(e,t){r=e,s=t;for(var n=0;n<i.length;n++)"function"==typeof i[n]&&i[n](e,t);i=[]};if("print=1"===window.location.search.substring(1,8))l(new Error("print"));else try{requirejs.config({paths:{amplitude:"//d24n15hnbwhuhn.cloudfront.net/libs/amplitude-3.4.0-min.gz"},shim:{amplitude:{exports:"amplitude"}}}),e(["amplitude"],function(e){e?(e.init("6bb159fba6bd913ded69ee8586109b94",void 0,{includeUtm:!0,includeReferrer:!0}),l(null,e)):l(new Error,null)},function(e){console.log(e),l(e||new Error,null)})}catch(e){console.log(e),l(e||new Error,null)}return o}),define("models/Action",["require","exports","module","backbone","utils/cogglitude","env"],function(e,t,n){var i=e("backbone"),o=e("utils/cogglitude").onAmplitude,r=i.Model.extend({idAttribute:"id",parse:function(e){return e&&e.id?e:{id:e}}}),s=i.Collection.extend({url:e("env").api.url+"/api/1/me/actions",model:r,isProduction:function(){return"coggle.it"==window.location.hostname||"static.coggle.it"==window.location.hostname},unique:function(e,t){this.get(e)||this.perform(e,t)},perform:function(e,t){"print=1"!==window.location.search.substring(1,8)&&(getCoggleUser().isGuest()||this.create({id:e}),window._debug_actions&&console.log(e),this.logEventExternally(e,t))},logEventExternally:function(e,t){return this.isProduction()?(ga("send","event","CoggleAction",e),void(getCoggleUser().isGuest()||o(function(n,i){n||i&&(this.setExternalUserProperties({}),i.logEvent(e,t))}.bind(this)))):void(console.debug&&console.debug("log event:",e,t))},setExternalUserProperties:function(e){var t=getCoggleUser();if(!t.isGuest()){var n=new Date(t.get("firstLogin")),i={allow_communication:t.get("allow_communication"),allow_transactional_communication:t.get("allow_transactional_communication"),google_drive:t.get("drive_user"),cohort_year:n.getFullYear()+"",cohort_month:n.getFullYear()+"-"+(n.getMonth()+1),is_awesome:t.isAwesome()?"true":"false",is_sso:t.get("org_only"),plans:t.get("plans")},r=_.extend(e,i);this.isProduction()?o(function(e,t){e||t&&(t.setUserId(getCoggleUser().id),t.setUserProperties(r))}):console.debug&&console.debug("update user properties:",r)}}});n.exports.ActionModel=r,n.exports.ActionCollection=s}),define("models/User",["require","exports","module","underscore","backbone","backbone.fetchOrQueue","models/Organisation","models/Organisation","models/Customer","models/Invoice","models/Plans","models/Action","utils/cogglitude","env","env","env"],function(e,t,n){var i=e("underscore"),o=e("backbone");e("backbone.fetchOrQueue");var r=e("models/Organisation").OrganisationModel,s=e("models/Organisation").OrganisationCollection,l=e("models/Customer"),a=e("models/Invoice").InvoiceCollection,u=e("models/Plans").PlansCollection,c=e("models/Action").ActionCollection,d=e("utils/cogglitude").onAmplitude,h=o.Model.extend({idAttribute:"_id",url:function(){return e("env").api.url+"/api/1/me"},isGuest:function(){return!this.id},experimentIndex:function(e){if(e||(e=""),this.id){for(var t=this.id+e,n=0,i=0;i<t.length;i++)n=31*n+t.charCodeAt(i),n|=0;return Math.abs(n)}return 0|Math.round(1e11*Math.random())},science:function(e,t){this.id||console.warn("running experiment ("+e+") for user without id");var n=this.experimentIndex(e),i=t[n%t.length];return d(function(t,n){"coggle.it"!=window.location.hostname&&"static.coggle.it"!=window.location.hostname||n&&n.getInstance().setGroup(e,i)}),i},getOrganisations:function(e){return this.organisationCollection||(this.organisationCollection=new s),this.organisationCollection.fetchOrQueue(e)},getCustomer:function(e){return this.customerModel||(this.customerModel=new l),this.customerModel.fetchOrQueue(e)},getInvoices:function(e){return this.invoiceCollection||(this.invoiceCollection=new a),this.invoiceCollection.fetchOrQueue(e)},getInvites:function(t){return this.inviteCollection||(this.inviteCollection=new o.Collection,this.inviteCollection.url=e("env").api.url+"/api/1/invites"),this.inviteCollection.fetchOrQueue(t)},getPlans:function(e){return this.plansCollection||(this.plansCollection=new u(void 0,{resource:this})),this.plansCollection.fetchOrQueue(e)},isSupporter:function(){var e=this.get("plans")||[];return e.indexOf("supporter")>=0||!!getCoggleUser().getActiveOrg().id},isAwesome:function(){var e=this.get("plans")||[];return i.any(e,function(e){return 0===e.indexOf("awesome")})||this.isSupporter()||!!getCoggleUser().getActiveOrg().id},isTriallingAwesome:function(){return this.get("awesome_trial_expires")&&new Date(this.get("awesome_trial_expires")).getTime()>Date.now()},hasPrivatePlan:function(){var e=this.get("plans")||[];return this.isAwesome()||e.indexOf("private")>=0},privateDiagramAllowance:function(){var e=this.get("limits");return e&&e.private_diagrams&&e.private_diagrams.available?e.private_diagrams.available:null},privateDiagramsUsed:function(){var e=this.get("limits");return e&&e.private_diagrams&&e.private_diagrams.used?e.private_diagrams.used:0},reachedPrivateLimit:function(){return null!==this.privateDiagramAllowance()&&(!getCoggleUser().getActiveOrg().id&&this.privateDiagramsUsed()>=this.privateDiagramAllowance())},overPrivateLimit:function(){return null!==this.privateDiagramAllowance()&&(!getCoggleUser().getActiveOrg().id&&this.privateDiagramsUsed()>this.privateDiagramAllowance())},getActions:function(e){return this.userActions||(this.userActions=new c),this.userActions.fetchOrQueue(e)},setActiveOrg:function(e){e&&(this.activeOrg!=e||this.activeOrg&&this.activeOrg.id!==e.id)&&(this.activeOrg=e,this.trigger("organisation_changed",e))},getActiveOrg:function(){return this.activeOrg||this.getOwnOrg()},getOwnOrg:function(){return this.ownOrg||(this.ownOrg=new r),this.ownOrg},hasOwnOrg:function(){return!this.get("org_only")},isStaff:function(){return this.get("staff")},picture:function(){return this.get("picture")||e("env").cdn.url+"/img/anon.png"},colour:function(){return this.get("colour")||"#ffffff"},isOlderThan:function(e){e=new Date(e);var t=new Date(this.get("firstLogin"));return t.getTime()<e.getTime()},menuExperiment:function(){return!1},paysForColours:function(){return!this.isOlderThan("2017-08-24T18:00:00.000Z")},referralTrialEligiblilityState:function(e){this.getInvites(function(t,n){return t?e(t):void this.getActions(function(t,i){if(t)return e(t);var o=Math.max(3-n.length,0);this.isAwesome()&&!this.isTriallingAwesome()&&(o=0);var r=n.length>=3;this.isAwesome()&&!this.isTriallingAwesome()&&(r=!1),i.get("coupon:recommend-3")&&(r=!1),e(!1,r,n,o)}.bind(this))}.bind(this))}});h.me=function(){return h._user||(h._user=new h),h._user},window.getCoggleUser=function(){return h.me()},n.exports=h}),define("views/ErrorView",["require","exports","module","underscore","backbone"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=i.template("<div class='face'>⊙ ⊙<br/>﹏</div><div class='message'><%-message%></div><a href='<%- link %>' data-bypass class='button'>Reload</a>");n.exports=o.View.extend({tagName:"div",className:"error-screen",initialize:function(e){i.bindAll(this,"render"),this.options=e},render:function(){var e={link:this.options.link||window.location.href,message:this.options.message||"Uh-oh, something went wrong."};return $(this.el).html(r(e)),this}})}),function(e){define("BrowserDetect",[],function(){return function(){var t={init:function(){this.browser=this.searchString(this.dataBrowser)||"unknown",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"unknown",this.OS=this.searchString(this.dataOS)||"unknown"},searchString:function(e){for(var t=0;t<e.length;t++){var n=e[t].string,i=e[t].prop;if(this.versionSearchString=e[t].versionSearch||e[t].identity,n){if(n.indexOf(e[t].subString)!=-1)return e[t].identity}else if(i)return e[t].identity}},searchVersion:function(e){var t=e.indexOf(this.versionSearchString);if(t!=-1)return parseFloat(e.substring(t+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"Googlebot",identity:"Googlebot"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.userAgent,subString:"AppleWebKit",identity:"Safari",versionSearch:"AppleWebKit"},{string:navigator.userAgent,subString:" Qt/",identity:"WebKit",versionSearch:"WebKit"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Trident",identity:"Explorer",versionSearch:"rv"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"android",identity:"Android"},{string:navigator.appVersion,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iOS"},{string:navigator.userAgent,subString:"iPad",identity:"iOS"},{string:navigator.platform,subString:"Linux",identity:"Linux"},{string:navigator.platform,subString:"BlackBerry",identity:"BlackBerry"}]};return t.init(),e.BrowserDetect=t}.apply(e,arguments)})}(this),document.location.search.indexOf("print=1")===-1&&document.cookie.indexOf("disable_translations=1")===-1&&testDefineProperty()&&Object.create&&testCORSSupport()){var Fallback_Manifest=JSON.stringify({resources:["/translations/{{ locale }}.l20n"],locales:["en-US","en-GB","pt-BR","fr"],default_locale:"en-US"});!function(e,t){function n(e,t){n.modules[e]=t}function i(e){for(var t=e.split("/"),n=[],i=0;i<t.length;i++)"."==t[i]||(".."==t[i]?n.pop():n.push(t[i]));return n.join("/")}function o(e,t){return e?e.trim().replace(/\/*$/,"/")+t.trim():t.trim()}function r(e){return e?e.split("/").slice(0,-1).join("/"):null}function s(e,l){if(l=i(o(r(e),l)),l in n.exports)return n.exports[l];if(!(l in n.modules))throw new Error("Module not defined: "+l);var a=n.modules[l];if("function"==typeof a){var u={},c=a(s.bind(null,l),u,{id:l,uri:""});a=c!==t?c:u}return n.exports[l]=a}n.modules={},n.exports={};var l=s.bind(null,null);n("l20n/html",function(t){
"use strict";function n(e,t){return document.readyState===e?t():void document.addEventListener("readystatechange",function(){document.readyState===e&&t()})}function i(e){_&&(e.addEventListener("error",console.error.bind(console)),e.addEventListener("warning",console.warn.bind(console))),e.localizeNode=function(e){for(var t=p(e),n=O.extend(t.ids),i=0;i<t.nodes.length;i++)g(t.nodes[i],t.ids[i],n.entities[t.ids[i]])},e.translateNode=g,e.once=function(e){if(N)e();else{var t=function t(){document.removeEventListener("DocumentLocalized",t),e()};document.addEventListener("DocumentLocalized",t)}},document.l10n=e}function o(){var e=document.head,t=e.querySelector('script[type="application/l10n-data+json"]');t&&T.updateData(JSON.parse(t.textContent));var n=e.querySelector('link[rel="localization"]'),i=e.querySelector('script[type="application/l10n-manifest-json"]');if(i)return console.log("got embedded l20n manifest"),u(s(i.text,"embedded")),h();if(n)return r(n.href),h();var o=e.querySelectorAll('script[type="application/l20n"]');if(o.length)return console.log("found "+o.length+" embedded l20n scripts"),a(o),h();document.body.querySelectorAll('script[type="application/l20n"]');return o.length?(console.log("found "+o.length+" embedded l20n scripts in body"),a(o),h()):void console.error("L20n: No resources found. (Put them above l20n.js.)")}function r(e){C.load(e,function(t,n){t&&(Raygun&&Raygun.send(t),n=Fallback_Manifest);var i=s(n,e);u(i)})}function s(e,t){var n=JSON.parse(e);return n.resources=n.resources.map(c.bind(this,t)),n}function l(e){document.documentElement.lang=e,document.documentElement.dir=A.indexOf(e)===-1?"ltr":"rtl"}function a(e){for(var n=[],i=null,o=0;o<e.length;o++){var r=null;r=e[o].hasAttribute("src")?/([^\/]*).l20n/.exec(e[o].src)[1]:e[o].getAttribute("data-l10n-locale"),"true"===e[o].getAttribute("data-l10n-default-locale")&&(i=r),r&&n.push(r)}T.registerLocales(i||n[0],n),T.registerLocaleNegotiator(function(e,n,i){var o=t("./intl").Intl,r=o.prioritizeLocales(e,n,i);return l(r[0]),r});for(var o=0;o<e.length;o++)e[o].hasAttribute("src")?T.linkResource(e[o].src):T.addResource(e[o].textContent,e[o].getAttribute("data-l10n-locale"));T.requestLocales.apply(T,n)}function u(e){T.registerLocales(e.default_locale,e.locales),T.registerLocaleNegotiator(function(e,n,i){var o=t("./intl").Intl,r=o.prioritizeLocales(e,n,i);return l(r[0]),r});var n=/{{\s*locale\s*}}/;e.resources.forEach(function(e){n.test(e)?T.linkResource(e.replace.bind(e,n)):T.linkResource(e)});var i=navigator.languages;if(i&&i.length){i=i.slice(0);for(var o=0;o<i.length;o++)i[o]=i[o].replace(/@.*$/,"");T.requestLocales.apply(T,i)}else{var r="undefined"!=typeof navigator.language?navigator.language||"en-US":navigator.browserLanguage;T.requestLocales(r.replace(/@.*$/,""))}return e}function c(e,t){if(F.test(t))return t;var n=e.split("/").slice(0,-1).concat(t.split("/")).filter(function(e){return"."!==e});return n.join("/")}function d(){var e=document.createEvent("Event");e.initEvent("DocumentLocalized",!1,!1),document.dispatchEvent(e)}function h(){var e=p(document);O=T.localize(e.ids,function(t){e||(e=p(document));for(var n=0;n<e.nodes.length;n++)g(e.nodes[n],e.ids[n],t.entities[e.ids[n]]);"locales"in t.reason&&t.reason.locales.length&&l(t.reason.locales[0]),e=null,N||(N=!0,d())})}function p(e){var t=e.querySelectorAll("[data-l10n-id]"),n=[];e.hasAttribute&&e.hasAttribute("data-l10n-id")&&(t=Array.prototype.slice.call(t),t.push(e));for(var i=0;i<t.length;i++)n.push(t[i].getAttribute("data-l10n-id"));return{ids:n,nodes:t}}function f(e){return e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}).replace(/^-/,"")}function g(e,t,n){if(n){if(n.value)if(n.value.indexOf("<")===-1&&n.value.indexOf("&")===-1)e.textContent=n.value;else{if(!S&&"function"!=typeof E.shims.getTemplate)return null;var i=S?document.createElement("template"):E.shims.getTemplate();i.innerHTML=n.value,m(e,i.content)}Object.keys(n.attributes).forEach(function(t){var i=f(t);y({name:i},e)&&e.setAttribute(i,n.attributes[t])})}}function m(e,t){for(var n,i=document.createDocumentFragment();n=t.childNodes[0];)if(t.removeChild(n),n.nodeType!==Node.TEXT_NODE){var o=b(e,n);if(o)m(o,n),i.appendChild(o);else if(v(n)){for(var r,s=0;r=n.attributes[s];s++)y(r,n)||n.removeAttribute(r.name);i.appendChild(n)}else{var l=document.createTextNode(n.textContent);i.appendChild(l)}}else i.appendChild(n);if(e.textContent="",e.appendChild(i),t.attributes)for(var r,s=0;r=t.attributes[s];s++)y(r,e)&&e.setAttribute(r.name,r.value)}function v(e){return x.elements.indexOf(e.tagName.toLowerCase())!==-1}function y(e,t){var n=e.name.toLowerCase(),i=t.tagName.toLowerCase();if(x.attributes.global.indexOf(n)!==-1)return!0;if(!x.attributes[i])return!1;if(x.attributes[i].indexOf(n)!==-1)return!0;if("input"===i&&"value"===n){var o=t.type.toLowerCase();if("submit"===o||"button"===o||"reset"===o||"text"===o)return!0}return!1}function b(e,t){for(var n,i=w(t),o=0,r=0;n=e.children[r];r++)if(n.nodeType===Node.ELEMENT_NODE&&n.tagName===t.tagName){if(o===i)return n;o++}return null}function w(e){for(var t,n=0;t=e.previousElementSibling;)t.tagName===e.tagName&&n++;return n}var _=!1,E=t("../l20n"),C=t("./platform/io");E.shims={};var F=/^\/|:/,A=["ar","fa","he","ps","ur"],x={elements:["a","em","strong","small","s","cite","q","dfn","abbr","data","time","code","var","samp","kbd","sub","sup","i","b","u","mark","ruby","rt","rp","bdi","bdo","span","br","wbr"],attributes:{global:["title","aria-label"],a:["download"],area:["download","alt"],input:["alt","placeholder"],menuitem:["label"],menu:["label"],optgroup:["label"],option:["label"],track:["label"],img:["alt"],textarea:["placeholder","rows"],th:["abbr"]}},S="content"in document.createElement("template"),T=E.getContext(document.location.host);i(T);var O,N=!1;return"complete"===document.readyState?e.setTimeout(o):n("interactive",o),E}),n("l20n",function(e,t){"use strict";var n=e("./l20n/context").Context,i=e("./l20n/parser").Parser,o=e("./l20n/compiler").Compiler;t.Context=n,t.Parser=i,t.Compiler=o,t.getContext=function(e){return new n(e)}}),n("l20n/context",function(e,n){"use strict";function i(e,n){function o(e,o,u){function c(e,i){return e?o(e):(i!==t&&(l.source=i),l.ast=n.parse(l.source),void d())}function d(){function t(e){return e?o(e):(c--,void(0===c&&h()))}var s=l.ast.body.filter(function(e,t){return"ImportStatement"===e.type&&(a.push(t),!0)});s.forEach(function(e){var t=r(e.uri.content),o=new i(t,n);l.resources.push(o)});var c=l.resources.length;return 0===c?o():void l.resources.forEach(function(n){n.build(e+1,t,u)})}function h(){for(var e=l.resources.length-1;e>=0;e--){var t=a[e]||0;Array.prototype.splice.apply(l.ast.body,[t,1].concat(l.resources[e].ast.body))}o()}return e>=7?o(new s("Too many nested imports.")):void(l.source?c():p.load(l.id,c,u))}function r(e){if(null===l.id||u.test(e))return e;var t=l.id.split("/").slice(0,-1).concat(e.split("/")).filter(function(e){return"."!==e});return t.join("/")}var l=this;this.id=e,this.resources=[],this.source=null,this.ast={type:"L20n",body:[]},this.build=o;var a=[],u=/^\/|:/}function o(e,n,i,o){function r(e){function t(e){e&&(c++,o.emit(e instanceof s?"error":"warning",e)),a--,0===a&&(c===u.resources.length&&o.emit("error",new s("Locale has no valid resources")),n())}function n(){u.ast.body=u.resources.reduce(function(e,t){return e.concat(t.ast.body)},u.ast.body),r()}function r(){u.entries=i.compile(u.ast),u.isReady=!0,e&&e()}if(!e)var l=!0;var a=u.resources.length;if(0===a)throw new s("Locale has no resources");var c=0;u.resources.forEach(function(e){e.build(0,t,l)})}function l(e){return this.entries.hasOwnProperty(e)?this.entries[e]:t}function a(e){return this.resources.some(function(t){return t.id===e})}this.id=e,this.resources=[],this.entries=null,this.ast={type:"L20n",body:[]},this.isReady=!1,this.build=r,this.getEntry=l,this.hasResource=a;var u=this}function r(n){function r(e,n){Object.keys(n).forEach(function(i){n[i]===t?delete e[i]:null===n[i]||"object"!=typeof n[i]?e[i]=n[i]:("object"!=typeof e[i]&&(e[i]={}),r(e[i],n[i]))})}function p(e){if(!e||"object"!=typeof e)throw new s("Context data must be a non-null object");r(M,e)}function f(e,t){if(!q)throw new s("Context not ready");return w.call(X,0,e,t).value}function g(e,t){if(!q)throw new s("Context not ready");return w.call(X,0,e,t)}function m(e,t){if(!t)throw new s("No callback passed");return y.call(X,e,t)}function v(e){q&&setTimeout(function(){e()}),I("ready",e)}function y(e,t,n){var i={extend:function(n){for(var i=0;i<n.length;i++)e.indexOf(n[i])===-1&&e.push(n[i]);if(q){var o=b.call(this,n);return K.bindGet({id:t,callback:y.bind(this,e,t),globals:Object.keys(o.globalsUsed)},!0),o}}.bind(this),stop:function(){K.unbindGet(t)}.bind(this)};if(!q)return K.bindGet({id:t,callback:y.bind(this,e,t),globals:[]}),i;var o=b.call(this,e),r={entities:o.entities,reason:n||{locales:H.slice()},stop:function(){K.unbindGet(t)}};return K.bindGet({id:t,callback:y.bind(this,e,t),globals:Object.keys(o.globalsUsed)}),t(r),i}function b(e){for(var t,n={entities:{},globalsUsed:{}},i=0;t=e[i];i++){n.entities[t]=g.call(this,t);for(var o in n.entities[t].globals)n.entities[t].globals.hasOwnProperty(o)&&(n.globalsUsed[o]=!0)}return n}function w(e,n,i,o){var r=H[e];if(!r)return D(new l("Unable to get translation",n,H)),{value:o?o.source:null,attributes:{},globals:{},locale:o?o.loc:null};var s=T(r);s.isReady||s.build(null);var u=s.getEntry(n);if(u===t)return R(new a("Not found",n,H,s)),w.call(this,e+1,n,i,o);var c;try{c=u.get(_.call(this,i))}catch(t){if(t instanceof d.RuntimeError){if(D(new a(t.message,n,H,s)),t instanceof d.ValueError){var h=o||{source:t.source,loc:s.id};return w.call(this,e+1,n,i,h)}return w.call(this,e+1,n,i,o)}throw D(t)}return c.locale=s.id,c}function _(e){if(!e)return M;var t={};return r(t,M),r(t,e),t}function E(e,t){if(U)throw new s("Context is frozen");V.push(["text",e,t])}function C(e,t,n){var o=new i(n||null,W);o.source=e,t.resources.push(o)}function F(e){if(U)throw new s("Context is frozen");V.push(["function"==typeof e?"template":"uri",e])}function A(e,t){if(!t.hasResource(e)){var n=new i(e,W);t.resources.push(n)}}function x(e,n){if(U)throw new s("Context is frozen");e!==t&&($=e,B=[],n||(n=[]),n.push(e),n.forEach(function(e){if("string"!=typeof e)throw new s("Language codes must be strings");B.indexOf(e)===-1&&B.push(e)}))}function S(e){if(U)throw new s("Context is frozen");P=e}function T(e){if(G[e])return G[e];var t=new o(e,W,Y,z);G[e]=t;for(var n=0;n<V.length;n++){var i=V[n];"text"===i[0]?i[2]&&i[2]!=e||C(i[1],t,i[2]):"uri"===i[0]?A(i[1],t):A(i[1](t.id),t)}return t}function O(){if(U&&!q)throw new s("Context not ready");if(0===V.length)return void R(new s("Context has no resources; not freezing"));if(U=!0,j=Array.prototype.slice.call(arguments),j.length&&j.forEach(function(e){if("string"!=typeof e)throw new s("Language codes must be strings")}),!P){var t=e("./intl").Intl;P=t.prioritizeLocales}var n=P(B,j,$,N);n&&N(n)}function N(e){var t=T(e[0]);t.isReady?k(e):t.build(k.bind(null,e))}function k(e){H=e,q=!0,K.all(H.slice()),z.emit("ready")}function I(e,t){z.addEventListener(e,t)}function L(e,t){z.removeEventListener(e,t)}function R(e){return z.emit("warning",e),e}function D(e){return z.emit("error",e),e}this.id=n,this.registerLocales=x,this.registerLocaleNegotiator=S,this.requestLocales=O,this.addResource=E,this.linkResource=F,this.updateData=p,this.getSync=f,this.getEntitySync=g,this.localize=m,this.ready=v,this.addEventListener=I,this.removeEventListener=L,Object.defineProperty(this,"supportedLocales",{get:function(){return H.slice()},enumerable:!0});var P,M={},$="i-default",B=[$],j=[],H=[],G={},V=[],q=!1,U=!1,z=new u,W=new c,Y=new d,K=new h,X=this;W.addEventListener("error",D),Y.addEventListener("error",R),Y.setGlobals(K.globals)}function s(e){this.name="ContextError",this.message=e}function l(e,t,n){s.call(this,e),this.name="RuntimeError",this.entity=t,this.supportedLocales=n.slice(),this.message=t+": "+e+"; tried "+n.join(", ")}function a(e,t,n,i){l.call(this,e,t,n),this.name="TranslationError",this.locale=i.id,this.message="["+this.locale+"] "+t+": "+e}var u=e("./events").EventEmitter,c=e("./parser").Parser,d=e("./compiler").Compiler,h=e("./retranslation").RetranslationManager;e("./platform/globals");var p=e("./platform/io");r.Error=s,r.RuntimeError=l,r.TranslationError=a,s.prototype=Object.create(Error.prototype),s.prototype.constructor=s,l.prototype=Object.create(s.prototype),l.prototype.constructor=l,a.prototype=Object.create(l.prototype),a.prototype.constructor=a,n.Context=r}),n("l20n/events",function(e,t){"use strict";function n(){this._listeners={}}n.prototype.emit=function(){var e=Array.prototype.slice.call(arguments),t=e.shift();if(!this._listeners[t])return!1;for(var n=this._listeners[t].slice(),i=0;i<n.length;i++)n[i].apply(this,e);return!0},n.prototype.addEventListener=function(e,t){return this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t),this},n.prototype.removeEventListener=function(e,t){var n=this._listeners[e];if(!n)return this;var i=n.indexOf(t);return i===-1?this:(n.splice(i,1),this)},t.EventEmitter=n}),n("l20n/parser",function(e,n){"use strict";function i(e){function n(){K+=2;var e=K,t=Y.indexOf("*/",e);if(t===-1)throw z("Comment without closing tag");return K=t+2,{type:"Comment",content:Y.slice(e,t)}}function i(){for(var e,t,n,i=[];;){if(e=l("Attribute"),e.local="_"===e.key.name.charAt(0),i.push(e),t=p(),n=Y.charAt(K),">"===n)break;if(!t)throw z('Expected ">"')}return i}function s(e){var t=m();if(f(),":"!==Y.charAt(K))throw z('Expected ":"');return++K,f(),{type:e,key:t,value:h()}}function l(e){var t=m(),n=[];if("["===Y.charAt(K)&&(++K,f(),n=U(x,"]")),f(),":"!==Y.charAt(K))throw z('Expected ":"');return++K,f(),{type:e,key:t,value:h(),index:n}}function a(){++K,f();for(var e,t,n,i=[],o=!1;;){if(e=!1,"*"===Y.charAt(K)){if(++K,o)throw z("Default item redefinition forbidden");e=!0,o=!0}if(t=s("HashItem"),t.default=e,i.push(t),f(),n=","===Y.charAt(K),n&&(++K,f()),"}"===Y.charAt(K)){++K;break}if(!n)throw z('Expected "}"')}return{type:"Hash",content:i}}function u(){var e,t=Y.charAt(++K);if("u"===t){for(var n="",i=0;i<4;i++){if(t=Y[++K],e=t.charCodeAt(0),!(e>96&&e<103||e>64&&e<71||e>47&&e<58))throw z("Illegal unicode escape sequence");n+=t}return String.fromCharCode(parseInt(n,16))}return t}function c(e,t){var n,i=null,o="",r=0;K+=t-1;var s=K+1;e:for(;;)switch(n=Y.charAt(++K)){case"\\":o+=u();break;case"{":if("{"===Y.charAt(K+1)){if(null===i&&(i=[]),r>Z-1)throw z("Too many placeables, maximum allowed is "+Z);if(o&&i.push({type:"String",content:o}),K+=2,f(),i.push(x()),f(),"}"!==Y.charAt(K)||"}"!==Y.charAt(K+1))throw z('Expected "}}"');K+=1,r++,o="";break}default:if(1===t){if(n===e){K++;break e}}else if(n===e[0]&&Y.charAt(K+1)===n&&Y.charAt(K+2)===n){K+=3;break e}if(o+=n,K+1>=X)throw z("Unclosed string literal")}return null===i?{type:"String",content:o}:(o.length&&i.push({type:"String",content:o}),{type:"ComplexString",content:i,source:Y.slice(s,K-t)})}function d(e,t){var n,i,o,r=Y.indexOf(e,K+t);if(r===-1)throw z("Unclosed string literal");return o=Y.slice(K+t,r),n=o.indexOf("{{"),n!==-1?c(e,t):(i=o.indexOf("\\"),i!==-1?c(e,t):(K=r+t,{type:"String",content:o}))}function h(e,n){if(n===t&&(n=Y.charAt(K)),"'"===n||'"'===n)return n===Y.charAt(K+1)&&n===Y.charAt(K+2)?d(n+n+n,3):d(n,1);if("{"===n)return a();if(!e)throw z("Unknown value type");return null}function p(){for(var e=K,t=Y.charCodeAt(e);32===t||10===t||9===t||13===t;)t=Y.charCodeAt(++K);return K!==e}function f(){for(var e=Y.charCodeAt(K);32===e||10===e||9===e||13===e;)e=Y.charCodeAt(++K)}function g(){return++K,{type:"VariableExpression",id:m()}}function m(){var e=K,t=e,n=Y,i=n.charCodeAt(t);if((i<97||i>122)&&(i<65||i>90)&&95!==i&&(i<48||i>57))throw z("Identifier has to start with [a-zA-Z0-9_]");for(i=n.charCodeAt(++e);i>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57||95===i||45===i;)i=n.charCodeAt(++e);return K=e,{type:"Identifier",name:n.slice(t,e)}}function v(){if(K+=6,"("!==Y.charAt(K))throw z('Expected "("');++K,f();var e=d(Y.charAt(K),1);if(f(),")"!==Y.charAt(K))throw z('Expected ")"');return++K,{type:"ImportStatement",uri:e}}function y(e){if("_"===e.name.charAt(0))throw z('Macro ID cannot start with "_"');++K;var t=U(g,")");if(p(),"{"!==Y.charAt(K))throw z('Expected "{"');++K,f();var n=x();if(f(),"}"!==Y.charAt(K))throw z('Expected "}"');if(++K,f(),62!==Y.charCodeAt(K))throw z('Expected ">"');return++K,{type:"Macro",id:e,args:t,expression:n}}function b(e,t){if(!p())throw z("Expected white space");var n=Y.charAt(K),o=h(!0,n),r=null;if(null===o){if(">"===n)throw z('Expected ">"');r=i()}else{var s=p();if(">"!==Y.charAt(K)){if(!s)throw z('Expected ">"');r=i()}}return++K,{type:"Entity",id:e,value:o,index:t,attrs:r,local:95===e.name.charCodeAt(0)}}function w(){var e=Y.charCodeAt(K);if(60===e){++K;var t=m();return e=Y.charCodeAt(K),40===e?y(t):91===e?(++K,b(t,U(x,"]"))):b(t,null)}if(47===Y.charCodeAt(K)&&42===Y.charCodeAt(K+1))return n();if("import"===Y.slice(K,K+6))return v();throw z("Invalid entry")}function _(){var e=[];for(f();K<X;){try{e.push(w())}catch(t){if(!(t instanceof o))throw t;J.emit("error",t),e.push(W())}K<X&&f()}return{type:"L20n",body:e}}function E(){var e=[];for(f();K<X;)e.push(w()),K<X&&f();return{type:"L20n",body:e}}function C(e){return Y=e,K=0,X=Y.length,Q()}function F(e,t){if(!J)throw new Error("Emitter not available");return J.addEventListener(e,t)}function A(e,t){if(!J)throw new Error("Emitter not available");return J.removeEventListener(e,t)}function x(){return O()}function S(e,t,n,i){for(var o,r,s=i();;){if(o="",f(),r=Y.charAt(K),e[0].indexOf(r)===-1)break;if(o+=r,++K,e.length>1)if(r=Y.charAt(K),e[1]===r)++K,o+=r;else if(e[2])return--K,s;f(),s={type:t,operator:{type:n,token:o},left:s,right:i()}}return s}function T(e,t,n,i){var o=Y.charCodeAt(K);return e.indexOf(o)===-1?i():(++K,f(),{type:t,operator:{type:n,token:String.fromCharCode(o)},argument:T(e,t,n,i)})}function O(){var e=N();if(f(),63!==Y.charCodeAt(K))return e;++K,f();var t=x();if(f(),58!==Y.charCodeAt(K))throw z('Expected ":"');return++K,f(),{type:"ConditionalExpression",test:e,consequent:t,alternate:x()}}function N(){return S([["|"],"|",!0],"LogicalExpression","LogicalOperator",k)}function k(){return S([["&"],"&",!0],"LogicalExpression","Logicalperator",I)}function I(){return S([["=","!"],"=",!0],"BinaryExpression","BinaryOperator",L)}function L(){return S([["<",">"],"=",!1],"BinaryExpression","BinaryOperator",R)}function R(){return S([["+","-"]],"BinaryExpression","BinaryOperator",D)}function D(){return S([["%"]],"BinaryExpression","BinaryOperator",P)}function P(){return S([["*"]],"BinaryExpression","BinaryOperator",M)}function M(){return S([["/"]],"BinaryExpression","BinaryOperator",$)}function $(){return T([43,45,33],"UnaryExpression","UnaryOperator",G)}function B(e){return f(),{type:"CallExpression",callee:e,arguments:U(x,")")}}function j(e,t){if("ParenthesisExpression"!==e.type&&"Identifier"!==e.type&&"ThisExpression"!==e.type)throw z("AttributeExpression must have Identifier, This or Parenthesis as left node");var n;if(t){if(f(),n=x(),f(),"]"!==Y.charAt(K))throw z('Expected "]"');return++K,{type:"AttributeExpression",expression:e,attribute:n,computed:!0}}return n=m(),{type:"AttributeExpression",expression:e,attribute:n,computed:!1}}function H(e,t){var n;if(t){if(f(),n=x(),f(),"]"!==Y.charAt(K))throw z('Expected "]"');return++K,{type:"PropertyExpression",expression:e,property:n,computed:!0}}return n=m(),{type:"PropertyExpression",expression:e,property:n,computed:!1}}function G(){for(var e,t=V();;)if(e=Y.charCodeAt(K),46===e||91===e)++K,t=H(t,91===e);else if(58===e&&58===Y.charCodeAt(K+1))K+=2,91===Y.charCodeAt(K)?(++K,t=j(t,!0)):t=j(t,!1);else{if(40!==e)break;++K,t=B(t)}return t}function V(){if(40===Y.charCodeAt(K)){++K,f();var e={type:"ParenthesisExpression",expression:x()};if(f(),41!==Y.charCodeAt(K))throw z('Expected ")"');return++K,e}return q()}function q(){for(var e=K,t=Y.charCodeAt(e);t>47&&t<58;)t=Y.charCodeAt(++e);if(e>K){var n=K;return K=e,{type:"Number",value:parseInt(Y.slice(n,e),10)}}switch(t){case 39:case 34:case 123:case 91:return h();case 36:return g();case 64:return++K,{type:"GlobalsExpression",id:m()};case 126:return++K,{type:"ThisExpression"};default:return m()}}function U(e,t){var n;if(f(),Y.charAt(K)===t)return++K,[];for(var i=[];;){if(i.push(e()),f(),n=Y.charAt(K),","!==n){if(n===t){++K;break}throw z('Expected "," or "'+t+'"')}++K,f()}return i}function z(e,n){n===t&&(n=K);var i=Y.lastIndexOf("<",n-1),r=Y.lastIndexOf(">",n-1);i=r>i?r+1:i;var s=Y.slice(i,n+10),l=e+" at pos "+n+': "'+s+'"';return new o(l,n,s)}function W(){var e,t=Y.indexOf("<",K);return t===-1?(e={type:"JunkEntry",content:Y.slice(K)},K=X,e):(e={type:"JunkEntry",content:Y.slice(K,t)},K=t,e)}this.parse=C,this.addEventListener=F,this.removeEventListener=A;var Y,K,X,J,Q,Z=100;e?Q=E:(J=new r,Q=_)}function o(e,t,n){this.name="ParserError",this.message=e,this.pos=t,this.context=n}var r=e("./events").EventEmitter;i.Error=o,o.prototype=Object.create(Error.prototype),o.prototype.constructor=o,n.Parser=i}),n("l20n/compiler",function(e,n){function i(){function e(e,t){t||(t={});for(var n,i=0;n=e.body[i];i++){var o=G[n.type];if(o)try{t[n.id.name]=new o(n,t)}catch(e){u(e)}}return t}function n(e){return j=e,!0}function i(e,t){return B.addEventListener(e,t)}function o(e,t){return B.removeEventListener(e,t)}function d(e,t,n,i){var o=new e(t,n,i);return B.emit("error",o),o}function h(e,t){this.id=e.id.name,this.env=t,this.local=e.local||!1,this.index=null,this.attributes=null,this.publicAttributes=null;var n;if(e.index)for(this.index=[],n=0;n<e.index.length;n++)this.index.push(A(e.index[n],this));if(e.attrs)for(this.attributes={},this.publicAttributes=[],n=0;n<e.attrs.length;n++){var i=e.attrs[n];this.attributes[i.key.name]=new p(i,this),i.local||this.publicAttributes.push(i.key.name)}e.value&&"String"===e.value.type?this.value=e.value.content:this.value=m(e.value,this,this.index)}function p(e,t){if(this.key=e.key.name,this.local=e.local||!1,this.index=null,e.index){this.index=[];for(var n=0;n<e.index.length;n++)this.index.push(A(e.index[n],this))}e.value&&"String"===e.value.type?this.value=e.value.content:this.value=m(e.value,t,this.index),this.entity=t}function f(e,t){this.id=e.id.name,this.env=t,this.local=e.local||!1,this.expression=m(e.expression,this),this.args=e.args}function g(e,t,n){if(!e)return null;if(!V[e.type])throw d("CompilationError","Unknown expression type"+e.type);return n&&(n=n.slice()),V[e.type](e,t,n)}function m(e,t,n){if(!e)return null;var i;return function(o,r,s){return i||(i=g(e,t,n)),i(o,r,s)}}function v(e,n,i){if("string"==typeof e||"boolean"==typeof e||"number"==typeof e||!e)return e;if(e.value!==t)return v(e.value,n,i);if("function"==typeof e){var o=e(n,i);return n=o[0],o=o[1],v(o,n,i)}if(e.expression)throw new s("Uncalled macro: "+e.id);throw new s("Cannot resolve ctxdata or global of type "+typeof e)}function y(e){var t=e.name;return function(e){if(!e.__env__.hasOwnProperty(t))throw new s("Reference to an unknown entry: "+t);return e={__this__:e.__env__[t],__env__:e.__env__},[e,e.__this__]}}function b(){return function(e){return[e,e.__this__]}}function w(e){var t=e.id.name;return function(e,n){if(e.hasOwnProperty(t))return e[t];if(!n||!n.hasOwnProperty(t))throw new s("Reference to an unknown variable: "+t);return[e,n[t]]}}function _(e){var t=e.id.name;return function(e){if(!j)throw new s("No globals set (tried @"+t+")");if(!j.hasOwnProperty(t))throw new s("Reference to an unknown global: "+t);var n;try{n=j[t].get()}catch(e){throw new s("Cannot evaluate global "+t)}return H.globals[t]=!0,[e,n]}}function E(e){return function(t){return[t,e.value]}}function C(e){return function(n,i,o){if(o!==t)throw new s("Cannot get property of a string: "+o);return[n,e.content]}}function F(e,n){for(var i=[],o=0;o<e.content.length;o++)i.push(g(e.content[o],n));return function(){var o=!1;return function(r,a,c){if(c!==t)throw new s("Cannot get property of a string: "+c);if(o)throw new s("Cyclic reference detected");o=!0;var d=[];try{for(var h=0;h<i.length;h++){var p=v(i[h],r,a);if("string"!=typeof p&&"number"!=typeof p)throw new s("Placeables must be strings or numbers");if(p.length>$)throw new s("Placeable has too many characters, maximum allowed is "+$);d.push(p)}}catch(t){throw u(t),new l(t.message,n,e.source)}finally{o=!1}return[r,d.join("")]}}()}function A(e,t){var n=g(e,t);return function(){var e=!1;return function(i,o){if(e)throw new s("Cyclic reference detected");e=!0;var r;try{r=v(n,i,o)}catch(e){if(e instanceof a)throw e;throw u(e),d(a,e.message,t)}finally{e=!1}return[i,r]}}()}function x(e,n,i){for(var o,r={},s=i?i.shift():t,l=0;l<e.content.length;l++){var u=e.content[l];r[u.key.name]=g(u.value,n,i),u.default&&(o=u.key.name)}return function(e,i,l){for(var u=[l,s,o],c=[],h=0;h<u.length;h++){var p=v(u[h],e,i);if(p!==t){if("string"!=typeof p)throw d(a,"Index must be a string",n);if(c.push(p),r.hasOwnProperty(p))return[e,r[p]]}}var f;throw f=c.length?'Hash key lookup failed (tried "'+c.join('", "')+'").':"Hash key lookup failed.",d(a,f,n)}}function S(e,t){if("-"===e)return function(e){if("number"!=typeof e)throw new s("The unary - operator takes a number");return-e};if("+"===e)return function(e){if("number"!=typeof e)throw new s("The unary + operator takes a number");return+e};if("!"===e)return function(e){if("boolean"!=typeof e)throw new s("The ! operator takes a boolean");return!e};throw d(r,"Unknown token: "+e,t)}function T(e,t){if("=="===e)return function(e,t){if(!("number"==typeof e&&"number"==typeof t||"string"==typeof e&&"string"==typeof t))throw new s("The == operator takes two numbers or two strings");return e===t};if("!="===e)return function(e,t){if(!("number"==typeof e&&"number"==typeof t||"string"==typeof e&&"string"==typeof t))throw new s("The != operator takes two numbers or two strings");return e!==t};if("<"===e)return function(e,t){if("number"!=typeof e||"number"!=typeof t)throw new s("The < operator takes two numbers");return e<t};if("<="===e)return function(e,t){if("number"!=typeof e||"number"!=typeof t)throw new s("The <= operator takes two numbers");return e<=t};if(">"===e)return function(e,t){if("number"!=typeof e||"number"!=typeof t)throw new s("The > operator takes two numbers");return e>t};if(">="===e)return function(e,t){if("number"!=typeof e||"number"!=typeof t)throw new s("The >= operator takes two numbers");return e>=t};if("+"===e)return function(e,t){if(!("number"==typeof e&&"number"==typeof t||"string"==typeof e&&"string"==typeof t))throw new s("The + operator takes two numbers or two strings");return e+t};if("-"===e)return function(e,t){if("number"!=typeof e||"number"!=typeof t)throw new s("The - operator takes two numbers");return e-t};if("*"===e)return function(e,t){if("number"!=typeof e||"number"!=typeof t)throw new s("The * operator takes two numbers");return e*t};if("/"===e)return function(e,t){if("number"!=typeof e||"number"!=typeof t)throw new s("The / operator takes two numbers");if(0===t)throw new s("Division by zero not allowed.");return e/t};if("%"===e)return function(e,t){if("number"!=typeof e||"number"!=typeof t)throw new s("The % operator takes two numbers");if(0===t)throw new s("Modulo zero not allowed.");return e%t};throw d(r,"Unknown token: "+e,t)}function O(e,t){if("&&"===e)return function(e,t){if("boolean"!=typeof e||"boolean"!=typeof t)throw new s("The && operator takes two booleans");return e&&t};if("||"===e)return function(e,t){if("boolean"!=typeof e||"boolean"!=typeof t)throw new s("The || operator takes two booleans");return e||t};throw d(r,"Unknown token: "+e,t)}function N(e,t){var n=S(e.operator.token,t),i=g(e.argument,t);return function(e,t){return[e,n(v(i,e,t))]}}function k(e,t){var n=g(e.left,t),i=T(e.operator.token,t),o=g(e.right,t);return function(e,t){return[e,i(v(n,e,t),v(o,e,t))]}}function I(e,t){var n=g(e.left,t),i=O(e.operator.token,t),o=g(e.right,t);return function(e,t){return[e,i(v(n,e,t),v(o,e,t))]}}function L(e,t){var n=g(e.test,t),i=g(e.consequent,t),o=g(e.alternate,t);return function(e,t){var r=v(n,e,t);if("boolean"!=typeof r)throw new s("Conditional expressions must test a boolean");return r===!0?i(e,t):o(e,t)}}function R(e,t){for(var n=g(e.callee,t),i=[],o=0;o<e.arguments.length;o++)i.push(g(e.arguments[o],t));return function(e,t){for(var o=[],r=0;r<i.length;r++)o.push(i[r](e,t));var l=n(e,t);if(e=l[0],l=l[1],!l.expression)throw new s("Expected a macro, got a non-callable.");return l._call(o,t)}}function D(e,n){var i=g(e.expression,n),o=e.computed?g(e.property,n):e.property.name;return function(e,n){var r=v(o,e,n);if("string"!=typeof r)throw new s("Property name must evaluate to a string: "+r);var l=i(e,n);if(e=l[0],l=l[1],l&&l.value!==t){if("function"!=typeof l.value)throw new s("Cannot get property of a "+typeof l.value+": "+r);return l.value(e,n,r)}if("function"==typeof l)return l(e,n,r);if(l&&l.expression)throw new s("Cannot get property of a macro: "+r);if("object"==typeof l){if(null===l)throw new s("Cannot get property of a null: "+r);if(Array.isArray(l))throw new s("Cannot get property of an array: "+r);if(!l.hasOwnProperty(r))throw new s(r+" is not defined on the object.");return[e,l[r]]}throw new s("Cannot get property of a "+typeof l+": "+r)}}function P(e,t){var n=g(e.expression,t),i=e.computed?g(e.attribute,t):e.attribute.name;return function(e,t){var o=v(i,e,t),r=n(e,t);if(e=r[0],r=r[1],!r.attributes)throw new s("Cannot get attribute of a non-entity: "+o);if(!r.attributes.hasOwnProperty(o))throw new s(r.id+" has no attribute "+o);return[e,r.attributes[o]]}}function M(e,t){return g(e.expression,t)}this.compile=e,this.setGlobals=n,this.addEventListener=i,this.removeEventListener=o;var $=2500,B=new c,j=null,H={globals:{}},G={Entity:h,Macro:f};h.prototype.getString=function(e){try{var t={__this__:this,__env__:this.env};return v(this.value,t,e)}catch(e){throw u(e),e instanceof l&&B.emit("error",e),e}},h.prototype.get=function(e){H.globals={};var t={value:this.getString(e),attributes:{}};if(this.publicAttributes){t.attributes={};for(var n,i=0;n=this.publicAttributes[i];i++)t.attributes[n]=this.attributes[n].getString(e)}return t.globals=H.globals,t},p.prototype.getString=function(e){try{var t={__this__:this.entity,__env__:this.entity.env};return v(this.value,t,e)}catch(e){throw u(e),e instanceof l&&B.emit("error",e),e}},f.prototype._call=function(e,t){var n={__this__:this,__env__:this.env};if(this.args.length!==e.length)throw new s(this.id+"() takes exactly "+this.args.length+" argument(s) ("+e.length+" given)");for(var i=0;i<this.args.length;i++)n[this.args[i].id.name]=e[i];var o=this.expression(n,t);return n=o[0],o=o[1],[n,v(o,n,t)]};var V={Identifier:y,ThisExpression:b,VariableExpression:w,GlobalsExpression:_,Number:E,String:C,Hash:x,HashItem:g,ComplexString:F,UnaryExpression:N,BinaryExpression:k,LogicalExpression:I,ConditionalExpression:L,CallExpression:R,PropertyExpression:D,AttributeExpression:P,ParenthesisExpression:M}}function o(e){this.name="CompilerError",this.message=e}function r(e,t){o.call(this,e),this.name="CompilationError",this.entry=t.id}function s(e){o.call(this,e),this.name="RuntimeError"}function l(e,t,n){s.call(this,e),this.name="ValueError",this.entry=t.id,this.source=n}function a(e,t){s.call(this,e),this.name="IndexError",this.entry=t.id}function u(e){if(!(e instanceof o))throw e}var c=e("./events").EventEmitter;i.Error=o,i.CompilationError=r,i.RuntimeError=s,i.ValueError=l,i.IndexError=a,o.prototype=Object.create(Error.prototype),o.prototype.constructor=o,r.prototype=Object.create(o.prototype),r.prototype.constructor=r,s.prototype=Object.create(o.prototype),s.prototype.constructor=s,l.prototype=Object.create(s.prototype),l.prototype.constructor=l,a.prototype=Object.create(s.prototype),a.prototype.constructor=a,n.Compiler=i}),n("l20n/retranslation",function(e,t){"use strict";function n(){function e(e){var t=new e;this.globals[t.id]=t,t.activate&&(s[t.id]=0,t.addEventListener("change",function(e){
for(var n=0;n<r.length;n++)r[n]&&r[n].globals.indexOf(e)!==-1&&r[n].callback({global:t.id})}))}function t(e,t){var n,i;for(n=0;n<l.length;n++)if(l[n].id===e.id){i=!0;break}i?t&&(l[n]=e):l.push(e);var o;for(n=0;n<r.length;n++)if(r[n]&&r[n].id===e.id){o=r[n];break}var a;if(o)if(t)o.callback=e.callback,a=e.globals.filter(function(e){return this.globals[e].activate&&o.globals.indexOf(e)===-1},this),a.forEach(function(e){s[e]++,this.globals[e].activate()},this),o.globals=o.globals.concat(a);else if(0===e.globals.length)delete r[n];else{a=e.globals.filter(function(e){return this.globals[e].activate&&o.globals.indexOf(e)===-1},this),a.forEach(function(e){s[e]++,this.globals[e].activate()},this);var u=o.globals.filter(function(t){return this.globals[t].activate&&e.globals.indexOf(t)===-1},this);u.forEach(function(e){s[e]--,0===s[e]&&this.globals[e].deactivate()},this),o.globals=e.globals}else 0!==e.globals.length&&(r.push(e),e.globals.forEach(function(e){this.globals[e].activate&&(s[e]++,this.globals[e].activate())},this))}function i(e){for(var t,n=-1,i=0;i<r.length;i++)if(r[i]&&r[i].id===e){t=r[i],n=i;break}if(t)for(t.globals.forEach(function(e){this.globals[e].activate&&(s[e]--,0===s[e]&&this.globals[e].deactivate())},this),r.splice(n,1),i=0;i<l.length;i++)if(l[i].id===e){l.splice(i,1);break}}function o(e){for(var t=0;t<l.length;t++)l[t].callback({locales:e})}var r=[],s={},l=[];this.bindGet=t,this.unbindGet=i,this.all=o,this.globals={},n._constructors.forEach(function(t){e.call(this,t)},this)}n._constructors=[],n.registerGlobal=function(e){n._constructors.push(e)},n.deregisterGlobal=function(e){var t=n._constructors.indexOf(e);t!==-1&&n._constructors.splice(t,1)},t.RetranslationManager=n}),n("l20n/platform/globals",function(t,n){"use strict";function i(){this.id=null,this._emitter=new l,this.value=null,this.isActive=!1}function o(){function t(){return{width:{px:document.body.clientWidth}}}function n(){o.value=t(),o._emitter.emit("change",o.id)}i.call(this),this.id="screen",this._get=t,this.activate=function(){this.isActive||(e.addEventListener("resize",n),this.isActive=!0)},this.deactivate=function(){e.removeEventListener("resize",n),this.value=null,this.isActive=!1};var o=this}function r(){function e(){return/^MacIntel/.test(navigator.platform)?"mac":/^Linux/.test(navigator.platform)?"linux":/^Win/.test(navigator.platform)?"win":"unknown"}i.call(this),this.id="os",this.get=e}function s(){function e(){var e=new Date;return e.getHours()}function t(){var e=new Date;e.getHours()!==n.value&&(n.value=e.getHours(),n._emitter.emit("change",n.id))}i.call(this),this.id="hour",this._get=e,this.activate=function(){if(!this.isActive){var e=new Date;r=setTimeout(function(){t(),r=setInterval(t,o)},o-e.getTime()%o),this.isActive=!0}},this.deactivate=function(){clearInterval(r),this.value=null,this.isActive=!1};var n=this,o=36e5,r=null}var l=t("../events").EventEmitter,a=t("../retranslation").RetranslationManager;i.prototype._get=function(){throw new Error("Not implemented")},i.prototype.get=function(){return this.value&&this.isActive||(this.value=this._get()),this.value},i.prototype.addEventListener=function(e,t){if("change"!==e)throw"Unknown event type";this._emitter.addEventListener(e,t)},o.prototype=Object.create(i.prototype),o.prototype.constructor=o,r.prototype=Object.create(i.prototype),r.prototype.constructor=r,s.prototype=Object.create(i.prototype),s.prototype.constructor=s,a.registerGlobal(o),a.registerGlobal(r),a.registerGlobal(s),n.Global=i}),n("l20n/platform/io",function(e,t){"use strict";function n(e){this.name="IOError",this.message=e}t.load=function(e,t,i){var o=new XMLHttpRequest;o.overrideMimeType&&o.overrideMimeType("text/plain"),o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status||0===o.status)t(null,o.responseText);else{var i=new n("failed to load manifest: "+e+" "+o.status+" response: "+o.responseText);t(i)}},o.open("GET",e,!i),o.send("")},n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,t.Error=n}),n("l20n/intl",function(n,i,o){"use strict";function r(e){if(!m.test(e))return!1;if(e.startsWith("x-"))return!0;var t=e.indexOf("-x-");return t!==-1&&(e=e.substring(0,t)),!v.test(e)&&!y.test(e)}function s(e){if(e=e.toLowerCase(),p&&p.hasOwnProperty(e))return p[e];for(var t=e.split("-"),n=0;n<t.length;){var i=t[n];if(1===i.length&&(n>0||"x"===i))break;4===i.length?i=i[0].toUpperCase()+i.substring(1):0!==n&&2===i.length&&(i=i.toUpperCase()),f.hasOwnProperty(i)?i=f[i]:g.hasOwnProperty(i)&&(i=g[i].preferred,1===n&&g[i].prefix===t[0]&&(t.shift(),n--)),t[n]=i,n++}for(var o=t.slice(0,n).join("-"),r=[];n<t.length&&"x"!==t[n];){var s=n;for(n++;n<t.length&&t[n].length>1;)n++;var l=sybtags.slice(s,n).join("-");r.push(l)}r.sort();var a="";n<t.length&&(a=t.slice(n).join("-"));var u=o;return r.length>0&&(u+="-"+r.join("-")),a.length>0&&(u.length>0?u+="-"+a:u=a),u}function l(n,i){if(n===t)return[];var o=[];"string"==typeof n&&(n=[n]);for(var l=n,a=l.length,u=0;u<a;){var c=u in l;if(c){var d=l[u];if("string"!=typeof d&&"object"!=typeof d){e.setTimeout(function(){throw new Error("invalid locales element")},100),console.log("invalid locales element"),u++;continue}var h=d;if(!r(h)){e.setTimeout(function(){throw new Error("invalid language tag:"+h+", parsing "+i+" locales: "+JSON.stringify(n))},100),console.log("invalid language tag:",h),u++;continue}h=s(h),o.indexOf(h)===-1&&o.push(h)}u++}return o}function a(e,n){for(var i=n;;){if(e.indexOf(i)!==-1)return i;var o=i.lastIndexOf("-");if(o===-1)return t;o>=2&&"-"===i[o-2]&&(o-=2),i=i.substring(0,o)}}function u(e,n){for(var i=n.length,o=[],r=0;r<i;){var s=n[r],l=s.replace(h,""),u=a(e,l);u!==t&&o.push(u),r++}return o.slice(0)}function c(e,t,n){e=l(e,"available"),t=l(t,"requested");var i=u(e,t);return n?(n=s(n),i.indexOf(n)===-1&&i.push(n),i):i}String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{enumerable:!1,configurable:!1,writable:!1,value:function(e,t){return t=t||0,this.indexOf(e,t)===t}});var d="-u(-[a-z0-9]{2,8})+",h=(new RegExp(d),new RegExp(d,"g")),p={},f={},g={},m=function(){var e="[a-zA-Z]",t="[0-9]",n="(?:"+e+"|"+t+")",i="(?:art-lojban|cel-gaulish|no-bok|no-nyn|zh-guoyu|zh-hakka|zh-min|zh-min-nan|zh-xiang)",o="(?:en-GB-oed|i-ami|i-bnn|i-default|i-enochian|i-hak|i-klingon|i-lux|i-mingo|i-navajo|i-pwn|i-tao|i-tay|i-tsu|sgn-BE-FR|sgn-BE-NL|sgn-CH-DE)",r="(?:"+o+"|"+i+")",s="(?:x(?:-[a-z0-9]{1,8})+)",l="(?:"+t+"|[A-WY-Za-wy-z])",a="(?:"+l+"(?:-"+n+"{2,8})+)",u="(?:"+n+"{5,8}|(?:"+t+n+"{3}))",c="(?:"+e+"{2}|"+t+"{3})",d="(?:"+e+"{4})",h="(?:"+e+"{3}(?:-"+e+"{3}){0,2})",p="(?:"+e+"{2,3}(?:-"+h+")?|"+e+"{4}|"+e+"{5,8})",f=p+"(?:-"+d+")?(?:-"+c+")?(?:-"+u+")*(?:-"+a+")*(?:-"+s+")?",g="^(?:"+f+"|"+s+"|"+r+")$";return new RegExp(g,"i")}(),v=function(){var e="[a-zA-Z]",t="[0-9]",n="(?:"+e+"|"+t+")",i="(?:"+n+"{5,8}|(?:"+t+n+"{3}))",o="(?:"+n+"{2,8}-)+("+i+")-(?:"+n+"{2,8}-)*\\1(?!"+n+")";return new RegExp(o)}(),y=function(){var e="[a-zA-Z]",t="[0-9]",n="(?:"+e+"|"+t+")",i="(?:"+t+"|[A-WY-Za-wy-z])",o="-("+i+")-(?:"+n+"+-)*\\1(?!"+n+")";return new RegExp(o)}();i.Intl={prioritizeLocales:c}}),e.L20n=l("l20n"),l("l20n/html")}(window)}define("l20n",function(e){return function(){var t;return t||e.L20n}}(this)),function(e){"function"==typeof define&&define.amd?define("jquery.cookie",["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){function t(e){return l.raw?e:encodeURIComponent(e)}function n(e){return l.raw?e:decodeURIComponent(e)}function i(e){return t(l.json?JSON.stringify(e):String(e))}function o(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(s," ")),l.json?JSON.parse(e):e}catch(e){}}function r(t,n){var i=l.raw?t:o(t);return e.isFunction(n)?n(i):i}var s=/\+/g,l=e.cookie=function(o,s,a){if(void 0!==s&&!e.isFunction(s)){if(a=e.extend({},l.defaults,a),"number"==typeof a.expires){var u=a.expires,c=a.expires=new Date;c.setTime(+c+864e5*u)}return document.cookie=[t(o),"=",i(s),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}for(var d=o?void 0:{},h=document.cookie?document.cookie.split("; "):[],p=0,f=h.length;p<f;p++){var g=h[p].split("="),m=n(g.shift()),v=g.join("=");if(o&&o===m){d=r(v,s);break}o||void 0===(v=r(v))||(d[m]=v)}return d};l.defaults={},e.removeCookie=function(t,n){return void 0!==e.cookie(t)&&(e.cookie(t,"",e.extend({},n,{expires:-1})),!e.cookie(t))}}),define("jquery.l20n",["require","exports","module","underscore","l20n","jquery.cookie"],function(e,t,n){function i(e){console.log(e.message)}function o(e){var t=$(this).attr("data-l10n-id"),n=$(this).attr("data-l10n-ctx");if("string"==typeof n)try{n=JSON.parse(n)}catch(e){console.error(e)}var i=a.getEntitySync(t,n);a.translateNode(this,t,i)}function r(e){e.find("[data-l10n-id]").each(o),e.filter("[data-l10n-id]").each(o)}var s=e("underscore"),l=(e("l20n"),!1);if(e("jquery.cookie"),document.l10n||window.$&&$.queryString().print||console.error("L20n not available, translations will not be loaded."),window.$||console.error("jquery not available, translations will not be loaded."),!window.$||"1"==$.cookie("disable_translations")||!document.l10n||$("body").hasClass("mobile-app"))return $.fn.l20n=function(){return $(this)},$.l10n=function(e){$(e)},$.l10n.get=function(e,t,n){return t},void($.l10n.getAsync=function(e,t,n,i){window.setTimeout(function(){i(t)},0)});var a=document.l10n;a.addEventListener("warning",i),a.addEventListener("error",i),a.ready(function(){console.log("l20n ready",a.supportedLocales)}),$.fn.l20n=function(){return l?($(this).each(function(e){r($(this))}),$(this)):(console.error("not ready yet (l20n called synchronously?)"),$(this))};var u=s.template;s.template=function(){var e=u.apply(this,arguments);return arguments[0]&&arguments[0].indexOf("data-l10n")!==-1?function(){var t=e.apply(this,arguments);if(!l)return console.error("not ready yet (template called synchronously?)"),t;var n=$(t).l20n();return n.map(function(){return $(this).prop("outerHTML")}).toArray().join("")}:e},$.l10n=function(e){l=!0,a.ready(e)},$.l10n.get=function(e,t,n){if(!l)return console.error("not ready yet (get called synchronously?)"),t;var i=a.getEntitySync(e,n);return null!==i.locale?i.value:t},$.l10n.getAsync=function(e,t,n,i){a.getEntitySync(e,n);$.l10n(function(){i($.l10n.get(e,t,n))})}}),define("views/UserLoginView",["require","exports","module","jquery.l20n","underscore","backbone","plugins/jquery.queryString"],function(e,t,n){e("jquery.l20n");var i=e("underscore"),o=e("backbone");e("plugins/jquery.queryString");var r="<div class='identity'>    <a href='/me'><div class='user-icon' style='<% if (!printing) { %>background-image:url(<%- picture %>); <% } %>background-color: <%- colour %>;'></div></a>    <div class='name'><%-name%></div>    <% if(org.length) { %>        <div class='org-name'>            <div class='org-icon' style='background-image:url(<%- org_icon %>); background-color: <%- org_colour %>;'></div>            <%-org%>            <% if (slug && userIsOrgAdmin) { %><a class='settings' onclick='return false;' href='/<%-slug%>/dashboard' data-l10n-id='org-settings' title='Manage Organisation'></a><%}%>        </div>    <% } else { %>        <% if (limits && limits.private_diagrams) { %>            <div class='diagram-limit' data-l10n-id='diagrams-<%-limits.private_diagrams.available? '' : 'un' %>limited' data-l10n-ctx='{\"privateDiagrams\":{\"available\":<%-limits.private_diagrams.available || 0 %>, \"used\":<%-limits.private_diagrams.used%> }}'>            <% if (limits.private_diagrams.available) { %>                <span class='count'><%-limits.private_diagrams.used%> of <%-limits.private_diagrams.available %></span> private diagrams used            <% } else { %>                <span class='count'>Unlimited</span> private diagrams            <% } %>            </div>        <% } %>    <% } %></div><div class='float-menu controls'>    <% if (!slug) { %><a class='float-menu-item settings' href='/me' data-l10n-id='my-settings'>My Settings & Billing</a><% } %>    <% if (slug && userIsOrgAdmin) { %><a class='float-menu-item org-settings' href='/<%- slug + '/dashboard' %>' data-l10n-id='org-name-settings' data-l10n-ctx='{\"orgName\":\"<%- org %>\"}'><%- org %> Settings</a><% } %>    <% if (slug && !userIsOrgAdmin) { %><a class='float-menu-item settings' href='/me' data-l10n-id='org-my-settings'>My Settings</a><% } %>    <% if (!slug) { %><a class='float-menu-item google-drive' href='/auth/google/drive' data-bypass data-l10n-id='user-link-drive'>Link Google Drive</a><% } %>    <div class='float-menu-separator'/>    <a class='float-menu-item' href='/about' data-bypass data-l10n-id='user-about'>About Coggle</a>    <a class='float-menu-item' href='mailto:hello@coggle.it' data-bypass data-l10n-id='user-contact'>Contact Us</a>    <a class='float-menu-item' href='/privacy' data-bypass data-l10n-id='user-privacy'>Privacy Policy</a>    <a class='float-menu-item' href='/terms' data-bypass data-l10n-id='user-terms'>Terms and Conditions</a>    <div class='float-menu-separator'/>    <a class='float-menu-item logout' href='/logout' data-bypass onclick=\"ga('send', 'event', 'Login', 'Logout')\" data-l10n-id='logout' data-bypass>Logout</a></div>",s=o.View.extend({tagName:"div",className:"user-login",template:i.template(r),events:{click:"toggleOptions",mousedownoutside:"closeOptions","click .identity .settings":"openOrgSettings"},initialize:function(e){i.bindAll(this,"render","setOrganisation","toggleOptions","closeOptions"),this.options=e,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"organisation_changed",this.setOrganisation),this.setOrganisation(this.model.getActiveOrg())},openOrgSettings:function(e){if(this.organisation)return o.history.navigate("/"+this.organisation.get("slug")+"/dashboard",!0),e?(e.stopPropagation(),e.preventDefault(),!1):void 0},toggleOptions:function(){this.$el.toggleClass("open")},closeOptions:function(){this.$el.removeClass("open")},setOrganisation:function(e){this.organisation&&this.organisation.off("change",this.render),this.organisation=e,e&&this.listenTo(e,"change",this.render),this.render()},render:function(){var e=this.model.toJSON();e.printing=!!$.queryString().print,e.org="",e.slug=!1,e.picture=this.model.picture(),e.colour=this.model.colour(),e.limits||(e.limits={});var t=this.organisation;return t&&t.id&&(e.org=t.get("name"),e.org_icon=t.get("picture"),e.org_colour=t.get("colour"),e.slug=t.get("slug"),e.userIsOrgAdmin=t&&t.get("my_access")&&t.get("my_access").indexOf("admin")!==-1),this.$el.html(this.template(e)),this}});n.exports=s}),define("views/BannerViews",["require","exports","module","underscore","backbone"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=i.template("<div data-l10n-id='<%-translation_id%>'><%=message%></div>"),s=o.View.extend({tagName:"li",className:"banner",events:{"click .close-handle":"close"},initialize:function(e){i.bindAll(this,"render","close"),this.options=e,this.listenToOnce(this.model,"remove",this.close),this.listenTo(this.model,"change",this.render),this.$el.attr("data-id",this.model.id)},close:function(){this.model.timeout(0),this.$el.remove()},render:function(){this.$el.empty(),this.model.get("active")!==!1?this.$el.show():this.$el.hide(),this.$el.addClass(this.model.get("type"));var e=this.model.toJSON();return e.translation_id||(e.translation_id="banner-"+this.model.id),this.$el.html(r(e)),this}}),l=o.View.extend({tagName:"ul",className:"banners",initialize:function(e){i.bindAll(this,"render","addOne","addAll"),this.options=e,this.listenTo(this.collection,"add change:active",this.addOne),this.listenTo(this.collection,"reset",this.addAll)},render:function(){return this.addAll(),this},addOne:function(e){if(this.$el.find(".banner[data-id='"+e.id+"']").remove(),e.get("active")){var t=new s({model:e});this.$el.append(t.render().$el),t.$el.attr("data-id",e.id)}},addAll:function(){this.$el.empty(),this.collection.each(this.addOne)}});n.exports.BannerView=s,n.exports.BannerStack=l}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/version",["jquery"],e):e(jQuery)}(function(e){return e.ui=e.ui||{},e.ui.version="1.12.1"}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/ie",["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/widget",["jquery","./version"],e):e(jQuery)}(function(e){var t=0,n=Array.prototype.slice;return e.cleanData=function(t){return function(n){var i,o,r;for(r=0;null!=(o=n[r]);r++)try{i=e._data(o,"events"),i&&i.remove&&e(o).triggerHandler("remove")}catch(e){}t(n)}}(e.cleanData),e.widget=function(t,n,i){var o,r,s,l={},a=t.split(".")[0];t=t.split(".")[1];var u=a+"-"+t;return i||(i=n,n=e.Widget),e.isArray(i)&&(i=e.extend.apply(null,[{}].concat(i))),e.expr[":"][u.toLowerCase()]=function(t){return!!e.data(t,u)},e[a]=e[a]||{},o=e[a][t],r=e[a][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new r(e,t)},e.extend(r,o,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),s=new n,s.options=e.widget.extend({},s.options),e.each(i,function(t,i){return e.isFunction(i)?void(l[t]=function(){function e(){return n.prototype[t].apply(this,arguments)}function o(e){return n.prototype[t].apply(this,e)}return function(){var t,n=this._super,r=this._superApply;return this._super=e,this._superApply=o,t=i.apply(this,arguments),this._super=n,this._superApply=r,t}}()):void(l[t]=i)}),r.prototype=e.widget.extend(s,{widgetEventPrefix:o?s.widgetEventPrefix||t:t},l,{constructor:r,namespace:a,widgetName:t,widgetFullName:u}),o?(e.each(o._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,r,n._proto)}),delete o._childConstructors):n._childConstructors.push(r),e.widget.bridge(t,r),r},e.widget.extend=function(t){for(var i,o,r=n.call(arguments,1),s=0,l=r.length;s<l;s++)for(i in r[s])o=r[s][i],r[s].hasOwnProperty(i)&&void 0!==o&&(e.isPlainObject(o)?t[i]=e.isPlainObject(t[i])?e.widget.extend({},t[i],o):e.widget.extend({},o):t[i]=o);return t},e.widget.bridge=function(t,i){var o=i.prototype.widgetFullName||t;e.fn[t]=function(r){var s="string"==typeof r,l=n.call(arguments,1),a=this;return s?this.length||"instance"!==r?this.each(function(){var n,i=e.data(this,o);return"instance"===r?(a=i,!1):i?e.isFunction(i[r])&&"_"!==r.charAt(0)?(n=i[r].apply(i,l),n!==i&&void 0!==n?(a=n&&n.jquery?a.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+r+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+r+"'")}):a=void 0:(l.length&&(r=e.widget.extend.apply(null,[r].concat(l))),this.each(function(){var t=e.data(this,o);t?(t.option(r||{}),t._init&&t._init()):e.data(this,o,new i(r,this))})),a}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(n,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),n),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,function(e,n){t._removeClass(n,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var i,o,r,s=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(s={},i=t.split("."),t=i.shift(),i.length){for(o=s[t]=e.widget.extend({},this.options[t]),r=0;r<i.length-1;r++)o[i[r]]=o[i[r]]||{},o=o[i[r]];if(t=i.pop(),1===arguments.length)return void 0===o[t]?null:o[t];o[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];s[t]=n}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var n,i,o;for(n in t)o=this.classesElementLookup[n],t[n]!==this.options.classes[n]&&o&&o.length&&(i=e(o.get()),this._removeClass(o,n),i.addClass(this._classes({element:i,keys:n,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){function n(n,r){var s,l;for(l=0;l<n.length;l++)s=o.classesElementLookup[n[l]]||e(),s=e(t.add?e.unique(s.get().concat(t.element.get())):s.not(t.element).get()),o.classesElementLookup[n[l]]=s,i.push(n[l]),r&&t.classes[n[l]]&&i.push(t.classes[n[l]])}var i=[],o=this;return t=e.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&n(t.keys.match(/\S+/g)||[],!0),t.extra&&n(t.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(t){var n=this;e.each(n.classesElementLookup,function(i,o){e.inArray(t.target,o)!==-1&&(n.classesElementLookup[i]=e(o.not(t.target).get()))})},_removeClass:function(e,t,n){return this._toggleClass(e,t,n,!1)},_addClass:function(e,t,n){return this._toggleClass(e,t,n,!0)},_toggleClass:function(e,t,n,i){i="boolean"==typeof i?i:n;var o="string"==typeof e||null===e,r={extra:o?t:n,keys:o?e:t,element:o?this.element:e,add:i};return r.element.toggleClass(this._classes(r),i),this},_on:function(t,n,i){var o,r=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=o=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,o=this.widget()),e.each(i,function(i,s){function l(){if(t||r.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof s?r[s]:s).apply(r,arguments)}"string"!=typeof s&&(l.guid=s.guid=s.guid||l.guid||e.guid++);var a=i.match(/^([\w:-]*)\s*(.*)$/),u=a[1]+r.eventNamespace,c=a[2];c?o.on(u,c,l):n.on(u,l)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(n).off(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,n,i){var o,r,s=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(o in r)o in n||(n[o]=r[o]);return this.element.trigger(n,i),!(e.isFunction(s)&&s.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,o,r){"string"==typeof o&&(o={effect:o});var s,l=o?o===!0||"number"==typeof o?n:o.effect||n:t;o=o||{},"number"==typeof o&&(o={duration:o}),s=!e.isEmptyObject(o),o.complete=r,o.delay&&i.delay(o.delay),s&&e.effects&&e.effects.effect[l]?i[t](o):l!==t&&i[l]?i[l](o.duration,o.easing,r):i.queue(function(n){e(this)[t](),r&&r.call(i[0]),n()})}}),e.widget}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/widgets/mouse",["jquery","../ie","../version","../widget"],e):e(jQuery)}(function(e){var t=!1;return e(document).on("mouseup",function(){t=!1}),e.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!t){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,o=1===n.which,r=!("string"!=typeof this.options.cancel||!n.target.nodeName)&&e(n.target).closest(this.options.cancel).length;return!(o&&!r&&this._mouseCapture(n))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,!0))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(n){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,n.target===this._mouseDownEvent.target&&e.data(n.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(n)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,t=!1,n.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/data",["jquery","./version"],e):e(jQuery)}(function(e){return e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])}})}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/plugin",["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.plugin={add:function(t,n,i){var o,r=e.ui[t].prototype;for(o in i)r.plugins[o]=r.plugins[o]||[],r.plugins[o].push([n,i[o]])},call:function(e,t,n,i){var o,r=e.plugins[t];if(r&&(i||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(o=0;o<r.length;o++)e.options[r[o][0]]&&r[o][1].apply(e.element,n)}}}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/safe-active-element",["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(n){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t}}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/safe-blur",["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&e(t).trigger("blur")}}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/scroll-parent",["jquery","./version"],e):e(jQuery)}(function(e){return e.fn.scrollParent=function(t){var n=this.css("position"),i="absolute"===n,o=t?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var t=e(this);return(!i||"static"!==t.css("position"))&&o.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==n&&r.length?r:e(this[0].ownerDocument||document)}}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/widgets/draggable",["jquery","./mouse","../data","../plugin","../safe-active-element","../safe-blur","../scroll-parent","../version","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.draggable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(t){var n=this.options;return!(this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(this._blurActiveElement(t),this._blockFrames(n.iframeFix===!0?"iframe":n.iframeFix),!0))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var n=e.ui.safeActiveElement(this.document[0]),i=e(t.target);i.closest(n).length||e.ui.safeBlur(n)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position");
}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,n){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(this._trigger("drag",t,i)===!1)return this._mouseUp(new e.Event("mouseup",t)),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,i=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new e.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper),o=i?e(n.helper.apply(this.element[0],[t])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return o.parents("body").length||o.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i&&o[0]===this.element[0]&&this._setPositionRelative(),o[0]===this.element[0]||/(fixed|absolute)/.test(o.css("position"))||o.css("position","absolute"),o},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),n=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==n&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,o=this.options,r=this.document[0];return this.relativeContainer=null,o.containment?"window"===o.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===o.containment?void(this.containment=[0,0,e(r).width()-this.helperProportions.width-this.margins.left,(e(r).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):o.containment.constructor===Array?void(this.containment=o.containment):("parent"===o.containment&&(o.containment=this.helper[0].parentNode),n=e(o.containment),i=n[0],void(i&&(t=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n))):void(this.containment=null)},_convertPositionTo:function(e,t){t||(t=this.position);var n="absolute"===e?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(e,t){var n,i,o,r,s=this.options,l=this._isRootNode(this.scrollParent[0]),a=e.pageX,u=e.pageY;return l&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(i=this.relativeContainer.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(a=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(u=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(a=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(u=n[3]+this.offset.click.top)),s.grid&&(o=s.grid[1]?this.originalPageY+Math.round((u-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,u=n?o-this.offset.click.top>=n[1]||o-this.offset.click.top>n[3]?o:o-this.offset.click.top>=n[1]?o-s.grid[1]:o+s.grid[1]:o,r=s.grid[0]?this.originalPageX+Math.round((a-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,a=n?r-this.offset.click.left>=n[0]||r-this.offset.click.left>n[2]?r:r-this.offset.click.left>=n[0]?r-s.grid[0]:r+s.grid[0]:r),"y"===s.axis&&(a=this.originalPageX),"x"===s.axis&&(u=this.originalPageY)),{top:u-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:l?0:this.offset.scroll.top),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:l?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,n,i){return i=i||this._uiHash(),e.ui.plugin.call(this,t,[n,i,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n,i){var o=e.extend({},n,{item:i.element});i.sortables=[],e(i.options.connectToSortable).each(function(){var n=e(this).sortable("instance");n&&!n.options.disabled&&(i.sortables.push(n),n.refreshPositions(),n._trigger("activate",t,o))})},stop:function(t,n,i){var o=e.extend({},n,{item:i.element});i.cancelHelperRemoval=!1,e.each(i.sortables,function(){var e=this;e.isOver?(e.isOver=0,i.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,o))})},drag:function(t,n,i){e.each(i.sortables,function(){var o=!1,r=this;r.positionAbs=i.positionAbs,r.helperProportions=i.helperProportions,r.offset.click=i.offset.click,r._intersectsWith(r.containerCache)&&(o=!0,e.each(i.sortables,function(){return this.positionAbs=i.positionAbs,this.helperProportions=i.helperProportions,this.offset.click=i.offset.click,this!==r&&this._intersectsWith(this.containerCache)&&e.contains(r.element[0],this.element[0])&&(o=!1),o})),o?(r.isOver||(r.isOver=1,i._parent=n.helper.parent(),r.currentItem=n.helper.appendTo(r.element).data("ui-sortable-item",!0),r.options._helper=r.options.helper,r.options.helper=function(){return n.helper[0]},t.target=r.currentItem[0],r._mouseCapture(t,!0),r._mouseStart(t,!0,!0),r.offset.click.top=i.offset.click.top,r.offset.click.left=i.offset.click.left,r.offset.parent.left-=i.offset.parent.left-r.offset.parent.left,r.offset.parent.top-=i.offset.parent.top-r.offset.parent.top,i._trigger("toSortable",t),i.dropped=r.element,e.each(i.sortables,function(){this.refreshPositions()}),i.currentItem=i.element,r.fromOutside=i),r.currentItem&&(r._mouseDrag(t),n.position=r.position)):r.isOver&&(r.isOver=0,r.cancelHelperRemoval=!0,r.options._revert=r.options.revert,r.options.revert=!1,r._trigger("out",t,r._uiHash(r)),r._mouseStop(t,!0),r.options.revert=r.options._revert,r.options.helper=r.options._helper,r.placeholder&&r.placeholder.remove(),n.helper.appendTo(i._parent),i._refreshOffsets(t),n.position=i._generatePosition(t,!0),i._trigger("fromSortable",t),i.dropped=!1,e.each(i.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n,i){var o=e("body"),r=i.options;o.css("cursor")&&(r._cursor=o.css("cursor")),o.css("cursor",r.cursor)},stop:function(t,n,i){var o=i.options;o._cursor&&e("body").css("cursor",o._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n,i){var o=e(n.helper),r=i.options;o.css("opacity")&&(r._opacity=o.css("opacity")),o.css("opacity",r.opacity)},stop:function(t,n,i){var o=i.options;o._opacity&&e(n.helper).css("opacity",o._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(t,n,i){var o=i.options,r=!1,s=i.scrollParentNotHidden[0],l=i.document[0];s!==l&&"HTML"!==s.tagName?(o.axis&&"x"===o.axis||(i.overflowOffset.top+s.offsetHeight-t.pageY<o.scrollSensitivity?s.scrollTop=r=s.scrollTop+o.scrollSpeed:t.pageY-i.overflowOffset.top<o.scrollSensitivity&&(s.scrollTop=r=s.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(i.overflowOffset.left+s.offsetWidth-t.pageX<o.scrollSensitivity?s.scrollLeft=r=s.scrollLeft+o.scrollSpeed:t.pageX-i.overflowOffset.left<o.scrollSensitivity&&(s.scrollLeft=r=s.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(t.pageY-e(l).scrollTop()<o.scrollSensitivity?r=e(l).scrollTop(e(l).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(l).scrollTop())<o.scrollSensitivity&&(r=e(l).scrollTop(e(l).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(t.pageX-e(l).scrollLeft()<o.scrollSensitivity?r=e(l).scrollLeft(e(l).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(l).scrollLeft())<o.scrollSensitivity&&(r=e(l).scrollLeft(e(l).scrollLeft()+o.scrollSpeed)))),r!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n,i){var o=i.options;i.snapElements=[],e(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var t=e(this),n=t.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n,i){var o,r,s,l,a,u,c,d,h,p,f=i.options,g=f.snapTolerance,m=n.offset.left,v=m+i.helperProportions.width,y=n.offset.top,b=y+i.helperProportions.height;for(h=i.snapElements.length-1;h>=0;h--)a=i.snapElements[h].left-i.margins.left,u=a+i.snapElements[h].width,c=i.snapElements[h].top-i.margins.top,d=c+i.snapElements[h].height,v<a-g||m>u+g||b<c-g||y>d+g||!e.contains(i.snapElements[h].item.ownerDocument,i.snapElements[h].item)?(i.snapElements[h].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[h].item})),i.snapElements[h].snapping=!1):("inner"!==f.snapMode&&(o=Math.abs(c-b)<=g,r=Math.abs(d-y)<=g,s=Math.abs(a-v)<=g,l=Math.abs(u-m)<=g,o&&(n.position.top=i._convertPositionTo("relative",{top:c-i.helperProportions.height,left:0}).top),r&&(n.position.top=i._convertPositionTo("relative",{top:d,left:0}).top),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:a-i.helperProportions.width}).left),l&&(n.position.left=i._convertPositionTo("relative",{top:0,left:u}).left)),p=o||r||s||l,"outer"!==f.snapMode&&(o=Math.abs(c-y)<=g,r=Math.abs(d-b)<=g,s=Math.abs(a-m)<=g,l=Math.abs(u-v)<=g,o&&(n.position.top=i._convertPositionTo("relative",{top:c,left:0}).top),r&&(n.position.top=i._convertPositionTo("relative",{top:d-i.helperProportions.height,left:0}).top),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:a}).left),l&&(n.position.left=i._convertPositionTo("relative",{top:0,left:u-i.helperProportions.width}).left)),!i.snapElements[h].snapping&&(o||r||s||l||p)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[h].item})),i.snapElements[h].snapping=o||r||s||l||p)}}),e.ui.plugin.add("draggable","stack",{start:function(t,n,i){var o,r=i.options,s=e.makeArray(e(r.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});s.length&&(o=parseInt(e(s[0]).css("zIndex"),10)||0,e(s).each(function(t){e(this).css("zIndex",o+t)}),this.css("zIndex",o+s.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n,i){var o=e(n.helper),r=i.options;o.css("zIndex")&&(r._zIndex=o.css("zIndex")),o.css("zIndex",r.zIndex)},stop:function(t,n,i){var o=i.options;o._zIndex&&e(n.helper).css("zIndex",o._zIndex)}}),e.ui.draggable}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/widgets/droppable",["jquery","./draggable","./mouse","../version","../widget"],e):e(jQuery)}(function(e){e.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,n=this.options,i=n.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions=function(){return arguments.length?void(t=arguments[0]):t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(n.scope),n.addClasses&&this._addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;t<e.length;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t)},_setOption:function(t,n){if("accept"===t)this.accept=e.isFunction(n)?n:function(e){return e.is(n)};else if("scope"===t){var i=e.ui.ddmanager.droppables[this.options.scope];this._splice(i),this._addToManager(n)}this._super(t,n)},_activate:function(t){var n=e.ui.ddmanager.current;this._addActiveClass(),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this._removeActiveClass(),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this._addHoverClass(),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this._removeHoverClass(),this._trigger("out",t,this.ui(n)))},_drop:function(n,i){var o=i||e.ui.ddmanager.current,r=!1;return!(!o||(o.currentItem||o.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=e(this).droppable("instance");if(i.options.greedy&&!i.options.disabled&&i.options.scope===o.options.scope&&i.accept.call(i.element[0],o.currentItem||o.element)&&t(o,e.extend(i,{offset:i.element.offset()}),i.options.tolerance,n))return r=!0,!1}),!r&&(!!this.accept.call(this.element[0],o.currentItem||o.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",n,this.ui(o)),this.element)))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var t=e.ui.intersect=function(){function e(e,t,n){return e>=t&&e<t+n}return function(t,n,i,o){if(!n.offset)return!1;var r=(t.positionAbs||t.position.absolute).left+t.margins.left,s=(t.positionAbs||t.position.absolute).top+t.margins.top,l=r+t.helperProportions.width,a=s+t.helperProportions.height,u=n.offset.left,c=n.offset.top,d=u+n.proportions().width,h=c+n.proportions().height;switch(i){case"fit":return u<=r&&l<=d&&c<=s&&a<=h;case"intersect":return u<r+t.helperProportions.width/2&&l-t.helperProportions.width/2<d&&c<s+t.helperProportions.height/2&&a-t.helperProportions.height/2<h;case"pointer":return e(o.pageY,c,n.proportions().height)&&e(o.pageX,u,n.proportions().width);case"touch":return(s>=c&&s<=h||a>=c&&a<=h||s<c&&a>h)&&(r>=u&&r<=d||l>=u&&l<=d||r<u&&l>d);default:return!1}}}();return e.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,n){var i,o,r=e.ui.ddmanager.droppables[t.options.scope]||[],s=n?n.type:null,l=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(i=0;i<r.length;i++)if(!(r[i].options.disabled||t&&!r[i].accept.call(r[i].element[0],t.currentItem||t.element))){for(o=0;o<l.length;o++)if(l[o]===r[i].element[0]){r[i].proportions().height=0;continue e}r[i].visible="none"!==r[i].element.css("display"),r[i].visible&&("mousedown"===s&&r[i]._activate.call(r[i],n),r[i].offset=r[i].element.offset(),r[i].proportions({width:r[i].element[0].offsetWidth,height:r[i].element[0].offsetHeight}))}},drop:function(n,i){var o=!1;return e.each((e.ui.ddmanager.droppables[n.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&t(n,this,this.options.tolerance,i)&&(o=this._drop.call(this,i)||o),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),o},dragStart:function(t,n){t.element.parentsUntil("body").on("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(n,i){n.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(n,i),e.each(e.ui.ddmanager.droppables[n.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var o,r,s,l=t(n,this,this.options.tolerance,i),a=!l&&this.isover?"isout":l&&!this.isover?"isover":null;a&&(this.options.greedy&&(r=this.options.scope,s=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===r}),s.length&&(o=e(s[0]).droppable("instance"),o.greedyChild="isover"===a)),o&&"isover"===a&&(o.isover=!1,o.isout=!0,o._out.call(o,i)),this[a]=!0,this["isout"===a?"isover":"isout"]=!1,this["isover"===a?"_over":"_out"].call(this,i),o&&"isout"===a&&(o.isout=!1,o.isover=!0,o._over.call(o,i)))}})},dragStop:function(t,n){t.element.parentsUntil("body").off("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}},e.uiBackCompat!==!1&&e.widget("ui.droppable",e.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),e.ui.droppable}),define("views/OrganisationPicker",["require","exports","module","jquery-ui/widgets/droppable","backbone","env"],function(e,t,n){e("jquery-ui/widgets/droppable");var i=e("backbone"),o=_.template("<a href='<%- link %>' class='switch'>    <div class='org-icon' style='background-color: <%- colour %>; background-image: url(<%- picture %>);'/></a>"),r=i.View.extend({tagName:"li",className:"organisation",initialize:function(e){_.bindAll(this,"render","switchToOrg"),this.options=e},switchToOrg:function(e){i.history.navigate("/"+(this.model.get("slug")?this.model.get("slug"):""),!0)},addDropTarget:function(){this.model.canWrite()&&this.model.hasActivePlan()&&this.$el.droppable({accept:function(e){if(!e.hasClass("diagram"))return!1;var t=e[0].model;if(t){var n=t.get("owner_id");if(n&&n===getCoggleUser().get("_id"))return!0}return!1},tolerance:"pointer",hoverClass:"dragHover",activeClass:"dropActive",drop:function(e,t){var n=t.draggable[0].model;t.draggable.remove(),n.getAccess().getMe().grant(["read","write","list"],function(e,t){return e?($(window).trigger("notify-warning",e.responseJSON.description?e.responseJSON.description:"Sorry, you don't have permission to move that diagram. Try asking its creator to move it."),void getCoggleUser().getActions().perform("org:dragdrop:error")):(n.set("organisation",this.model.get("slug")),n.set("folder",null),void n.save({},{wait:!0,success:function(){getCoggleUser().getActions().perform("org:dragdrop:success"),this.switchToOrg(),window.location.reload()}.bind(this),error:function(e,t){getCoggleUser().getActions().perform("org:dragdrop:error"),n.set("organisation",n.previous("organisation")),n.set("folder",n.previous("folder")),$(window).trigger("notify-warning",t.responseJSON.description?t.responseJSON.description:"Sorry, there was error completeing your request.")}.bind(this)}))}.bind(this))}.bind(this)})},render:function(){var t=this.model.toJSON();return t.picture||(t.picture=e("env").cdn.url+"/img/anon.png"),t.link=t.slug?"/"+t.slug:"",this.options.path_suffix&&(t.link+=this.options.path_suffix),this.$el.html(o(t)),this.addDropTarget(),this}}),s=i.View.extend({tagName:"ul",className:"organisations",events:{},initialize:function(e){_.bindAll(this,"addOne","addAll","render"),this.options=e,this.listenTo(this.collection,"reset",this.addAll),this.listenTo(this.collection,"add",this.addOne),this.listenTo(getCoggleUser(),"organisation_changed",this.render)},renderOwnOrg:function(){var e=(getCoggleUser().getActiveOrg(),$('<li class="organisation">'));e.prepend(o({picture:getCoggleUser().picture(),name:getCoggleUser().get("name"),link:this.options.melink||"/",colour:"transparent"})),getCoggleUser().getActiveOrg().id||e.addClass("active"),this.$el.prepend(e)},render:function(){return this.$el.empty(),this.options.hide_own_org||this.renderOwnOrg(),this.addAll(),this},addOne:function(e){var t=new r({model:e,path_suffix:this.options.path_suffix});this.addChildView(t),this.$el.append(t.render().$el),getCoggleUser().getActiveOrg().id==e.id&&t.$el.addClass("active")},addAll:function(){this.collection.each(this.addOne)}});n.exports.OrganisationPickerEntry=r,n.exports.OrganisationPicker=s}),function(e){"function"==typeof define&&define.amd?define("jquery.timeago",["jquery"],e):e("object"==typeof module&&"object"==typeof module.exports?require("jquery"):jQuery)}(function(e){function t(){var t=r.settings;if(t.autoDispose&&!e.contains(document.documentElement,this))return e(this).timeago("dispose"),this;var s=n(this);return isNaN(s.datetime)||(0===t.cutoff||Math.abs(o(s.datetime))<t.cutoff?e(this).text(i(s.datetime)):e(this).attr("title").length>0&&e(this).text(e(this).attr("title"))),this}function n(t){if(t=e(t),!t.data("timeago")){t.data("timeago",{datetime:r.datetime(t)});var n=e.trim(t.text());r.settings.localeTitle?t.attr("title",t.data("timeago").datetime.toLocaleString()):!(n.length>0)||r.isTime(t)&&t.attr("title")||t.attr("title",n)}return t.data("timeago")}function i(e){return r.inWords(o(e))}function o(e){return(new Date).getTime()-e.getTime()}e.timeago=function(t){return i(t instanceof Date?t:"string"==typeof t?e.timeago.parse(t):"number"==typeof t?new Date(t):e.timeago.datetime(t))};var r=e.timeago;e.extend(e.timeago,{settings:{refreshMillis:6e4,allowPast:!0,allowFuture:!1,localeTitle:!1,cutoff:0,autoDispose:!0,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",inPast:"any moment now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(t){function n(n,o){var r=e.isFunction(n)?n(o,t):n,s=i.numbers&&i.numbers[o]||o;return r.replace(/%d/i,s)}if(!this.settings.allowPast&&!this.settings.allowFuture)throw"timeago allowPast and allowFuture settings can not both be set to false.";var i=this.settings.strings,o=i.prefixAgo,r=i.suffixAgo;if(this.settings.allowFuture&&t<0&&(o=i.prefixFromNow,r=i.suffixFromNow),!this.settings.allowPast&&t>=0)return this.settings.strings.inPast;var s=Math.abs(t)/1e3,l=s/60,a=l/60,u=a/24,c=u/365,d=s<45&&n(i.seconds,Math.round(s))||s<90&&n(i.minute,1)||l<45&&n(i.minutes,Math.round(l))||l<90&&n(i.hour,1)||a<24&&n(i.hours,Math.round(a))||a<42&&n(i.day,1)||u<30&&n(i.days,Math.round(u))||u<45&&n(i.month,1)||u<365&&n(i.months,Math.round(u/30))||c<1.5&&n(i.year,1)||n(i.years,Math.round(c)),h=i.wordSeparator||"";return void 0===i.wordSeparator&&(h=" "),e.trim([o,d,r].join(h))},parse:function(t){var n=e.trim(t);return n=n.replace(/\.\d+/,""),n=n.replace(/-/,"/").replace(/-/,"/"),n=n.replace(/T/," ").replace(/Z/," UTC"),n=n.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),n=n.replace(/([\+\-]\d\d)$/," $100"),new Date(n)},datetime:function(t){var n=r.isTime(t)?e(t).attr("datetime"):e(t).attr("title");return r.parse(n)},isTime:function(t){return"time"===e(t).get(0).tagName.toLowerCase()}});var s={init:function(){s.dispose.call(this);var n=e.proxy(t,this);n();var i=r.settings;i.refreshMillis>0&&(this._timeagoInterval=setInterval(n,i.refreshMillis))},update:function(n){var i=n instanceof Date?n:r.parse(n);e(this).data("timeago",{datetime:i}),r.settings.localeTitle&&e(this).attr("title",i.toLocaleString()),t.apply(this)},updateFromDOM:function(){e(this).data("timeago",{datetime:r.parse(r.isTime(this)?e(this).attr("datetime"):e(this).attr("title"))}),t.apply(this)},dispose:function(){this._timeagoInterval&&(window.clearInterval(this._timeagoInterval),this._timeagoInterval=null)}};e.fn.timeago=function(e,t){var n=e?s[e]:s.init;if(!n)throw new Error("Unknown function name '"+e+"' for timeago");return this.each(function(){n.call(this,t)}),this},document.createElement("abbr"),document.createElement("time")}),define("utils/coggle-timeago",["require","exports","module","jquery.timeago","async","env"],function(e,t,n){e("jquery.timeago");var i=e("async"),o={},r=null,s=[],l=$('script[type="application/l20n"]').map(function(){return $(this).attr("data-l10n-locale")}),a=function(t,n){var i=t.toLowerCase();i.startsWith("en-")||"en"===i?(r=t,n()):requirejs([e("env").cdn.url+"/bower_components/jquery-timeago/locales/jquery.timeago."+t+".js"],function(){console.log("timago loaded language",t),r=t,n()},function(e){return n(e)})},u=function(e){null!==r||s.length?s.length?s.push(e):setTimeout(function(){e()},0):(s.push(e),i.eachSeries(l,function(e,t){a(e,function(n){n?(console.log("timeago failed to load language "+e,n),t()):t("success")})},function(e){"success"===e?s.forEach(function(e){e()}):(r=new Error("no preferred language found"),s.forEach(function(t){t(e||r)})),s=[]}))};return o.loadLanguages=u,o.timeago=function(e,t){return u(function(n){n?"function"==typeof t&&t(n):(e.timeago(),"function"==typeof t&&t())}),e},o}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/widgets/sortable",["jquery","./mouse","../data","../ie","../scroll-parent","../version","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.sortable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,n){return e>=t&&e<t+n},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){var t=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),e.each(this.items,function(){t._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,n){var i=null,o=!1,r=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),
e(t.target).parents().each(function(){if(e.data(this,r.widgetName+"-item")===r)return i=e(this),!1}),e.data(t.target,r.widgetName+"-item")===r&&(i=e(t.target)),!!i&&(!(this.options.handle&&!n&&(e(this.options.handle,i).find("*").addBack().each(function(){this===t.target&&(o=!0)}),!o))&&(this.currentItem=i,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,n,i){var o,r,s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&"auto"!==s.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",s.cursor),this.storedStylesheet=e("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(r)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,i,o,r,s=this.options,l=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<s.scrollSensitivity?this.scrollParent[0].scrollTop=l=this.scrollParent[0].scrollTop+s.scrollSpeed:t.pageY-this.overflowOffset.top<s.scrollSensitivity&&(this.scrollParent[0].scrollTop=l=this.scrollParent[0].scrollTop-s.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<s.scrollSensitivity?this.scrollParent[0].scrollLeft=l=this.scrollParent[0].scrollLeft+s.scrollSpeed:t.pageX-this.overflowOffset.left<s.scrollSensitivity&&(this.scrollParent[0].scrollLeft=l=this.scrollParent[0].scrollLeft-s.scrollSpeed)):(t.pageY-this.document.scrollTop()<s.scrollSensitivity?l=this.document.scrollTop(this.document.scrollTop()-s.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<s.scrollSensitivity&&(l=this.document.scrollTop(this.document.scrollTop()+s.scrollSpeed)),t.pageX-this.document.scrollLeft()<s.scrollSensitivity?l=this.document.scrollLeft(this.document.scrollLeft()-s.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<s.scrollSensitivity&&(l=this.document.scrollLeft(this.document.scrollLeft()+s.scrollSpeed))),l!==!1&&e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(i=this.items[n],o=i.item[0],r=this._intersectsWithPointer(i),r&&i.instance===this.currentContainer&&!(o===this.currentItem[0]||this.placeholder[1===r?"next":"prev"]()[0]===o||e.contains(this.placeholder[0],o)||"semi-dynamic"===this.options.type&&e.contains(this.element[0],o))){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(t,i),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var i=this,o=this.placeholder.offset(),r=this.options.axis,s={};r&&"x"!==r||(s.left=o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(s.top=o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(s,parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new e.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&i.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n.each(function(){i.push(e(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,i=this.positionAbs.top,o=i+this.helperProportions.height,r=e.left,s=r+e.width,l=e.top,a=l+e.height,u=this.offset.click.top,c=this.offset.click.left,d="x"===this.options.axis||i+u>l&&i+u<a,h="y"===this.options.axis||t+c>r&&t+c<s,p=d&&h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:r<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<s&&l<i+this.helperProportions.height/2&&o-this.helperProportions.height/2<a},_intersectsWithPointer:function(e){var t,n,i="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),o="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),r=i&&o;return!!r&&(t=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection(),this.floating?"right"===n||"down"===t?2:1:t&&("down"===t?2:1))},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),i=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&n||"left"===o&&!n:i&&("down"===i&&t||"up"===i&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function n(){l.push(this)}var i,o,r,s,l=[],a=[],u=this._connectWith();if(u&&t)for(i=u.length-1;i>=0;i--)for(r=e(u[i],this.document[0]),o=r.length-1;o>=0;o--)s=e.data(r[o],this.widgetFullName),s&&s!==this&&!s.options.disabled&&a.push([e.isFunction(s.options.items)?s.options.items.call(s.element):e(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s]);for(a.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=a.length-1;i>=0;i--)a[i][0].each(n);return e(l)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,i,o,r,s,l,a,u,c=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(n=h.length-1;n>=0;n--)for(o=e(h[n],this.document[0]),i=o.length-1;i>=0;i--)r=e.data(o[i],this.widgetFullName),r&&r!==this&&!r.options.disabled&&(d.push([e.isFunction(r.options.items)?r.options.items.call(r.element[0],t,{item:this.currentItem}):e(r.options.items,r.element),r]),this.containers.push(r));for(n=d.length-1;n>=0;n--)for(s=d[n][1],l=d[n][0],i=0,u=l.length;i<u;i++)a=e(l[i]),a.data(this.widgetName+"-item",s),c.push({item:a,instance:s,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,i,o,r;for(n=this.items.length-1;n>=0;n--)i=this.items[n],i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(o=this.options.toleranceElement?e(this.options.toleranceElement,i.item):i.item,t||(i.width=o.outerWidth(),i.height=o.outerHeight()),r=o.offset(),i.left=r.left,i.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)r=this.containers[n].element.offset(),this.containers[n].containerCache.left=r.left,this.containers[n].containerCache.top=r.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,i=t.options;i.placeholder&&i.placeholder.constructor!==String||(n=i.placeholder,i.placeholder={element:function(){var i=t.currentItem[0].nodeName.toLowerCase(),o=e("<"+i+">",t.document[0]);return t._addClass(o,"ui-sortable-placeholder",n||t.currentItem[0].className)._removeClass(o,"ui-sortable-helper"),"tbody"===i?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(o)):"tr"===i?t._createTrPlaceholder(t.currentItem,o):"img"===i&&o.attr("src",t.currentItem.attr("src")),n||o.css("visibility","hidden"),o},update:function(e,o){n&&!i.forcePlaceholderSize||(o.height()||o.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),o.width()||o.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(i.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),i.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,n){var i=this;t.children().each(function(){e("<td>&#160;</td>",i.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(n)})},_contactContainers:function(t){var n,i,o,r,s,l,a,u,c,d,h=null,p=null;for(n=this.containers.length-1;n>=0;n--)if(!e.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(h&&e.contains(this.containers[n].element[0],h.element[0]))continue;h=this.containers[n],p=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",t,this._uiHash(this)),this.containers[n].containerCache.over=0);if(h)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(o=1e4,r=null,c=h.floating||this._isFloating(this.currentItem),s=c?"left":"top",l=c?"width":"height",d=c?"pageX":"pageY",i=this.items.length-1;i>=0;i--)e.contains(this.containers[p].element[0],this.items[i].item[0])&&this.items[i].item[0]!==this.currentItem[0]&&(a=this.items[i].item.offset()[s],u=!1,t[d]-a>this.items[i][l]/2&&(u=!0),Math.abs(t[d]-a)<o&&(o=Math.abs(t[d]-a),r=this.items[i],this.direction=u?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return void(this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));r?this._rearrange(t,r,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),i[0].style.width&&!n.forceHelperSize||i.width(this.currentItem.width()),i[0].style.height&&!n.forceHelperSize||i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),"document"!==o.containment&&"window"!==o.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===o.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===o.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(t=e(o.containment)[0],n=e(o.containment).offset(),i="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"===t?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(o[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:o.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:o.scrollLeft())*i}},_generatePosition:function(t){var n,i,o=this.options,r=t.pageX,s=t.pageY,l="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(l[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),o.grid&&(n=this.originalPageY+Math.round((s-this.originalPageY)/o.grid[1])*o.grid[1],s=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-o.grid[1]:n+o.grid[1]:n,i=this.originalPageX+Math.round((r-this.originalPageX)/o.grid[0])*o.grid[0],r=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-o.grid[0]:i+o.grid[0]:i)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:l.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:l.scrollLeft())}},_rearrange:function(e,t,n,i){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o===this.counter&&this.refreshPositions(!i)})},_clear:function(e,t){function n(e,t,n){return function(i){n._trigger(e,i,t._uiHash(t))}}this.reverting=!1;var i,o=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)"auto"!==this._storedCSS[i]&&"static"!==this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&o.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||o.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(o.push(function(e){this._trigger("remove",e,this._uiHash())}),o.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),o.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||o.push(n("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(o.push(n("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(i=0;i<o.length;i++)o[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}),function(){var e,t,n,i,o,r,s,l,a,u,c,d,h,p,f,g,m,v,y,b,w,_,E,C,F=[].slice,A=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};e=window.jQuery||window.Zepto||window.$,e.payment={},e.payment.fn={},e.fn.payment=function(){var t,n;return n=arguments[0],t=2<=arguments.length?F.call(arguments,1):[],e.payment.fn[n].apply(this,t)},o=/(\d{1,4})/g,e.payment.cards=i=[{type:"elo",patterns:[401178,401179,431274,438935,451416,457393,457631,457632,504175,506699,5067,509,627780,636297,636368,650,6516,6550],format:o,length:[16],cvcLength:[3],luhn:!0},{type:"visaelectron",patterns:[4026,417500,4405,4508,4844,4913,4917],format:o,length:[16],cvcLength:[3],luhn:!0},{type:"maestro",patterns:[5018,502,503,506,56,58,639,6220,67],format:o,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"forbrugsforeningen",patterns:[600],format:o,length:[16],cvcLength:[3],luhn:!0},{type:"dankort",patterns:[5019],format:o,length:[16],cvcLength:[3],luhn:!0},{type:"visa",patterns:[4],format:o,length:[13,16],cvcLength:[3],luhn:!0},{type:"mastercard",patterns:[51,52,53,54,55,22,23,24,25,26,27],format:o,length:[16],cvcLength:[3],luhn:!0},{type:"amex",patterns:[34,37],format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:!0},{type:"dinersclub",patterns:[30,36,38,39],format:/(\d{1,4})(\d{1,6})?(\d{1,4})?/,length:[14],cvcLength:[3],luhn:!0},{type:"discover",patterns:[60,64,65,622],format:o,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",patterns:[62,88],format:o,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"jcb",patterns:[35],format:o,length:[16],cvcLength:[3],luhn:!0}],t=function(e){var t,n,o,r,s,l,a,u;for(e=(e+"").replace(/\D/g,""),r=0,l=i.length;l>r;r++)for(t=i[r],u=t.patterns,s=0,a=u.length;a>s;s++)if(o=u[s],n=o+"",e.substr(0,n.length)===n)return t},n=function(e){var t,n,o;for(n=0,o=i.length;o>n;n++)if(t=i[n],t.type===e)return t},h=function(e){var t,n,i,o,r,s;for(i=!0,o=0,n=(e+"").split("").reverse(),r=0,s=n.length;s>r;r++)t=n[r],t=parseInt(t,10),(i=!i)&&(t*=2),t>9&&(t-=9),o+=t;return o%10===0},d=function(e){var t;return null!=e.prop("selectionStart")&&e.prop("selectionStart")!==e.prop("selectionEnd")||!(null==("undefined"!=typeof document&&null!==document&&null!=(t=document.selection)?t.createRange:void 0)||!document.selection.createRange().text)},E=function(e,t){var n,i,o,r,s,l;try{i=t.prop("selectionStart")}catch(e){r=e,i=null}return s=t.val(),t.val(e),null!==i&&t.is(":focus")?(i===s.length&&(i=e.length),s!==e&&(l=s.slice(i-1,+i+1||9e9),n=e.slice(i-1,+i+1||9e9),o=e[i],/\d/.test(o)&&l===""+o+" "&&n===" "+o&&(i+=1)),t.prop("selectionStart",i),t.prop("selectionEnd",i)):void 0},v=function(e){var t,n,i,o,r,s,l,a;for(null==e&&(e=""),i="０１２３４５６７８９",o="0123456789",s="",t=e.split(""),l=0,a=t.length;a>l;l++)n=t[l],r=i.indexOf(n),r>-1&&(n=o[r]),s+=n;return s},m=function(t){var n;return n=e(t.currentTarget),setTimeout(function(){var e;return e=n.val(),e=v(e),e=e.replace(/\D/g,""),E(e,n)})},f=function(t){var n;return n=e(t.currentTarget),setTimeout(function(){var t;return t=n.val(),t=v(t),t=e.payment.formatCardNumber(t),E(t,n)})},l=function(n){var i,o,r,s,l,a,u;return r=String.fromCharCode(n.which),!/^\d+$/.test(r)||(i=e(n.currentTarget),u=i.val(),o=t(u+r),s=(u.replace(/\D/g,"")+r).length,a=16,o&&(a=o.length[o.length.length-1]),s>=a||null!=i.prop("selectionStart")&&i.prop("selectionStart")!==u.length)?void 0:(l=o&&"amex"===o.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/,l.test(u)?(n.preventDefault(),setTimeout(function(){return i.val(u+" "+r)})):l.test(u+r)?(n.preventDefault(),setTimeout(function(){return i.val(u+r+" ")})):void 0)},r=function(t){var n,i;return n=e(t.currentTarget),i=n.val(),8!==t.which||null!=n.prop("selectionStart")&&n.prop("selectionStart")!==i.length?void 0:/\d\s$/.test(i)?(t.preventDefault(),setTimeout(function(){return n.val(i.replace(/\d\s$/,""))})):/\s\d?$/.test(i)?(t.preventDefault(),setTimeout(function(){return n.val(i.replace(/\d$/,""))})):void 0},g=function(t){var n;return n=e(t.currentTarget),setTimeout(function(){var t;return t=n.val(),t=v(t),t=e.payment.formatExpiry(t),E(t,n)})},a=function(t){var n,i,o;return i=String.fromCharCode(t.which),/^\d+$/.test(i)?(n=e(t.currentTarget),o=n.val()+i,/^\d$/.test(o)&&"0"!==o&&"1"!==o?(t.preventDefault(),setTimeout(function(){return n.val("0"+o+" / ")})):/^\d\d$/.test(o)?(t.preventDefault(),setTimeout(function(){var e,t;return e=parseInt(o[0],10),t=parseInt(o[1],10),t>2&&0!==e?n.val("0"+e+" / "+t):n.val(""+o+" / ")})):void 0):void 0},u=function(t){var n,i,o;return i=String.fromCharCode(t.which),/^\d+$/.test(i)?(n=e(t.currentTarget),o=n.val(),/^\d\d$/.test(o)?n.val(""+o+" / "):void 0):void 0},c=function(t){var n,i,o;return o=String.fromCharCode(t.which),"/"===o||" "===o?(n=e(t.currentTarget),i=n.val(),/^\d$/.test(i)&&"0"!==i?n.val("0"+i+" / "):void 0):void 0},s=function(t){var n,i;return n=e(t.currentTarget),i=n.val(),8!==t.which||null!=n.prop("selectionStart")&&n.prop("selectionStart")!==i.length?void 0:/\d\s\/\s$/.test(i)?(t.preventDefault(),setTimeout(function(){return n.val(i.replace(/\d\s\/\s$/,""))})):void 0},p=function(t){var n;return n=e(t.currentTarget),setTimeout(function(){var e;return e=n.val(),e=v(e),e=e.replace(/\D/g,"").slice(0,4),E(e,n)})},_=function(e){var t;return!(!e.metaKey&&!e.ctrlKey)||32!==e.which&&(0===e.which||(e.which<33||(t=String.fromCharCode(e.which),!!/[\d\s]/.test(t))))},b=function(n){var i,o,r,s;return i=e(n.currentTarget),r=String.fromCharCode(n.which),/^\d+$/.test(r)&&!d(i)?(s=(i.val()+r).replace(/\D/g,""),o=t(s),o?s.length<=o.length[o.length.length-1]:s.length<=16):void 0},w=function(t){var n,i,o;return n=e(t.currentTarget),i=String.fromCharCode(t.which),/^\d+$/.test(i)&&!d(n)?(o=n.val()+i,o=o.replace(/\D/g,""),!(o.length>6)&&void 0):void 0},y=function(t){var n,i,o;return n=e(t.currentTarget),i=String.fromCharCode(t.which),/^\d+$/.test(i)&&!d(n)?(o=n.val()+i,o.length<=4):void 0},C=function(t){var n,o,r,s,l;return n=e(t.currentTarget),l=n.val(),s=e.payment.cardType(l)||"unknown",n.hasClass(s)?void 0:(o=function(){var e,t,n;for(n=[],e=0,t=i.length;t>e;e++)r=i[e],n.push(r.type);return n}(),n.removeClass("unknown"),n.removeClass(o.join(" ")),n.addClass(s),n.toggleClass("identified","unknown"!==s),n.trigger("payment.cardType",s))},e.payment.fn.formatCardCVC=function(){return this.on("keypress",_),this.on("keypress",y),this.on("paste",p),this.on("change",p),this.on("input",p),this},e.payment.fn.formatCardExpiry=function(){return this.on("keypress",_),this.on("keypress",w),this.on("keypress",a),this.on("keypress",c),this.on("keypress",u),this.on("keydown",s),this.on("change",g),this.on("input",g),this},e.payment.fn.formatCardNumber=function(){return this.on("keypress",_),this.on("keypress",b),this.on("keypress",l),this.on("keydown",r),this.on("keyup",C),this.on("paste",f),this.on("change",f),this.on("input",f),this.on("input",C),this},e.payment.fn.restrictNumeric=function(){return this.on("keypress",_),this.on("paste",m),this.on("change",m),this.on("input",m),this},e.payment.fn.cardExpiryVal=function(){return e.payment.cardExpiryVal(e(this).val())},e.payment.cardExpiryVal=function(e){var t,n,i,o;return o=e.split(/[\s\/]+/,2),t=o[0],i=o[1],2===(null!=i?i.length:void 0)&&/^\d+$/.test(i)&&(n=(new Date).getFullYear(),n=n.toString().slice(0,2),i=n+i),t=parseInt(t,10),i=parseInt(i,10),{month:t,year:i}},e.payment.validateCardNumber=function(e){var n,i;return e=(e+"").replace(/\s+|-/g,""),!!/^\d+$/.test(e)&&(n=t(e),!!n&&(i=e.length,A.call(n.length,i)>=0&&(n.luhn===!1||h(e))))},e.payment.validateCardExpiry=function(t,n){var i,o,r;return"object"==typeof t&&"month"in t&&(r=t,t=r.month,n=r.year),!(!t||!n)&&(t=e.trim(t),n=e.trim(n),!!(/^\d+$/.test(t)&&/^\d+$/.test(n)&&t>=1&&12>=t)&&(2===n.length&&(n=70>n?"20"+n:"19"+n),4===n.length&&(o=new Date(n,t),i=new Date,o.setMonth(o.getMonth()-1),o.setMonth(o.getMonth()+1,1),o>i)))},e.payment.validateCardCVC=function(t,i){var o,r;return t=e.trim(t),!!/^\d+$/.test(t)&&(o=n(i),null!=o?(r=t.length,A.call(o.cvcLength,r)>=0):t.length>=3&&t.length<=4)},e.payment.cardType=function(e){var n;return e?(null!=(n=t(e))?n.type:void 0)||null:null},e.payment.formatCardNumber=function(n){var i,o,r,s;return n=n.replace(/\D/g,""),(i=t(n))?(r=i.length[i.length.length-1],n=n.slice(0,r),i.format.global?null!=(s=n.match(i.format))?s.join(" "):void 0:(o=i.format.exec(n),null!=o?(o.shift(),o=e.grep(o,function(e){return e}),o.join(" ")):void 0)):n},e.payment.formatExpiry=function(e){var t,n,i,o;return(n=e.match(/^\D*(\d{1,2})(\D+)?(\d{1,4})?/))?(t=n[1]||"",i=n[2]||"",o=n[3]||"",o.length>0?i=" / ":" /"===i?(t=t.substring(0,1),i=""):2===t.length||i.length>0?i=" / ":1===t.length&&"0"!==t&&"1"!==t&&(t="0"+t,i=" / "),t+i+o):""}}.call(this),define("jquery.payment",function(){}),define("views/CustomerView",["require","exports","module","underscore","backbone","jquery.payment","env"],function(e,t,n){var i=e("underscore"),o=e("backbone");e("jquery.payment");var r="<div class='card'>    <error></error>    <div class='row'>        <div>            <div class='save-overlay'>                <div class='loadspinner'></div></div>            </div>            <div class='main col-sm-8'></div>            <div class='side col-sm-4'></div>        </div>    </div></div>",s='<div data-l10n-id=\'billing-on-file\' data-l10n-ctx=\'{"cardEndsIn":"<%-card%>","cardExpires":"<%-expiry%>","addressZip":"<%-address_zip%>"}\'>  <p class=\'card-on-file\'>The card we have on file for you ends in <b><%-card%></b>, it expires on <b><%-expiry%></b>.</p>  <p class=\'address-on-file\'>The billing zipcode we have for you is <b><%-address_zip%></b>. <a class=\'billing-edit\'>Edit card details</a></p></div>',l="<p>There are no cards added to your account.</p>",a="<form class='details payment-form row'>    <div data-l10n-id='billing-form'>        <div class='col-sm-12'>            <label>Card number</label>            <input class='cardnumber' autocompletetype='cc-number' placeholder='1234 5678 9123 4567' value='<%-card?'•••• •••• •••• '+card:''%>' type='text' size='23' data-stripe='number' />        </div>        <div class='col-sm-6'>            <label>Expiry date</label>            <input class='exp-month' type='hidden' size='2' data-stripe='exp-month'/>            <input class='exp-year'  type='hidden' size='4' data-stripe='exp-year' />            <input class='exp' autocomplete='on' size='8' type='text' placeholder='MM/YYYY' title='Expiry date' value='<%-expiry%>'/>        </div>        <div class='col-sm-6'>            <label>Security code</label>            <input class='cvc' type='text' size='4' data-stripe='cvc' placeholder='CVC' title='The last 3 digits of the code in your card's signature panel.'/>        </div>        <div class='col-sm-12'>            <label>Name on card</label>            <input class='name' autocompletetype='cc-name' placeholder='Name on card' type='text' size='23' data-stripe='name' value='<%-name%>'/>        </div>        <div class='col-sm-12'>            <label>Billing address</label>            <input class='address_line1' autocompletetype='address-line1' placeholder='Address Line 1' type='text' size='23' data-stripe='address_line1' value='<%-address_line1%>'/>            <input class='address_line2' autocompletetype='address-line2' placeholder='Address Line 2' type='text' size='23' data-stripe='address_line2' value='<%-address_line2%>' />        </div>        <div class='col-sm-6'>            <input class='address_city' autocompletetype='address-city' placeholder='City' type='text' size='23' data-stripe='address_city' value='<%-address_city%>'/>        </div>            <div class='col-sm-6'>            <input class='address_zip' type='text' data-stripe='address_zip' placeholder='Zip / Post code' value='<%-address_zip%>' />        </div>    </div>    <div class='col-sm-12'>        <select class='address_country' name='address_country' required data-stripe='address_country'>            <option data-l10n-id='billing-choose-country' value=''>Choose country</option>            <option value='AFG'>Afghanistan</option>            <option value='ALA'>Åland</option>            <option value='ALB'>Albania</option>            <option value='DZA'>Algeria</option>            <option value='ASM'>American Samoa</option>            <option value='AND'>Andorra</option>            <option value='AGO'>Angola</option>            <option value='AIA'>Anguilla</option>            <option value='ATA'>Antarctica</option>            <option value='ATG'>Antigua and Barbuda</option>            <option value='ARG'>Argentina</option>            <option value='ARM'>Armenia</option>            <option value='ABW'>Aruba</option>            <option value='AUS'>Australia</option>            <option value='AUT'>Austria</option>            <option value='AZE'>Azerbaijan</option>            <option value='BHS'>Bahamas</option>            <option value='BHR'>Bahrain</option>            <option value='BGD'>Bangladesh</option>            <option value='BRB'>Barbados</option>            <option value='BLR'>Belarus</option>            <option value='BEL'>Belgium</option>            <option value='BLZ'>Belize</option>            <option value='BEN'>Benin</option>            <option value='BMU'>Bermuda</option>            <option value='BTN'>Bhutan</option>            <option value='BOL'>Bolivia</option>            <option value='BIH'>Bosnia and Herzegovina</option>            <option value='BWA'>Botswana</option>            <option value='BVT'>Bouvet Island</option>            <option value='BRA'>Brazil</option>            <option value='IOT'>British Indian Ocean Territory</option>            <option value='BRN'>Brunei Darussalam</option>            <option value='BGR'>Bulgaria</option>            <option value='BFA'>Burkina Faso</option>            <option value='BDI'>Burundi</option>            <option value='KHM'>Cambodia</option>            <option value='CMR'>Cameroon</option>            <option value='CAN'>Canada</option>            <option value='CPV'>Cape Verde</option>            <option value='CYM'>Cayman Islands</option>            <option value='CAF'>Central African Republic</option>            <option value='TCD'>Chad</option>            <option value='CHL'>Chile</option>            <option value='CHN'>China</option>            <option value='CXR'>Christmas Island</option>            <option value='CCK'>Cocos (Keeling) Islands</option>            <option value='COL'>Colombia</option>            <option value='COM'>Comoros</option>            <option value='COG'>Congo (Brazzaville)</option>            <option value='COD'>Congo (Kinshasa)</option>            <option value='COK'>Cook Islands</option>            <option value='CRI'>Costa Rica</option>            <option value='CIV'>Côte d'Ivoire</option>            <option value='HRV'>Croatia</option>            <option value='CUB'>Cuba</option>            <option value='CYP'>Cyprus</option>            <option value='CZE'>Czech Republic</option>            <option value='DNK'>Denmark</option>            <option value='DJI'>Djibouti</option>            <option value='DMA'>Dominica</option>            <option value='DOM'>Dominican Republic</option>            <option value='ECU'>Ecuador</option>            <option value='EGY'>Egypt</option>            <option value='SLV'>El Salvador</option>            <option value='GNQ'>Equatorial Guinea</option>            <option value='ERI'>Eritrea</option>            <option value='EST'>Estonia</option>            <option value='ETH'>Ethiopia</option>            <option value='FLK'>Falkland Islands</option>            <option value='FRO'>Faroe Islands</option>            <option value='FJI'>Fiji</option>            <option value='FIN'>Finland</option>            <option value='FRA'>France</option>            <option value='GUF'>French Guiana</option>            <option value='PYF'>French Polynesia</option>            <option value='ATF'>French Southern Lands</option>            <option value='GAB'>Gabon</option>            <option value='GMB'>Gambia</option>            <option value='GEO'>Georgia</option>            <option value='DEU'>Germany</option>            <option value='GHA'>Ghana</option>            <option value='GIB'>Gibraltar</option>            <option value='GRC'>Greece</option>            <option value='GRL'>Greenland</option>            <option value='GRD'>Grenada</option>            <option value='GLP'>Guadeloupe</option>            <option value='GUM'>Guam</option>            <option value='GTM'>Guatemala</option>            <option value='GGY'>Guernsey</option>            <option value='GIN'>Guinea</option>            <option value='GNB'>Guinea-Bissau</option>            <option value='GUY'>Guyana</option>            <option value='HTI'>Haiti</option>            <option value='HMD'>Heard and McDonald Islands</option>            <option value='HND'>Honduras</option>            <option value='HKG'>Hong Kong</option>            <option value='HUN'>Hungary</option>            <option value='ISL'>Iceland</option>            <option value='IND'>India</option>            <option value='IDN'>Indonesia</option>            <option value='IRN'>Iran</option>            <option value='IRQ'>Iraq</option>            <option value='IRL'>Ireland</option>            <option value='IMN'>Isle of Man</option>            <option value='ISR'>Israel</option>            <option value='ITA'>Italy</option>            <option value='JAM'>Jamaica</option>            <option value='JPN'>Japan</option>            <option value='JEY'>Jersey</option>            <option value='JOR'>Jordan</option>            <option value='KAZ'>Kazakhstan</option>            <option value='KEN'>Kenya</option>            <option value='KIR'>Kiribati</option>            <option value='PRK'>Korea, North</option>            <option value='KOR'>Korea, South</option>            <option value='KWT'>Kuwait</option>            <option value='KGZ'>Kyrgyzstan</option>            <option value='LAO'>Laos</option>            <option value='LVA'>Latvia</option>            <option value='LBN'>Lebanon</option>            <option value='LSO'>Lesotho</option>            <option value='LBR'>Liberia</option>            <option value='LBY'>Libya</option>            <option value='LIE'>Liechtenstein</option>            <option value='LTU'>Lithuania</option>            <option value='LUX'>Luxembourg</option>            <option value='MAC'>Macau</option>            <option value='MKD'>Macedonia</option>            <option value='MDG'>Madagascar</option>            <option value='MWI'>Malawi</option>            <option value='MYS'>Malaysia</option>            <option value='MDV'>Maldives</option>            <option value='MLI'>Mali</option>            <option value='MLT'>Malta</option>            <option value='MHL'>Marshall Islands</option>            <option value='MTQ'>Martinique</option>            <option value='MRT'>Mauritania</option>            <option value='MUS'>Mauritius</option>            <option value='MYT'>Mayotte</option>            <option value='MEX'>Mexico</option>            <option value='FSM'>Micronesia</option>            <option value='MDA'>Moldova</option>            <option value='MCO'>Monaco</option>            <option value='MNG'>Mongolia</option>            <option value='MNE'>Montenegro</option>            <option value='MSR'>Montserrat</option>            <option value='MAR'>Morocco</option>            <option value='MOZ'>Mozambique</option>            <option value='MMR'>Myanmar</option>            <option value='NAM'>Namibia</option>            <option value='NRU'>Nauru</option>            <option value='NPL'>Nepal</option>            <option value='NLD'>Netherlands</option>            <option value='ANT'>Netherlands Antilles</option>            <option value='NCL'>New Caledonia</option>            <option value='NZL'>New Zealand</option>            <option value='NIC'>Nicaragua</option>            <option value='NER'>Niger</option>            <option value='NGA'>Nigeria</option>            <option value='NIU'>Niue</option>            <option value='NFK'>Norfolk Island</option>            <option value='MNP'>Northern Mariana Islands</option>            <option value='NOR'>Norway</option>            <option value='OMN'>Oman</option>            <option value='PAK'>Pakistan</option>            <option value='PLW'>Palau</option>            <option value='PSE'>Palestine</option>            <option value='PAN'>Panama</option>            <option value='PNG'>Papua New Guinea</option>            <option value='PRY'>Paraguay</option>            <option value='PER'>Peru</option>            <option value='PHL'>Philippines</option>            <option value='PCN'>Pitcairn</option>            <option value='POL'>Poland</option>            <option value='PRT'>Portugal</option>            <option value='PRI'>Puerto Rico</option>            <option value='QAT'>Qatar</option>            <option value='REU'>Reunion</option>            <option value='ROU'>Romania</option>            <option value='RUS'>Russian Federation</option>            <option value='RWA'>Rwanda</option>            <option value='BLM'>Saint Barthélemy</option>            <option value='SHN'>Saint Helena</option>            <option value='KNA'>Saint Kitts and Nevis</option>            <option value='LCA'>Saint Lucia</option>            <option value='MAF'>Saint Martin (French part)</option>            <option value='SPM'>Saint Pierre and Miquelon</option>            <option value='VCT'>Saint Vincent and the Grenadines</option>            <option value='WSM'>Samoa</option>            <option value='SMR'>San Marino</option>            <option value='STP'>Sao Tome and Principe</option>            <option value='SAU'>Saudi Arabia</option>            <option value='SEN'>Senegal</option>            <option value='SRB'>Serbia</option>            <option value='SYC'>Seychelles</option>            <option value='SLE'>Sierra Leone</option>            <option value='SGP'>Singapore</option>            <option value='SVK'>Slovakia</option>            <option value='SVN'>Slovenia</option>            <option value='SLB'>Solomon Islands</option>            <option value='SOM'>Somalia</option>            <option value='ZAF'>South Africa</option>            <option value='SGS'>South Georgia and South Sandwich Islands</option>            <option value='ESP'>Spain</option>            <option value='LKA'>Sri Lanka</option>            <option value='SDN'>Sudan</option>            <option value='SUR'>Suriname</option>            <option value='SJM'>Svalbard and Jan Mayen Islands</option>            <option value='SWZ'>Swaziland</option>            <option value='SWE'>Sweden</option>            <option value='CHE'>Switzerland</option>            <option value='SYR'>Syria</option>            <option value='TWN'>Taiwan</option>            <option value='TJK'>Tajikistan</option>            <option value='TZA'>Tanzania</option>            <option value='THA'>Thailand</option>            <option value='TLS'>Timor-Leste</option>            <option value='TGO'>Togo</option>            <option value='TKL'>Tokelau</option>            <option value='TON'>Tonga</option>            <option value='TTO'>Trinidad and Tobago</option>            <option value='TUN'>Tunisia</option>            <option value='TUR'>Turkey</option>            <option value='TKM'>Turkmenistan</option>            <option value='TCA'>Turks and Caicos Islands</option>            <option value='TUV'>Tuvalu</option>            <option value='UGA'>Uganda</option>            <option value='UKR'>Ukraine</option>            <option value='ARE'>United Arab Emirates</option>            <option value='GBR'>United Kingdom</option>            <option value='UMI'>United States Minor Outlying Islands</option>            <option value='USA'>United States of America</option>            <option value='URY'>Uruguay</option>            <option value='UZB'>Uzbekistan</option>            <option value='VUT'>Vanuatu</option>            <option value='VAT'>Vatican City</option>            <option value='VEN'>Venezuela</option>            <option value='VNM'>Vietnam</option>            <option value='VGB'>Virgin Islands, British</option>            <option value='VIR'>Virgin Islands, U.S.</option>            <option value='WLF'>Wallis and Futuna Islands</option>            <option value='ESH'>Western Sahara</option>            <option value='YEM'>Yemen</option>            <option value='ZMB'>Zambia</option>            <option value='ZWE'>Zimbabwe</option>        </select>    </div></form><p class='weusestripe' data-l10n-id='billing-weusestripe'>We use <a href='http://stripe.com' target='_blank'>stripe</a> to process payments securely: your card details never go through our servers.</p>",u="<div class='product' data-l10n-id='billing-charge-description', data-l10n-ctx='{\"product\":<%-JSON.stringify(product)%>}'>We'll charge you <span class='price'><%=product.price%></span> <span class='period'><%=product.period%></span></div><% if (balance && balance < 0) {%><div class='after-credit'>After your $<%=-balance/100%> remaining credit has been used.</div><% }%><% if (coupon && coupon.id) {%><div class='after-credit'>For the duration of your discount, then <%=product.undiscountedPrice%> <%=product.period%> after that.</div><% }%><div class='submit button billing-purchase' data-l10n-id='product-purchase'>PURCHASE</div><p><a class='billing-cancel-purchase'>Cancel</a></p>",c="<div class='billing-edit button submit'>EDIT CARD</div>",d="<%if(card){%><p><div class='billing-remove button danger'>REMOVE CARD</div></p><%}%><p><div class='billing-update button submit'>SAVE DETAILS</div></p><p><a class='billing-cancel-update'>Cancel</a></p>",h=o.View.extend({
tagName:"div",className:"customer",customerTemplate:i.template(r),billingPreviewTemplate:i.template(s),noCardTemplate:i.template(l),billingFormTemplate:i.template(a),productTemplate:i.template(u),updateTemplate:i.template(d),editTemplate:i.template(c),events:{"submit .payment-form":"submit","click .billing-purchase":"submit","click .billing-update":"submit","click .billing-edit":"edit","click .billing-cancel-purchase":"cancel","click .billing-remove":"removeCard","click .billing-cancel-update":function(){this.edit(!1)}},initialize:function(t){i.bindAll(this,"render","submit","stripeResponseHandler","onCouponAdded"),this.listenTo(this.model,"change",this.render),requirejs.config({paths:{stripe:"https://js.stripe.com/v2/?noext"}}),e(["stripe"],function(t){this.Stripe=t,this.Stripe.setPublishableKey(e("env").stripe.publishable_key)}.bind(this)),this.options=t,this.editing=!1,this.model.url?(this.working(!0),this.model.fetchOrQueue(function(){this.edit(this.shouldShowAsEdit()),this.working(!1)}.bind(this))):this.editing=this.shouldShowAsEdit(),this.listenTo(this.model,"change:coupon",this.onCouponAdded)},shouldShowAsEdit:function(){var e=!!this.cardData().card,t=!!this.options.product;return!e&&t},onCouponAdded:function(){this.model.get("coupon")&&this.model.getCoupon(function(){this.render()}.bind(this))},working:function(e){this.$el.toggleClass("working",e)},cardData:function(){var e=this.model.toJSON();return{card:e.default_card?e.cards.data[0].last4:null,expiry:e.default_card?e.cards.data[0].exp_month+" / "+e.cards.data[0].exp_year:null,address_zip:e.default_card?e.cards.data[0].address_zip:null,address_line1:e.default_card?e.cards.data[0].address_line1:null,address_line2:e.default_card?e.cards.data[0].address_line2:null,name:e.default_card?e.cards.data[0].name:null,address_city:e.default_card?e.cards.data[0].address_city:null,address_country:e.default_card?e.cards.data[0].address_country:"GBR"}},productData:function(){var e=this.options.product;if(e){i.extend(this.options.product,{periodKey:this.options.product.period.replace(/[^a-zA-Z]/g,"")});return e=i.clone(e),e.undiscountedPrice=e.currency_symbol+e.price/100,e.price=this.model.getCoupon().apply(e.price),e.price=e.currency_symbol+e.price/100,{product:e,coupon:this.model.getCoupon().toJSON(),balance:this.model.get("account_balance")}}},render:function(){if(this.$el.html(this.customerTemplate()),this.editing){var e=this.cardData();this.$el.find(".main").html(this.billingFormTemplate(e)),this.$el.find(".address_country").val(e.address_country),this.addValidation()}else this.cardData().card?this.$el.find(".main").html(this.billingPreviewTemplate(this.cardData())):this.$el.find(".main").html(this.noCardTemplate());return this.options.product?this.$el.find(".side").html(this.productTemplate(this.productData())):this.editing?this.$el.find(".side").html(this.updateTemplate(this.cardData())):this.$el.find(".side").html(this.editTemplate()),this},edit:function(e){"undefined"==typeof e&&(e=!0),this.editing=e,this.render()},cancel:function(){return!this.shouldShowAsEdit()&&this.editing?this.edit(!1):void this.trigger("canceled")},addValidation:function(){var e=this;this.$el.find(".cardnumber").payment("formatCardNumber"),this.$el.find(".cardnumber").bind("blur validate",function(){$.payment.validateCardNumber($(this).val())?$(this).removeClass("error"):(e.error(""),$(this).addClass("error"))}),this.$el.find(".cvc").payment("formatCardCVC"),this.$el.find(".cvc").bind("blur validate",function(){$.payment.validateCardCVC($(this).val())?$(this).removeClass("error"):(e.error(""),$(this).addClass("error"))}),this.$el.find(".exp").payment("formatCardExpiry"),this.$el.find(".exp").bind("blur validate",function(){var t=$.payment.cardExpiryVal($(this).val());$.payment.validateCardExpiry(t.month,t.year)?$(this).removeClass("error"):(e.error(""),$(this).addClass("error"))})},error:function(e){this.$el.find("error").text(e)},stripeResponseHandler:function(e,t){if(t.error)return this.working(!1),this.error(t.error.message);var n=function(){this.model.save({token:t},{wait:!0,type:"PUT",success:function(){this.working(!1),this.edit(!1),this.finish()}.bind(this),error:function(e,t){this.working(!1),t.responseJSON?this.error(t.responseJSON.description):this.error("Error "+t.status+": request failed. Please refresh the page and try again.")}.bind(this)})}.bind(this);this.options.onStripeSuccess?this.options.onStripeSuccess(this,function(e){return e?(this.working(!1),this.error(e)):void n()}.bind(this)):n()},finish:function(){this.trigger("configured")},submit:function(){if(this.options.validate&&!this.options.validate())return!1;if(!this.editing)return this.finish(),!1;var e=this.$el.find(".payment-form"),t=$.payment.cardExpiryVal(e.find(".exp").val());return t||e.find(".exp").addClass("error"),e.find(".exp-month").val(t.month),e.find(".exp-year").val(t.year),e.find("input").trigger("validate"),!(e.find(".error").length>0)&&(this.working(!0),this.Stripe.card.createToken(e,this.stripeResponseHandler),!1)},removeCard:function(){this.working(!0),this.model.destroy({wait:!0,success:function(){this.model.clear(),this.editing=!1,this.render(),this.working(!1)}.bind(this)})}});n.exports=h}),define("views/PlanSelectionView",["require","exports","module","underscore","backbone","views/CustomerView"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=(e("views/CustomerView"),"<a href='<%-close%>' class='close-button'>✕</a><error></error><div class='picker'>    <div class='plans row'>        <div class='plan col-sm-4 plan-free'>            <div class='plan-overview-wrapper'>                <div class='plan-overview'>                    <div class='plan-title freeforever' data-l10n-id='plans-free-forever-title'>Free Forever</div>                    <div class='plan-description' data-l10n-id='plans-free-description'>Ideal for discovering Coggle and occasional use.</div>                    <div class='plan-pricing'><span class='currency'>$</span><span class='price'>0</span><span class='period'>forever</span></div>                    <a href='/me/billing' class='button outline select-free' data-l10n-id='manage-subscription'>Manage Subscription</a>                    <div class='button outline current' style='pointer-events: none' data-l10n-id='current-plan'>Your current plan</div>                </div>            </div>            <div class='plan-features'>                <div class='feature'><b data-l10n-id='feature-nprivate' data-l10n-ctx='{\"privateDiagrams\":{\"available\":\"<%- private_diagrams || 0%>\"}}'><%- private_diagrams %> private diagram<%- (private_diagrams>1)?'s':'' %></b></div>                <div class='feature' data-l10n-id='feature-diagrams'><b>Unlimited</b> public diagrams</div>                <div class='feature' data-l10n-id='feature-realtime'><b>Real-time</b> collaboration</div>                <div class='feature' data-l10n-id='feature-rearrange'><b>Auto-arrange branches</b></div>                <div class='feature' data-l10n-id='feature-emoji'>Over <b>1600</b> <a href='http://bloggle.coggle.it/post/147537221917/introducing-emoji-in-coggle-to-celebrate'>beautiful icons</a></div>                <div class='feature' data-l10n-id='feature-images'><b>Unlimited</b> image uploads</div>                <div class='feature' data-l10n-id='feature-downloads'><b>PDF & Image</b> download</div>                <div class='feature' data-l10n-id='feature-folders'><b>Shared folders</b></div>                <div class='feature' data-l10n-id='feature-labels'>Unconnected <b>text boxes</b></div>                <div class='feature' data-l10n-id='feature-exports'>Export as <b>.mm and text</b></div>                <div class='feature' data-l10n-id='feature-chat'>Comments & Chat</div>            </div>        </div>        <div class='plan col-sm-4 plan-awesome'>            <div class='plan-overview-wrapper'>                <div class='plan-overview'>                    <a href='/awesome' target='_blank' class='plan-title' data-l10n-id='plans-awesome-title'>Awesome</a>                    <div class='plan-description' data-l10n-id='plans-awesome-description'>Ideal for <b>personal</b> or <b>professional</b> use, with privacy and advanced features.</div>                    <div class='plan-pricing'><span class='currency'>$</span><span class='price'>5</span><span class='period' data-l10n-id='per-month'>per month</div>                    <a href='/me/billing' class='button outline manage' data-l10n-id='manage-subscription'>Manage Subscription</a>                    <a href='/plans/awesome<%- billing_query?('?'+billing_query):'' %>' class='button outline switch-monthly' data-l10n-id='awesome-upgrade-monthly'>Upgrade (<b>$5</b>/month)</a>                    <a href='/plans/awesome:yearly<%- billing_query?('?'+billing_query):'' %>' class='button outline switch-yearly' data-l10n-id='awesome-upgrade-yearly'>Upgrade (<b>$50</b>/year)</a>                    <div class='benefit' data-l10n-id='yearly-discount'>Pay yearly and get 2 months free!</div>                </div>            </div>            <div class='plan-features'>                <div class='feature secondary includes' data-l10n-id='feature-include-free'>Everything in <b>Free</b></div>                <div class='feature' data-l10n-id='feature-unlimited-private'><b>Unlimited private diagrams</b></div>                <div class='feature' data-l10n-id='feature-multiroot'><b>Multiple start points</b></div>                <div class='feature' data-l10n-id='feature-rejoin'><b>Join branches</b></div>                <div class='feature' data-l10n-id='feature-chathistory'><b>Full</b> chat history</div>                <div class='feature' data-l10n-id='feature-bigimages'><b>High-res image</b> uploads</div>                <div class='feature' data-l10n-id='feature-linestyles'><b>Control line style</b></div>                <div class='feature' data-l10n-id='feature-editable-links'>Collaborate by <b>link</b></div>            </div>        </div>        <div class='plan col-sm-4 plan-organisation'>            <div class='plan-overview-wrapper'>                <div class='plan-overview'>                    <a href='/organisations' target='_blank' class='plan-title' data-l10n-id='plans-org-title'>Organisation</a>                    <div class='plan-description' data-l10n-id='plans-org-description'>Ideal for <b>teams</b> that want to control access to their data and consolidate billing.</div>                    <div class='plan-pricing'><span class='currency'>$</span><span class='price'>8</span><span class='period' data-l10n-id='per-member-per-month'>per member per month</span></div>                    <a href='/organisations' data-bypass class='button outline select-organisation'  data-l10n-id='plans-findoutmore'>Find out more</a>                </div>            </div>            <div class='plan-features'>                <div class='feature includes' data-l10n-id='feature-org-awesome'>Everything from <b>Awesome</b></div>                <div class='feature' data-l10n-id='feature-org-saml-sso'>SAML Single Sign On</div>                <div class='feature' data-l10n-id='feature-org-separate'>Separate Personal workspace</div>                <div class='feature' data-l10n-id='feature-org-billing'><b>Consolidated billing</b></div>                <div class='feature' data-l10n-id='feature-bulkexport'><b>Bulk export</b></div>                <div class='feature' data-l10n-id='feature-adminpanel'><b>User & data</b> management</div>                <div class='feature' data-l10n-id='feature-branding'>Branded diagrams</div>            </div>        </div>    </div></div>"),s=o.View.extend({tagName:"div",className:"plan-selection",events:{},template:i.template(r),initialize:function(e){i.bindAll(this,"render","error"),this.options=e,e.src&&(s._latest_src=e.src),this.listenToOnce(this.model.getPlans(function(){}),"sync",this.render)},getBillingParams:function(){var e={};return this.options.coupon&&(e.coupon=this.options.coupon),s._latest_src&&(e.src=s._latest_src),e},render:function(){var e=this.model.getPlans(),t=e.getActivePlan(),n=t?t.id:"free";this.model.isTriallingAwesome()&&(n="free"),t&&t.get("ending")&&(n="free");var o=this.model.privateDiagramAllowance(),r=i.map(this.getBillingParams(),function(e,t){return t+"="+e}).join("&");return this.$el.html(this.template({private_diagrams:o||3,billing_query:r,close:this.options.close||"/"})),this.$el.attr("data-plan",n),this},error:function(e){this.$el.find("error").first().text(e)}});n.exports=s}),define("views/PitchView",["require","exports","module","underscore","backbone","views/PlanSelectionView","env"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=e("views/PlanSelectionView"),s="<div class='pitch-contents container'>    <div class='pitch-info col-md-8'>        <% if(teaser) { %>            <div class='teaser' style='background-image: url(<%=teaser%>)'/>        <% } %>        <% if(message) { %>            <div class='message'><%=message%></div>            <div class='pitch-features'>                <span>Unlimited Private Diagrams</span>                <span>Line Styles</span>                <span>Join Branches</span>                <span>Multiple Starting Points</span>            </div>        <% } %>    </div>    <div class='pitch-plan col-md-4'></div>    <div class='close-modal close-button'>✕</div></div>",l=o.View.extend({tagName:"div",className:"pitch-view",events:{"click .close-modal":"remove"},template:i.template(s),initialize:function(e){i.bindAll(this,"render","remove"),this.options=e,this.plan=new r({model:getCoggleUser(),src:e.id}),this.addChildView(this.plan),this.listenToOnce(this.plan,"show_billing",function(){this.$el.addClass("signup")}.bind(this))},render:function(){return this.$el.html(this.template({message:this.options.message,teaser:this.options.teaser})),this.plan.$el.addClass("compact"),this.$el.find(".pitch-plan").append(this.plan.render().$el),this}});i.extend(l,o.Events),l.show=function(e){if(e.id&&getCoggleUser().getActions().perform(e.id),l.trigger("pitch",e),!$("body").hasClass("mobile-app")){var t=new l(e);$("body").append(t.render().$el),this.listenTo(o.history,"route",function(){t.remove()})}},l.MultiRoot=function(){l.show({id:"pitch:multiroot",title:"Multiple Root Items",teaser:e("env").cdn.url+"/img/features/labels-to-roots.gif",message:"The Awesome plans comes with loads of great features, including creating multiple trees in one Coggle diagram! Upgrade now to turn labels into new root items."})},n.exports=l}),define("views/FolderViews",["require","exports","module","underscore","backbone","jquery-ui/widgets/sortable","views/PitchView"],function(e,t,n){var i=e("underscore"),o=e("backbone");e("jquery-ui/widgets/sortable");var r=(e("views/PitchView"),"<input type='text' name='title' class='title' value='<%- name %>' <% if(l10n_id){ %> data-l10n-id='<%- l10n_id %>' <% } %> placeholder='Enter a folder name'/><a class='leave tip'>  <span class='areyousure' data-l10n-id='folder-areyousure'>are you sure? <span class='yes'>I&#39;m sure</span></span></a>"),s=o.View.extend({tagName:"li",className:"folder entry",template:i.template(r),events:{"click .leave":"leaveAreYouSure","touchstart .leave":"leaveAreYouSure","click .leave .areyousure .yes":"removeFolder","touchstart .leave .areyousure .yes":"removeFolder","keyup .title":"updateOnEnter","blur .title":"save",click:"navigate"},initialize:function(e){i.bindAll(this,"render","remove","destroy","save","navigate"),this.options=e,this.model.get("my_access")&&this.model.get("my_access").map(function(e){this.$el.addClass("permission-"+e)}.bind(this)),this.listenTo(this.model,"change",this.render),this.listenTo(this.model.getAccess(),"left",this.destroy),this.$el.attr("data-id",this.model.id),this.model.isVirtual()&&this.$el.addClass("virtual"),this.el.view=this},addDropTarget:function(){(this.model.isShared()||this.model.canWrite())&&this.$el.sortable({connectWith:".folders .folder",items:".nothing",update:function(e,t){var n=t.item[0].model,i=$(e.target).attr("data-id");t.item.remove(),n.save({folder:i},{success:function(){n.collection.remove(n);var e=getCoggleUser().getActiveOrg().getFolders().get(i);e&&e.getDiagrams().add(n)},error:function(){o.history.fragment=null,o.history.navigate(window.location.pathname+window.location.search,{trigger:!0})}.bind(this)})}.bind(this)})},destroy:function(){this.$el.slideUp()},leaveAreYouSure:function(e){this.$el.addClass("leaving"),setTimeout(function(){this.$el.one("mouseleave",function(){window.setTimeout(function(){this.$el.removeClass("leaving")}.bind(this),1e3)}.bind(this))}.bind(this),0),e.stopImmediatePropagation()},removeFolder:function(){this.model.getAccess().trigger("left"),this.model.getAccess().getMe().destroy(),this.model.collection&&this.model.collection.remove(this.model),ga("send","event","Folder","Left")},render:function(){return this.$el.html(this.template(i.extend({l10n_id:"folder-title"},this.model.toJSON()))),this.$el.hasClass("selected")&&!this.model.isVirtual()||this.$el.find("input").prop("readonly",!0),this.addDropTarget(),this},save:function(){var e=this.$el.find("input").val();e&&e.trim()||(e=""),e!=this.model.get("name")&&(this.model.save({name:e}),ga("send","event","Folder","Renamed")),this.$el.removeClass("editing")},navigate:function(){var e=getCoggleUser().getActiveOrg().get("slug");e=e?"/"+e:"";var t=this.options.member;t=t?"?member="+t:"",this.model.isRoot()?o.history.navigate(e+"/"+t,!0):o.history.navigate(e+"/folder/"+this.model.id+t,!0)},updateOnEnter:function(e){13==e.keyCode&&this.save()}}),l=i.template("<ul class='entries virtual'>    <li class='entry gallery' data-id='gallery'><a class='title' href='/folder/gallery' data-l10n-id='view-gallery'>Gallery</a></li></ul><div class='subtitle' data-l10n-id='shared-folders'>Shared Folders</div><ul class='entries folders'></ul><div class='create-folder'><div class='text' data-l10n-id='create-folder'>Create Folder</div></div>"),a=o.View.extend({tagName:"div",className:"folders",events:{"click .create-folder":"createFolder","touchstart .create-folder":"createFolder"},initialize:function(e){i.bindAll(this,"addOne","addAll","render","createFolder"),this.options=e,this.listenTo(this.collection,"reset",this.addAll),this.listenTo(this.collection,"add",this.addOne),this.listenTo(this.collection,"change:name",function(){this.collection.sort(),this.render()}.bind(this)),this.options.member&&this.$el.find(".create-folder").remove(),this.addAll()},render:function(){return this.$el.html(l()),"gallery"==this.options.selected&&this.$el.find(".gallery").addClass("selected"),this.addAll(),this},addOne:function(e){if(!(this.$el.find(".folder[data-id="+e.id+"]").length>0)){var t=new s({model:e,member:this.options.member});this.addChildView(t),e.isVirtual()?this.$el.find(".entries .gallery").before(t.$el):this.$el.find(".entries.folders").append(t.$el),this.options.selected==e.id&&t.$el.addClass("selected"),t.render()}},addAll:function(){this.collection.each(this.addOne)},setSelected:function(e){this.$el.find(".selected").removeClass("selected"),this.$el.find('[data-id="'+e+'"]').addClass("selected")},createFolder:function(){this.collection.createFolder(function(e,t){if(e)return o.history.navigate("/");var n=getCoggleUser().getActiveOrg().get("slug");n=n?"/"+n:"",o.history.navigate(n+"/folder/"+t.id,!0),setTimeout(function(){var e=$(".folder[data-id="+t.id+"]");e.find("input").focus()}.bind(this),0)}.bind(this))}});n.exports.FolderView=s,n.exports.FolderList=a}),define("plugins/Backbone.childViews",["require","exports","module","underscore"],function(e,t,n){var i=e("underscore");Backbone.View.prototype.addChildView=function(e){if(!e)throw new Error("invalid view");return this._child_views||(this._child_views=[]),this._child_views.push(e),this},Backbone.View.prototype.removeChildView=function(e){if(this._child_views)return this._child_views=i.without(_child_views,e),this};var o=Backbone.View.prototype.remove;Backbone.View.prototype.remove=function(){this._child_views&&(this._child_views.map(function(e){e.remove()}),this._child_views=[]),o.apply(this,arguments)}}),define("views/MemberIconView",["require","exports","module","underscore","backbone","models/User","env"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=e("models/User"),s=i.template("<div title='<%- name %>' style='background-image:url(<%- picture %>); background-color: <%- colour %>;' class='user-icon'>    <div class='initials'><%- initials %></div></div>");n.exports=o.View.extend({tagName:"li",className:"member",events:{click:"selected"},initialize:function(){i.bindAll(this,"render","selected"),this.listenTo(this.model,"remove",this.remove)},render:function(){var t=this.model.toJSON();return t.initials="",t.name||(t.name=t.email),t.name||(t.name=t.emails?t.emails[0]:"??"),t.name&&(t.initials=t.name.toUpperCase().split(" ").map(function(e){return e[0]}).join("")),t.picture||(t.picture=e("env").cdn.url+"/img/anon-member.png"),t.colour||(t.colour="#bbbbbb"),this.$el.html(s(t)),this.model.id==r.me().id&&this.$el.addClass("self"),this},selected:function(){this.trigger("selected",this)}})}),define("views/AccessListView",["require","exports","module","underscore","backbone","views/MemberIconView"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=e("views/MemberIconView"),s=i.template("<li class='member sharing'>    <div class='user-icon' data-l10n-id='<%- l10nId %>'></div></li>");n.exports=o.View.extend({tagName:"ul",className:"members",events:{"click .member":"lockOpen"},initialize:function(e){i.bindAll(this,"addOne","addAll","render","addSharing","lockOpen","unlock"),this.options=e,this.collections=e.collections,this.l10nId=e.overridel10nId||"tooltip-invite",this.locking=!0,this.collections.map(function(e){e.listenTo(e,"add",this.addOne),e.listenTo(e,"reset",this.render)}.bind(this))},render:function(){return this.$el.empty(),this.addAll(),this.sharing&&this.$el.prepend(s({l10nId:this.l10nId})),this},addSharing:function(){return this.sharing=!0,this.render()},setLocking:function(e){this.locking=e},unlock:function(){this.$el.find(".lock-open").removeClass("lock-open"),this.$el.find(".lock-prev").removeClass("lock-prev"),this.$el.find(".lock-next").removeClass("lock-next")},lockOpen:function(e){if(this.unlock(),this.locking){var t=$(e.currentTarget);this.unlock(),t.addClass("lock-open"),t.next().addClass("lock-prev"),t.prev().addClass("lock-next"),t.one("mousedownoutside",this.unlock)}},addOne:function(e){if(e.get("email")||e.get("direct")){var t=new r({model:e});this.addChildView(t),this.listenTo(t,"selected",function(){this.trigger("selected",e,t)}.bind(this)),this.$el.append(t.render().$el),this.$el.children().length>6&&this.$el.addClass("busy")}},addAll:function(){this.collections.map(function(e){e.each(this.addOne)}.bind(this))}})}),function(e){"function"==typeof define&&define.amd?define("plugins/jquery.discreteSlider",["jquery","jquery-ui/widgets/draggable"],e):e(jQuery)}(function(e,t){e.fn.discreteSlider=function(t){function n(){var t=e(this),n=t.position().top+t.outerHeight()/2,o=t.siblings().filter(function(t){var i=e(this),o=i.prev().length>0?i.prev().position().top+i.prev().outerHeight():0,r=i.position().top,s=i.position().top+i.outerHeight(),l=i.next().length>0?i.next().position().top:1/0,a=Math.floor(o+(r-o)/2),u=Math.ceil(s+(l-s)/2);return n>a&&n<=u});if(0!==o.length){var r=e(o[0]),s=Math.floor(r.position().top+r.outerHeight()/2-t.outerHeight()/2);t.animate({top:s},30),i.trigger("positionchange",r)}}var i=e(this),o=e.extend({draggable:{containment:"parent",axis:"y",stop:n}},t),r={addStop:function(t){var o=e("<li data="+t.data+">");t.class&&o.addClass(t.class);var s=e('<div class="marker">');if(t.label){var l=e('<div class="label">');t["data-l10n-id"]&&l.attr("data-l10n-id",t["data-l10n-id"]),t["data-l10n-ctx"]&&l.attr("data-l10n-ctx",t["data-l10n-ctx"]),l.append(t.label),t.title&&l.prop("title",t.title),o.append(l.l20n())}return o.append(s),e(this).append(o),o.click(function(e){r.slideTo(o),e.stopPropagation(),i.one("movedto",function(){n.apply(i.find(".slider"))})}),o}.bind(this),addSlider:function(){var t=e('<div class="slider">');e(this).append(t),e(t).draggable(o.draggable)}.bind(this),slideTo:function(t,n){void 0===n&&(n=30),t=e(t);var o=t.siblings(".slider"),r=Math.floor(t.position().top+(t.outerHeight()/2-o.outerHeight()/2));0!==o.length&&o.animate({top:r},n,function(){i.trigger("movedto",t)}.bind(this))}.bind(this)};return r}}),function(e,t,n){function i(i,o){function r(t){e(s).each(function(){var n=e(this);this===t.target||n.has(t.target).length||n.triggerHandler(o,[t.target])})}o=o||i+n;var s=e(),l=i+"."+o+"-special-event";e.event.special[o]={setup:function(){s=s.add(this),1===s.length&&e(t).bind(l,r)},teardown:function(){s=s.not(this),0===s.length&&e(t).unbind(l)},add:function(e){var t=e.handler;e.handler=function(e,n){e.target=n,t.apply(this,arguments)}}}}e.map("click dblclick mousemove mousedown mouseup mouseover mouseout change select submit keydown keypress keyup".split(" "),function(e){i(e)}),i("focusin","focus"+n),i("focusout","blur"+n),e.addOutsideEvent=i}(jQuery,document,"outside"),define("jquery.outsideEvents",function(){}),define("views/AwesomePromotionView",["require","exports","module","underscore","backbone","env","env","views/PitchView"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=[e("env").cdn.url+"/img/features/auto-arrange.gif",e("env").cdn.url+"/img/features/rejoin-branch.gif"],s=i.template('<div class="orgsupporter" data-l10n-id="me-as-awesome-orgmember"><p class="tip">This is you &mdash; you\'re viewing Coggle as an <b>organisation member</b>.</p><p class="tip">This means you get all the great features from the <a data-bypass href="/awesome">Coggle Awesome</a> plan too!</p></div>'),l=i.template('<img class="feature-teaser" style="width:100%" src="<%- GIFs[Math.floor(GIFs.length*Math.random())]%>" /><div class="benefits"><p><span data-l10n-id="feature-private">Private Diagrams</span><b> ✓</b></p><p><span data-l10n-id="feature-rearrange">Auto-arrange Branches</span><b> ✓</b></p><p><span data-l10n-id="feature-rejoin">Join Branches</span><b> ✓</b></p><p><span data-l10n-id="feature-chathistory"><b>Full</b> Chat History</span><b> ✓</b></p><p><span data-l10n-id="feature-multiroot">Multiple Starting Points</span><b> ✓</b></p><a class="button upgrade-now">Upgrade Now</a><p><a href="/me/recommend" data-l10n-id="free-awesome">Want Awesome for free?</a></p></div>'),a=i.template('<div class="benefits" data-l10n-id="me-support-awesomethanks"><p class="tip"><b>Thanks for supporting Coggle!</b></p><p class="tip">For being an early Coggle supporter, you get all the benefits of the <a data-bypass href="/awesome">Coggle Awesome</a> plan included in your subscription!</p><a href="/me/billing">Manage your plan</a></div>'),u=i.template('<div class="benefits" data-l10n-id="me-awesomethanks"><p class="tip">This is you &mdash;<b>You\'re Awesome!</b></p><a href="/me/billing">Manage your plan</a></div>'),c=o.View.extend({tagName:"div",className:"awesome",events:{"click .upgrade-now":"openSignup"},initialize:function(){i.bindAll(this,"render"),this.customerModel=this.model.getCustomer(function(e){e&&console.warn("failed to load customer",e),this.render()}.bind(this))},render:function(){return this.$el.empty(),getCoggleUser().getActiveOrg().id?this.$el.html(s()):this.model.isSupporter()?this.$el.html(a()):this.model.isAwesome()?this.$el.html(u()):(getCoggleUser().getActions().perform("pitch:awesome:ownicon"),this.$el.html(l({GIFs:r}))),this},openSignup:function(){var t=e("views/PitchView");return $("body").click(),t.show({id:"pitch:awesomesignup",title:"Become Awesome!",teaser:r[Math.floor(r.length*Math.random())],message:"Join branches, create folders, make diagrams private, and lots more with Coggle Awesome! So why not upgrade now?"})}});n.exports=c}),define("views/AccessSliderView",["require","exports","module","underscore","backbone","plugins/jquery.discreteSlider","jquery.outsideEvents","views/AwesomePromotionView"],function(e,t,n){var i=e("underscore"),o=e("backbone");e("plugins/jquery.discreteSlider"),e("jquery.outsideEvents");var r=e("views/AwesomePromotionView"),s=i.template("<error></error><ul class='permissions discrete-slider'></ul><% if (is_removable) { %><a class='remove' data-l10n-id='access-remove' data-l10n-ctx='{\"user\":{\"givenName\":\"<%-name%>\"}}'>Remove <%-name%></a><% } %>");n.exports=o.View.extend({tagName:"div",className:"access-slider",defaultRoles:[{label:'Read only<br/><span class="tip">Only allow them to view</span>',data:"read","data-l10n-id":"access-readonly"},{label:'Read & create copies<br/><span class="tip">Also allow downloading and copying</span>',data:"clone","data-l10n-id":"access-readclone"},{label:'Author<br/><span class="tip">Allow editing and inviting others</span>',data:"write","data-l10n-id":"access-author"}],events:{"click .remove":"removeAccess","positionchange .permissions":"setRole"},initialize:function(e){i.bindAll(this,"render","error","removeAccess","update"),this.listenTo(this.model,"change",this.update),this.options=e,this.options.roles||(this.options.roles=this.defaultRoles)},render:function(){var e=this.model.toJSON();if(e.name||(e.name=e.email),e.is_removable=this.options.removable,this.model.get("user")&&this.model.get("user")==this.model.collection.myId()){var t=window.getCoggleUser(),n=new r({model:t});this.addChildView(n),this.$el.empty().append(n.render().$el)}else this.$el.html(s(e)),this.slider=this.$el.find(".permissions").discreteSlider(),this.options.roles.map(function(e){this.slider[e.data]=this.slider.addStop(e)}.bind(this)),this.slider.addSlider(),setTimeout(function(){this.update()}.bind(this),0);return this},error:function(e){this.$el.find("error").text(e)},update:function(){var e;return this.options.roles.map(function(t){this.model.get("permissions").indexOf(t.data)!=-1&&(e=t.data)}.bind(this)),this.slider.slideTo(this.slider[e],0),this},setRole:function(e,t){this.model.applyRole($(t).attr("data"),function(e){e?this.error("Failed to update role"):this.error(null)}.bind(this))},removeAccess:function(){this.model.destroy({success:function(){$(this.el).remove()}.bind(this)})}})}),function(e){"function"==typeof define&&define.amd?define("plugins/jquery.textover",["jquery","jquery.outsideEvents"],e):e(jQuery)}(function(e,t){e.fn.textover=function(t,n){function i(){if(n.loop||!(l>=t.length)){var r=t[l%t.length];l++,o.attr("placeholder",e(r).text()),s=window.setTimeout(i,n.fadeAfter)}}var o=e(this),r={fadeAfter:1e3,fadeDuration:200,loop:!1,hideOn:"keydown keyup keypress",showOn:"focusoutside keyup"};n=e.extend(r,n);var s,l=0,a={start:function(){l=0,i()}.bind(this),stop:function(){clearTimeout(s)}.bind(this)};return o.on(n.hideOn,a.stop),o.on(n.showOn,a.start),i(),a}}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/keycode",["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/position",["jquery","./version"],e):e(jQuery)}(function(e){return function(){function t(e,t,n){return[parseFloat(e[0])*(d.test(e[0])?t/100:1),parseFloat(e[1])*(d.test(e[1])?n/100:1)]}function n(t,n){return parseInt(e.css(t,n),10)||0}function i(t){var n=t[0];return 9===n.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}var o,r=Math.max,s=Math.abs,l=/left|center|right/,a=/top|center|bottom/,u=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,d=/%$/,h=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==o)return o;var t,n,i=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=i.children()[0];
return e("body").append(i),t=r.offsetWidth,i.css("overflow","scroll"),n=r.offsetWidth,t===n&&(n=i[0].clientWidth),i.remove(),o=t-n},getScrollInfo:function(t){var n=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),i=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),o="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth,r="scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight;return{width:r?e.position.scrollbarWidth():0,height:o?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),i=e.isWindow(n[0]),o=!!n[0]&&9===n[0].nodeType,r=!i&&!o;return{element:n,isWindow:i,isDocument:o,offset:r?e(t).offset():{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:n.outerWidth(),height:n.outerHeight()}}},e.fn.position=function(o){if(!o||!o.of)return h.apply(this,arguments);o=e.extend({},o);var d,p,f,g,m,v,y=e(o.of),b=e.position.getWithinInfo(o.within),w=e.position.getScrollInfo(b),_=(o.collision||"flip").split(" "),E={};return v=i(y),y[0].preventDefault&&(o.at="left top"),p=v.width,f=v.height,g=v.offset,m=e.extend({},g),e.each(["my","at"],function(){var e,t,n=(o[this]||"").split(" ");1===n.length&&(n=l.test(n[0])?n.concat(["center"]):a.test(n[0])?["center"].concat(n):["center","center"]),n[0]=l.test(n[0])?n[0]:"center",n[1]=a.test(n[1])?n[1]:"center",e=u.exec(n[0]),t=u.exec(n[1]),E[this]=[e?e[0]:0,t?t[0]:0],o[this]=[c.exec(n[0])[0],c.exec(n[1])[0]]}),1===_.length&&(_[1]=_[0]),"right"===o.at[0]?m.left+=p:"center"===o.at[0]&&(m.left+=p/2),"bottom"===o.at[1]?m.top+=f:"center"===o.at[1]&&(m.top+=f/2),d=t(E.at,p,f),m.left+=d[0],m.top+=d[1],this.each(function(){var i,l,a=e(this),u=a.outerWidth(),c=a.outerHeight(),h=n(this,"marginLeft"),v=n(this,"marginTop"),C=u+h+n(this,"marginRight")+w.width,F=c+v+n(this,"marginBottom")+w.height,A=e.extend({},m),x=t(E.my,a.outerWidth(),a.outerHeight());"right"===o.my[0]?A.left-=u:"center"===o.my[0]&&(A.left-=u/2),"bottom"===o.my[1]?A.top-=c:"center"===o.my[1]&&(A.top-=c/2),A.left+=x[0],A.top+=x[1],i={marginLeft:h,marginTop:v},e.each(["left","top"],function(t,n){e.ui.position[_[t]]&&e.ui.position[_[t]][n](A,{targetWidth:p,targetHeight:f,elemWidth:u,elemHeight:c,collisionPosition:i,collisionWidth:C,collisionHeight:F,offset:[d[0]+x[0],d[1]+x[1]],my:o.my,at:o.at,within:b,elem:a})}),o.using&&(l=function(e){var t=g.left-A.left,n=t+p-u,i=g.top-A.top,l=i+f-c,d={target:{element:y,left:g.left,top:g.top,width:p,height:f},element:{element:a,left:A.left,top:A.top,width:u,height:c},horizontal:n<0?"left":t>0?"right":"center",vertical:l<0?"top":i>0?"bottom":"middle"};p<u&&s(t+n)<p&&(d.horizontal="center"),f<c&&s(i+l)<f&&(d.vertical="middle"),r(s(t),s(n))>r(s(i),s(l))?d.important="horizontal":d.important="vertical",o.using.call(this,e,d)}),a.offset(e.extend(A,{using:l}))})},e.ui.position={fit:{left:function(e,t){var n,i=t.within,o=i.isWindow?i.scrollLeft:i.offset.left,s=i.width,l=e.left-t.collisionPosition.marginLeft,a=o-l,u=l+t.collisionWidth-s-o;t.collisionWidth>s?a>0&&u<=0?(n=e.left+a+t.collisionWidth-s-o,e.left+=a-n):u>0&&a<=0?e.left=o:a>u?e.left=o+s-t.collisionWidth:e.left=o:a>0?e.left+=a:u>0?e.left-=u:e.left=r(e.left-l,e.left)},top:function(e,t){var n,i=t.within,o=i.isWindow?i.scrollTop:i.offset.top,s=t.within.height,l=e.top-t.collisionPosition.marginTop,a=o-l,u=l+t.collisionHeight-s-o;t.collisionHeight>s?a>0&&u<=0?(n=e.top+a+t.collisionHeight-s-o,e.top+=a-n):u>0&&a<=0?e.top=o:a>u?e.top=o+s-t.collisionHeight:e.top=o:a>0?e.top+=a:u>0?e.top-=u:e.top=r(e.top-l,e.top)}},flip:{left:function(e,t){var n,i,o=t.within,r=o.offset.left+o.scrollLeft,l=o.width,a=o.isWindow?o.scrollLeft:o.offset.left,u=e.left-t.collisionPosition.marginLeft,c=u-a,d=u+t.collisionWidth-l-a,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];c<0?(n=e.left+h+p+f+t.collisionWidth-l-r,(n<0||n<s(c))&&(e.left+=h+p+f)):d>0&&(i=e.left-t.collisionPosition.marginLeft+h+p+f-a,(i>0||s(i)<d)&&(e.left+=h+p+f))},top:function(e,t){var n,i,o=t.within,r=o.offset.top+o.scrollTop,l=o.height,a=o.isWindow?o.scrollTop:o.offset.top,u=e.top-t.collisionPosition.marginTop,c=u-a,d=u+t.collisionHeight-l-a,h="top"===t.my[1],p=h?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,g=-2*t.offset[1];c<0?(i=e.top+p+f+g+t.collisionHeight-l-r,(i<0||i<s(c))&&(e.top+=p+f+g)):d>0&&(n=e.top-t.collisionPosition.marginTop+p+f+g-a,(n>0||s(n)<d)&&(e.top+=p+f+g))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}}}(),e.ui.position}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/unique-id",["jquery","./version"],e):e(jQuery)}(function(e){return e.fn.extend({uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}})}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/widgets/menu",["jquery","../keycode","../position","../safe-active-element","../unique-id","../version","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var n=e(t.target),i=e(e.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),n.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&i.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var n=e(t.target).closest(".ui-menu-item"),i=e(t.currentTarget);n[0]===i[0]&&(this._removeClass(i.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(t,i))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){var n=!e.contains(this.element[0],e.ui.safeActiveElement(this.document[0]));n&&this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){var t=this.element.find(".ui-menu-item").removeAttr("role aria-disabled"),n=t.children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),n.children().each(function(){var t=e(this);t.data("ui-menu-submenu-caret")&&t.remove()})},_keydown:function(t){var n,i,o,r,s=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:s=!1,i=this.previousFilter||"",r=!1,o=t.keyCode>=96&&t.keyCode<=105?(t.keyCode-96).toString():String.fromCharCode(t.keyCode),clearTimeout(this.filterTimer),o===i?r=!0:o=i+o,n=this._filterMenuItems(o),n=r&&n.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):n,n.length||(o=String.fromCharCode(t.keyCode),n=this._filterMenuItems(o)),n.length?(this.focus(t,n),this.previousFilter=o,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}s&&t.preventDefault()},_activate:function(e){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n,i,o,r,s=this,l=this.options.icons.submenu,a=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),i=a.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),n=t.prev(),i=e("<span>").data("ui-menu-submenu-caret",!0);s._addClass(i,"ui-menu-icon","ui-icon "+l),n.attr("aria-haspopup","true").prepend(i),t.attr("aria-labelledby",n.attr("id"))}),this._addClass(i,"ui-menu","ui-widget ui-widget-content ui-front"),t=a.add(this.element),n=t.find(this.options.items),n.not(".ui-menu-item").each(function(){var t=e(this);s._isDivider(t)&&s._addClass(t,"ui-menu-divider","ui-widget-content")}),o=n.not(".ui-menu-item, .ui-menu-divider"),r=o.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(o,"ui-menu-item")._addClass(r,"ui-menu-item-wrapper"),n.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){if("icons"===e){var n=this.element.find(".ui-menu-icon");this._removeClass(n,null,this.options.icons.submenu)._addClass(n,null,t.submenu)}this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",String(e)),this._toggleClass(null,"ui-state-disabled",!!e)},focus:function(e,t){var n,i,o;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),i=this.active.children(".ui-menu-item-wrapper"),this._addClass(i,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),o=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(o,null,"ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&e&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,i,o,r,s,l;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,o=t.offset().top-this.activeMenu.offset().top-n-i,r=this.activeMenu.scrollTop(),s=this.activeMenu.height(),l=t.outerHeight(),o<0?this.activeMenu.scrollTop(r+o):o+l>s&&this.activeMenu.scrollTop(r+o-s+l))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",e,{item:this.active}),this.active=null)},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var i=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(t),this._removeClass(i.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=i},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var i;this.active&&(i="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.find(this.options.items)[t]()),this.focus(n,i)},nextPage:function(t){var n,i,o;return this.active?void(this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,o=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-i-o<0}),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(t)},previousPage:function(t){var n,i,o;return this.active?void(this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,o=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-i+o>0}),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items).first()))):void this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)},_filterMenuItems:function(t){var n=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),i=new RegExp("^"+n,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return i.test(e.trim(e(this).children(".ui-menu-item-wrapper").text()))})}})}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/widgets/autocomplete",["jquery","./menu","../keycode","../position","../safe-active-element","../version","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,n,i,o=this.element[0].nodeName.toLowerCase(),r="textarea"===o,s="input"===o;this.isMultiLine=r||!s&&this._isContentEditable(this.element),this.valueMethod=this.element[r||s?"val":"text"],this.isNewMenu=!0,this._addClass("ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(o){if(this.element.prop("readOnly"))return t=!0,i=!0,void(n=!0);t=!1,i=!1,n=!1;var r=e.ui.keyCode;switch(o.keyCode){case r.PAGE_UP:t=!0,this._move("previousPage",o);break;case r.PAGE_DOWN:t=!0,this._move("nextPage",o);break;case r.UP:t=!0,this._keyEvent("previous",o);break;case r.DOWN:t=!0,this._keyEvent("next",o);break;case r.ENTER:this.menu.active&&(t=!0,o.preventDefault(),this.menu.select(o));break;case r.TAB:this.menu.active&&this.menu.select(o);break;case r.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(o),o.preventDefault());break;default:n=!0,this._searchTimeout(o)}},keypress:function(i){if(t)return t=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||i.preventDefault());if(!n){var o=e.ui.keyCode;switch(i.keyCode){case o.PAGE_UP:this._move("previousPage",i);break;case o.PAGE_DOWN:this._move("nextPage",i);break;case o.UP:this._keyEvent("previous",i);break;case o.DOWN:this._keyEvent("next",i)}}},input:function(e){return i?(i=!1,void e.preventDefault()):void this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),void this._change(e))}}),this._initSource(),this.menu=e("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"ui-autocomplete","ui-front"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,this.element[0]!==e.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(t,n){var i,o;return this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type))?(this.menu.blur(),void this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)})):(o=n.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:o})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(o.value),i=n.item.attr("aria-label")||o.value,void(i&&e.trim(i).length&&(this.liveRegion.children().hide(),e("<div>").text(i).appendTo(this.liveRegion))))},menuselect:function(t,n){var i=n.item.data("ui-autocomplete-item"),o=this.previous;this.element[0]!==e.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=o,this._delay(function(){this.previous=o,this.selectedItem=i})),!1!==this._trigger("select",t,{item:i})&&this._value(i.value),this.term=this._value(),this.close(t),this.selectedItem=i}}),this.liveRegion=e("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(t){var n=this.menu.element[0];return t.target===this.element[0]||t.target===n||e.contains(n,t.target)},_closeOnClickOutside:function(e){this._isEventTargetInWidget(e)||this.close()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,n,i=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,i){i(e.ui.autocomplete.filter(t,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,o){i.xhr&&i.xhr.abort(),i.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){o(e)},error:function(){o([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),n=this.menu.element.is(":visible"),i=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;t&&(!t||n||i)||(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this._addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this._removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var n=this.menu.element.empty();this._renderMenu(n,t),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var i=this;e.each(n,function(e,n){i._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<div>").text(n.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())},_isContentEditable:function(e){if(!e.length)return!1;var t=e.prop("contentEditable");return"inherit"===t?this._isContentEditable(e.parent()):"true"===t}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var i=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return i.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var n;this._superApply(arguments),this.options.disabled||this.cancelSearch||(n=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(n).appendTo(this.liveRegion))}}),e.ui.autocomplete}),define("views/PrivateLinkViews",["require","exports","module","underscore","backbone","env","env","env","env","env"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r="<div class='icons'><% if(writable && write){ %><img src='"+e("env").cdn.url+"/img/writable.png' class='icon writable' title='Viewers can edit the diagram.'><% } else if (writable && !write) { %><img src='"+e("env").cdn.url+"/img/nonwritable.png' class='icon nonwritable' title='Viewers can only view the diagram.'><% } %><% if(clonable){ %><img src='"+e("env").cdn.url+"/img/clonable.png' class='icon clonable' title='Viewers may create their own copies.'><% } else { %><img src='"+e("env").cdn.url+"/img/nonclonable.png' class='icon nonclonable' title='Viewers may not create copies.'><% } %><img src='"+e("env").cdn.url+"/img/bin.png' class='icon delete'></div><div class='content'><span class='tags'><% _.each(tags, function(tag) { %><span class='tag' data-l10n-id='share-tag-<%- tag %>'><%- tag %></span><% }); %></span><input class='link' readonly value='<%-link%>'></input></div>",s=o.View.extend({tagName:"li",className:"privatelink",template:i.template(r),events:{"click .delete":"removeLink","click .clonable":"toggleClone","click .nonclonable":"toggleClone","click .writable":"toggleWrite","click .nonwritable":"toggleWrite","click .link":"select"},initialize:function(e){i.bindAll(this,"render","removeLink","select"),this.options=e,this.listenTo(this.model,"change",this.render)},render:function(){var e=this.model.toJSON();return e.link=window.location.protocol+"//"+window.location.host+window.location.pathname+"/"+this.model.get("key"),e.writable=getCoggleUser().isAwesome()&&this.model.get("tags").indexOf("embed")===-1,e.write=this.model.get("permissions").indexOf("write")!==-1,e.clonable=this.model.get("permissions").indexOf("clone")!==-1,this.$el.html(this.template(e)),e.write&&this.$el.find(".tags").append("<span class='tag write' data-l10n-id='share-tag-writable'>writable</span>"),this},select:function(){var e=this.$el.find(".link");e.select();var t=e[0];void 0!==t.selectionStart&&(t.selectionStart=0,t.selectionEnd=t.value.length)},removeLink:function(){this.model.destroy({success:function(){$(this.el).remove()}.bind(this)})},toggleClone:function(){this.model.toggleClone()},toggleWrite:function(){this.model.toggleWrite()}}),l=o.View.extend({tagName:"ul",className:"cogglelist",events:{},initialize:function(e){i.bindAll(this,"addOne","addAll","render"),this.options=e,this.listenTo(this.collection,"add",this.addOne),this.listenTo(this.collection,"reset",this.addAll),this.addAll()},render:function(){return this.addAll(),this},addOne:function(e){var t=new s({model:e});this.addChildView(t),this.$el.append(t.render().$el)},addAll:function(){this.$el.empty(),this.collection.each(this.addOne)}});n.exports.PrivateLinkView=s,n.exports.PrivateLinkList=l}),define("views/ShareViews",["require","exports","module","underscore","backbone","async","plugins/jquery.textover","jquery-ui/widgets/autocomplete","views/PrivateLinkViews","env","env","env","env","env"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=e("async");e("plugins/jquery.textover"),e("jquery-ui/widgets/autocomplete");var s=e("views/PrivateLinkViews").PrivateLinkList,l=" <div class='green button sendbutton hasInput' data-l10n-id='share-send-email'>SEND</div><div class='inputs'> <input type='text' name='emails' class='emails hasButton' placeholder='friend@example.com' /> <img src='"+e("env").cdn.url+"/img/move-spinner.gif' class='spinner'> </div> <div style='clear:both'/>",a=o.View.extend({tagName:"div",className:"share-view",template:i.template(l),events:{"keypress .emails":"acceptOnEnter","keypress input":"addAutocomplete","click .green.sendbutton":"submit","touchstart .green.sendbutton":"submit"},initialize:function(e){i.bindAll(this,"render","remove","acceptOnEnter","submit","addAutocomplete"),this.options=e},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.find("input").textover($('<div data-l10n-id="share-email-hints"><div>to invite, type an email</div><div>then hit enter</div><div>friend@example.com</div></div>').l20n().find("div")),this},error:function(e){this.trigger("error",e)},acceptOnEnter:function(e){13==e.keyCode&&this.submit()},submit:function(){var e=this.$el.find(".emails").val().replace(this.$el.find(".emails").attr("over"),"");if(/^\s*$/.exec(e))return void this.error("Enter one or more email addresses first!");var t=e.match(/^\s*([a-zA-Z0-9-]+)\@orgs\.coggle\.it[, ;]*$/);if(t){var n=t[1];return void this.model.getAccess().getMe().grant(["read","write","list"],function(){this.model.set("organisation",n),this.model.set("folder",null),this.model.save({},{wait:!0,success:function(){window.location.reload()},error:function(e,t){this.model.set("organisation",this.model.previous("organisation")),this.model.set("folder",this.model.previous("folder")),this.error(t.responseJSON.description?t.responseJSON.description:"Sorry, there was error completeing your request.")}.bind(this)})}.bind(this))}if(this.$el.addClass("working"),e=e.split(/([^@]*@[^\s,;@]*)[\s,;@]*/),e=i.map(e,function(e){var t=/.*<(.+@.+)>/.exec(e);return t?t[1]:e}),e=e.map(function(e){return e.replace(/[<> \t]/g,"")}),e=i.reject(e,function(e){return""===e}),e=i.filter(e,function(e){return!!/[^\s]+@[^\s]+\.[^\s]+/.exec(e)||(this.error('"'+e+'" is not a valid email address.'),!1)}.bind(this)),0===e.length)return this.$el.removeClass("working"),void this.error("Sorry, we couldn't understand that email address! Enter a single address, or several separated by commas or semicolons.");var o=this.model.getInvites();r.eachSeries(e,function(e,t){o.create({email:e,permissions:["read","list","write","clone"]},{wait:!0,resend:!0,success:function(){t()},error:function(e,n){t(n)}})},function(e){e?(console.warn(e),this.error(e.responseJSON.description?e.responseJSON.description:"Sorry, there was error completeing your request.")):this.$el.find("input").val(""),this.model.getAccess().fetch(),this.model.getInvites().fetch(),this.$el.removeClass("working")}.bind(this)),this.model.getInvites().length>2&&getCoggleUser().getActions().unique("invited multiple to diagram"),getCoggleUser().getActions().perform("invited-someone"),ga("send","event","Invite","Invite")},addAutocomplete:function(){function t(e){return e.split(/,\s*/)}function n(e){return t(e).pop()}this.autoCompleteAdded||(this.autoCompleteAdded=!0,$.ajax({url:e("env").api.url+"/api/1/me/invited"}).done(function(e){this.$el.find(".emails").autocomplete({delay:100,minLength:2,appendTo:this.$el,source:function(t,i){i($.ui.autocomplete.filter(e,n(t.term)))}.bind(this),focus:function(){return!1},select:function(e,n){var i=t(this.value);return i.pop(),i.push(n.item.value),i.push(""),this.value=i.join(", "),getCoggleUser().getActions().perform("autocomplete:share:email"),!1}})}.bind(this)))}}),u=" <error></error><div class='public'>    <div class='checkbox-slider-frame'>        <span class='public-diagram slider-button <%-(public)?'on':''%>'><%-(!public)?'NO':'YES'%></span>    </div>    <input type='checkbox' name='public'/>    <div data-l10n-id='share-open' class='tip title'>Can everyone view this diagram?</div>    <div data-l10n-id='share-open-detail' class='tip description'>Public diagrams can be viewed by anyone and may appear in our <a target='_blank' data-bypass href='https://coggle.it/gallery'>Gallery</a>.</div></div><div  class='privatelinks'>     <h3>Private Links</h3>     <div data-l10n-id='share-social' class='social'>         <a class='embed' title='Embed in a website'>             <img src='"+e("env").cdn.url+"/img/embed.png' style='height:35px'/>             </a>         <a href='/diagram/<%- _id %>/share/facebook' class='facebook' title='Share on Facebook'>             <img src='"+e("env").cdn.url+"/img/facebook.png' style='height:35px'/>         </a>         <a href='/diagram/<%- _id %>/share/twitter' class='twitter' title='Share on Twitter'>             <img src='"+e("env").cdn.url+"/img/twitter.png' style='height:35px'/>         </a>     </div>     <a class='newLink'>         <span class='small' data-l10n-id='share-newlink'>New Link</span>    </a>     <span class='tip' data-l10n-id='share-newlink-tip'>These let you share your diagram with people who aren't logged in, but be careful, they let <strong>anyone</strong> with the link see your work!</span> </div> <textarea class='embed-code'></textarea>",c="<iframe width='853' height='480' src='https://embed.coggle.it/diagram/<%- diagram %>/<%- key %>' frameborder='0' allowfullscreen></iframe>",d=o.View.extend({template:i.template(u),embedTemplate:i.template(c),className:"social-share-view",events:{"click .facebook":"facebook","click .twitter":"twitter","click .newLink":"newLink","click .embed":"embed","changed .slider-button.public-diagram":"togglePublic"
},initialize:function(){i.bindAll(this,"render","error"),this.privateLinkCollection=this.model.getPrivateLinks(function(e,t){e&&this.error("Failed to load private links")}.bind(this)),this.privatelinks=new s({collection:this.privateLinkCollection}),this.addChildView(this.privatelinks),this.listenTo(this.privateLinkCollection,"add",this.render),this.listenTo(this.privateLinkCollection,"remove",this.render),this.listenTo(this.model,"change",this.render)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$(".privatelinks h3").after(this.privatelinks.render().$el),this.$el.find(".slider-button").booleanSlider(),this.showEmbed(),this},error:function(e){this.render(),this.$el.find("error").first().html(e)},showEmbed:function(e){var t=this.privateLinkCollection.find(function(e){return e.hasTag("embed")});if(t){this.$el.addClass("embedded");var n=t.toJSON();n.diagram=this.model.id,this.$el.find(".embed-code").text(this.embedTemplate(n))}else this.$el.removeClass("embedded"),this.$el.find(".embed-code").text("")},newLink:function(){this.model.getPrivateLinks().create({},{wait:!0}),getCoggleUser().getActions().perform("share:privatelink:create"),ga("send","event","Invite","Link")},embed:function(){this.model.getPrivateLinks().create({type:"embed"},{wait:!0}),ga("send","event","Share","Embed")},facebook:function(e,t){this.$el.find(".facebook")[0];ga("send","event","Share","Facebook")},twitter:function(e){var t=this.$el.find(".twitter")[0];return ga("send","event","Share","Twitter"),window.open(t.href),e.stopPropagation(),!1},togglePublic:function(e,t){this.model.save({public:t.state},{wait:!0,success:function(){this.error()}.bind(this),error:function(e,t){this.error(t.responseJSON.description)}.bind(this)})}});n.exports.ShareView=a,n.exports.DiagramShareView=d}),define("views/GlobalSearchView",["require","exports","module","underscore","backbone"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=i.template("<div class='search-box'><input type='text' class='search' data-l10n-id='search-diagrams' placeholder='Search your diagrams' value='<%- query %>'/></div>"),s=i.template("<div class='search-box'><input type='text' class='search' data-l10n-id='search-public-diagrams' placeholder='Search public diagrams' value='<%- query %>'/></div>"),l=o.View.extend({tagName:"div",className:"search-view",events:{"keydown input.search":"search"},initialize:function(e){i.bindAll(this,"render","search"),this.options=e},render:function(){return this.options.publicSearch?this.$el.html(s({query:this.options.query})):this.$el.html(r({query:this.options.query})),this},search:function(e){var t=getCoggleUser().getActiveOrg();if(27==e.keyCode&&this.$el.find(".search").val(""),27==e.keyCode||13==e.keyCode){var n=this.$el.find(".search").val();if(this.options.publicSearch)n="site:coggle.it "+n,getCoggleUser().getActions().unique("searched:public"),window.location="https://www.google.com/search?safe=on&q="+encodeURIComponent(n);else{getCoggleUser().getActions().unique("searched");var i="";t&&t.id&&(i=t.get("slug")),n.length?o.history.navigate(i+"/search/"+n,{trigger:!0,replace:!0}):o.history.navigate(i,!0)}}}});n.exports=l}),define("views/HomeActionsView",["require","exports","module","underscore","backbone","plugins/Backbone.childViews","views/AccessListView","views/AccessSliderView","views/ShareViews","views/GlobalSearchView","BrowserDetect"],function(e,t,n){var i=e("underscore"),o=e("backbone");e("plugins/Backbone.childViews");var r=e("views/AccessListView"),s=e("views/AccessSliderView"),l=e("views/ShareViews").ShareView,a=e("views/GlobalSearchView"),u=e("BrowserDetect"),c="<div class='row'>    <div class='col-xs-12 implied-access'>        <div data-l10n-id='limitedaccess' data-l10n-ctx='{\"resourceName\":\"<%-name%>\"}'=>You have limited access to <%-name%> as you're re not a member</div>    </div>    <div class='col-xs-12 impersonated-access'>        <div data-l10n-id='impersonatedaccess'>You're viewing Coggle as an Organisation member. <a class='return button' href='/<%-slug%>/dashboard/membership'>Return to admin panel</a></div>  </div>  <div class='col-sm-7 resource-actions'>    <div class='open-nav-button'></div>    <a data-l10n-id='create-diagram' class='create-diagram button disabled' >      <span>Create Diagram</span>    </a>    <a href='/plans?src=resource-actions' class='button orange upgrade'>Upgrade Now</a>  </div>  <div class='col-sm-5 access-list'></div>  <div class='col-xs-12 error'><error></error></div></div>";n.exports=o.View.extend({tagName:"div",className:"home-actions-view",template:i.template(c),events:{"click .create-diagram":"createDiagram","click .member.sharing":"shareFolder"},initialize:function(e){i.bindAll(this,"render","error","createDiagram","openPermissions","shareFolder"),this.options=e,this.organisation=e.organisation,this.user=e.user,this.folder=e.folder,this.folders=e.folders,this.folders.on("sync",this.render),this.searchView=new a({model:this.user,query:this.options.search,publicSearch:"gallery"==this.folder}),this.addChildView(this.searchView)},render:function(){var e=this.organisation.id?this.organisation.toJSON():{_id:""};e.slug=this.organisation.get("slug"),this.$el.html(this.template(e)),this.options.member||this.$el.find(".impersonated-access").remove(),this.organisation.id&&!this.organisation.canRead()||this.$el.find(".implied-access").remove(),this.$el.find(".access-list").append(this.searchView.render().$el),this.searchView.delegateEvents(),this.user.isAwesome()&&this.$el.find(".button.upgrade").remove();var t=this.folders.get(this.folder);if(t&&(!this.options.member&&t.canWrite()&&this.$el.find(".create-diagram").removeClass("disabled"),!t.isVirtual())){var n=this.getAccessList();t.isAdmin()?this.$el.find(".access-list").append(n.render().addSharing(!0).$el):this.$el.find(".access-list").append(n.render().$el),n.delegateEvents()}return this},getAccessList:function(){var e=this.folders.get(this.folder);return e&&!this.memberList&&(this.memberList=new r({collections:[e.getAccess(function(){}),e.getInvites(function(){})],overridel10nId:"tooltip-invite-folder"}),this.listenTo(this.memberList,"selected",this.openPermissions),this.addChildView(this.memberList)),this.memberList},openPermissions:function(e,t){var n=this.folders.get(this.folder);if(n&&n.isAdmin()){if(this.accessSliders||(this.accessSliders={}),!this.accessSliders[e.id]){var i=[{label:'Read only<br/><span class="tip">Only allow them to view</span>',data:"read","data-l10n-id":"access-folder-readonly"},{label:'Read & create copies<br/><span class="tip">Also allow downloading and copying</span>',data:"clone","data-l10n-id":"access-folder-readclone"},{label:'Author<br/><span class="tip">Allow creating and editing documents</span>',data:"write","data-l10n-id":"access-folder-author"},{label:'Administer<br/><span class="tip">Add and remove people and documents</span>',data:"admin","data-l10n-id":"access-folder-admin"}],o=new s({model:e,roles:i,removable:!0}).render();this.addChildView(o),this.accessSliders[e.id]=t.$el.callout(o.$el,{my:"right top",at:"center bottom"})}this.accessSliders[e.id].open()}},shareFolder:function(e){var t=this.folders.get(this.folder);t&&(this.shareView||(this.shareView=new l({model:t}).render(),this.listenTo(this.shareView,"error",this.error),this.addChildView(this.shareView)),this.sharingCallout||(this.sharingCallout=this.$el.find(".member.sharing").callout(this.shareView.$el,{my:"right top",at:"center bottom"})),this.sharingCallout.open(),this.shareView.delegateEvents(),"Explorer"===u.browser&&10==u.version||this.shareView.$el.find("input").focus(),ga("send","event","Folder","OpenShare"))},createDiagram:function(){var e=this.folders.get(this.folder);e&&e.canWrite()&&e.createDiagram(function(e,t){e?this.error("Uh-oh, something went wrong while trying to create your diagram!"):o.history.navigate(t.docURL(),!0)}.bind(this))},error:function(e){this.$el.trigger("notify-warning",e||"Uh-oh, something unexpected happened!")}})}),define("views/RecommendProgressView",["require","exports","module","underscore","backbone"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=i.template("<% if (!has_redeemed) { %>    <a href='/me/recommend'>        <div class='blobs'>            <div class='blob filled'></div>            <div class='blob <%- invites.length > 0 ? 'filled' : ''%>' ></div>            <div class='blob <%- invites.length > 1 ? 'filled' : ''%>' ></div>            <div class='blob <%- invites.length > 2 ? 'filled' : ''%>' ></div>        </div>        <% if (!is_eligible) { %>            <% if (remaining_count == 1) { %>                <p data-l10n-id='invite-1-more'>One more invite to try Awesome for free!</p>            <% } else { %>                <p data-l10n-id='invite-n-more' data-l10n-ctx='{\"introduceCount\":\"<%-remaining_count%>\"}'>Invite <span class='count'><%-remaining_count%></span> more people to try Awesome for free!</p>            <% } %>        <% } else { %>            <p>Claim your free month of Awesome!</p>        <% } %>    </a><% } %>"),s=o.View.extend({tagName:"div",className:"recommend-progress-view",initialize:function(e){i.bindAll(this,"render"),this.options=e,this.model.referralTrialEligiblilityState(function(e,t,n,i){e||(this.eligability={invites:n||[],remaining_count:i,is_eligible:t,has_redeemed:this.model.getActions().get("coupon:recommend-3")},this.render())}.bind(this))},render:function(){return this.eligability?(this.eligability.has_redeemed=this.model.getActions().get("coupon:recommend-3"),this.$el.html(r(this.eligability))):this.$el.html(""),this}});s.instance=function(e){return s._instance||(s._instance=new s(e)),s._instance},n.exports=s}),define("views/HomeView",["require","exports","module","underscore","backbone","views/UserLoginView","views/BannerViews","views/OrganisationPicker","utils/coggle-timeago","views/FolderViews","views/HomeActionsView","views/RecommendProgressView"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=e("views/UserLoginView"),s=e("views/BannerViews").BannerStack,l=e("views/OrganisationPicker").OrganisationPicker,a=e("utils/coggle-timeago"),u=e("views/FolderViews").FolderList,c=e("views/HomeActionsView"),d=e("views/RecommendProgressView"),h=i.template("<div class='coggle-sidebar'>    <div class='login'></div>    <div class='content'></div>    <div class='announcements'></div></div><div class='home-overlay'></div><div class='home-resources'></div>"),p=i.template("<a class='highlighted' href='/plans' class='awesome'><div data-l10n-id='awesome-time-remaining' class='title'>    Awesome trial expires <time datetime='<%- awesome_trial_expires %>'/></div><div data-l10n-id='awesome-trial-after' class='description'>Then you'll be moved onto the free plan</div></a>"),f=n.exports=o.View.extend({tagName:"div",className:"home-view scrollable",events:{"mousedown .open-nav-button":"toggleNavigation","touchstart .open-nav-button":"toggleNavigation","click .home-overlay":"hideNavigation","touchmove .home-overlay":"hideNavigation","touchstart .home-overlay":"hideNavigation","scroll .home-overlay":"soakEvent"},initialize:function(e){i.bindAll(this,"render","hideNavigation","toggleNavigation"),this.options=e,this.loginView=new r({model:this.options.user}),this.addChildView(this.loginView),this.bannerView=new s({collection:Messages}),this.addChildView(this.bannerView),this.foldersView=new u({collection:this.options.folders,selected:this.options.folder,member:this.options.member}),this.addChildView(this.foldersView),this.homeActionsView=new c({organisation:this.options.organisation,user:this.options.user,folders:this.options.folders,folder:this.options.folder,member:this.options.member,search:this.options.search}),this.addChildView(this.homeActionsView),this.orgPicker=new l({collection:this.options.user.getOrganisations(),hide_own_org:!this.options.user.hasOwnOrg()}),this.addChildView(this.orgPicker)},render:function(){return this.$el.html(h()),f.navigationOpen&&this.openNavigation(),this.renderSidebar(),this.renderAnnouncements(),this.$el.find(".home-resources").append(this.bannerView.render().$el),this.bannerView.delegateEvents(),this.$el.find(".home-resources").append(this.homeActionsView.render().$el),this.homeActionsView.delegateEvents(),this.contentView&&this.$el.find(".home-resources").append(this.contentView.render().$el),this},renderSidebar:function(){this.$el.find(".coggle-sidebar .login").html(this.loginView.render().$el),this.loginView.delegateEvents(),this.$el.find(".coggle-sidebar .content").html(this.foldersView.render().$el),this.foldersView.delegateEvents(),0!==this.options.user.getOrganisations().length&&(this.$el.find(".coggle-sidebar").prepend(this.orgPicker.render().$el),this.$el.addClass("has-organisation"),this.orgPicker.delegateEvents())},renderAnnouncements:function(){if(this.options.user.isTriallingAwesome()&&!this.options.organisation.id)this.$el.find(".announcements").html(p(this.options.user.toJSON()));else if(!this.options.user.isAwesome()){var e=d.instance({model:this.options.user});this.$el.find(".announcements").html(e.render().$el)}jQuery.timeago.settings.allowFuture=!0,a.loadLanguages(function(){a.timeago(this.$el.find("time"))}.bind(this))},setContentView:function(e){this.contentView=e,this.addChildView(e),this.render()},toggleNavigation:i.throttle(function(e){return f.navigationOpen=!f.navigationOpen,this.$el.toggleClass("nav-open",f.navigationOpen),e.stopPropagation(),!1},100),hideNavigation:function(e){return f.navigationOpen=!1,this.$el.removeClass("nav-open"),e&&e.stopPropagation(),e&&e.preventDefault(),!1},openNavigation:function(){f.navigationOpen=!0,this.$el.addClass("nav-open")},soakEvent:function(e){return e.preventDefault(),e.stopPropagation(),!1}})}),!function(e,t){"use strict";function n(n,i,r,l,a){function u(){F=e.devicePixelRatio>1,r=c(r),i.delay>=0&&setTimeout(function(){d(!0)},i.delay),(i.delay<0||i.combined)&&(l.e=y(i.throttle,function(e){"resize"===e.type&&(E=C=-1),d(e.all)}),l.a=function(e){e=c(e),r.push.apply(r,e)},l.g=function(){return r=o(r).filter(function(){return!o(this).data(i.loadedName)})},l.f=function(e){for(var t=0;t<e.length;t++){var n=r.filter(function(){return this===e[t]});n.length&&d(!1,n)}},d(),o(i.appendScroll).on("scroll."+a+" resize."+a,l.e))}function c(e){var r=i.defaultImage,s=i.placeholder,l=i.imageBase,a=i.srcsetAttribute,u=i.loaderAttribute,c=i._f||{};e=o(e).filter(function(){var e=o(this),n=m(this);return!e.data(i.handledName)&&(e.attr(i.attribute)||e.attr(a)||e.attr(u)||c[n]!==t)}).data("plugin_"+i.name,n);for(var d=0,h=e.length;d<h;d++){var p=o(e[d]),f=m(e[d]),g=p.attr(i.imageBaseAttribute)||l;f===T&&g&&p.attr(a)&&p.attr(a,v(p.attr(a),g)),c[f]===t||p.attr(u)||p.attr(u,c[f]),f===T&&r&&!p.attr(O)?p.attr(O,r):f===T||!s||p.css(I)&&"none"!==p.css(I)||p.css(I,"url('"+s+"')")}return e}function d(e,t){if(!r.length)return void(i.autoDestroy&&n.destroy());for(var s=t||r,l=!1,a=i.imageBase||"",u=i.srcsetAttribute,c=i.handledName,d=0;d<s.length;d++)if(e||t||p(s[d])){var f=o(s[d]),g=m(s[d]),v=f.attr(i.attribute),y=f.attr(i.imageBaseAttribute)||a,b=f.attr(i.loaderAttribute);f.data(c)||i.visibleOnly&&!f.is(":visible")||!((v||f.attr(u))&&(g===T&&(y+v!==f.attr(O)||f.attr(u)!==f.attr(N))||g!==T&&y+v!==f.css(I))||b)||(l=!0,f.data(c,!0),h(f,g,y,b))}l&&(r=o(r).filter(function(){return!o(this).data(c)}))}function h(e,t,n,r){++_;var s=function(){w("onError",e),b(),s=o.noop};w("beforeLoad",e);var l=i.attribute,a=i.srcsetAttribute,u=i.sizesAttribute,c=i.retinaAttribute,d=i.removeAttribute,h=i.loadedName,p=e.attr(c);if(r){var f=function(){d&&e.removeAttr(i.loaderAttribute),e.data(h,!0),w(A,e),setTimeout(b,1),f=o.noop};e.off(S).one(S,s).one(x,f),w(r,e,function(t){t?(e.off(x),f()):(e.off(S),s())})||e.trigger(S)}else{var g=o(new Image);g.one(S,s).one(x,function(){e.hide(),t===T?e.attr(k,g.attr(k)).attr(N,g.attr(N)).attr(O,g.attr(O)):e.css(I,"url('"+g.attr(O)+"')"),e[i.effect](i.effectTime),d&&(e.removeAttr(l+" "+a+" "+c+" "+i.imageBaseAttribute),u!==k&&e.removeAttr(u)),e.data(h,!0),w(A,e),g.remove(),b()});var m=(F&&p?p:e.attr(l))||"";g.attr(k,e.attr(u)).attr(N,e.attr(a)).attr(O,m?n+m:null),g.complete&&g.trigger(x)}}function p(e){var t=e.getBoundingClientRect(),n=i.scrollDirection,o=i.threshold,r=g()+o>t.top&&-o<t.bottom,s=f()+o>t.left&&-o<t.right;return"vertical"===n?r:"horizontal"===n?s:r&&s}function f(){return E>=0?E:E=o(e).width()}function g(){return C>=0?C:C=o(e).height()}function m(e){return e.tagName.toLowerCase()}function v(e,t){if(t){var n=e.split(",");e="";for(var i=0,o=n.length;i<o;i++)e+=t+n[i].trim()+(i!==o-1?",":"")}return e}function y(e,t){var o,r=0;return function(s,l){function a(){r=+new Date,t.call(n,s)}var u=+new Date-r;o&&clearTimeout(o),u>e||!i.enableThrottle||l?a():o=setTimeout(a,e-u)}}function b(){--_,r.length||_||w("onFinishedAll")}function w(e,t,o){return!!(e=i[e])&&(e.apply(n,[].slice.call(arguments,1)),!0)}var _=0,E=-1,C=-1,F=!1,A="afterLoad",x="load",S="error",T="img",O="src",N="srcset",k="sizes",I="background-image";"event"===i.bind||s?u():o(e).on(x+"."+a,u)}function i(i,s){var l=this,a=o.extend({},l.config,s),u={},c=a.name+"-"+ ++r;return l.config=function(e,n){return n===t?a[e]:(a[e]=n,l)},l.addItems=function(e){return u.a&&u.a("string"===o.type(e)?o(e):e),l},l.getItems=function(){return u.g?u.g():{}},l.update=function(e){return u.e&&u.e({},!e),l},l.force=function(e){return u.f&&u.f("string"===o.type(e)?o(e):e),l},l.loadAll=function(){return u.e&&u.e({all:!0},!0),l},l.destroy=function(){return o(a.appendScroll).off("."+c,u.e),o(e).off("."+c),u={},t},n(l,a,i,u,c),a.chainable?i:l}var o=e.jQuery||e.Zepto,r=0,s=!1;o.fn.Lazy=o.fn.lazy=function(e){return new i(this,e)},o.Lazy=o.lazy=function(e,n,r){if(o.isFunction(n)&&(r=n,n=[]),o.isFunction(r)){e=o.isArray(e)?e:[e],n=o.isArray(n)?n:[n];for(var s=i.prototype.config,l=s._f||(s._f={}),a=0,u=e.length;a<u;a++)(s[e[a]]===t||o.isFunction(s[e[a]]))&&(s[e[a]]=r);for(var c=0,d=n.length;c<d;c++)l[n[c]]=e[0]}},i.prototype.config={name:"lazy",chainable:!0,autoDestroy:!0,bind:"load",threshold:500,visibleOnly:!1,appendScroll:e,scrollDirection:"both",imageBase:null,defaultImage:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",placeholder:null,delay:-1,combined:!1,attribute:"data-src",srcsetAttribute:"data-srcset",sizesAttribute:"data-sizes",retinaAttribute:"data-retina",loaderAttribute:"data-loader",imageBaseAttribute:"data-imagebase",removeAttribute:!0,handledName:"handled",loadedName:"loaded",effect:"show",effectTime:0,enableThrottle:!0,throttle:250,beforeLoad:t,afterLoad:t,onError:t,onFinishedAll:t},o(e).on("load",function(){s=!0})}(window),define("jquery.lazy",function(){}),function(){function e(e,t,n){e=r(e,255),t=r(t,255),n=r(n,255);var i,o=f(e,t,n),s=p(e,t,n),l=(o+s)/2;if(o==s)i=s=0;else{var a=o-s,s=.5<l?a/(2-o-s):a/(o+s);switch(o){case e:i=(t-n)/a+(t<n?6:0);break;case t:i=(n-e)/a+2;break;case n:i=(e-t)/a+4}i/=6}return{h:i,s:s,l:l}}function t(e,t,n){function i(e,t,n){return 0>n&&(n+=1),1<n&&(n-=1),n<1/6?e+6*(t-e)*n:.5>n?t:n<2/3?e+6*(t-e)*(2/3-n):e}if(e=r(e,360),t=r(t,100),n=r(n,100),0===t)n=t=e=n;else{var o=.5>n?n*(1+t):n+t-n*t,s=2*n-o;n=i(s,o,e+1/3),t=i(s,o,e),e=i(s,o,e-1/3)}return{r:255*n,g:255*t,b:255*e}}function n(e,t,n){e=r(e,255),t=r(t,255),n=r(n,255);var i,o=f(e,t,n),s=p(e,t,n),l=o-s;if(o==s)i=0;else{switch(o){case e:i=(t-n)/l+(t<n?6:0);break;case t:i=(n-e)/l+2;break;case n:i=(e-t)/l+4}i/=6}return{h:i,s:0===o?0:l/o,v:o}}function i(e,t,n,i){return[s(Math.round(255*parseFloat(i)).toString(16)),s(h(e).toString(16)),s(h(t).toString(16)),s(h(n).toString(16))].join("")}function o(e){return e=parseFloat(e),(isNaN(e)||0>e||1<e)&&(e=1),e}function r(e,t){"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)&&(e="100%");var n="string"==typeof e&&-1!=e.indexOf("%");return e=p(t,f(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),1e-6>d.abs(e-t)?1:e%t/parseFloat(t)}function s(e){return 1==e.length?"0"+e:""+e}function l(e){return 1>=e&&(e=100*e+"%"),e}var a=/^[\s,#]+/,u=/\s+$/,c=0,d=Math,h=d.round,p=d.min,f=d.max,g=function e(n,i){var s,g,v,y,b;if(n=n?n:"",i=i||{},n instanceof e)return n;if(!(this instanceof e))return new e(n,i);g=n,b={r:0,g:0,b:0};var w=1;if(v=s=!1,"string"==typeof g&&(g=g.replace(a,"").replace(u,"").toLowerCase(),g=(y=m.rgb.exec(g))?{r:y[1],g:y[2],b:y[3]}:(y=m.rgba.exec(g))?{r:y[1],g:y[2],b:y[3],a:y[4]}:(y=m.hsl.exec(g))?{h:y[1],s:y[2],l:y[3]}:(y=m.hsla.exec(g))?{h:y[1],s:y[2],l:y[3],a:y[4]}:(y=m.hsv.exec(g))?{h:y[1],s:y[2],v:y[3]}:(y=m.hex8.exec(g))?{a:parseInt(y[1],16)/255,r:parseInt(y[2],16),g:parseInt(y[3],16),b:parseInt(y[4],16),format:"hex8"}:(y=m.hex6.exec(g))?{r:parseInt(y[1],16),g:parseInt(y[2],16),b:parseInt(y[3],16),format:"hex"}:!!(y=m.hex3.exec(g))&&{r:parseInt(y[1]+""+y[1],16),g:parseInt(y[2]+""+y[2],16),b:parseInt(y[3]+""+y[3],16),format:"hex"}),"object"==typeof g){if(g.hasOwnProperty("r")&&g.hasOwnProperty("g")&&g.hasOwnProperty("b"))b={r:255*r(g.r,255),g:255*r(g.g,255),b:255*r(g.b,255)},s=!0,v="%"===String(g.r).substr(-1)?"prgb":"rgb";else if(g.hasOwnProperty("h")&&g.hasOwnProperty("s")&&g.hasOwnProperty("v")){g.s=l(g.s),g.v=l(g.v),v=g.h;var _=g.s;b=g.v,v=6*r(v,360),_=r(_,100),b=r(b,100),s=d.floor(v);var E=v-s;v=b*(1-_),y=b*(1-E*_),_=b*(1-(1-E)*_),s%=6,b={r:255*[b,y,v,v,_,b][s],g:255*[_,b,b,y,v,v][s],b:255*[v,v,_,b,b,y][s]},s=!0,v="hsv"}else g.hasOwnProperty("h")&&g.hasOwnProperty("s")&&g.hasOwnProperty("l")&&(g.s=l(g.s),g.l=l(g.l),b=t(g.h,g.s,g.l),s=!0,v="hsl");g.hasOwnProperty("a")&&(w=g.a)}w=o(w),g=g.format||v,v=p(255,f(b.r,0)),y=p(255,f(b.g,0)),b=p(255,f(b.b,0)),this._r=v,this._g=y,this._b=b,this._a=w,this._roundA=h(100*this._a)/100,this._format=i.format||g,this._gradientType=i.gradientType,1>this._r&&(this._r=h(this._r)),1>this._g&&(this._g=h(this._g)),1>this._b&&(this._b=h(this._b)),this._ok=s,this._tc_id=c++};g.prototype={getAlpha:function(){return this._a},setAlpha:function(e){this._a=o(e),this._roundA=h(100*this._a)/100},toHsv:function(){var e=n(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=n(this._r,this._g,this._b),t=h(360*e.h),i=h(100*e.s),e=h(100*e.v);return 1==this._a?"hsv("+t+", "+i+"%, "+e+"%)":"hsva("+t+", "+i+"%, "+e+"%, "+this._roundA+")"},toHsl:function(){var t=e(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=e(this._r,this._g,this._b),n=h(360*t.h),i=h(100*t.s),t=h(100*t.l);return 1==this._a?"hsl("+n+", "+i+"%, "+t+"%)":"hsla("+n+", "+i+"%, "+t+"%, "+this._roundA+")"},toHex:function(e){var t=this._g,n=this._b,t=[s(h(this._r).toString(16)),s(h(t).toString(16)),s(h(n).toString(16))];return e=e&&t[0].charAt(0)==t[0].charAt(1)&&t[1].charAt(0)==t[1].charAt(1)&&t[2].charAt(0)==t[2].charAt(1)?t[0].charAt(0)+t[1].charAt(0)+t[2].charAt(0):t.join("")},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(){return i(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:h(this._r),g:h(this._g),b:h(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+h(this._r)+", "+h(this._g)+", "+h(this._b)+")":"rgba("+h(this._r)+", "+h(this._g)+", "+h(this._b)+", "+this._roundA+")"},toFilter:function(e){var t="#"+i(this._r,this._g,this._b,this._a),n=t,o=this._gradientType?"GradientType = 1, ":"";return e&&(n=g(e).toHex8String()),"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+t+",endColorstr="+n+")"}},g.fromRatio=function(e,t){if("object"==typeof e){var n,i={};for(n in e)e.hasOwnProperty(n)&&(i[n]="a"===n?e[n]:l(e[n]));e=i}return g(e,t)},g.equals=function(e,t){return!(!e||!t)&&g(e).toRgbString()==g(t).toRgbString()},g.desaturate=function(e,t){t=0===t?0:t||10;var n=g(e).toHsl();return n.s-=t/100,n.s=p(1,f(0,n.s)),g(n)},g.saturate=function(e,t){t=0===t?0:t||10;var n=g(e).toHsl();return n.s+=t/100,n.s=p(1,f(0,n.s)),g(n)},g.greyscale=function(e){return g.desaturate(e,100)},g.lighten=function(e,t){t=0===t?0:t||10;var n=g(e).toHsl();return n.l+=t/100,n.l=p(1,f(0,n.l)),g(n)},g.darken=function(e,t){t=0===t?0:t||10;var n=g(e).toHsl();return n.l-=t/100,n.l=p(1,f(0,n.l)),g(n)},g.complement=function(e){return e=g(e).toHsl(),e.h=(e.h+180)%360,g(e)},g.triad=function(e){var t=g(e).toHsl(),n=t.h;return[g(e),g({h:(n+120)%360,s:t.s,l:t.l}),g({h:(n+240)%360,s:t.s,l:t.l})]},g.tetrad=function(e){var t=g(e).toHsl(),n=t.h;return[g(e),g({h:(n+90)%360,s:t.s,l:t.l}),g({h:(n+180)%360,s:t.s,l:t.l}),g({h:(n+270)%360,s:t.s,l:t.l})]},g.splitcomplement=function(e){var t=g(e).toHsl(),n=t.h;return[g(e),g({h:(n+72)%360,s:t.s,l:t.l}),g({h:(n+216)%360,s:t.s,l:t.l})]},g.analogous=function(e,t,n){t=t||6,n=n||30;var i=g(e).toHsl();for(n=360/n,e=[g(e)],i.h=(i.h-(n*t>>1)+720)%360;--t;)i.h=(i.h+n)%360,e.push(g(i));return e},g.monochromatic=function(e,t){t=t||6;for(var n=g(e).toHsv(),i=n.h,o=n.s,n=n.v,r=[],s=1/t;t--;)r.push(g({h:i,s:o,v:n})),n=(n+s)%1;return r};var m={rgb:RegExp("rgb[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),rgba:RegExp("rgba[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hsl:RegExp("hsl[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hsla:RegExp("hsla[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hsv:RegExp("hsv[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};"undefined"!=typeof module&&module.exports?module.exports=g:"function"==typeof define&&define.amd?define("tinytinycolor",[],function(){return g}):window.tinytinycolor=g}(),define("twemoji",[],function(){var e=function(){"use strict";function e(e){return document.createTextNode(e)}function t(e){return e.replace(w,l)}function n(e,t){return"".concat(t.base,t.size,"/",e,t.ext)}function i(e,t){for(var n,o,r=e.childNodes,s=r.length;s--;)n=r[s],o=n.nodeType,3===o?t.push(n):1!==o||"ownerSVGElement"in n||_.test(n.nodeName.toLowerCase())||i(n,t);return t}function o(e){return f(e.indexOf(b)<0?e.replace(y,""):e)}function r(t,n){for(var r,s,l,a,u,c,d,h,p,f,g,m,y,b=i(t,[]),w=b.length;w--;){for(l=!1,a=document.createDocumentFragment(),u=b[w],c=u.nodeValue,h=0;d=v.exec(c);){if(p=d.index,p!==h&&a.appendChild(e(c.slice(h,p))),g=d[0],m=o(g),h=p+g.length,y=n.callback(m,n)){f=new Image,f.onerror=n.onerror,f.setAttribute("draggable","false"),r=n.attributes(g,m);for(s in r)r.hasOwnProperty(s)&&0!==s.indexOf("on")&&!f.hasAttribute(s)&&f.setAttribute(s,r[s]);f.className=n.className,f.alt=g,f.src=y,l=!0,a.appendChild(f)}f||a.appendChild(e(g)),f=null}l&&(h<c.length&&a.appendChild(e(c.slice(h))),u.parentNode.replaceChild(a,u))}return t}function s(e,n){return h(e,function(e){var i,r,s=e,l=o(e),a=n.callback(l,n);if(a){s="<img ".concat('class="',n.className,'" ','draggable="false" ','alt="',e,'"',' src="',a,'"'),i=n.attributes(e,l);for(r in i)i.hasOwnProperty(r)&&0!==r.indexOf("on")&&s.indexOf(" "+r+"=")===-1&&(s=s.concat(" ",r,'="',t(i[r]),'"'));s=s.concat("/>")}return s})}function l(e){return m[e]}function a(){return null}function u(e){return"number"==typeof e?e+"x"+e:e}function c(e){var t="string"==typeof e?parseInt(e,16):e;return t<65536?E(t):(t-=65536,E(55296+(t>>10),56320+(1023&t)))}function d(e,t){return t&&"function"!=typeof t||(t={callback:t}),("string"==typeof e?s:r)(e,{callback:t.callback||n,attributes:"function"==typeof t.attributes?t.attributes:a,base:"string"==typeof t.base?t.base:g.base,ext:t.ext||g.ext,size:t.folder||u(t.size||g.size),className:t.className||g.className,onerror:t.onerror||g.onerror})}function h(e,t){return String(e).replace(v,t)}function p(e){v.lastIndex=0;var t=v.test(e);return v.lastIndex=0,t}function f(e,t){for(var n=[],i=0,o=0,r=0;r<e.length;)i=e.charCodeAt(r++),o?(n.push((65536+(o-55296<<10)+(i-56320)).toString(16)),o=0):55296<=i&&i<=56319?o=i:n.push(i.toString(16));return n.join(t||"-")}var g={base:"https://twemoji.maxcdn.com/2/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:c,toCodePoint:f},onerror:function(){this.parentNode&&this.parentNode.replaceChild(e(this.alt),this)},parse:d,replace:h,test:p},m={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},v=/\ud83d[\udc68-\udc69](?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92])|(?:\ud83c[\udfcb\udfcc]|\ud83d\udd75|\u26f9)(?:\ufe0f|\ud83c[\udffb-\udfff])\u200d[\u2640\u2642]\ufe0f|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd37-\udd39\udd3d\udd3e\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f|(?:[\u0023\u002a\u0030-\u0039])\ufe0f?\u20e3|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddd1-\udddd]|[\u270a\u270b])(?:\ud83c[\udffb-\udfff]|)|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud800\udc00|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a-\udc6d\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\udeeb\udeec\udef4-\udef8]|\ud83e[\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd40-\udd45\udd47-\udd4c\udd50-\udd6b\udd80-\udd97\uddc0\uddd0\uddde-\udde6]|[\u23e9-\u23ec\u23f0\u23f3\u2640\u2642\u2695\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a]|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u00a9\u00ae\u203c\u2049\u2122\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2694\u2696\u2697\u2699\u269b\u269c\u26a0\u26a1\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))/g,y=/\uFE0F/g,b=String.fromCharCode(8205),w=/[&<>'"]/g,_=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,E=String.fromCharCode;
return g}();return e}),define("utils/coggle-encodeji",["require","exports","module","encodeji","twemoji","env"],function(e,t,n){var i=e("encodeji"),o=e("twemoji"),r=1e6,s=new i({extendData:[{unified:"1F4A9",short_name:"poop"},{unified:"2705",short_name:"check",short_names:["tick","true","check","done"],coggleSort:1},{unified:"274E",short_name:"green_cross",short_names:["green x","green false","green not"],coggleSort:2},{unified:"274C",short_name:"red_cross",short_names:["red x","red false","red not"],coggleSort:2.1},{unified:"26D4",short_names:["no entry","forbidden entry"],coggleSort:2.2},{unified:"1F6AB",short_name:"forbidden",short_names:["no","not allowed","forbidden","banned"],coggleSort:2.25},{unified:"26A0",short_names:["warning","warn","alert warn","beware","be aware","exclamation triangle","yellow exclamation","warning triangle"],coggleSort:2.3},{unified:"1F6A9",short_name:"red_flag",short_names:["red flag","highlight red"],coggleSort:3},{unified:"1F3F3",short_name:"white_flag",short_names:["white","white flag","highlight white","surrender"],coggleSort:r},{unified:"1F3F4",short_name:"black_flag",short_names:["black","black flag","highlight black"],coggleSort:4.1},{unified:"1F3C1",short_names:["race done","finished","complete","winner","win"],coggleSort:5},{unified:"1F1EC-1F1E7",short_names:["flag-gb","britain","british"],coggleSort:r},{unified:"2757",short_name:"!",short_names:["red exclamation","red exclamation point","alert","high priority","important"],coggleSort:6},{unified:"2753",short_names:["?","red question","query","unsure"],coggleSort:6.1},{unified:"203C",short_name:"!!",short_names:["double exclamation","high alert","very high priority","very important"],coggleSort:7},{unified:"2049",short_name:"!?",short_names:["exclamation question","confused alert","unknown problem"],coggleSort:8},{unified:"2764",short_name:"<3",short_names:["red heart","love"],coggleSort:2.9},{unified:"267B",short_name:"recycle",short_names:["reuse"],coggleSort:2.9},{unified:"2B50",short_name:"star",short_names:["favourite","favorite"],coggleSort:4.5},{unified:"1F4A5",short_name:"explode",short_names:["collide","bang","explosion"],coggleSort:9},{unified:"1F525",coggleSort:9.1},{unified:"270F",short_names:["note pencil","write pencil"],coggleSort:9.15},{unified:"2712",short_name:"fountain_pen",short_names:["note pen","write pen","fountain pen","nib pen"],coggleSort:9.16},{unified:"1F58A",short_name:"pen",short_names:["note ballpoint pen","write ballpooint pen","ballpoint pen"],coggleSort:9.16},{unified:"1F512",short_names:["lock","locked"],coggleSort:9.17},{unified:"1F513",short_names:["unlock","unlocked"],coggleSort:9.18},{unified:"1F389",short_names:["celebrate party popper","yay party"],coggleSort:9.2},{unified:"1F38A",short_names:["celebrate confetti","yay confeti","confeti"],coggleSort:9.3},{unified:"1F37E",short_name:"champagne",short_names:["celebrate champage","yay champagne","win champagne","victory champagne"],coggleSort:9.4},{unified:"1F37B",short_name:"beer_mugs",short_names:["cheers","congratulations beer","celebrate beer"],coggleSort:9.5},{unified:"1F464",short_name:"silhouette",short_names:["person silhouette","man silhouette","woman silhouette","person shadow"],coggleSort:10},{unified:"1F465",short_name:"silhouettes",short_names:["people silhouette","men silhouette","women silhouette","people shadow"],coggleSort:10.1},{unified:"1F603",short_names:[")","-)","happy face"],coggleSort:11},{unified:"1F612",short_names:["(","-(","sad face disappointed"],coggleSort:11.05},{unified:"2639",short_name:"frowning_face",short_names:["frowning sad face disappointed"],coggleSort:11.05},{unified:"1F622",short_names:["'(","'-(","sad cry"],coggleSort:11.1},{unified:"1F62E",short_names:["O","-o","shocked face"],coggleSort:11.2},{unified:"1F61B",short_names:["p","-p","toungue sticking out face"],coggleSort:11.3},{unified:"1F610",short_names:["|","-|","unimpressed face"],coggleSort:11.4},{unified:"1F617",short_names:["3","-3"],coggleSort:11.5},{unified:"1F44D",short_name:"+1",short_names:["thumbs","thumb up","thumbs up"],coggleSort:12},{unified:"1F44E",short_name:"-1",short_names:["thumb down","thumbs down"],coggleSort:12.1},{unified:"26BD",short_names:["football soccer","foot ball","real football"],coggleSort:13},{unified:"26A1",short_names:["lightning zap","electric zap","high voltage"],coggleSort:14},{unified:"1F4A1",short_names:["lightbulb","light bulb","electric bulb","idea bulb"],coggleSort:15},{unified:"2B06",short_names:["arrow_up","increase"]},{unified:"2B07",short_names:["arrow_down","decrease"]},{unified:"1F44A",short_name:"fist-2",coggleSort:r+1}]}),l=function(e){var t=[],n=s.dataByShortName;return e.forEach(function(e){if(t.push(e),n.hasOwnProperty(e)&&n[e].skin_variations)for(var i=2;i<7;i++)t.push(e+"::skin-tone-"+i)}),t},a=s.possibleShortNames;s.possibleShortNames=function(e){return l(a.call(this,e).sort(function(e,t){var n=s.dataByShortName;return(n[e].coggleSort||r)-(n[t].coggleSort||r)}))};var u=e("env").cdn.url+"/img/";return s.replaceAndRender=function(e){return"string"==typeof e?o.parse(this.replaceColons(e),{base:u,ext:".svg",folder:"twe",className:"twemoji"}):(this.replaceColons(e),o.parse(e,{base:u,ext:".svg",folder:"twe",className:"twemoji"}))},s}),define("utils/coordsFromEvent",["require","exports","module"],function(e,t,n){n.exports=function(e,t){function n(n){if(!n)return null;var i={x:!1,y:!1};return"number"==typeof i.x&&"number"==typeof i.y||(i.x=n.changedTouches&&n.changedTouches[0]&&n.changedTouches[0][e],i.y=n.changedTouches&&n.changedTouches[0]&&n.changedTouches[0][t]),"number"==typeof i.x&&"number"==typeof i.y||(i={x:n[e],y:n[t]}),"number"!=typeof i.x||"number"!=typeof i.y?null:i}function i(e){return n(e)||n(e.originalEvent)||n(e.srcEvent)||n(e.gesture&&e.gesture.srcEvent)||n(e.gesture&&e.gesture.originalEvent)||n(e.originalEvent&&e.originalEvent.gesture&&e.originalEvent.gesture.srcEvent)}return i}}),define("utils/pageCoords",["require","exports","module","./coordsFromEvent"],function(e,t,n){n.exports=e("./coordsFromEvent")("pageX","pageY")}),function(e){"use strict";"function"==typeof define&&define.amd?define("jquery.scrollTo",["jquery"],e):"undefined"!=typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){"use strict";function t(t){return!t.nodeName||-1!==e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])}function n(t){return e.isFunction(t)||e.isPlainObject(t)?t:{top:t,left:t}}var i=e.scrollTo=function(t,n,i){return e(window).scrollTo(t,n,i)};return i.defaults={axis:"xy",duration:0,limit:!0},e.fn.scrollTo=function(o,r,s){"object"==typeof r&&(s=r,r=0),"function"==typeof s&&(s={onAfter:s}),"max"===o&&(o=9e9),s=e.extend({},i.defaults,s),r=r||s.duration;var l=s.queue&&1<s.axis.length;return l&&(r/=2),s.offset=n(s.offset),s.over=n(s.over),this.each(function(){function a(t){var n=e.extend({},s,{queue:!0,duration:r,complete:t&&function(){t.call(d,p,s)}});h.animate(f,n)}if(null!==o){var u,c=t(this),d=c?this.contentWindow||window:this,h=e(d),p=o,f={};switch(typeof p){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(p)){p=n(p);break}p=c?e(p):e(p,d);case"object":if(0===p.length)return;(p.is||p.style)&&(u=(p=e(p)).offset())}var g=e.isFunction(s.offset)&&s.offset(d,p)||s.offset;e.each(s.axis.split(""),function(e,t){var n="x"===t?"Left":"Top",o=n.toLowerCase(),r="scroll"+n,m=h[r](),v=i.max(d,t);u?(f[r]=u[o]+(c?0:m-h.offset()[o]),s.margin&&(f[r]-=parseInt(p.css("margin"+n),10)||0,f[r]-=parseInt(p.css("border"+n+"Width"),10)||0),f[r]+=g[o]||0,s.over[o]&&(f[r]+=p["x"===t?"width":"height"]()*s.over[o])):(n=p[o],f[r]=n.slice&&"%"===n.slice(-1)?parseFloat(n)/100*v:n),s.limit&&/^\d+$/.test(f[r])&&(f[r]=0>=f[r]?0:Math.min(f[r],v)),!e&&1<s.axis.length&&(m===f[r]?f={}:l&&(a(s.onAfterFirst),f={}))}),a(s.onAfter)}})},i.max=function(n,i){var o="x"===i?"Width":"Height",r="scroll"+o;if(!t(n))return n[r]-e(n)[o.toLowerCase()]();var o="client"+o,s=n.ownerDocument||n.document,l=s.documentElement,s=s.body;return Math.max(l[r],s[r])-Math.min(l[o],s[o])},e.Tween.propHooks.scrollLeft=e.Tween.propHooks.scrollTop={get:function(t){return e(t.elem)[t.prop]()},set:function(t){var n=this.get(t);if(t.options.interrupt&&t._last&&t._last!==n)return e(t.elem).stop();var i=Math.round(t.now);n!==i&&(e(t.elem)[t.prop](i),t._last=this.get(t))}},i}),function(e){"function"==typeof define&&define.amd?define("plugins/jquery.fullscreen",["jquery"],e):e(jQuery)}(function(e){var t=document;e.fullscreen=function(e){var n=t.documentElement;e?n.requestFullScreen?n.requestFullScreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullScreen&&n.webkitRequestFullScreen():t.cancelFullScreen?t.cancelFullScreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitCancelFullScreen&&t.webkitCancelFullScreen()}}),define("utils/trackModifiers",["require","exports","module"],function(e,t,n){function i(e){var t=e.altKey,n=e.shiftKey,i=e.metaKey||!e.metaKey&&e.altKey&&e.shiftKey,o=e.ctrlKey,r=16,l=17,a=18;"keyup"==e.type&&(e.keyCode==r&&n&&(n=!1),e.keyCode==l&&o&&(o=!1),e.keyCode==a&&t&&(t=!1)),t==s.alt_key_pressed&&n==s.shift_key_pressed&&i==s.meta_key_pressed&&o==s.control_key_pressed||(s.alt_key_pressed=t,s.shift_key_pressed=n,s.meta_key_pressed=i,s.control_key_pressed=o,$(window).trigger("modifierschanged",s))}function o(e){var t={type:e.type,altKey:"undefined"!=typeof e.altKey?e.altKey:s.alt_key_pressed,shiftKey:"undefined"!=typeof e.shiftKey?e.shiftKey:s.shift_key_pressed,metaKey:"undefined"!=typeof e.metaKey?e.metaKey:s.meta_key_pressed,ctrlKey:"undefined"!=typeof e.ctrlKey?e.ctrlKey:s.control_key_pressed};t.metaKey||(t.metaKey=t.altKey&&t.shiftKey),i(t)}function r(e){if(!document.webkitHidden){var t=0;window.addEventListener("mousemove",function e(n){o(n),t>=1?(window.removeEventListener("mousemove",e,!1),t=0):t+=1},!1)}}var s={control_key_pressed:!1,alt_key_pressed:!1,shift_key_pressed:!1,meta_key_pressed:!1};return document.addEventListener("keydown",i,{capture:!0,passive:!0}),document.addEventListener("keyup",i,{capture:!0,passive:!0}),document.addEventListener("webkitvisibilitychange",r,!1),window.addEventListener("load",r,!1),window.addEventListener("focus",r,!1),s}),define("utils/colours",["require","exports","module","tinytinycolor"],function(e,t,n){var i=e("tinytinycolor"),o=function(e,t){"undefined"==typeof t&&(t=1);var n=i(e).toHsl();return i({h:n.h,s:n.s*=.7/t,l:n.l*=.5/t}).toHexString()},r=function(e){var t=i(e).toHsl();return i({h:t.h,s:t.s*=.7,l:.6*t.l+.4}).toHexString()},s=function(e){var t=i(e).toHsl(),n=t.s-.7*t.s;return i({h:t.h,s:t.s-n,l:t.l*(1-n/2)}).toHexString()},l=function(e){var t=i(e).toHsl();return t.l>.9?o(e):t.l<.1?r(e):e};t.darken=o,t.lighten=r,t.desaturate=s,t.mediate=l}),function(e){"function"==typeof define&&define.amd?define("plugins/jquery.checkable-md",["jquery"],e):e(jQuery)}(function(e){function t(e,t){if(e in t)return t[e];throw'missing required option: "'+e+'"'}function n(e,t,n){return e in t?t[e]:n}e.fn.checkable=function(i){var o=n("checkIndex",i,0),r=t("text",i),s=t("setTextFn",i),l=this,a=e(l);e.each([a,a.siblings("label")],function(){e(this).bind("tap click mousedown",function(e){"undefined"!=typeof e.stopPropagation?e.stopPropagation():"undefined"!=typeof e.cancelBubble&&(e.cancelBubble=!0)})}),a.bind("change",function(){var e=/^( {0,3}- \[)[xX\/\\ ](\])/gm,t=this.checked?"X":" ",n=0;r=r.replace(e,function(e,i,r,s,l){return n++===o?i+t+r:e}),s(r)}),a.bind("mousedown mouseup pointerdown pointerup touchstart touchend MSPointerDown MSPointerUp",function(e){e.stopPropagation()})}}),function(e){"function"==typeof define&&define.amd?define("plugins/jquery.loadmathjax",["jquery"],e):e(jQuery)}(function(e){function t(i){var o='    <script type="text/x-mathjax-config">    MathJax.Ajax.config.root = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1",    MathJax.Hub.Config({      messageStyle:"none",      TeX:{extensions:["AMSmath.js", "mhchem.js"]},       skipStartupTypeset:true,    });    MathJax.Hub.processUpdateDelay = 0;    MathJax.Hub.processSectionDelay = 0;    MathJax.Hub.processUpdateTime = 0;    </script>';if(e("head").append(e(o)),n.push(i),"loaded"==r){for(var s=0;s<n.length;s++)n[s]&&n[s]();n=[]}else"loading"==r||(console.log("loading mathjax..."),e.getScript("https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML,Safe",function(){r="loaded",t()}),r="loading")}var n=[],i=[],o=0,r="none";window.ensureMathJax=function(e){o++,t(e)},window.doneMathJax=function(){if(o--,0===o){for(var e=0;e<i.length;e++)i[e]();i=[]}},window.onMathJaxComplete=function(e){o?i.push(e):window.setTimeout(e,0)}}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/disable-selection",["jquery","./version"],e):e(jQuery)}(function(e){return e.fn.extend({disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}})}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/widgets/resizable",["jquery","./mouse","../disable-selection","../plugin","../version","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.resizable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",o=!1;return t[i]>0||(t[i]=1,o=t[i]>0,t[i]=0,o)},_create:function(){var t,n=this.options,i=this;this._addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(t),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(t),this._proportionallyResize()),this._setupHandles(),n.autoHide&&e(this.element).on("mouseenter",function(){n.disabled||(i._removeClass("ui-resizable-autohide"),i._handles.show())}).on("mouseleave",function(){n.disabled||i.resizing||(i._addClass("ui-resizable-autohide"),i._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_setOption:function(e,t){switch(this._super(e,t),e){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var t,n,i,o,r,s=this.options,l=this;if(this.handles=s.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),i=this.handles.split(","),this.handles={},n=0;n<i.length;n++)t=e.trim(i[n]),o="ui-resizable-"+t,r=e("<div>"),this._addClass(r,"ui-resizable-handle "+o),r.css({zIndex:s.zIndex}),this.handles[t]=".ui-resizable-"+t,this.element.append(r);this._renderAxis=function(t){var n,i,o,r;t=t||this.element;for(n in this.handles)this.handles[n].constructor===String?this.handles[n]=this.element.children(this.handles[n]).first().show():(this.handles[n].jquery||this.handles[n].nodeType)&&(this.handles[n]=e(this.handles[n]),this._on(this.handles[n],{mousedown:l._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(i=e(this.handles[n],this.element),r=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth(),o=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(o,r),this._proportionallyResize()),this._handles=this._handles.add(this.handles[n])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){l.resizing||(this.className&&(r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),l.axis=r&&r[1]?r[1]:"se")}),s.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var n,i,o=!1;for(n in this.handles)i=e(this.handles[n])[0],(i===t.target||e.contains(i,t.target))&&(o=!0);return!this.options.disabled&&o},_mouseStart:function(t){var n,i,o,r=this.options,s=this.element;return this.resizing=!0,this._renderProxy(),n=this._num(this.helper.css("left")),i=this._num(this.helper.css("top")),r.containment&&(n+=e(r.containment).scrollLeft()||0,i+=e(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:i},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalPosition={left:n,top:i},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===o?this.axis+"-resize":o),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,i,o=this.originalMousePosition,r=this.axis,s=t.pageX-o.left||0,l=t.pageY-o.top||0,a=this._change[r];return this._updatePrevProperties(),!!a&&(n=a.apply(this,[t,s,l]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(n=this._updateRatio(n,t)),n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),i=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(i)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1)},_mouseStop:function(t){this.resizing=!1;var n,i,o,r,s,l,a,u=this.options,c=this;return this._helper&&(n=this._proportionallyResizeElements,i=n.length&&/textarea/i.test(n[0].nodeName),o=i&&this._hasScroll(n[0],"left")?0:c.sizeDiff.height,r=i?0:c.sizeDiff.width,s={width:c.helper.width()-r,height:c.helper.height()-o},l=parseFloat(c.element.css("left"))+(c.position.left-c.originalPosition.left)||null,a=parseFloat(c.element.css("top"))+(c.position.top-c.originalPosition.top)||null,u.animate||this.element.css(e.extend(s,{top:a,left:l})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!u.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,n,i,o,r,s=this.options;r={minWidth:this._isNumber(s.minWidth)?s.minWidth:0,maxWidth:this._isNumber(s.maxWidth)?s.maxWidth:1/0,minHeight:this._isNumber(s.minHeight)?s.minHeight:0,maxHeight:this._isNumber(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||e)&&(t=r.minHeight*this.aspectRatio,i=r.minWidth/this.aspectRatio,n=r.maxHeight*this.aspectRatio,o=r.maxWidth/this.aspectRatio,t>r.minWidth&&(r.minWidth=t),i>r.minHeight&&(r.minHeight=i),n<r.maxWidth&&(r.maxWidth=n),o<r.maxHeight&&(r.maxHeight=o)),this._vBoundaries=r},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,i=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===i&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===i&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,i=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,o=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,r=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,s=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,l=this.originalPosition.left+this.originalSize.width,a=this.originalPosition.top+this.originalSize.height,u=/sw|nw|w/.test(n),c=/nw|ne|n/.test(n);return r&&(e.width=t.minWidth),s&&(e.height=t.minHeight),i&&(e.width=t.maxWidth),o&&(e.height=t.maxHeight),r&&u&&(e.left=l-t.minWidth),i&&u&&(e.left=l-t.maxWidth),s&&c&&(e.top=a-t.minHeight),o&&c&&(e.top=a-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,n=[],i=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],o=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];t<4;t++)n[t]=parseFloat(i[t])||0,n[t]+=parseFloat(o[t])||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,n=this.helper||this.element;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,i=this.originalPosition;return{left:i.left+t,width:n.width-t}},n:function(e,t,n){var i=this.originalSize,o=this.originalPosition;return{top:o.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},sw:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,i]))},ne:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},nw:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,i]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!==t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).resizable("instance"),i=n.options,o=n._proportionallyResizeElements,r=o.length&&/textarea/i.test(o[0].nodeName),s=r&&n._hasScroll(o[0],"left")?0:n.sizeDiff.height,l=r?0:n.sizeDiff.width,a={width:n.size.width-l,height:n.size.height-s},u=parseFloat(n.element.css("left"))+(n.position.left-n.originalPosition.left)||null,c=parseFloat(n.element.css("top"))+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(a,c&&u?{top:c,left:u}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseFloat(n.element.css("width")),height:parseFloat(n.element.css("height")),top:parseFloat(n.element.css("top")),left:parseFloat(n.element.css("left"))};o&&o.length&&e(o[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,n,i,o,r,s,l,a=e(this).resizable("instance"),u=a.options,c=a.element,d=u.containment,h=d instanceof e?d.get(0):/parent/.test(d)?c.parent().get(0):d;h&&(a.containerElement=e(h),/document/.test(d)||d===document?(a.containerOffset={left:0,top:0},a.containerPosition={left:0,top:0},a.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(h),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,i){n[e]=a._num(t.css("padding"+i))}),a.containerOffset=t.offset(),a.containerPosition=t.position(),a.containerSize={height:t.innerHeight()-n[3],width:t.innerWidth()-n[1]},i=a.containerOffset,o=a.containerSize.height,r=a.containerSize.width,s=a._hasScroll(h,"left")?h.scrollWidth:r,l=a._hasScroll(h)?h.scrollHeight:o,a.parentData={element:h,left:i.left,top:i.top,width:s,height:l}))},resize:function(t){var n,i,o,r,s=e(this).resizable("instance"),l=s.options,a=s.containerOffset,u=s.position,c=s._aspectRatio||t.shiftKey,d={top:0,left:0},h=s.containerElement,p=!0;h[0]!==document&&/static/.test(h.css("position"))&&(d=a),u.left<(s._helper?a.left:0)&&(s.size.width=s.size.width+(s._helper?s.position.left-a.left:s.position.left-d.left),c&&(s.size.height=s.size.width/s.aspectRatio,p=!1),s.position.left=l.helper?a.left:0),u.top<(s._helper?a.top:0)&&(s.size.height=s.size.height+(s._helper?s.position.top-a.top:s.position.top),c&&(s.size.width=s.size.height*s.aspectRatio,p=!1),s.position.top=s._helper?a.top:0),o=s.containerElement.get(0)===s.element.parent().get(0),r=/relative|absolute/.test(s.containerElement.css("position")),o&&r?(s.offset.left=s.parentData.left+s.position.left,s.offset.top=s.parentData.top+s.position.top):(s.offset.left=s.element.offset().left,s.offset.top=s.element.offset().top),n=Math.abs(s.sizeDiff.width+(s._helper?s.offset.left-d.left:s.offset.left-a.left)),i=Math.abs(s.sizeDiff.height+(s._helper?s.offset.top-d.top:s.offset.top-a.top)),n+s.size.width>=s.parentData.width&&(s.size.width=s.parentData.width-n,c&&(s.size.height=s.size.width/s.aspectRatio,p=!1)),i+s.size.height>=s.parentData.height&&(s.size.height=s.parentData.height-i,c&&(s.size.width=s.size.height*s.aspectRatio,p=!1)),p||(s.position.left=s.prevPosition.left,s.position.top=s.prevPosition.top,s.size.width=s.prevSize.width,s.size.height=s.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),n=t.options,i=t.containerOffset,o=t.containerPosition,r=t.containerElement,s=e(t.helper),l=s.offset(),a=s.outerWidth()-t.sizeDiff.width,u=s.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(r.css("position"))&&e(this).css({left:l.left-o.left-i.left,width:a,height:u}),t._helper&&!n.animate&&/static/.test(r.css("position"))&&e(this).css({left:l.left-o.left-i.left,width:a,height:u})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),n=t.options;e(n.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function(t,n){var i=e(this).resizable("instance"),o=i.options,r=i.originalSize,s=i.originalPosition,l={height:i.size.height-r.height||0,width:i.size.width-r.width||0,top:i.position.top-s.top||0,left:i.position.left-s.left||0};e(o.alsoResize).each(function(){var t=e(this),i=e(this).data("ui-resizable-alsoresize"),o={},r=t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(r,function(e,t){var n=(i[t]||0)+(l[t]||0);n&&n>=0&&(o[t]=n||null)}),t.css(o)})},stop:function(){e(this).removeData("ui-resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),e.uiBackCompat!==!1&&"string"==typeof t.options.ghost&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,n=e(this).resizable("instance"),i=n.options,o=n.size,r=n.originalSize,s=n.originalPosition,l=n.axis,a="number"==typeof i.grid?[i.grid,i.grid]:i.grid,u=a[0]||1,c=a[1]||1,d=Math.round((o.width-r.width)/u)*u,h=Math.round((o.height-r.height)/c)*c,p=r.width+d,f=r.height+h,g=i.maxWidth&&i.maxWidth<p,m=i.maxHeight&&i.maxHeight<f,v=i.minWidth&&i.minWidth>p,y=i.minHeight&&i.minHeight>f;i.grid=a,v&&(p+=u),y&&(f+=c),g&&(p-=u),m&&(f-=c),/^(se|s|e)$/.test(l)?(n.size.width=p,n.size.height=f):/^(ne)$/.test(l)?(n.size.width=p,n.size.height=f,n.position.top=s.top-h):/^(sw)$/.test(l)?(n.size.width=p,n.size.height=f,n.position.left=s.left-d):((f-c<=0||p-u<=0)&&(t=n._getPaddingPlusBorderDimensions(this)),f-c>0?(n.size.height=f,n.position.top=s.top-h):(f=c-t.height,n.size.height=f,n.position.top=s.top+r.height-f),p-u>0?(n.size.width=p,n.position.left=s.left-d):(p=u-t.width,n.size.width=p,n.position.left=s.left+r.width-p))}}),e.ui.resizable}),define("views/NodeTextView",["require","exports","module","underscore","utils/marked","backbone","utils/coggle-encodeji","utils/trackModifiers","utils/colours","plugins/jquery.checkable-md","plugins/jquery.loadmathjax","jquery-ui/widgets/resizable","env"],function(e,t,n){function i(t){return $(t.target).off("error",i).addClass("missing"),t.target.src=e("env").cdn.url+"/img/missing.png",!0}var o=e("underscore"),r=e("utils/marked"),s=e("backbone"),l=e("utils/coggle-encodeji"),a=(e("utils/trackModifiers"),
e("utils/colours"));e("plugins/jquery.checkable-md"),e("plugins/jquery.loadmathjax"),e("jquery-ui/widgets/resizable");var u=o.template("<div class='node-container'>    <div class='node-content' dir='auto'></div>    <div class='comment-count'></div></div>"),c=o.template("<% if(touch && root){ %><p><span data-l10n-id='tap-to-edit-title'>tap to edit title</span></p><% } %><% if(touch && !root){ %><p><span data-l10n-id='tap-to-edit'>tap to edit</span></p><% } %><% if((!touch) && root){ %><p><span data-l10n-id='click-to-edit-title'>click to edit title</span></p><% } %><% if((!touch) && !root){ %><p><span data-l10n-id='click-to-edit'>click to edit</span></p><% } %>"),d=s.View.extend({initialize:function(e){this.options=e,this._last_classes={},this._last_position={},this.setElement($(u())[0]),this.contentContainer=$(this.el.children[0]),this.commentCount=$(this.el.children[1]),o.bindAll(this,"updateHtmlPosition","updateWidth","updateScale","updateText","updateColour","updateCommentCount"),this.diagram=e.diagram,this.listenTo(this.model,"change:text",this.updateText),this.listenTo(this.model,"change:scale",this.updateScale),this.listenTo(this.model,"change:width",this.updateWidth),this.listenTo(this.model,"change:colour",this.updateColour),this.listenTo(this.model,"child_added child_removed ancestor_moved change:pos",this.updateHtmlPosition),this.listenTo(this.diagram.model.getNotifications(),"sync add remove",this.updateCommentCount),this.updateAll()},updateAll:function(){this.updateText(),this.updateColour(),this.updateScale(),this.updateWidth(),this.updateHtmlPosition()},updateClasses:function(){var e=this.model.ltr(),t=this.model.ttb(),n=this.model.hasChildren(),i=this.model.isTitle(),r=this.model.isRoot(),s={ttb:t,ltr:e,children:n,isTitle:i,isRoot:r};o.isEqual(this._last_classes,s)||(this.contentContainer.attr("tabindex",this.model.level()+1),this.$el.toggleClass("haschildren",n),r?(this.$el.addClass("root"),i?(this.$el.addClass("titleroot"),this.$el.removeClass("extraroot")):(this.$el.addClass("extraroot"),this.$el.removeClass("titleroot")),this.$el.removeClass("ttb"),this.$el.removeClass("ltr")):(r!==this._last_classes.isRoot&&(this.$el.removeClass("root"),this.$el.removeClass("extraroot"),this.$el.removeClass("titleroot")),1===e?this.$el.addClass("ltr"):this.$el.removeClass("ltr"),1===t?this.$el.addClass("ttb"):this.$el.removeClass("ttb")),this._last_classes=s)},updateCommentCount:function(){this.diagram.model.getNotifications().withTags([this.model.shortId()])},updateText:function(){var e=this.model.text();if(this._text!==e)if(this._text=e,e)this.$el.removeClass("empty"),this.contentContainer[0].innerHTML=r(e),e.indexOf("![")!==-1&&(this.resizableImages(),this.lightboxableImages()),this.emoji(),this.checkboxes(),this.compileLatex(),this.updateCommentCount();else{this.$el.addClass("empty");var t=d.emptyNodeContentFor(this.model);this.contentContainer[0].innerHTML=t}},updateWidth:function(){var e=this.model.width();e?this.contentContainer.css({width:e,"white-space":""}):this.contentContainer.css({width:"auto","white-space":"nowrap"})},updateScale:function(){var e=this.model.scale();"undefined"==typeof e?this.contentContainer.css("font-size","1em"):this.contentContainer.css("font-size",e+"em")},updateColour:function(){var e=this.model.colour();this.commentCount.css({background:e}),this.model.isTitle()?this.$el.css("color","#ffffff"):(e=this.model.isRoot()&&this.model.children().length?a.darken(e,1.4):a.darken(e),this.$el.css("color",e))},updateHtmlPosition:function(){var e=this.model.x(),t=this.model.y(),n={top:t,left:e};o.isEqual(n,this._last_position)||this.$el.css(n),this._last_position=n,this.updateClasses()},emoji:function(){l.replaceAndRender(this.contentContainer[0])},compileLatex:function(){var e=this.model.text();e.indexOf("$$")==-1&&e.indexOf("\\\\(")==-1&&e.indexOf("\\\\[")==-1||ensureMathJax(function(){console.log("I solemnly swear that I am up to no math."),MathJax.Hub.Queue(["Typeset",MathJax.Hub,this.contentContainer[0]]),MathJax.Hub.Queue(function(){doneMathJax(),console.log("MathJax Managed")})}.bind(this))},resizableImages:function(){var e=this.diagram,t=this.model,n=this.contentContainer.find("img");n.on("dragstart",function(e){e.preventDefault()}),n.on("error",i),n.on("load",function(n){var i=new Image;i.src=$(n.target).attr("src");var o=i.width,r=i.height,s=/\.svg(\?[a-z0-9%_!$&'()*+,;=:@\/?-]*)?(#[a-z0-9%?\/:@._~!$&'()*+,;=-]*)?$/i.exec(i.src),l=s?5*o:o,a=s?5*r:r,u=20,c=20;if(!e.readOnly()){var d=$(n.target).attr("data-origsrc");$(n.target).resizable({handles:"se",autoHide:!0,aspectRatio:!0,maxWidth:l,minWidth:u,maxHeight:a,minHeight:c,stop:function(e,n){var i=t.text(),o=i.indexOf(d)+d.length,r=i.indexOf(")",o),s=Math.round(n.size.width),l=Math.round(n.size.height),a=i.slice(0,o)+" "+s+"x"+l+i.slice(r);t.set("text",a);var u={text:t.text()},c=t.get("width");"number"==typeof c&&s>c&&(t.set("width",s),u.width=t.width()),t.deltarize(u)}})}})},lightboxableImages:function(){var e=this;this.contentContainer.find("img").on("load",function(t){var n,i=$(this),o=this.naturalHeight,r=this.naturalWidth;(r>128||o>96)&&(i.addClass("lightboxable"),e.diagram.readOnly()?n=i:(n=$('<div class="lightboxicon"></div>'),i.parent().append(n)),n.on("tap",function(e){var t=$('<div class="modal-editing-background">'),n=$("body");t.appendTo(n);var o=$('<img class="lightboxed"/>').attr("src",i.attr("src")).appendTo(n);return t.on("click",function(){t.remove(),o.remove()}),e.preventDefault(),e.stopPropagation(),!1}))})},checkboxes:function(){var e=(this.diagram,this.model),t=this.model.text();t.indexOf("[")!==-1&&t.indexOf("]")!==-1&&(this.diagram.readOnly()?this.contentContainer.find(".tasklist-checkbox").prop("disabled",!0):this.contentContainer.find(".tasklist-checkbox").each(function(n,i){$(i).checkable({text:t,checkIndex:n,setTextFn:function(t){e.set("text",t),e.deltarize({text:e.text()})}})}))}});d.emptyNodeContentFor=function(e,t){return d.rootEmptyNodeHTML||(d.rootEmptyNodeHTML=c({touch:$("body").hasClass("touch"),root:!0}),d.rootEmptyNodeHTMLText=$(d.rootEmptyNodeHTML).text(),d.emptyNodeHTML=c({touch:$("body").hasClass("touch"),root:!1}),d.emptyNodeHTMLText=$(d.emptyNodeHTML).text()),t?e.isTitle()?d.rootEmptyNodeHTMLText:d.emptyNodeHTMLText:e.isTitle()?d.rootEmptyNodeHTML:d.emptyNodeHTML},d.nodeTemplate=u,n.exports=d}),define("models/NotificationSearch",["require","exports","module","underscore","backbone"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=o.Model.extend({setQuery:function(e){this.set("query",e.trim())},getQuery:function(){return this.get("query")||""},setNodes:function(e){this.set("nodes",e)},pushNode:function(e){this.set("nodes",i.unique(i.compact(i.union(this.getNodes(),[e]))))},getNodes:function(){return this.get("nodes")||[]},activeTags:function(){return this.getNodes().map(function(e){return e.shortId()})},apply:function(e){var t=e;this.getNodes().length&&(t=e.withTags(this.activeTags()));var n=this.getQuery();return n&&n.length&&(n=n.toLowerCase(),t=t.filter(function(e){return i.any(n.split(" "),function(t){return e.messageWithTags().toLowerCase().indexOf(t)!==-1})})),t}});r.instance=function(){return r._instance||(r._instance=new r),r._instance},n.exports=r}),define("controllers/MarkdownController",["require","exports","module"],function(e,t,n){function i(){}i.LINK=/\[([^\]]*)\]\(([^\)]*)\)/gi,i.BOLD=/\*\*([^*]+)\*\*/gi,i.ITALICS=/\*([^*]+)\*/gi,i.ITALICS_NOT_BOLD=/(?:^|[^*])(?:\*([^*]+)\*|\*\*\*([^*]+)\*\*\*)(?:[^*]|$)/gi,i.WORD=/([^\*\[\]\(\)\s]+)/gi,i.smartRange=function(e,t){if(!t)return{start:0,end:e.length};if(t.end||(t.end=e.length),t.start||(t.start=0),t.start===t.end){var n=i.closestMarkupOfType(e,t,i.WORD);if(n)return{start:n.start,end:n.end}}return t};var o=function(e,t){for(var n,i=[],o=t.start;o<t.end;)n=/^(\n\s*){2,}/.exec(e.substr(o)),n?(i.push({start:t.start,end:o,breakBefore:t.breakBefore||""}),t.start=o+n[0].length,t.breakBefore=n[0],o+=n[0].length):o+=1;return t.start<t.end&&i.push({start:t.start,end:t.end,breakBefore:t.breakBefore||""}),0===i.length&&i.push(t),i},r=function(e){return function(t,n){var i=o(t,n),r=0,s=null,l=0;return i.forEach(function(n){var i;n.start+=r,n.end+=r,i=e(t,n),r+=i.markdown.length-t.length,t=i.markdown,null===s&&(s=i.selection.start),l=i.selection.end}),{markdown:t,selection:{start:s,end:l}}}},s=function(e,t,n){var i,o;for(i=t.start;i>0&&n.exec(e[i-1]);i--);for(o=t.end;o<e.length&&n.exec(e[o]);o++);return{start:i,end:o}},l=function(e){return function(){var t=Array.prototype.slice.call(arguments),n=t[0],i=t[1],o=s(n,i,/[*]/),r=o.start;t[0]=n.substr(o.start,o.end-o.start),o.start=0,o.end-=r,t[1]=o;var l=e.apply(this,t);return"boolean"==typeof l?l:(l.hasOwnProperty("start")&&(l.start+=r),l.hasOwnProperty("end")&&(l.end+=r),l.hasOwnProperty("selection")&&(l.selection.start+=r,l.selection.end+=r),l.hasOwnProperty("markdown")&&(l.markdown=n.substr(0,o.start+r)+l.markdown+n.substr(o.end+r)),l)}},a=l(function(e,t,n){return n.lastIndex=0,null!==n.exec(e)});i.splitByRange=function(e,t){return t=i.smartRange(e,t),{prefix:e.slice(0,t.start),selection:e.slice(t.start,t.end),postfix:e.slice(t.end,e.length)}},i.surroundWith=function(e,t,n,o,r){var s=i.splitByRange(e,t);return 0===s.selection.length&&(s.selection=r||""),{markdown:s.prefix+n+s.selection+o+s.postfix,selection:{start:s.prefix.length+n.length,end:s.prefix.length+s.selection.length+n.length}}},i.toggleItalics=r(function(e,t){return a(e,t,i.ITALICS_NOT_BOLD)?i.removeItalics(e,t):i.addItalics(e,t)}),i.addItalics=l(function(e,t){return i.surroundWith(e,t,"*","*","text")}),i.removeItalics=l(function(e,t){return i.replaceWithGroup(e,t,i.ITALICS,1)}),i.toggleBold=r(function(e,t){return a(e,t,i.BOLD)?i.removeBold(e,t):i.addBold(e,t)}),i.addBold=l(function(e,t){var n=i.surroundWith(e,t,"**","**","text");return n}),i.removeBold=l(function(e,t){return i.replaceWithGroup(e,t,i.BOLD,1)}),i.addLink=function(e,t,n){t=i.smartRange(e,t);var o=i.surroundWith(e,t,"[","]("+n+")","Link Title");return o.selection.start=o.selection.end+2,o.selection.end=o.selection.start+n.length,o},i.removeLink=function(e,t){return i.replaceWithGroup(e,t,i.LINK,1)},i.addIcon=function(e,t){var n=i.splitByRange(e,t),o=n.prefix+n.selection,r=":";return o.length&&!/\n| /.exec(o[o.length-1])&&(r=" :"),{markdown:o+r+n.postfix,selection:{start:o.length+r.length,end:o.length+r.length}}},i.closestMarkupOfType=function(e,t,n){var i;for(n.lastIndex=0;null!==(i=n.exec(e));){var o=i.index,r=i.index+i[0].length;if(t.start>=o&&t.end<=r||o>=t.start&&r<=t.end)return{start:o,end:r,match:i}}return null},i.replaceWithGroup=function(e,t,n,o){t=i.smartRange(e,t);var r=i.closestMarkupOfType(e,t,n);if(r){var s=e.slice(0,r.start),l=e.slice(r.end,e.length),a=o?r.match[o]:"";return{markdown:s+a+l,selection:{start:s.length,end:s.length+a.length}}}return{markdown:e,selection:t}},n.exports=i}),function(e){"function"==typeof define&&define.amd?define("plugins/jquery.inputSelection",["jquery"],e):e(jQuery)}(function(e){e.fn.setInputSelection=function(t){var n=e(this)[0];if(n.createTextRange){var i=n.createTextRange();i.collapse(!0),i.moveStart("character",t.start),i.moveEnd("character",t.end),i.select()}else void 0!==n.selectionStart&&n.setSelectionRange(t.start,t.end)},e.fn.setInputSelection=function(e){var t=this[0],n=e.start||0,i=e.end||0;if(t.focus(),t.setSelectionRange)t.setSelectionRange(n,i);else if(t.createTextRange){var o=t.value.replace(/\r\n/g,"\n"),r=o.slice(0,n).split("\n").length-1;n-=r,i-=r;var s=t.createTextRange();s.collapse(!0),s.moveEnd("character",i),s.moveStart("character",n),s.select()}},e.fn.getInputSelection=function(){var e,t,n,i,o,r=this[0],s=0,l=0;return"number"==typeof r.selectionStart&&"number"==typeof r.selectionEnd?(s=r.selectionStart,l=r.selectionEnd):document.selection&&document.selection.createRange&&(t=document.selection.createRange(),t&&t.parentElement()==r&&(i=r.value.length,e=r.value.replace(/\r\n/g,"\n"),n=r.createTextRange(),n.moveToBookmark(t.getBookmark()),o=r.createTextRange(),o.collapse(!1),n.compareEndPoints("StartToEnd",o)>-1?s=l=i:(s=-n.moveStart("character",-i),s+=e.slice(0,s).split("\n").length-1,n.compareEndPoints("EndToEnd",o)>-1?l=i:(l=-n.moveEnd("character",-i),l+=e.slice(0,l).split("\n").length-1)))),{start:s,end:l}}}),define("controllers/MarkdownTextareaController",["require","exports","module","./MarkdownController","plugins/jquery.inputSelection"],function(e,t,n){function i(e){var t=l.toggleBold(e.val(),e.getInputSelection());e.val(t.markdown),e.setInputSelection(t.selection)}function o(e){var t=l.toggleItalics(e.val(),e.getInputSelection());e.val(t.markdown),e.setInputSelection(t.selection)}function r(e){var t=l.addLink(e.val(),e.getInputSelection(),"https://example.com");e.val(t.markdown),e.setInputSelection(t.selection)}function s(e){var t=l.addIcon(e.val(),e.getInputSelection());e.val(t.markdown),e.setInputSelection(t.selection),setTimeout(function(){e.textcomplete&&e.textcomplete("trigger")},10)}var l=e("./MarkdownController");e("plugins/jquery.inputSelection"),n.exports={bold:i,italics:o,link:r,icon:s}}),function(e){"function"==typeof define&&define.amd?define("plugins/jquery.markdownShortcuts",["jquery","controllers/MarkdownTextareaController","utils/trackModifiers"],e):e(jQuery)}(function(e,t,n){e.fn.markdownShortcuts=function(i){var o=e(this);o.on("keydown",function(e){if((66==e.keyCode||73==e.keyCode||75==e.keyCode||71==e.keyCode)&&(n.control_key_pressed||n.meta_key_pressed)&&!n.shift_key_pressed&&!n.alt_key_pressed){o.getInputSelection();if(66==e.keyCode)return t.bold(o),o.trigger("markdownshortcut"),!1;if(73==e.keyCode)return t.italics(o),o.trigger("markdownshortcut"),!1;if(75==e.keyCode)return t.link(o),o.trigger("markdownshortcut"),!1;if(71==e.keyCode)return t.icon(o),o.trigger("markdownshortcut"),setTimeout(function(){o.textcomplete&&o.textcomplete("trigger")},10),!1}})}}),function(e){"function"==typeof define&&define.amd?define("plugins/jquery.markdownButtons",["jquery","controllers/MarkdownTextareaController","plugins/jquery.inputSelection"],e):e(jQuery)}(function(e,t,n){var i="<div class='editor-toolbar'><div data-l10n-id='button-bold' class='editor-button bold' title='Make text bold'></div><div data-l10n-id='button-italic' class='editor-button italics' title='Make text italic'></div><div data-l10n-id='button-link' class='editor-button link' title='Link to a website'></div><form class='editor-image-upload' style='display:none'><input type='file' name='files[]'/></form><div data-l10n-id='button-image' class='editor-button image' title='Upload an image'></div><div data-l10n-id='button-emoji' class='editor-button addemoji' title='Search for icons.'></div></div>";e.fn.markdownButtons=function(){var n=e(this),o=e(i);n.before(o),o.find(".addemoji").addClass("zap");var r=n.parent();if(r.length){o.l20n(),r.find(".editor-button.italics").on("click",function(){t.italics(n)}),r.find(".editor-button.bold").click(function(){t.bold(n)}),r.find(".editor-button.link").click(function(){t.link(n)});var s=r.find("form.editor-image-upload");r.find(".editor-button.image").click(function(e){return"undefined"!=typeof e.originalEvent&&(console.log("trigger file input..."),s.find("input").trigger("click")),e.stopPropagation(),!1}),r.find(".editor-button.addemoji").click(function(e){t.icon(n)})}}}),define("views/NodeEditView",["require","exports","module","underscore","backbone","../utils/marked","views/PitchView","models/NotificationSearch","plugins/jquery.markdownShortcuts","plugins/jquery.markdownButtons","plugins/jquery.inputSelection","jquery.outsideEvents","models/Node"],function(e,t,n){function i(e,t){if(e.createTextRange){var n=e.createTextRange();n.move("character",t),n.select()}else void 0!==e.selectionStart&&e.setSelectionRange(t,t)}var o=e("underscore"),r=e("backbone"),s=e("../utils/marked"),l=e("views/PitchView"),a=e("models/NotificationSearch");e("plugins/jquery.markdownShortcuts"),e("plugins/jquery.markdownButtons"),e("plugins/jquery.inputSelection"),e("jquery.outsideEvents");var u=e("models/Node").NodeModel,c=1,d=3,h=350,p="<textarea spellcheck='true' dir='auto' maxlength='<%= maxlength %>' name='markdown'></textarea><div class='editor-hint'></div><div class='font-size' style='display:none'>Font size <span></span>px</div><div class='resize' title='Drag to change the text size.'></div>",f=null,g=[17,15.3,13,12],m=function(){for(var e=[],t=0;t<g.length;t++){for(var n=[],i=t;i>=0;i--)n.push(g[i]/g[t]);for(var o=n[n.length-1];o<d;)o*=1.189207115,n.push(o);e.push(n)}return e}(),v=function(){for(var e=[],t=0;t<g.length;t++){for(var n,i=[],o=g[t];o<=51;o++)n=o/g[t],n<d&&i.push(n);e.push(i)}return e}(),y=function(e,t,n){t>=0&&t<g.length||(t=g.length-1);for(var i=n?v[t]:m[t],o=0;o<i.length;o++)if(i[o]>e)return i[o];return d},b=function(e,t,n){t>=0&&t<g.length||(t=g.length-1);for(var i=n?v[t]:m[t],o=i.length-1;o>=0;o--)if(i[o]<e)return i[o];return c},w=function(e,t){return t>=g.length&&(t=g.length-1),g[t]*e},_=function(e,t){t>=g.length&&(t=g.length-1);var n=e/g[t];return n<c&&(n=c),n>d&&(n=d),n},E=r.View.extend({tagName:"div",className:"node-editor",template:o.template(p),events:{"click .editor-button":"autogrow","click .comments":"openComments","keydown textarea":"onKeypress","focus textarea":"autogrow","textComplete:select textarea":function(e,t,n){this.autogrow(),t&&n&&getCoggleUser().getActions().perform("autocomplete:node:"+n.name)},"textComplete:show textarea":function(e,t,n){getCoggleUser().getActions().unique("autocomplete:node:open")},"input textarea":"autogrow","paste textarea":o.debounce(function(){this.autogrow()},3),"mousedown .resize":"startResizeDrag","touchstart .resize":"startResizeDrag","pointerdown .resize":"startResizeDrag","click .iconsearch":"iconSearch","picked-user textarea":"userTagged","import:image:done":"onImageUpload"},userTagged:function(e,t){var n=this.model.get("tagged");n||(n=[]),n.push(t),this.model.set("tagged",n)},initialize:function(e){this.options=e,o.bindAll(this,"render","focus","commit","cancel","close","caretToEnd","onImageUpload","openComments","autogrowHeight","autogrowWidth","startResize","startResizeDrag","updateResize","endResize","iconSearch","updateFontSizeLabel"),this.diagram=e.diagram,this.$el.on("contextmenu mousedown touchstart pointerdown MSPointerDown",function(e){e.stopPropagation()}),this.scratch={initialAttributes:this.model.toJSON()},this.inheritPauseState=e.inheritPauseState,E._active_edit=this,this.listenTo(this.model,"change:scale",this.updateFontSizeLabel),this.listenToOnce(this.model,"remove destroy",this.close)},onKeypress:function(e){for(var t=["handlePause","handleTab","renderHint","handleCreateNewline","handleKeyboardNavigation","handleCreateNewSibling","handleEscapeToCancel","handleScaleShortcut","handleBackspace"];t.length&&!e.isImmediatePropagationStopped();)this[t.shift()](e)},onImageUpload:function(e,t,n,i,o,r){var s=this.$el.find("textarea"),l=s.getInputSelection(),a=s.val(),u=a.slice(0,l.start)+" !["+r+"]("+n+" "+o.width+"x"+o.height+") "+a.slice(l.end);return s.val(u),this.autogrow(),e.stopPropagation(),!1},setScale:function(e){this.scratch.scale=e,this.$el.css({"font-size":e+"em"}),this.autogrowHeight()},hideFontSizeLabel:o.debounce(function(){this.$el.find(".font-size").fadeOut(200)},1100),updateFontSizeLabel:function(){var e=this.$el.find("textarea"),t=this.$el.find(".font-size").fadeIn(50);t.find("span").text(parseInt(e.css("font-size"))),this.hideFontSizeLabel()},render:function(){this.$el.html(this.template({maxlength:u.MAX_TEXT_LENGTH}));var e=this.$el.find("textarea");return e.val(this.model.text()||""),e.markdownShortcuts({}),e.markdownButtons(),e.coggleHandleCopyPaste({node:this.diagram.getNodeForId(this.model.id),diagram:this.diagram}),e.on("markdownshortcut",this.autogrow.bind(this)),this.$el.css({"border-color":this.model.colour(),"font-size":this.model.get("scale")+"em"}),this.$el.find(".resize").css({"background-color":this.model.colour()}),this.inheritPauseState?this.openEditorButtons(!0):(this.$el.removeClass("has-paused"),this.handlePause()),this.renderHint(),this},openEditorButtons:function(e){$("body").hasClass("mobile-app")||(this.$el.addClass("has-paused"),e&&this.$el.addClass("previously-paused"))},selectRange:function(e){e&&this.$el.find("textarea").setInputSelection(e)},caretToEnd:function(){var e=this.$el.find("textarea");if(e.length){var t=e.val();e[0].setSelectionRange?e[0].setSelectionRange(t.length,t.length):e.val(t)}},focus:function(){this.$el.find("textarea").focus()},commit:function(){if(this.commited)return console.warn("will not commit an editor twice"),this.close();if(this.comitted=!0,!this.model.collection)return console.log("cannot commit edit (node was removed)"),void this.cancel();if(!this.$el.find("textarea").length)return console.log("will not commit nonexistent editor"),void this.close();this.model.set("text",this.$el.find("textarea").val());var e=(this.scratch.initialAttributes.tagged||[]).slice();if(this.model.get("tagged")){var t=this.model.get("tagged").map(function(e){return this.model.text().indexOf("@"+e.displayName().replace(/\s/g,""))!==-1&&e}.bind(this));this.model.set("tagged",o.uniq(o.compact(t)));var n=o.difference(this.model.get("tagged"),e);this.diagram.model.getNotifications().usersTagged(n,this.model)}this.model.deltarize({text:this.model.text(),width:this.model.width(),scale:this.model.scale()}),this.diagram.trigger("node_edited",this),this.scratch.resizing_children&&this.scratch.resizing_children.forEach(function(e){e.deltarize({scale:e.get("scale")})}),this.close()},cancel:function(){E._active_edit==this&&(E._active_edit=!1),this.scratch.initialAttributes&&this.model.set(this.scratch.initialAttributes);var e=this.scratch.original_child_scales,t=this.scratch.resizing_children;if(t&&e&&e.length)for(var n,i=0;i<t.length&&i<e.length;i++)n=t[i],n&&n.set("scale",e[i]);this.close()},close:function(){E._active_edit==this&&(E._active_edit=!1),this.scratch={},this.trigger("close"),this.remove(),this.off()},isLeftToRight:function(){return this.model.ltr()!==-1},enableMultiLine:function(){this.scratch.multiline=!0},isMultiLineEnabled:function(){return this.scratch.multiline||$("body").hasClass("touch")||this.$el.find("textarea").val().indexOf("\n")!==-1},hasSetWidth:function(){return!!this.model.width()},handleKeyboardNavigation:function(e){var t=40,n=37,i=39,o=38;e.shiftKey&&e.altKey&&e.keyCode>=37&&e.keyCode<=40&&(e.preventDefault(),e.stopPropagation(),ga&&ga("send","event","Shortcut","AltShiftArrow"),getCoggleUser().getActions().unique("shortcut-navigate"),e.keyCode==i&&this.isLeftToRight()&&this.trigger("next"),e.keyCode==n&&this.isLeftToRight()&&this.trigger("previous"),e.keyCode!=i||this.isLeftToRight()||this.trigger("previous"),e.keyCode!=n||this.isLeftToRight()||this.trigger("next"),e.keyCode==o&&this.trigger("up"),e.keyCode==t&&this.trigger("down"))},handlePause:function(e,t){var n,i,r,s=function(){var l=t(),a=o.now()-r;a<l&&a>=0?i=setTimeout(s,l-a):(i=null,e.apply(n),n=null)},l=function(){n=this,r=o.now(),i||(i=setTimeout(s,t()))};return l.cancel=function(){clearTimeout(i),n=i=null},l}(function(){this.openEditorButtons()},function(){return parseInt(getCoggleUser().science("editor-pause",["0ms","500ms","1000ms"]))||0}),handleTab:function(e){if(9==e.keyCode||45==e.which)if(e.preventDefault(),e.shiftKey)ga&&ga("send","event","Shortcut","ShiftTab"),getCoggleUser().getActions().unique("shortcut-toparent"),this.trigger("previous");else if(ga&&ga("send","event","Shortcut","Tab"),getCoggleUser().getActions().unique("shortcut-newchild"),!this.model.isRoot()||this.model.isTitle()||this.model.children().length||getCoggleUser().isAwesome()){var t=this.$el.find("textarea").val(),n=this.$el.find("textarea").getInputSelection(),i=t.slice(n.start,n.end);this.$el.find("textarea").val(t.slice(0,n.start)+t.slice(n.end)),this.trigger("spawn",i)}else l.MultiRoot()},renderHint:function(e){var t=this.$el.find("textarea").val(),n=this.diagram.model.getNotifications().withTags([this.model.shortId()]);t&&t.length>=u.MAX_TEXT_LENGTH-5?this.showHint("Item too long! Try moving some text to a new item: select the text then press [tab]"):t&&$(s(t)).text().length>600?this.showHint("Try moving some text to a new item: select the text then press [tab]"):1==n.length?this.showHint('<a class="comments">1 comment</a>'):n.length>1?this.showHint('<a class="comments">'+n.length+" comments</a>"):this.hideHint()},showHint:function(e){this.$el.addClass("hint-visible"),this.$el.find(".editor-hint").html(e)},hideHint:function(){this.$el.removeClass("hint-visible")},openComments:function(){a.instance().setNodes([this.model])},handleCreateNewline:function(e){if(13==e.keyCode&&!e.shiftKey)if(this.isMultiLineEnabled()||e.altKey||e.ctrlKey){ga&&ga("send","event","EditText","Newline"),getCoggleUser().getActions().unique("editing-newline"),this.enableMultiLine();var t=this.$el.find("textarea"),n=t.getInputSelection(),o=n.end,r=t[0].value;t[0].value=r.substring(0,o)+"\n"+r.substring(o,r.length),i(t[0],o+1),this.autogrowHeight(),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}else this.commit()},handleCreateNewSibling:function(e){if(13==e.keyCode&&e.shiftKey){getCoggleUser().getActions().unique("shortcut-newsibling");var t=this.$el.find("textarea").val(),n=this.$el.find("textarea").getInputSelection(),i=t.slice(n.start,n.end);this.$el.find("textarea").val(t.slice(0,n.start)+t.slice(n.end)),this.trigger("sibling",i,e.ctrlKey||e.altKey),e.stopPropagation(),e.preventDefault()}},handleEscapeToCancel:function(e){27!=e.keyCode||"function"!=typeof e.isDefaultPrevented||e.isDefaultPrevented()||(ga&&ga("send","event","EditText","Cancel"),this.cancel(),e.stopPropagation(),e.preventDefault())},handleScaleShortcut:function(e){var t=function(t){t=Math.max(c,Math.min(d,t)),this.model.set("scale",t),this.setScale(t),this.autogrowWidth(),e.preventDefault(),e.stopPropagation()}.bind(this);e.ctrlKey^e.metaKey&&!e.altKey&&(this.scratch.scale||(this.scratch.scale=this.model.scale()),"+"==String.fromCharCode(e.which)||"="==String.fromCharCode(e.which)||187==e.which||107==e.which||61==e.which||43==e.which||171==e.which?t(y(this.scratch.scale,this.model.level(),e.shiftKey)):"-"==String.fromCharCode(e.which)||31==e.which||189==e.which||173==e.which||109==e.which?t(b(this.scratch.scale,this.model.level(),e.shiftKey)):"0"==String.fromCharCode(e.which)&&t(1))},handleBackspace:function(e){if(f&&f>(new Date).getTime())return e.stopPropagation(),e.preventDefault(),!1;if(46==e.which||8==e.which){if(!(e.repeat||e.originalEvent&&e.originalEvent.repeat||this.$el.find("textarea").val().length)){var t=new Date;if(this.last_backspace&&t-this.last_backspace.getTime()<500){if(this.last_backspace=null,!this.model.children().length&&!this.model.isRoot())return this.trigger("remove"),f=(new Date).getTime()+500,e.stopPropagation(),e.preventDefault(),!1}else this.last_backspace=t}}else this.last_backspace=null},autogrow:function(){this.autogrowWidth(),this.autogrowHeight()},autogrowHeight:function(){var e=function(){if(this.$el){var e=this.$el.find("textarea")[0].scrollHeight;this.$el.height(e)}}.bind(this);e()},autogrowWidth:function(){var e=this.model.width(),t=this.$el.width();if(e)return void(t!==e&&this.$el.width(e));if(t!=h){var n=this.diagram.getSizeOfHtml,i=this.$el.find("textarea"),r=i.val(),s=n(o.escape(r).replace(/\n/g,"<br>"),{"font-size":i.css("font-size")},!0).w,l=e||Math.min(Math.ceil(s+20),h);t<l&&this.$el.width(l),l>=h&&(this.model.set("width",Math.round(l)),this.enableMultiLine())}},resizeScalar:function(){return 1/this.diagram.getScale()},startResizeDrag:function(e){this.startResize(e),this.enableMultiLine()},startResize:function(e){(e.shiftKey||e.ctrlKey||e.altKey)&&(this.scratch.resizing_children=this.model.allChildren(),this.scratch.original_child_scales=o.map(this.scratch.resizing_children,function(e){return e.get("scale")})),this.scratch.drag_origin=this.diagram.diagramCoordsFromEvent(e),this.scratch.starting_height=this.$el.height(),this.scratch.starting_width=this.$el.width(),this.scratch.starting_scale=this.model.scale(),this.scratch.drag_origin_position_lr=this.model.isRoot()||!this.model.children().length&&1==this.model.ltr()||this.model.children().length&&this.model.ltr()==-1?"left":"right",this.scratch.drag_origin_position_tb=this.model.children().length&&this.model.ttb()==-1?"bottom":"top",this.$el.on("mousemove touchmove pointermove",this.updateResize),this.$el.closest(".diagram-editor").on("mousemove touchmove pointermove",this.updateResize),window.addEventListener("mouseup",this.endResize,{capture:!0,passive:!0}),window.addEventListener("touchend",this.endResize,{capture:!0,passive:!0}),window.addEventListener("pointerup",this.endResize,{capture:!0,passive:!0}),this.isResizing=!0,this.$el.addClass("resizing")},updateResize:function(e){if(this.isResizing){var t=this.diagram.diagramCoordsFromEvent(e);this.handlePause();var n=this.scratch,i=t.x-n.drag_origin.x,o=t.y-n.drag_origin.y,r=i*this.resizeScalar(),s=o*this.resizeScalar();"right"==n.drag_origin_position_lr&&(r=-r),"bottom"==n.drag_origin_position_tb&&(s=-s),Math.abs(r)<5&&(r=0);var l=4,a=2;s>=0?s<l?s=0:s-=l:s>-a?s=0:s+=a,this.model.children().length||(s*=2);var u=s,h=14;u>=0&&(u<h?u=0:u-=h);var p=(n.starting_height+u)/n.starting_height,f=Math.max(c,Math.min(d,n.starting_scale*p));if(e.ctrlKey&&(f-=f%.4),n.resizing_children){var g=w(f,this.model.level());n.resizing_children.forEach(function(e){e.set("scale",_(g,e.level()))})}var m=Math.max(1,n.starting_height+s),v=Math.max(1,n.starting_width+r);return this.$el.height(m),this.$el.width(v),this.model.set("width",Math.round(v)),this.setScale(f),this.model.set("scale",f),e.stopPropagation(),!1}},endResize:function(){this.isResizing&&(this.$el.off("mousemove touchmove pointermove",this.updateResize),this.$el.closest(".diagram-editor").off("mousemove touchmove pointermove",this.updateResize),window.removeEventListener("mouseup",this.endResize,{capture:!0,passive:!0}),window.removeEventListener("touchend",this.endResize,{capture:!0,passive:!0}),window.removeEventListener("pointerup",this.endResize,{capture:!0,passive:!0}),this.isResizing=!1,this.$el.removeClass("resizing"),getCoggleUser().getActions().unique("editing-resize"),this.focus())},iconSearch:function(){var e=this.$el.find("textarea"),t=e.getInputSelection(),n=t.end,o=e[0].value;e[0].value=o.substring(0,n)+":"+o.substring(n,o.length),i(e[0],n+1),setTimeout(function(){e.textcomplete&&e.textcomplete("trigger")},10)}});E.activeEdit=function(){return E._active_edit},n.exports=E}),define("controllers/NodeNavigationController",["require","exports","module","underscore"],function(e,t,n){var i=e("underscore"),o=function(e,t){return t.access_time-e.access_time},r=function(e,t){return t.model.y()-e.model.y()},s=function(e){return 0===e.model.text().length&&!e.model.joinedNode()},l=function(e){return function(t){return t.model.pos().y>e}},a=function(e){this.node=e};a.prototype.activateEmptyChildOrCreateNew=function(e){var t,n=i.filter(this.node.children(),s).sort(o);if(n.length)n[0].model.set("text",e),t=n[0].editNode();else{var r=this.node.addChild({text:e},void 0);t=r.editNode()}t&&e&&t.autogrow()},a.prototype.activateEmptySiblingOrCreateNew=function(e,t){if(this.node.model.isRoot()){if(!this.node.model.isTitle()){var n=this.node.diagram.createRoot({pos:{x:this.node.model.x(),y:this.node.boundingBox().y2+40},text:e});n.editNode()}}else{var a,u=i.filter(this.node.siblings(),s);if(t?(u=i.filter(u,l(this.node.model.pos().y)),u.sort(r).reverse()):u.sort(o),u.length)u[0].model.set("text",e),a=u[0].editNode();else{var c;1===this.node.model.level()&&(c=this.node.model.side());var d=this.node.parent().addChild({text:e},c,t);a=d.editNode()}a&&e&&a.autogrow()}},a.prototype.activateMostRecentChildNode=function(){var e=this.node.children();this.node.model.isRoot()&&(e=this.node.children("right")),e.length&&e.sort(o)[0].editNode()},a.prototype.activateParentNode=function(){if(this.node.model.isRoot()){var e=this.node.children("left");e.length&&e.sort(o)[0].editNode();
}else this.node.parent().editNode()},a.prototype.activateSiblingBelow=function(){if(this.node.model.isRoot()){var e=this.node.children("bottom");return void(e.length&&e.sort(o)[0].editNode())}var t=this.node.parent().children();if(i.filter(t,function(e){return e.model.ltr()===this.node.model.ltr()}.bind(this)),t.sort(r),!(t.length<=1)){for(var n=0;n<t.length;n++)if(t[n]==this.node)return void(n-1>=0&&t[n-1].editNode());node.editNode()}},a.prototype.activateSiblingAbove=function(){if(this.node.model.isRoot()){var e=this.node.children("top");return void(e.length&&e.sort(o)[0].editNode())}var t=this.node.parent().children();if(i.filter(t,function(e){return e.model.ltr()===this.node.model.ltr()}.bind(this)),t.sort(r),!(t.length<=1)){for(var n=0;n<t.length;n++)if(t[n]==this.node)return void(n+1<t.length&&t[n+1].editNode());node.editNode()}},a.prototype.remove=function(){if(!this.node.children().length&&!this.node.model.isRoot()){var e=this.node.parent();this.node.deleteNode(),setTimeout(function(){e.editNode()},0)}},a.prototype.attach=function(e){e.once("previous",this.activateParentNode.bind(this)),e.once("next",this.activateMostRecentChildNode.bind(this)),e.once("up",this.activateSiblingAbove.bind(this)),e.once("down",this.activateSiblingBelow.bind(this)),e.once("spawn",this.activateEmptyChildOrCreateNew.bind(this)),e.once("sibling",this.activateEmptySiblingOrCreateNew.bind(this)),e.once("remove",this.remove.bind(this))},n.exports=a}),define("plugins/_.rateLimit",["require","exports","module","underscore"],function(e,t,n){var i=e("underscore");i.rateLimit=function(e,t){var n=t.calls,i=t.every,o=t.onlimit||function(){},r=!1,s=0;return function(){return r||(r=setTimeout(function(){s=0,r=!1},i)),s++,s<=n?e.apply(this,arguments):void o.apply(this,arguments)}}}),define("starc/starc.buttons",["require","exports","module","underscore","utils/trackModifiers","utils/colours","views/PitchView","plugins/_.rateLimit","env"],function(e,t,n){var i=e("underscore"),o=e("utils/trackModifiers"),r=e("utils/colours"),s=e("views/PitchView");e("plugins/_.rateLimit");var l=function(e,t,n){i.bindAll(this,"perform","render","onNodeChange","onModifiersChanged"),this.options=n,this.node=e,this.diagram=t,this.$el=$("<div/>",{class:"starcbutton"}),this.toAddButton(),this.setColour(e.colour()),this.$el.on("tap",this.perform),$(window).on("modifierschanged",this.onModifiersChanged),this.diagram.on("mode",this.render,this),this.node.on("collapsed expanded",this.render,this),this.node.on("change",this.onNodeChange,this),this.render(),this.$el.on("bgdoubletap",function(e){return e.stopPropagation(),!1})};l.prototype.remove=function(){this.$el.off("tap",this.perform),$(window).off("modifierschanged",this.onModifiersChanged),this.diagram.off("mode",this.render),this.node.off(void 0,void 0,this),this.$el.remove()},l.prototype.disable=function(e){this._disabled=!0},l.prototype.enable=function(e){this._disabled=!1},l.prototype.perform=i.rateLimit(function(e){e.gesture||this._disabled||!this.action||(this.action(e),this.render())},{calls:15,every:2e3}),l.prototype.setColour=function(e){this.node&&this.node.isRoot&&this.node.isRoot()&&!this.node.isTitle()?this.$el.css("background-color",r.lighten(e)):this.$el.css("background-color",e)},l.prototype.setAction=function(e){this.action=i.debounce(e,250,!0)},l.prototype.show=function(){this.$el.addClass("active"),this.$el.show()},l.prototype.hide=function(){this.$el.removeClass("active"),this.$el.hide()},l.prototype.setOffset=function(e,t){this.$el.css({top:t,left:e})},l.prototype.setImage=function(t){this.$el.css({"background-image":"url("+e("env").cdn.url+"/img/"+t+")"})},l.prototype.toAddButton=function(){this.setImage("addbutton.svg"),this.$el.removeClass("rotated"),this.action=function(e){if(!this.node.isRoot()||this.node.children().length||this.node.isTitle()||getCoggleUser().isAwesome()){var t=this.diagram.getNodeForId(this.node.id),n=t.addChild(void 0,this.options.side);n.animate(function(){n.editNode()})}else s.MultiRoot();e.stopPropagation()}.bind(this)},l.prototype.toRemoveButton=function(){this.setImage("addbutton.svg"),this.$el.addClass("rotated"),this.action=function(){if(this.options.crosslink)this.options.crosslink.destroy();else{var e=this.diagram.getNodeForId(this.node.id);e.deleteNode()}}.bind(this)},l.prototype.toInsertButton=function(){this.setImage("insertbutton.svg"),this.$el.removeClass("rotated"),this.action=function(){var e=this.diagram.getNodeForId(this.node.id);e.insertNode()}.bind(this)},l.prototype.toSquashButton=function(){this.setImage("squashbutton.svg"),this.$el.removeClass("rotated"),this.action=function(){var e=this.diagram.getNodeForId(this.node.id);e.squashNode()}.bind(this)},l.prototype.toEditButton=function(){this.setImage("editbutton.svg"),this.$el.removeClass("rotated"),this.action=function(e){this.options.crosslink&&this.options.crosslink.edit(),e.stopPropagation()}.bind(this)},l.prototype.toCollapseButton=function(){this.setImage("collapsebutton.svg"),this.$el.removeClass("rotated"),this.action=function(){this.node.collapseChildren(this.options.side)}.bind(this)},l.prototype.toExpandButton=function(){this.setImage("expandbutton.svg"),this.$el.removeClass("rotated"),this.action=function(){this.node.expandChildren(this.options.side,o.shift_key_pressed)}.bind(this)},l.prototype.onModifiersChanged=function(e,t){this.render()},l.prototype.onNodeChange=function(e){var t=e.changedAttributes();(!t.hasOwnProperty("pos")||i.keys(t).length>1)&&this.render()},l.prototype.render=function(){this.setColour(this.node.colour());var e=o.alt_key_pressed,t=o.shift_key_pressed,n=o.meta_key_pressed,i=o.control_key_pressed;return this.options.crosslink?(e||i?this.toRemoveButton():this.toEditButton(),this.diagram.editingPrevented()?this.hide():this.show()):this.diagram.presentationMode()?(this.node.hiddenChildren(this.options.side).length?this.toExpandButton():this.toCollapseButton(),0===this.node.children().length?this.hide():this.show()):this.diagram.editingPrevented()||this.diagram.historyMode()?this.hide():(this.node.isTitle()?this.toAddButton():this.node.isRoot()?!e||t||n||i?this.toAddButton():this.toRemoveButton():!e||t||n||i?e||!t||n||i?e||t||!n||i?!e&&t&&!n&&i?this.toSquashButton():e||t||n||!i?this.toAddButton():this.toRemoveButton():this.toSquashButton():this.toInsertButton():this.toRemoveButton(),this.show()),this},n.exports=l}),define("starc/starc.crosslink",["require","exports","module","underscore","starc/starc.buttons"],function(e,t,n){var i=e("underscore"),o=e("starc/starc.buttons"),r=.4,s=.8,l="19 13",a="round",u="http://www.w3.org/2000/svg",c="http://www.w3.org/1999/xlink",d=function(e,t,n,o){i.bindAll(this,"render","activate","deactivate","sourceLinkElement","getConnection","getButton","edit","hide","follow"),this.diagram=e,this.from=t,this.to=o,this.link=n||"",o&&($(this.getConnection()).hover(this.activate,this.deactivate),$(this.getConnection()).click(this.follow),this.getButton().$el.hover(this.activate,this.deactivate),this.from.on("change:hidden collapse expand child_added child_removed",this.render,this),this.to.on("change:hidden collapse expand child_added child_removed",this.render,this))};d.prototype.remove=function(){this.getConnection().remove(),this.getTextNode().remove(),this.getButton().remove(),this.from.off(void 0,void 0,this),this.to&&this.to.off(void 0,void 0,this)},d.prototype.render=function(){this.updateConnection(),this.updateTextNode(),this.updateButton(),this.to.hidden()||this.from.hidden()?this.hide():this.show()},d.prototype.sourceLinkElement=function(){if(!this.link)return null;var e=this.diagram.getNodeForId(this.from.id),t=e.getLabel().$el.find('a[href="'+this.link+'"]:not(.callout a)');return t.addClass("diagram-link-origin"),t};var h=function(e,t,n,i){var o,r,s=t.x-e.x,l=t.y-e.y,a=Math.abs(s)>1.5*Math.abs(l)?"wide":"tall";o="wide"==a?r=n===i===-1?-1:n===i===1?1:e.y<0&&t.y<0?-1:e.y>0&&t.y>0?1:Math.abs(e.y)>Math.abs(t.y)?Math.sign(e.y):Math.sign(t.y):e.y<t.y?-(r=-1):-(r=1);var u={type:a,dest_ttb:r,source_ttb:o};return u};d.prototype.sourcePosForXLink=function(e,t){var n,i=this.sourceLinkElement(),o=this.diagram.getNodeForId(this.from.id),r=o.boundingBox(),s=h(this.from.absolutePosition(),e,this.from.ttb(),t),l=.8*this.from.lineWeight()*s.source_ttb,a=(s.source_ttb<0?r.y:r.y2)+l,u=r.x2-r.x;if(i&&i.length){var c=this.diagram.getScale(),d=o.getLabel().$el.offset(),p=i.offset();n=this.from.absolutePosition().x+(p.left-d.left+i.width()/2)/c}else n=r.x+u/2;return{x:n,y:a}},d.prototype.destPosForXLink=function(){var e=this.to,t=this.from,n=this.diagram.getNodeForId(e.id);if(!n)return{x:0,y:0};var i=h(t.absolutePosition(),e.absolutePosition(),t.ttb(),e.ttb()),o=.8*e.lineWeight()*i.dest_ttb,r=n.boundingBox(),s=r.x+r.width/2,l=(i.dest_ttb<0?r.y:r.y2)+o;return{x:s,y:l}};var p=function(e,t,n,i,o,r){e.x>t.x&&(e=[t,t=e][0],o=[r,r=o][0],n=[i,i=n][0]);var s=h(e,t,n,i),l=o.x,a=o.y,u=r.x,c=r.y,d=null;return d="wide"==s.type?Math.max((Math.min(.6*Math.abs(l-u),2600)+Math.abs(a-c))/3,8):Math.max((Math.min(.6*Math.abs(l-u),2600)+Math.abs(a-c))/3,8),{x0:l,y0:a,xc0:l,yc0:a+d*s.source_ttb,xc1:u,yc1:c+d*s.dest_ttb,x1:u,y1:c}};d.prototype.pathForXLink=function(e,t,n){var i=this.from.absolutePosition(),o=this.sourcePosForXLink(e,n),r=this.from.ttb(),s=p(i,e,r,n,o,t);return["M",s.x0.toFixed(4),s.y0.toFixed(4),"C",s.xc0.toFixed(4),s.yc0.toFixed(4),s.xc1.toFixed(4),s.yc1.toFixed(4),s.x1.toFixed(4),s.y1.toFixed(4)].join(" ")},d.prototype.getConnection=function(){return this.connection||(this.connection=document.createElementNS(u,"path"),this.connection.setAttribute("id",this.link.slice(1)+"-"+this.from.id),this.diagram.getCrosslinkGroup().appendChild(this.connection)),this.connection},d.prototype.updateConnection=function(){var e=this.to.absolutePosition(),t=this.destPosForXLink();this.drawTo(e,t,this.to.ttb())},d.prototype.boundingBox=function(){var e=this.to.absolutePosition(),t=this.from.absolutePosition(),n=this.destPosForXLink(),i=this.to.ttb(),o=this.from.ttb(),r=this.sourcePosForXLink(e,i),s=p(t,e,o,i,r,n),l=[s.x0,s.xc0,s.xc1,s.x1],a=[s.y0,s.yc0,s.yc1,s.y1];return{x:Math.min.apply(null,l),y:Math.min.apply(null,a),x2:Math.max.apply(null,l),y2:Math.max.apply(null,a)}},d.prototype.drawTo=function(e,t,n){void 0===t&&(t=e),void 0===n&&(n=e.y>this.from.y()?1:-1);var i=this.getConnection();i.setAttribute("stroke",this.from.colour()),i.setAttribute("stroke-width",.7*this.from.lineWeight()),i.setAttribute("stroke-dasharray",l),i.setAttribute("stroke-linecap",a),i.setAttribute("fill","none"),i.setAttribute("cursor","pointer"),i.setAttribute("d",this.pathForXLink(e,t,n))},d.prototype.getTextNode=function(){return this.text||(this.text=document.createElementNS(u,"text"),this.text.text_path=document.createElementNS(u,"textPath"),$(this.text).append(this.text.text_path),this.diagram.getCrosslinkGroup().appendChild(this.text)),$(this.text)},d.prototype.updateTextNode=function(){var e=this.getTextNode()[0],t=this.getTextNode()[0].text_path,n=this.sourceLinkElement(),i=n&&n.text()||"";e.setAttributeNS(null,"text-anchor","middle"),e.setAttributeNS(null,"dy","-7px"),t.setAttributeNS(c,"xlink:href","#"+this.getConnection().id),t.setAttributeNS(null,"startOffset","50%"),t.setAttributeNS(null,"pointer-events","visiblePainted"),t.textContent=i.replace(/^#$/,""),$(e).css({fill:this.from.colour(),cursor:"default"})},d.prototype.getButton=function(){return this.button||(this.button=new o(this.from,this.diagram,{crosslink:this}),this.diagram.nodesContainer().append(this.button.render().$el),this.button.$el.hover(this.activate,this.deactivate),this.button.$el.css({opacity:0})),this.button},d.prototype.updateButton=function(){var e=this.sourcePosForXLink(this.to.absolutePosition(),this.to.ttb());this.getButton().setOffset(e.x-2,e.y)},d.prototype.follow=function(e){var t=this.diagram.diagramCoordsFromEvent(e),n=(t.x-this.from.x())*(t.x-this.from.x())+(t.y-this.from.y())*(t.y-this.from.y()),i=(t.x-this.to.x())*(t.x-this.to.x())+(t.y-this.to.y())*(t.y-this.to.y());n<i?this.diagram.scrollTo(this.to):this.diagram.scrollTo(this.from)},d.prototype.edit=function(){var e=this.from.text(),t=this.sourceLinkElement(),n=$(t).data("marked")||0,i={start:n,end:n+1},o=/^<[^>]*>|^\[[^\]]*\]\([^)]*\)|^\[[^\]]*\]/.exec(e.substring(n));o&&(i.end=n+o[0].length);var r=/^\[([^\]]*)\]/.exec(o);r&&(i.start+=1,i.end=i.start+r[1].length);var s=this.diagram.getNodeForId(this.from.id);s.editNode(i)},d.prototype.hide=function(){this.hidden=!0,this.getConnection().setAttribute("stroke-opacity",0),this.getTextNode().css({opacity:0}),this.getButton().hide()},d.prototype.show=function(){this.to.hidden()||this.from.hidden()||(this.hidden=!1,this.getConnection().setAttribute("stroke-opacity",r),this.getTextNode().css({opacity:r}),this.diagram.editingPrevented()||this.getButton().show())},d.prototype.activate=function(){this.hidden||(this.getConnection().setAttribute("stroke-opacity",s),this.getTextNode().css({opacity:s}),this.getButton().$el.css({opacity:s}))},d.prototype.deactivate=function(){this.hidden||(this.getConnection().setAttribute("stroke-opacity",r),this.getTextNode().css({opacity:r}),this.getButton().$el.css({opacity:0}))},d.prototype.destroy=function(){var e=this.from.text(),t=this.sourceLinkElement();if(t){var n=$(t).data("marked")||0,i=/^<[^>]*>|^\[[^\]]*\]\([^)]*\)|^\[[^\]]*\]/.exec(e.substring(n));if(!i)return void console.log("failed to find element to remove!",t,n,e);this.from.set("text",e.substr(0,n)+e.substr(n+i[0].length)),this.from.deltarize({text:this.from.text()})}},n.exports=d}),define("starc/starc.arrange",["require","exports","module","underscore","async"],function(e,t,n){function i(e){var t=3*d;return e.children().length&&(t=h*e.boundingBox().width),t+=e.model.parent().isRoot()?d+e.parent().boundingBox().width/2:e.subtreeSize(void 0,d,p).height*f}function o(e,t){var n=e.boundingBox(),i=t.boundingBox();return n.y+n.height/2-(i.y+i.height/2)}function r(e){return e.model.relY()<=0}function s(e){return e.model.relY()>0}function l(e,t,n){if(t&&0!==t.length){var l=n&&!e.model.isRoot(),a=!l,c=0;c=a?u.reduce(u.map(t,i),g,d):d;var h,f=n?-1:1,m=Math.sign(t[0].model.relX()),v=function(e,t){t||(t=e.subtreeSize(void 0,d,p));var n=0;return n=m<0?Math.abs(t.x2-(e.boundingBox().x2-e.model.x())):Math.abs(t.x-(e.boundingBox().x-e.model.x())),f*(c+n)};if(1===t.length&&a)return void t[0].model.set("pos",{x:v(t[0]),y:0});var y=0;u.each(t,function(e){h=e.subtreeSize(void 0,d,p),y-=h.height+p}),y/=2,t.sort(o),u.each(t,function(e){var t=e.subtreeSize(void 0,d,p);e.model.set("pos",{x:v(e,t),y:y+(t.height+p)/2}),y+=t.height+p});var b=u.filter(t,s),w=u.filter(t,r),_=0,E=0;l?(_=e.boundingBox().y2-e.model.y()+p,E=e.boundingBox().y-e.model.y()-p):(b.length?(h=b[0].subtreeSize(void 0,d,p),E=h.y-p/2):(h=w[0].subtreeSize(void 0,d,p),E=h.y2+p/2),_=E+p+.01);var C=null,F=null;if(u.each(b,function(e){h=e.subtreeSize(void 0,d,p),e.model.set("pos",{x:e.model.pos().x,y:_+p/2-h.y}),(null===C||e.model.pos().y+h.y<C)&&(C=e.model.pos().y+h.y),(null===F||e.model.pos().y+h.y2>F)&&(F=e.model.pos().y+h.y2),_+=h.height+p}),u.each(w.reverse(),function(e){h=e.subtreeSize(void 0,d,p),e.model.set("pos",{x:e.model.pos().x,y:E+p/2-h.y2}),(null===C||e.model.pos().y+h.y<C)&&(C=e.model.pos().y+h.y),(null===F||e.model.pos().y+h.y2>F)&&(F=e.model.pos().y+h.y2),E-=h.height+p}),a){var A=0,x=(-C-F)/2;A=x>=0?w.length?Math.min(Math.max(0,-w[0].model.pos().y),x):x:b.length?Math.max(Math.min(0,-(b[0].model.pos().y-.01)),x):x,u.each(t,function(e){e.model.set("pos",{x:e.model.pos().x,y:e.model.pos().y+A})})}}}function a(e,t){var n=u.filter(e.children(),function(e){return!e.model.joinedNode()}),i=u.filter(n,function(t){return t.model.ltr()===e.model.ltr()}),o=u.difference(n,i);c.eachLimit(e.children(),10,function(e,t){a(e,t)},function(){setTimeout(function(){l(e,i,!1),l(e,o,!0),t()},5)})}var u=e("underscore"),c=e("async"),d=18,h=1.22,p=15,f=.02,g=function(e,t){return Math.max(e,t)};n.exports=a}),define("starc/starc.layout",["require","exports","module","underscore"],function(e,t,n){function i(e,t,n,i,o){var r=h(t.children())||m;r=Math.min(Math.max(r,f),g);var s=u(e,t.children(n),2*r,o),l=0;if(s.length){s=s.map(function(e){return e-t.y()}),s.sort(function(e,t){return-(a(t)-a(e))}),l=s[0];for(var c=0;c<s.length;c++){var d=e.collides(t.x()+t.ltr()*i(s[c]),t.y()+s[c],180*t.ltr(),a(r));if(!d){l=s[c];break}}}return{x:i(),y:l}}var o=e("underscore"),r=function(e){return e*Math.PI/180},s=250,l=(r(50),function(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}),a=Math.abs,u=function(e,t,n,i){var o=t.map(function(t){var n=e.getNodeForId(t.id);if(!n)return console.warn("no view for node",t.id);var i=n.boundingBox();return i?{max:i.y2,min:i.y}:console.warn("failed to get bbox for node",t.id)}),r=[];return o.length&&(o.sort(function(e,t){return t.max-e.max}),r.push(o[0].max+n/2),i||(o.sort(function(e,t){return e.min-t.min}),r.push(o[0].min-n/2))),r},c=function(e){return o.reduce(e,function(e,t){return e+t},0)},d=function(e){return o.filter(e,function(e){return"undefined"!=typeof e})},h=function(e){function t(e){var t=o.map(e,function(e){return e.y()});return t.sort(function(e,t){return e-t}),t.length>1?(t[t.length-1]-t[0])/(t.length-1):void 0}var n=o.filter(e,function(e){return e.ltr()>0}),i=o.filter(e,function(e){return e.ltr()<0}),r=d([t(n),t(i)]);return r.length?c(r)/r.length:void 0},p=function(e){function t(e){var t=d(o.map(e.children(),function(e){var t=e.pos().x;return t>0?t:void 0}));return t.length>0?c(t)/t.length:void 0}var n=d(o.map(e,t));return n.length>0?c(n)/n.length:void 0},f=16,g=100,m=20,v=360,y=90,b=110,w=function(e){var t=e.diagram,n=e.node;return function(e,o){var r=n.getMedianRelX(e)*n.ltr();if(!r){var s=p(n.parent().children(e))||b;s=Math.min(Math.max(s,y),v),r=s}var l=function(){return r},a=i(t,n,e,l,o);return a}},_=function(e,t){var n=Math.atan2(t.y-e.y,t.x-e.x),i=n*(180/Math.PI),o=i<0?i+360:i;return o},E=function(e,t,n){for(;e<0&&"number"==typeof n;)e+=360;for(;n<e&&"number"==typeof n;)n+=360;for(;t<e&&"number"==typeof t;)t+=360;return t>=e&&t<=n},C=function(e,t){for(;"number"==typeof e&&"number"==typeof t&&t<e;)t+=360;var n=t-e;return n>=0?n%360:-(-n%360)},F=function(e,t){return Math.min(Math.abs(C(e,t)),Math.abs(C(t,e)))},A=function(e){var t=(e.diagram.collides.bind(e.diagram),e.node),n=function(e,n,i){var r=t.children(),a=null,u=null,c=0;"top"===e?c=270:"bottom"===e?c=90:"left"===e&&(c=180);var d,h=(t.y(),[]),p=0,f=0,g=0;for(d=0;d<r.length;d++){var m=r[d];m!==i&&(f=l({x:t.x(),y:t.y()},{x:m.x(),y:m.y()}),g=_({x:t.x(),y:t.y()},{x:m.x(),y:m.y()}),h.push({angle:g,radius:f,child:m}),p+=f)}var v,y;if(h.length&&n&&("left"===e||"right"===e)){console.log("seq layout "+e),a=p/h.length;var b=null;for(v=c-45,y=c+45,d=0;d<h.length;d++)E(v,h[d].angle,y)&&(null===b||h[d].child.y()>b.child.y())&&(b=h[d]);u=b?b.angle+("right"===e?10:-10):c,console.log("seq layout lowest"+b,u)}else if(h.length){a=p/h.length,h.sort(function(e,t){return e.angle-t.angle});var w=[];for(w.push({mid:(h[h.length-1].angle-360+h[0].angle)/2,start:h[h.length-1].angle,end:h[0].angle}),d=1;d<h.length;d++)w.push({mid:(h[d-1].angle+h[d].angle)/2,start:h[d-1].angle,end:h[d].angle});v=c-45,y=c+45,w=o.filter(w,function(e){return!(!E(v,e.start,y)&&!E(v,e.end,y))});var A=1e-4;for(d=0;d<w.length;d++)E(v,w[d].start,y)&&!E(v,w[d].end,y)?(w[d].end=y-A,E(v,w[d].mid,y)||(w[d].mid=y-A)):E(v,w[d].end,y)&&!E(v,w[d].start,y)?(w[d].start=v+A,E(v,w[d].mid,y)||(w[d].mid=v+A)):E(v,w[d].start,y)&&E(v,w[d].end,y)&&!E(v,w[d].mid,y)&&(w.push({mid:v+A,start:v+A,end:w[d].end}),w[d].mid=y-A,w[d].end=y-A);w.sort(function(e,t){var n=Math.abs(C(t.start,t.end)),i=Math.abs(C(e.start,e.end)),o=n*(1+Math.min(F(t.mid,90),F(t.mid,270))/45),r=i*(1+Math.min(F(e.mid,90),F(e.mid,270))/45);return o-r}),u=w.length?w[0].mid:c}else a=s,u=c;var x={x:a*Math.cos(u*(Math.PI/180)),y:a*Math.sin(u*(Math.PI/180))};return Math.abs(x.x)<.1&&(x.x=1),x};return n};n.exports.root=A,n.exports.node=w}),define("starc/starc.connection",["require","exports","module","underscore"],function(e,t,n){function i(e){return 4.54688*e/6}var o=e("underscore"),r="http://www.w3.org/2000/svg",s=function(e){o.bindAll(this,"updateHideState","animate","updateLinePosition","updateLineColour","remove","getLineGroup","getContainerGroup","attachLineGroup"),this.diagram=e.diagram;var t=this.from=e.model.parent(),n=this.to=e.model;t&&(t.on("collapsed expanded",this.updateHideState,this),t.on("change",function(){var e=this.from.changedAttributes();e.hasOwnProperty("parent_id")&&this.attachLineGroup(),(e.hasOwnProperty("parent_id")||e.hasOwnProperty("pos"))&&this.updateLinePosition(),e.hasOwnProperty("hidden")&&this.updateHideState(),t.isRoot()&&(e.hasOwnProperty("text")||e.hasOwnProperty("scale")||e.hasOwnProperty("width"))&&this.updateLinePosition()},this),t.on("path_changed",function(){this.updateLineTransform()},this),n.on("change:pos change:join change:line_weight change:line_style",this.updateLinePosition,this),t.on("attachment_moved",this.updateLinePosition,this),this.updateLinePosition(),this.attachLineGroup(),n.on("change:colour",this.updateLineColour,this),this.updateLineColour())};s.prototype.remove=function(){this.from&&this.from.off(void 0,void 0,this),this.to.off(void 0,void 0,this),this.removeArcTip(),this.removeArcRoot(),this.getLine().remove(),this.getLineGroup().remove()},s.prototype.setOpacity=function(e){this.opacity!=e&&this.getLineGroup().setAttribute("opacity",e),this.opacity=e},s.prototype.animate=function(e){var t=100,n=this.getLine(),i=this.getArcTip(),o=Math.abs(this.from.x()-this.to.x())+Math.abs(this.from.y()-this.to.y());$({x:0}).animate({x:1},{step:function(e){i.setAttribute("opacity",0),n.setAttribute("stroke-dasharray",o*e+" "+5*o)}.bind(this),duration:t,easing:"swing",complete:function(){n.setAttribute("stroke-dasharray",99999),i.setAttribute("opacity",1),e&&e()}.bind(this)})},s.prototype.updateLinePosition=function(){var e=this.to.joinedNode();if(!e){var t=this.diagram.getNodeForId(this.to.id);t&&(e=t.ephemerallyJoinedNode())}var n=null;e&&(n=e.id);var i={to:this.to.pos(),join:n,weight:this.to.lineWeight(),style:this.to.lineStyle(),from:{width:this.from.isRoot()?this.from.width():"unused",scale:this.from.isRoot()?this.from.scale():"unused",text:this.from.isRoot()?this.from.text():"unused",height:this.from.isRoot()?this.diagram.getNodeForId(this.from.id).getSize().h:"unused"}};if(!o.isEqual(i,this._relativeBounds)){if(this.getLine().setAttribute("stroke-width",this.to.lineWeight()),this.getLine().setAttribute("fill","none"),this.getLine().setAttribute("d",u(this.diagram,this.from,this.to)),"dashed"==this.to.lineStyle()){var r=this.getLine().getTotalLength(),s=19,l=13,a=r/(s+l),c=Math.floor(a),d=a-c,h=d*(l+s),p=(h+l)/c;this._dasharray=[s+p,l].join(", "),this.getLine().setAttribute("stroke-dasharray",this._dasharray)}else this._dasharray=null,this.getLine().removeAttribute("stroke-dasharray");this.replaceArc(),this._relativeBounds=i}this.updateLineTransform()},s.prototype.updateLineTransform=function(){if(this.from.isRoot())this.getLineGroup().setAttribute("transform","scale("+this.to.ltr()+",1) translate(0, 0)");else if(1==this.from.level())this.getLineGroup().setAttribute("transform","scale(1, 1) translate("+this.from.ltr()*this.from.relX()+","+this.from.relY()+")");else{var e=this.from.parent().ltr()*this.from.ltr();this.getLineGroup().setAttribute("transform","scale("+e+",1) translate("+e*this.from.pos().x+","+this.from.relY()+")")}},s.prototype.updateLineColour=function(){this.getLine().setAttribute("stroke",this.to.colour()),this.getArcTip().setAttribute("fill",this.to.colour()),this.getArcRoot().setAttribute("fill",this.to.colour())},s.prototype.updateHideState=function(){this.to.hidden()&&this.from.hidden()?this.hide():this.to.hidden()&&!this.from.hidden()?this.collapse():this.show()},s.prototype.getLine=function(){return this.line||(this.line=document.createElementNS(r,"path"),this.getLineGroup().appendChild(this.line)),this.line},s.prototype.getContainerGroup=function(){if(this.from.isRoot())return this.diagram.getNodeForId(this.from.id).getSVGGroup();var e=this.diagram.getNodeForId(this.from.id);return e.getConnection().getLineGroup()},s.prototype.attachLineGroup=function(){this.getContainerGroup().appendChild(this.getLineGroup())},s.prototype.getLineGroup=function(){return this.line_group||(this.line_group=document.createElementNS(r,"g"),this.line_group.setAttribute("data-nodeid",this.to.id),this.line_group.setAttribute("class","node-connection")),this.line_group};var l=function(e,t,n){var o,r=3,s=-(i(n.lineWeight())+r),l=n.joinedNode();if(!l){var a=e.getNodeForId(n.id);a&&(l=a.ephemerallyJoinedNode())}var u={xf:0,yf:0,xf_offset:0,yf_offset:0,xt:0,yt:0,reverses:!1};if(t.isRoot()){var c=e.getNodeForId(t.id),d=n.side(),h=c.getSize().w/2+6,p=c.getSize().h/2+10;"top"===d||"bottom"===d?(u.xf=0,u.yf=(p+2*r-i(n.lineWeight()))*n.ttb(),u.xf_offset=0,u.yf_offset=(i(n.lineWeight())-1)*n.ttb()):(u.xf=h+2*r-i(n.lineWeight()),u.yf=0,u.xf_offset=i(n.lineWeight())-1,u.yf_offset=0),l&&l.isRoot()?(u.xt=(l.x()-t.x())*n.ltr()-8,u.yt=l.y()-t.y(),u.reverses=!1):l?(o=l.ltr()!==n.ltr(),u.xt=Math.abs(l.x()-t.x())+s*(o?-1:1),u.yt=l.y()-t.y(),u.reverses=o):(u.xt=Math.abs(n.relX())+s,u.yt=n.relY(),u.reverses=!1)}else u.xf=-i(n.lineWeight()),u.yf=0,u.xf_offset=i(n.lineWeight())-1,u.yf_offset=0,l&&l.isRoot()?(u.xt=(l.x()-t.x())*t.ltr()-8*n.ltr(),u.yt=l.y()-t.y(),u.reverses=l.x()<t.x()!=t.ltr()<0):l?(o=l.ltr()!==t.ltr(),u.xt=(l.x()-t.x())*t.ltr()+s*(o?-1:1),u.yt=l.y()-t.y(),u.reverses=o):(o=n.ltr()!==t.ltr(),u.xt=Math.abs(n.relX())*(o?-1:1)+s*(o?-1:1),u.yt=n.relY(),u.reverses=o);return u},a=function(e,t,n){var i=l(e,t,n),o=i.xf+i.xf_offset,r=i.yf+i.yf_offset,s=i.xt,a=i.yt,u=i.reverses,c=n.side(),d=0,h=0;"left"==c||"right"==c?d=u?Math.max(.08*Math.abs(r-a)+40+Math.min(.1*Math.abs(o-s),400),16):Math.max(.08*Math.abs(r-a)+Math.min(.7*Math.abs(o-s),600),16):h=Math.max((Math.abs(o-s)+Math.min(.6*Math.abs(r-a),1200))/2,8)*n.ttb();var p=-Math.max((Math.abs(o-s)+Math.min(.6*Math.abs(r-a),1200))/2,8);u&&(p=-p);var f=n.joinedNode(),g=e.getNodeForId(n.id);g&&(f=g.ephemerallyJoinedNode()||f),f&&(p*=f.isRoot()?.4:1.5);var m=o+d,v=r+h,y=s+p;return{xf:o,yf:r,cxf:m,cyf:v,cxt:y,xt:s,yt:a}},u=function(e,t,n){var i=a(e,t,n);return["M",i.xf.toFixed(4),i.yf.toFixed(4),"C",i.cxf.toFixed(4),i.cyf.toFixed(4),i.cxt.toFixed(4),i.yt.toFixed(4),i.xt.toFixed(4),i.yt.toFixed(4)].join(" ")};s.prototype.boundingBox=function(){var e=a(this.diagram,this.from,this.to),t=[e.xf,e.cxf,e.cxt,e.xt],n=[e.yf,e.cyf,e.yt],i=this.from.x(),o=this.from.y();return{x:i+Math.min.apply(null,t),y:o+Math.min.apply(null,n),x2:i+Math.max.apply(null,t),y2:o+Math.max.apply(null,n)}},s.prototype.arcRootItem=function(e){var t=i(e),n=0,o=n+t,s=-e/2,l=e/2,a="M "+n+" "+s+" "+o+" 0 "+n+" "+l+" "+o+" "+l+" "+o+" "+s+" z",u=document.createElementNS(r,"path");return u.setAttribute("d",a),u},s.prototype.verticalArcRootItem=function(e,t){var n=i(t)*e,o=-t/2,s=t/2,l=0,a=n,u="M "+o+" "+l+" 0 "+n+" "+s+" "+l+" "+s+" "+a+" "+o+" "+a+" z",c=document.createElementNS(r,"path");return c.setAttribute("d",u),c},s.prototype.arcTipItem=function(e){var t="M -0.1 "+-e/2+" 0.1 "+-e/2+" "+.75811*e+" 0 0.1 "+e/2+" -0.1 "+e/2+" "+-.75811*e+" 0 z",n=document.createElementNS(r,"path");return n.setAttribute("d",t),n},s.prototype.createArcRoot=function(){var e=null,t=l(this.diagram,this.from,this.to),n="top"==this.to.side()||"bottom"==this.to.side();return e=n?this.verticalArcRootItem(this.to.ttb(),this.to.lineWeight()):this.arcRootItem(this.to.lineWeight()),e.setAttribute("transform","translate("+t.xf+","+t.yf+")"),e.setAttribute("fill",this.to.colour()),e.setAttribute("stroke","none"),this.arc_root=e,this.diagram.presentationMode()&&this.from.get("hidden")&&this.to.get("hidden")&&$(e).hide(),e},s.prototype.getArcRoot=function(){return this.arc_root||this.getLineGroup().appendChild(this.createArcRoot()),this.arc_root},s.prototype.removeArcRoot=function(){this.arc_root&&this.arc_root.remove(),this.arc_root=void 0},s.prototype.createArcTip=function(){var e=l(this.diagram,this.from,this.to),t=!this.from.isRoot()&&this.to.ltr()!==this.from.ltr(),n=this.arcTipItem(this.to.lineWeight()-.3);return n.setAttribute("transform","translate("+(e.xt-.1*(t?-1:1))+","+(e.yt+.15)+")"),n.setAttribute("fill",this.to.colour()),n.setAttribute("stroke","none"),this.arc_tip=n,this.diagram.presentationMode()&&this.to.get("hidden")&&$(n).hide(),n},s.prototype.getArcTip=function(){return this.arc_tip||this.getLineGroup().appendChild(this.createArcTip()),this.arc_tip},s.prototype.removeArcTip=function(){this.arc_tip&&this.arc_tip.remove(),this.arc_tip=void 0},s.prototype.replaceArc=function(){this.removeArcTip(),this.removeArcRoot();var e=this.getLineGroup();e.insertBefore(this.createArcTip(),e.firstChild),e.insertBefore(this.createArcRoot(),e.firstChild)},s.prototype.collapse=function(){$(this.getArcRoot()).show(),$(this.getArcTip()).hide(),$(this.getLine()).show();var e=[5,1,4,1,2,1,1,2,1,4,1,8,1,99999];this.getLine().setAttribute("stroke-dasharray",e.join(", ")),this.setOpacity(.6)},s.prototype.show=function(){$(this.getArcRoot()).show(),$(this.getArcTip()).show(),$(this.getLine()).show(),this._dasharray?this.getLine().removeAttribute("stroke-dasharray",this._dasharray):this.getLine().removeAttribute("stroke-dasharray"),this.setOpacity(1)},s.prototype.hide=function(){$(this.getArcRoot()).hide(),$(this.getArcTip()).hide(),$(this.getLine()).hide()},n.exports=s}),define("starc/starc.node",["require","exports","module","underscore","views/NodeTextView","views/NodeEditView","controllers/NodeNavigationController","starc/starc.crosslink","starc/starc.arrange","utils/trackModifiers","views/PitchView","starc/starc.layout","utils/colours","starc/starc.connection","plugins/jquery.queryString","env"],function(e,t,n){function i(e){var t=e.clone();return t.find(".callout").remove(),t.find("img").replaceWith(function(){return $(this).attr("alt")||$(this).attr("title")}),t.text()}var o=e("underscore"),r=e("views/NodeTextView"),s=e("views/NodeEditView"),l=e("controllers/NodeNavigationController"),a=e("starc/starc.crosslink"),u=e("starc/starc.arrange"),c=e("utils/trackModifiers"),d=e("views/PitchView"),h=e("starc/starc.layout"),p=e("utils/colours"),f=e("starc/starc.connection");e("plugins/jquery.queryString");var g="http://www.w3.org/2000/svg",m=60,v=200,y=50,b=$.queryString().print,w=function(e,t,n){var i=e.x-t.x,o=e.y-t.y;return i*i+o*o>n*n},_=function(e){if(!e.length)return!1;var t=[];o.each(e,function(e){var n=/^\s*[*-]?\s*([0-9]+)(?:\.|\s|$)/.exec(e.text());n&&t.push(n[1])}),t.sort();for(var n=0,i=0;i<t.length-1;i++)parseInt(t[i])+1===parseInt(t[i+1])&&(n+=1);return t.length>=.5*e.length&&n>=.7*(t.length-2)},E=function(e,t,n){n=n||0;var i=Math.max(0,e/2-n-4.375);return"M -"+(e/2-n)+",-"+(6.875+t/2-n)+" a 2.5 2.5 0 0 0 -2.5 2.5 l 0,"+(t/2-n)+" -6.25,4.375 6.25,4.375 0,"+(t/2-n)+" a 2.5 2.5 0 0 0 2.5 2.5 l "+i+",0 4.375,6.25 4.375,-6.25 "+i+",0 a 2.5 2.5 0 0 0 2.5 -2.5 l 0,-"+(t/2-n)+" 6.25,-4.375 -6.25,-4.375 0,-"+(t/2-n)+" a 2.5 2.5 0 0 0 -2.5 -2.5 l -"+i+",0 -4.375,-6.25 -4.375,6.25 z"},C=function(e,t){o.bindAll(this,"getLabel","crosslinkFor","updateCrosslinks","destroyCrosslink","invalidateSize","editNode","updateFontSize","getSize","getSVGGroup","onImgLoad"),this.model=t,this.diagram=e,this.crosslinks=null,this.connection=null,this._move_join_to=null,t.on("change",this.onChange,this),t.on("child_added child_removed",this.onChildAddRm,this),t.on("path_changed",this.updateFontSize,this),t.on("destroy",this.remove,this),this.getLabel().$el[0].addEventListener("load",this.onImgLoad,!0),this.updateFontSize(),this.getConnection(),this.diagram.presentationMode()&&this.updateHideState(),this.model.isRoot()&&this.updateRootPosition()};o.extend(C.prototype,Backbone.Events),C.prototype.onImgLoad=function(){this.invalidateSize(),this.render(),this.model.trigger("attachment_moved")},C.prototype.onChange=function(){var e=this.model.changedAttributes();if((e.hasOwnProperty("text")||e.hasOwnProperty("scale")||e.hasOwnProperty("width"))&&this.invalidateSize(),
e.hasOwnProperty("parent_id")){var t="root parent"===e.parent_id,n="root parent"===this.model.previous("parent_id");t?this.removeConnection():n&&(this.node&&(this.node.remove(),this.node=null),this.bg_svg&&(this.bg_svg.remove(),this.bg_svg=null),this.group&&(this.group.remove(),this.group=null),this.removeConnection(),this.getConnection(),this.getLabel().updateHtmlPosition())}this.model.isRoot()?(e.hasOwnProperty("pos")&&this.updateRootPosition(),this.render()):(e.hasOwnProperty("parent_id")&&(this.removeConnection(),this.getConnection(),this.getLabel().updateHtmlPosition()),e.hasOwnProperty("hidden")&&this.updateHideState())},C.prototype.onChildAddRm=function(){this.invalidateSize(),this.model.isRoot()&&this.render()},C.prototype.positionForChild=function(){return this.model.isRoot()?h.root({diagram:this.diagram,node:this.model}).apply(this,arguments):h.node({diagram:this.diagram,node:this.model}).apply(this,arguments)},C.prototype.render=function(){if(this.model.isRoot()){var e=this.getNode(),t=this.getSVG(),n=this.getSize(),i=n.w,o=n.h;b?(t.setAttribute("width",i+14),t.setAttribute("height",o+24),t.setAttribute("viewBox",[-(i/2+7),-(o/2+12),i+14,o+24].join(" ")),t.style.margin=-(o/2+12)+"px 0 0 "+-(i/2+7)+"px"):(t.setAttribute("width",i),t.setAttribute("height",o),t.setAttribute("viewBox",[-(i/2),-(o/2),i,o].join(" ")),t.style.margin=-o/2+"px 0 0 "+-i/2+"px");var r=this.model.isTitle(),s=this.model.hasChildren();r||s?(e.removeAttribute("stroke"),e.removeAttribute("stroke-width"),1===this.opacity?e.removeAttribute("opacity"):this.getNode().setAttribute("opacity",this.opacity),e.setAttribute("d",E(n.w,n.h)),r?e.setAttribute("fill",p.desaturate(this.model.colour())):s&&e.setAttribute("fill",p.lighten(this.model.colour()))):(e.setAttribute("d",E(n.w,n.h,1)),e.setAttribute("fill","#fcfcfc"),e.setAttribute("stroke-width","2px"),e.setAttribute("stroke",p.lighten(this.model.colour())))}return this},C.prototype.animate=function(e){this.getLabel().$el.hide(),this.getConnection().animate(function(){this.getLabel().$el.fadeIn(200),e&&e()}.bind(this))},C.prototype.getSize=function(){var e=this.boundingBox(),t={w:e.width+10,h:e.height};return t.w=Math.round(Math.max(80,t.w)),t.h=Math.round(Math.max(15,t.h)),t.w%2&&(t.w+=1),t.h%2&&(t.h+=1),t},C.prototype.getSVGGroup=function(){return this.group||(this.group=document.createElementNS(g,"g"),this.diagram.paper.appendChild(this.group),this.opacity=1),this.group},C.prototype.updateRootPosition=function(){this.getSVGGroup().setAttribute("transform","translate("+this.model.pos().x+","+this.model.pos().y+")")},C.prototype.getSVG=function(){if(this.bg_svg)return this.bg_svg;var e=$('<svg class="rootbackground" height="0" width="0" version="1.1" xmlns="'+g+'" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 0 0"></svg>');return this.bg_svg=e[0],this.getLabel().$el.append(e),this.bg_svg},C.prototype.getNode=function(){if(this.node)return this.node;var e=this.getSVG();return this.node=document.createElementNS(g,"path"),e.appendChild(this.node),this.node.setAttribute("stroke","none"),this.node.setAttribute("cursor","move"),this.node},C.prototype.getConnection=function(){return this.connection||(this.connection=new f(this)),this.connection},C.prototype.removeConnection=function(){this.connection&&this.connection.remove(),this.connection=null},C.prototype.updateHideState=function(){this.model.hidden()?(this.getConnection().hide(),this.getLabel().$el.hide()):(this.getConnection().show(),this.model.joinedNode()||this.getLabel().$el.show())},C.prototype.remove=function(){this.node&&this.node.remove(),this.removeConnection(),this.diagram.model.getNodes().off(void 0,void 0,this),this.model.off(void 0,void 0,this),this.removeAllCrosslinks(),this.bg_svg&&(this.bg_svg.remove(),this.bg_svg=null),this.label&&(this.label.remove(),this.label=null),this.group&&(this.group.remove(),this.group=null),this.wasRemoved=!0},C.prototype.isInViewport=function(e){return this.model.isInRegion(this.diagram.viewportBounds(e))},C.prototype.getLabel=function(){return this.label||(this.label=new r({model:this.model,diagram:this.diagram}),this.label.$el.attr({"data-nodeid":this.model.id}),this.diagram.nodesContainer().append(this.label.render().$el)),this.label},C.prototype.displayedText=function(){return this.model.text()?i(this.label.$el.find(".node-content")).replace(/\s*$/,""):""},C.prototype.updateFontSize=function(){this.getLabel().$el.css({"font-size":this.diagram.textSizeFromLevel(this.model.level())})},C.prototype.newEphemeralCrosslink=function(){return new a(this.diagram,this.model)},C.prototype.targetForCrosslink=function(e,t){var n=this,i=function(i){return i.id!==n.model.id&&Math.abs(i.x()-e)<100&&Math.abs(i.y()-t)<40};return this.diagram.model.getNodes().closest(e,t,i)},C.prototype.createCrosslinkTo=function(e,t){var n=this.targetForCrosslink(e,t);n&&(this.model.set("text",this.model.text()+" [#](#"+n.shortId()+")"),this.model.deltarize({text:this.model.text()}))},C.prototype.crosslinkFor=function(e,t){return this.crosslinks||(this.crosslinks={}),this.crosslinks[t]?this.crosslinks[t]:(this.crosslinks[t]=new a(this.diagram,this.model,t,e),this.crosslinks[t])},C.prototype.deadCrosslinks=function(e){return this.crosslinks?o.mapObject(this.crosslinks,function(t,n){if(e.indexOf(n)===-1)return t}):[]},C.prototype.destroyCrosslink=function(e,t){e&&(e.remove(),delete this.crosslinks[t])},C.prototype.updateCrosslinks=function(){var e=this.model.linksTo(this.getLabel().$el.find(".node-content")),t=o.mapObject(e,this.crosslinkFor);o.values(t).map(function(e){e.render()}),o.mapObject(this.deadCrosslinks(o.keys(e)),this.destroyCrosslink)},C.prototype.removeAllCrosslinks=function(){this.crosslinks&&o.values(this.crosslinks).map(function(e){e.remove()})},C.prototype.colourForNewChild=function(){var e=[];this.diagram.model.getNodes().each(function(t){t&&t.joinedNode&&t.joinedNode()===this.model&&e.push(t.colour())}.bind(this));var t="#000000";return e.length?(e.push(this.model.colour()),t=this.diagram.averageColours(e)):t=this.diagram.randomWalkColour(this.model.colour()),t},C.prototype.addChild=function(e,t,n){e||(e={}),this.model.isRoot()?e.colour||(e.colour=this.diagram.getColour(this.model.children().length)):e.colour||(e.colour=this.colourForNewChild()),e.pos||(e.pos=this.positionForChild(t,n||_(this.model.children()))),e.line_weight||(e.line_weight=this.model.get("line_weight"));var i=this.model.addChild(e),o=this.diagram.getNodeForId(i.id);return this.diagram.growSizeToContent(),this.diagram.trigger("node_added",o),this.model.trigger("node_added",i),o},C.prototype.insertNode=function(){if(this.model.parent()){var e=this.model.ltr()!==this.model.parent().ltr(),t=this.parent().addChild({pos:this.model.pos(),colour:this.model.colour()});return this.model.reparentTo(t.model),e&&this.model.set("pos",{x:-this.model.pos().x,y:this.model.pos().y}),this.model.deltarize({parent_id:this.model.get("parent_id"),pos:this.model.pos()}),setTimeout(function(){t.editNode&&t.editNode()}),this.diagram.trigger("node_inserted",t),t}},C.prototype.squashNode=function(){if(this.model.parent()){var e=this.model.children();if(e.length){e.sort(function(e,t){return Math.abs(e.relY())-Math.abs(t.relY())});var t={x:this.model.pos().x-e[0].pos().x,y:this.model.pos().y-e[0].pos().y};this.model.children().map(function(e){e.reparentTo(this.model.parent()),e.deltarize({parent_id:this.model.get("parent_id"),pos:{x:e.pos().x+t.x,y:e.pos().y+t.y}})}.bind(this))}this.diagram.trigger("node_squashed",this),this.deleteNode()}},C.prototype.editNode=function(e){var t;if(e&&e.start&&e.end&&(t={start:e.start,end:e.end}),!this.diagram.editingPrevented()){this.access_time=new Date;var n,i=s.activeEdit();i&&(n=i.$el.hasClass("has-paused"));var o=new s({model:this.model,inheritPauseState:n,diagram:this.diagram});return o.$el.innerWidth(this.getLabel().$el.find(".node-content").width()),o.$el.innerHeight(this.getLabel().$el.find(".node-content").height()),this.getLabel().$el.addClass("active"),this.getLabel().$el.prepend(o.render().$el),o.focus(),t?o.selectRange(t):o.caretToEnd(),this.getNavigationController().attach(o),o.once("close",function(){this.getLabel().$el.removeClass("active"),this.diagram.trigger("node:editor:closed",this.model),e&&e.deleteEmpty&&(0!==this.model.text().length||this.model.hasChildren()||this.deleteNode())}.bind(this)),i&&i.commit(),this.diagram.trigger("node:editor:opened",this.model),o}},C.prototype.children=function(e){var t=this.model.children(e);return t.map(function(e){return this.diagram.getNodeForId(e.id)}.bind(this))},C.prototype.siblings=function(e){var t=this.model.siblings(e);return t.map(function(e){return this.diagram.getNodeForId(e.id)}.bind(this))},C.prototype.parent=function(){return this.model.isRoot()?null:this.diagram.getNodeForId(this.model.parent().id)},C.prototype.getNavigationController=function(){return this.navigation||(this.navigation=new l(this)),this.navigation},C.prototype.invalidateSize=function(){this._cachedSize=void 0},C.prototype.boundingBox=function(e){if(!this._cachedSize){if(e)return null;this._cachedSize=this.diagram.getSizeOfNode(this.model)}var t=this._cachedSize.w,n=this._cachedSize.h,i=this.model.ttb(),o=this.model.ltr(),r=this.model.children().length,s=this.model.level(),l={x:this.model.x(),y:this.model.y(),x2:null,y2:null,width:null,height:null},a=0,u=0;return 0===s?(a=-.5*t,u=-.5*n):1===o&&0===r?(a=0,u=-.5*n):1===o&&1===i&&r>0?(a=-t,u=0):1===o&&1!==i&&r>0?(a=-t,u=-n):1!==o&&0===r?(a=-t,u=-.5*n):1!==o&&1===i&&r>0?(a=0,u=0):1!==o&&1!==i&&r>0&&(a=0,u=-n),l.x+=a,l.y+=u,l.width=t,l.height=n,l.x2=l.x+l.width,l.y2=l.y+l.height,l},C.prototype.subtreeSize=function(e,t,n){e||(e=this.children());var i=this.childrenSize(e,t,n),o=this.boundingBox(),r=this.model.x(),s=this.model.y(),l={x:Math.min(o.x-r,i.x),y:Math.min(o.y-s,i.y),x2:Math.max(o.x2-r,i.x2),y2:Math.max(o.y2-s,i.y2)};return l.width=l.x2-l.x,l.height=l.y2-l.y,l},C.prototype.childrenSize=function(e,t,n,i){t||(t=32),n||(n=15),e||(e=this.children());var r=this,s=e.map(function(e){if(e.model.joinedNode()&&!i)return null;var o=e.subtreeSize(void 0,t,n),s=e.model.x()-r.model.x(),l=e.model.y()-r.model.y();return o.x+=s,o.y+=l,o.x2+=s,o.y2+=l,o}),l=o.reduce(s,function(e,t){return e?t?{x:Math.min(e.x,t.x),x2:Math.max(e.x2,t.x2),y:Math.min(e.y,t.y),y2:Math.max(e.y2,t.y2)}:e:o.clone(t)},null);return l||(l={x:0,x2:0,y:0,y2:0}),l.width=l.x2-l.x,l.height=l.y2-l.y,l},C.prototype.setColour=function(e,t){this.model.setColour(e),this.model.deltarize({colour:this.model.get("colour")}),t&&this.children().map(function(e){e.setColour(this.colourForNewChild(),t)}.bind(this))},C.prototype.setLineWeight=function(e,t){this.model.setLineWeight(e),this.model.deltarize({line_weight:this.model.get("line_weight")}),t&&this.children().map(function(n){n.setLineWeight(e,t)}.bind(this))},C.prototype.setLineStyle=function(e,t){this.model.setLineStyle(e),this.model.deltarize({line_style:this.model.get("line_style")}),t&&this.children().map(function(n){n.setLineStyle(e,t)}.bind(this))},C.prototype.setOpacity=function(e){this.opacity!==e&&(1===e?(this.getSVGGroup().removeAttribute("opacity"),this.getNode().removeAttribute("opacity")):(this.getSVGGroup().setAttribute("opacity",e),this.getNode().setAttribute("opacity",e)),this.opacity=e)},C.prototype.deleteNode=function(){return(!this.model.isRoot()||1!==this.model.collection.getRoots().length)&&(s.activeEdit()&&s.activeEdit().model===this.model&&s.activeEdit().cancel(),this.children().map(function(e){e.deleteNode()}),this.diagram.trigger("node_deleted",this.model),this.model.trigger("node_deleted",this.model),void this.model.destroy())},C.prototype.arrange=function(){u(this,function(){this.model.depthFirst(function(e){e.deltarize({pos:e.pos()})})}.bind(this))},C.prototype.highlight=function(){setTimeout(function(){this.getLabel().$el.find(".node-content").focus()}.bind(this),0)},C.prototype.setEphemerallyJoinedNode=function(e){this._move_join_to=e},C.prototype.ephemerallyJoinedNode=function(){return this._move_join_to},C.prototype.startMoveSession=function(){if(!this.diagram.editingPrevented()){var e={x:this.model.x(),y:this.model.y()},t=50;this.trigger("movestart");var n=e,i=c.shift_key_pressed||this.model.isRoot(),o=this.model.isRoot()&&!c.shift_key_pressed,r=function(r,s){if(this.model.stillExists()&&!this.diagram.editingPrevented()&&e){var l={x:r,y:s},a=c.control_key_pressed||c.meta_key_pressed;if(a){var u=20;l.x=Math.round(l.x/u)*u,l.y=Math.round(l.y/u)*u}else if(this.model.parent()){var d=this.model.getSiblingMedianRelX(),h=this.model.parent().x()+d;t&&d&&Math.abs(h-l.x)<10&&(t--,l.x=h)}(this.model.isTitle()||this.model.joinedNode())&&(i=!1),this.moveBranchTo(l.x,l.y,i,n,o),this.trigger("move")}};return r.bind(this)}},C.prototype.endMoveSession=function(){this.model.stillExists()&&(this.diagram.editingPrevented()||(this.model.isRoot()||(this.ephemerallyJoinedNode()&&!getCoggleUser().isAwesome()&&(this.setEphemerallyJoinedNode(null),d.show({id:"pitch:rejoin",title:"Join Branches",teaser:e("env").cdn.url+"/img/features/rejoin-branch.gif",message:"Join your branches to show logical connections and create loops. Upgrade to Awesome for even more powerful features!"})),this.ephemerallyJoinedNode()&&this.model.setJoinedNode(this.ephemerallyJoinedNode())),this.model.deltarize({parent_id:this.model.get("parent_id"),pos:this.model.pos(),join:this.model.get("join")}),this.getConnection().setOpacity(1),this.model.isRoot()&&this.setOpacity(1),this.setEphemerallyJoinedNode(null),this.diagram.trigger("node_moved",this),this.trigger("movefinish")))},C.prototype.moveBranchTo=function(e,t,n,i,o){if(!this.diagram.editingPrevented()){if(!(this.model.isRoot()||(this.setEphemerallyJoinedNode(null),n||this.model.joinedNode()||0!==this.model.text().length||this.model.hasChildren()))){var r=function(e){return e!=this.model.parent()&&(!e.joinedNode()&&(e.parent()!=this.model.parent()&&(!(e.isRoot()&&!e.hasChildren())&&e!==this.model)))}.bind(this),s=this.diagram.model.getNodes().closest(e,t,r);if(s){var l=s.distanceTo(e,t);l<30&&(e=s.x(),t=s.y(),this.setEphemerallyJoinedNode(s))}}if(n){var a=o?y:v,u=getCoggleUser().isAwesome(),c=this.diagram.model.getNodes().closest(e,t,function(e){return!e.isDecendedFrom(this.model)&&(!e.joinedNode()&&!(e.isRoot()&&!e.isTitle()&&!e.hasChildren()&&!u))}.bind(this));w({x:e,y:t},i,m)&&(!u&&this.model.hasChildren()||!w({x:e,y:t},c.absolutePosition(),a)?c!==this.model.parent()&&(this.model.reparentTo(c),i.x=e,i.y=t):(this.model.reparentTo(null),i.x=e,i.y=t)),this.model.isRoot()?o&&!this.model.parent()?this.setOpacity(1):this.setOpacity(.2):this.getConnection().setOpacity(.2)}this.model.positionAbsolutely(e,t)}},C.prototype.showDebugBoundingBox=function(){this._bb_debug||(this._bb_debug=$("<div>"),this.diagram.nodesContainer().append(this._bb_debug)),this._bb_debug.css({position:"absolute",left:this.boundingBox().x,top:this.boundingBox().y,width:this.boundingBox().width,height:this.boundingBox().height,background:"rgba(100, 100, 100, 0.5)"})},n.exports=C}),!function(e){"function"==typeof define&&define.amd?define("jquery.mousewheel",["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var s=t||window.event,l=a.call(arguments,1),u=0,d=0,h=0,p=0,f=0,g=0;if(t=e.event.fix(s),t.type="mousewheel","detail"in s&&(h=-1*s.detail),"wheelDelta"in s&&(h=s.wheelDelta),"wheelDeltaY"in s&&(h=s.wheelDeltaY),"wheelDeltaX"in s&&(d=-1*s.wheelDeltaX),"axis"in s&&s.axis===s.HORIZONTAL_AXIS&&(d=-1*h,h=0),u=0===h?d:h,"deltaY"in s&&(h=-1*s.deltaY,u=h),"deltaX"in s&&(d=s.deltaX,0===h&&(u=-1*d)),0!==h||0!==d){if(1===s.deltaMode){var m=e.data(this,"mousewheel-line-height");u*=m,h*=m,d*=m}else if(2===s.deltaMode){var v=e.data(this,"mousewheel-page-height");u*=v,h*=v,d*=v}if(p=Math.max(Math.abs(h),Math.abs(d)),(!r||r>p)&&(r=p,i(s,p)&&(r/=40)),i(s,p)&&(u/=40,d/=40,h/=40),u=Math[u>=1?"floor":"ceil"](u/r),d=Math[d>=1?"floor":"ceil"](d/r),h=Math[h>=1?"floor":"ceil"](h/r),c.settings.normalizeOffset&&this.getBoundingClientRect){var y=this.getBoundingClientRect();f=t.clientX-y.left,g=t.clientY-y.top}return t.deltaX=d,t.deltaY=h,t.deltaFactor=r,t.offsetX=f,t.offsetY=g,t.deltaMode=0,l.unshift(t,u,d,h),o&&clearTimeout(o),o=setTimeout(n,200),(e.event.dispatch||e.event.handle).apply(this,l)}}function n(){r=null}function i(e,t){return c.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var o,r,s=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],l="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],a=Array.prototype.slice;if(e.event.fixHooks)for(var u=s.length;u;)e.event.fixHooks[s[--u]]=e.event.mouseHooks;var c=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=l.length;n;)this.addEventListener(l[--n],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",c.getLineHeight(this)),e.data(this,"mousewheel-page-height",c.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=l.length;n;)this.removeEventListener(l[--n],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var n=e(t),i=n["offsetParent"in e.fn?"offsetParent":"parent"]();return i.length||(i=e("body")),parseInt(i.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),!function(e,t,n,i){"use strict";function o(e,t,n){return setTimeout(u(e,n),t)}function r(e,t,n){return!!Array.isArray(e)&&(s(e,n[t],n),!0)}function s(e,t,n){var o;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==i)for(o=0;o<e.length;)t.call(n,e[o],o,e),o++;else for(o in e)e.hasOwnProperty(o)&&t.call(n,e[o],o,e)}function l(t,n,i){var o="DEPRECATED METHOD: "+n+"\n"+i+" AT \n";return function(){var n=new Error("get-stack-trace"),i=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=e.console&&(e.console.warn||e.console.log);return r&&r.call(e.console,o,i),t.apply(this,arguments)}}function a(e,t,n){var i,o=t.prototype;i=e.prototype=Object.create(o),i.constructor=e,i._super=o,n&&de(i,n)}function u(e,t){return function(){return e.apply(t,arguments)}}function c(e,t){return typeof e==fe?e.apply(t?t[0]||i:i,t):e}function d(e,t){return e===i?t:e}function h(e,t,n){s(m(t),function(t){e.addEventListener(t,n,!1)})}function p(e,t,n){s(m(t),function(t){e.removeEventListener(t,n,!1)})}function f(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function g(e,t){return e.indexOf(t)>-1}function m(e){return e.trim().split(/\s+/g)}function v(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var i=0;i<e.length;){if(n&&e[i][n]==t||!n&&e[i]===t)return i;i++}return-1}function y(e){return Array.prototype.slice.call(e,0)}function b(e,t,n){for(var i=[],o=[],r=0;r<e.length;){var s=t?e[r][t]:e[r];v(o,s)<0&&i.push(e[r]),o[r]=s,r++}return n&&(i=t?i.sort(function(e,n){return e[t]>n[t]}):i.sort()),i}function w(e,t){for(var n,o,r=t[0].toUpperCase()+t.slice(1),s=0;s<he.length;){if(n=he[s],o=n?n+r:t,o in e)return o;s++}return i}function _(){return we++}function E(t){var n=t.ownerDocument||t;return n.defaultView||n.parentWindow||e}function C(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){c(e.options.enable,[e])&&n.handler(t)},this.init()}function F(e){var t,n=e.options.inputClass;return new(t=n?n:Ce?$:Fe?H:Ee?V:M)(e,A)}function A(e,t,n){var i=n.pointers.length,o=n.changedPointers.length,r=t&Ne&&i-o===0,s=t&(Ie|Le)&&i-o===0;n.isFirst=!!r,n.isFinal=!!s,r&&(e.session={}),n.eventType=t,x(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function x(e,t){var n=e.session,i=t.pointers,o=i.length;n.firstInput||(n.firstInput=O(t)),o>1&&!n.firstMultiple?n.firstMultiple=O(t):1===o&&(n.firstMultiple=!1);var r=n.firstInput,s=n.firstMultiple,l=s?s.center:r.center,a=t.center=N(i);t.timeStamp=ve(),t.deltaTime=t.timeStamp-r.timeStamp,t.angle=R(l,a),t.distance=L(l,a),S(n,t),t.offsetDirection=I(t.deltaX,t.deltaY);var u=k(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=u.x,t.overallVelocityY=u.y,t.overallVelocity=me(u.x)>me(u.y)?u.x:u.y,t.scale=s?P(s.pointers,i):1,t.rotation=s?D(s.pointers,i):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,T(n,t);var c=e.element;f(t.srcEvent.target,c)&&(c=t.srcEvent.target),t.target=c}function S(e,t){var n=t.center,i=e.offsetDelta||{},o=e.prevDelta||{},r=e.prevInput||{};t.eventType!==Ne&&r.eventType!==Ie||(o=e.prevDelta={x:r.deltaX||0,y:r.deltaY||0},i=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=o.x+(n.x-i.x),t.deltaY=o.y+(n.y-i.y)}function T(e,t){var n,o,r,s,l=e.lastInterval||t,a=t.timeStamp-l.timeStamp;if(t.eventType!=Le&&(a>Oe||l.velocity===i)){var u=t.deltaX-l.deltaX,c=t.deltaY-l.deltaY,d=k(a,u,c);o=d.x,r=d.y,n=me(d.x)>me(d.y)?d.x:d.y,s=I(u,c),e.lastInterval=t}else n=l.velocity,o=l.velocityX,r=l.velocityY,s=l.direction;t.velocity=n,t.velocityX=o,t.velocityY=r,t.direction=s}function O(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:ge(e.pointers[n].clientX),clientY:ge(e.pointers[n].clientY)},n++;return{timeStamp:ve(),pointers:t,center:N(t),deltaX:e.deltaX,deltaY:e.deltaY}}function N(e){var t=e.length;if(1===t)return{x:ge(e[0].clientX),y:ge(e[0].clientY)};for(var n=0,i=0,o=0;t>o;)n+=e[o].clientX,i+=e[o].clientY,o++;return{x:ge(n/t),y:ge(i/t)}}function k(e,t,n){return{x:t/e||0,y:n/e||0}}function I(e,t){return e===t?Re:me(e)>=me(t)?0>e?De:Pe:0>t?Me:$e}function L(e,t,n){n||(n=Ge);var i=t[n[0]]-e[n[0]],o=t[n[1]]-e[n[1]];return Math.sqrt(i*i+o*o)}function R(e,t,n){n||(n=Ge);var i=t[n[0]]-e[n[0]],o=t[n[1]]-e[n[1]];return 180*Math.atan2(o,i)/Math.PI}function D(e,t){return R(t[1],t[0],Ve)+R(e[1],e[0],Ve)}function P(e,t){return L(t[0],t[1],Ve)/L(e[0],e[1],Ve)}function M(){this.evEl=Ue,this.evWin=ze,this.pressed=!1,C.apply(this,arguments)}function $(){this.evEl=Ke,this.evWin=Xe,C.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function B(){this.evTarget=Qe,this.evWin=Ze,this.started=!1,C.apply(this,arguments)}function j(e,t){var n=y(e.touches),i=y(e.changedTouches);return t&(Ie|Le)&&(n=b(n.concat(i),"identifier",!0)),[n,i]}function H(){this.evTarget=tt,this.targetIds={},C.apply(this,arguments)}function G(e,t){var n=y(e.touches),i=this.targetIds;if(t&(Ne|ke)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var o,r,s=y(e.changedTouches),l=[],a=this.target;if(r=n.filter(function(e){return f(e.target,a)}),t===Ne)for(o=0;o<r.length;)i[r[o].identifier]=!0,o++;for(o=0;o<s.length;)i[s[o].identifier]&&l.push(s[o]),t&(Ie|Le)&&delete i[s[o].identifier],o++;return l.length?[b(r.concat(l),"identifier",!0),l]:void 0}function V(){C.apply(this,arguments);var e=u(this.handler,this);this.touch=new H(this.manager,e),this.mouse=new M(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function q(e,t){e&Ne?(this.primaryTouch=t.changedPointers[0].identifier,U.call(this,t)):e&(Ie|Le)&&U.call(this,t)}function U(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var i=this.lastTouches,o=function(){var e=i.indexOf(n);e>-1&&i.splice(e,1)};setTimeout(o,nt)}}function z(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var o=this.lastTouches[i],r=Math.abs(t-o.x),s=Math.abs(n-o.y);if(it>=r&&it>=s)return!0}return!1}function W(e,t){this.manager=e,this.set(t)}function Y(e){if(g(e,ut))return ut;var t=g(e,ct),n=g(e,dt);return t&&n?ut:t||n?t?ct:dt:g(e,at)?at:lt}function K(){if(!rt)return!1;var t={},n=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){t[i]=!n||e.CSS.supports("touch-action",i)}),t}function X(e){this.options=de({},this.defaults,e||{}),this.id=_(),this.manager=null,this.options.enable=d(this.options.enable,!0),this.state=pt,this.simultaneous={},this.requireFail=[]}function J(e){return e&yt?"cancel":e&mt?"end":e&gt?"move":e&ft?"start":""}function Q(e){return e==$e?"down":e==Me?"up":e==De?"left":e==Pe?"right":""}function Z(e,t){var n=t.manager;return n?n.get(e):e}function ee(){X.apply(this,arguments)}function te(){ee.apply(this,arguments),this.pX=null,this.pY=null}function ne(){ee.apply(this,arguments)}function ie(){X.apply(this,arguments),this._timer=null,this._input=null}function oe(){ee.apply(this,arguments)}function re(){ee.apply(this,arguments)}function se(){X.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function le(e,t){return t=t||{},t.recognizers=d(t.recognizers,le.defaults.preset),new ae(e,t)}function ae(e,t){this.options=de({},le.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=F(this),this.touchAction=new W(this,this.options.touchAction),ue(this,!0),s(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function ue(e,t){var n=e.element;if(n.style){var i;s(e.options.cssProps,function(o,r){i=w(n.style,r),t?(e.oldCssProps[i]=n.style[i],n.style[i]=o):n.style[i]=e.oldCssProps[i]||""}),t||(e.oldCssProps={})}}function ce(e,n){var i=t.createEvent("Event");i.initEvent(e,!0,!0),i.gesture=n,n.target.dispatchEvent(i)}var de,he=["","webkit","Moz","MS","ms","o"],pe=t.createElement("div"),fe="function",ge=Math.round,me=Math.abs,ve=Date.now;de="function"!=typeof Object.assign?function(e){if(e===i||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var o=arguments[n];if(o!==i&&null!==o)for(var r in o)o.hasOwnProperty(r)&&(t[r]=o[r])}return t}:Object.assign;var ye=l(function(e,t,n){for(var o=Object.keys(t),r=0;r<o.length;)(!n||n&&e[o[r]]===i)&&(e[o[r]]=t[o[r]]),r++;return e},"extend","Use `assign`."),be=l(function(e,t){return ye(e,t,!0)},"merge","Use `assign`."),we=1,_e=/mobile|tablet|ip(ad|hone|od)|android/i,Ee="ontouchstart"in e,Ce=w(e,"PointerEvent")!==i,Fe=Ee&&_e.test(navigator.userAgent),Ae="touch",xe="pen",Se="mouse",Te="kinect",Oe=25,Ne=1,ke=2,Ie=4,Le=8,Re=1,De=2,Pe=4,Me=8,$e=16,Be=De|Pe,je=Me|$e,He=Be|je,Ge=["x","y"],Ve=["clientX","clientY"];C.prototype={handler:function(){},init:function(){this.evEl&&h(this.element,this.evEl,this.domHandler),this.evTarget&&h(this.target,this.evTarget,this.domHandler),this.evWin&&h(E(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(E(this.element),this.evWin,this.domHandler)}};var qe={mousedown:Ne,mousemove:ke,mouseup:Ie},Ue="mousedown",ze="mousemove mouseup";a(M,C,{handler:function(e){var t=qe[e.type];t&Ne&&0===e.button&&(this.pressed=!0),t&ke&&1!==e.which&&(t=Ie),this.pressed&&(t&Ie&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:Se,srcEvent:e}))}});var We={pointerdown:Ne,pointermove:ke,pointerup:Ie,pointercancel:Le,pointerout:Le},Ye={2:Ae,3:xe,4:Se,5:Te},Ke="pointerdown",Xe="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Ke="MSPointerDown",Xe="MSPointerMove MSPointerUp MSPointerCancel"),a($,C,{handler:function(e){var t=this.store,n=!1,i=e.type.toLowerCase().replace("ms",""),o=We[i],r=Ye[e.pointerType]||e.pointerType,s=r==Ae,l=v(t,e.pointerId,"pointerId");o&Ne&&(0===e.button||s)?0>l&&(t.push(e),l=t.length-1):o&(Ie|Le)&&(n=!0),0>l||(t[l]=e,this.callback(this.manager,o,{pointers:t,changedPointers:[e],pointerType:r,srcEvent:e}),n&&t.splice(l,1))}});var Je={touchstart:Ne,touchmove:ke,touchend:Ie,touchcancel:Le},Qe="touchstart",Ze="touchstart touchmove touchend touchcancel";a(B,C,{handler:function(e){var t=Je[e.type];if(t===Ne&&(this.started=!0),this.started){var n=j.call(this,e,t);t&(Ie|Le)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:Ae,srcEvent:e})}}});var et={touchstart:Ne,touchmove:ke,touchend:Ie,touchcancel:Le},tt="touchstart touchmove touchend touchcancel";a(H,C,{handler:function(e){var t=et[e.type],n=G.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:Ae,srcEvent:e})}});var nt=2500,it=25;a(V,C,{handler:function(e,t,n){var i=n.pointerType==Ae,o=n.pointerType==Se;if(!(o&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)q.call(this,t,n);else if(o&&z.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ot=w(pe.style,"touchAction"),rt=ot!==i,st="compute",lt="auto",at="manipulation",ut="none",ct="pan-x",dt="pan-y",ht=K();W.prototype={set:function(e){e==st&&(e=this.compute()),rt&&this.manager.element.style&&ht[e]&&(this.manager.element.style[ot]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return s(this.manager.recognizers,function(t){c(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),Y(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)return void t.preventDefault();var i=this.actions,o=g(i,ut)&&!ht[ut],r=g(i,dt)&&!ht[dt],s=g(i,ct)&&!ht[ct];if(o){var l=1===e.pointers.length,a=e.distance<2,u=e.deltaTime<250;if(l&&a&&u)return}return s&&r?void 0:o||r&&n&Be||s&&n&je?this.preventSrc(t):void 0},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var pt=1,ft=2,gt=4,mt=8,vt=mt,yt=16,bt=32;X.prototype={defaults:{},set:function(e){return de(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(r(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=Z(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return r(e,"dropRecognizeWith",this)?this:(e=Z(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(r(e,"requireFailure",this))return this;var t=this.requireFail;return e=Z(e,this),-1===v(t,e)&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(r(e,"dropRequireFailure",this))return this;e=Z(e,this);var t=v(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){n.manager.emit(t,e)}var n=this,i=this.state;mt>i&&t(n.options.event+J(i)),t(n.options.event),e.additionalEvent&&t(e.additionalEvent),i>=mt&&t(n.options.event+J(i))},tryEmit:function(e){return this.canEmit()?this.emit(e):void(this.state=bt)},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(bt|pt)))return!1;e++}return!0},recognize:function(e){var t=de({},e);return c(this.options.enable,[this,t])?(this.state&(vt|yt|bt)&&(this.state=pt),this.state=this.process(t),void(this.state&(ft|gt|mt|yt)&&this.tryEmit(t))):(this.reset(),void(this.state=bt))},process:function(e){},getTouchAction:function(){},reset:function(){}},a(ee,X,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,i=t&(ft|gt),o=this.attrTest(e);return i&&(n&Le||!o)?t|yt:i||o?n&Ie?t|mt:t&ft?t|gt:ft:bt}}),a(te,ee,{defaults:{event:"pan",threshold:10,pointers:1,direction:He},getTouchAction:function(){var e=this.options.direction,t=[];return e&Be&&t.push(dt),e&je&&t.push(ct),t},directionTest:function(e){var t=this.options,n=!0,i=e.distance,o=e.direction,r=e.deltaX,s=e.deltaY;
return o&t.direction||(t.direction&Be?(o=0===r?Re:0>r?De:Pe,n=r!=this.pX,i=Math.abs(e.deltaX)):(o=0===s?Re:0>s?Me:$e,n=s!=this.pY,i=Math.abs(e.deltaY))),e.direction=o,n&&i>t.threshold&&o&t.direction},attrTest:function(e){return ee.prototype.attrTest.call(this,e)&&(this.state&ft||!(this.state&ft)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Q(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),a(ne,ee,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ut]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&ft)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),a(ie,X,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[lt]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime>t.time;if(this._input=e,!i||!n||e.eventType&(Ie|Le)&&!r)this.reset();else if(e.eventType&Ne)this.reset(),this._timer=o(function(){this.state=vt,this.tryEmit()},t.time,this);else if(e.eventType&Ie)return vt;return bt},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===vt&&(e&&e.eventType&Ie?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=ve(),this.manager.emit(this.options.event,this._input)))}}),a(oe,ee,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ut]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&ft)}}),a(re,ee,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Be|je,pointers:1},getTouchAction:function(){return te.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(Be|je)?t=e.overallVelocity:n&Be?t=e.overallVelocityX:n&je&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&me(t)>this.options.velocity&&e.eventType&Ie},emit:function(e){var t=Q(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),a(se,X,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[at]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime<t.time;if(this.reset(),e.eventType&Ne&&0===this.count)return this.failTimeout();if(i&&r&&n){if(e.eventType!=Ie)return this.failTimeout();var s=!this.pTime||e.timeStamp-this.pTime<t.interval,l=!this.pCenter||L(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,l&&s?this.count+=1:this.count=1,this._input=e;var a=this.count%t.taps;if(0===a)return this.hasRequireFailures()?(this._timer=o(function(){this.state=vt,this.tryEmit()},t.interval,this),ft):vt}return bt},failTimeout:function(){return this._timer=o(function(){this.state=bt},this.options.interval,this),bt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==vt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),le.VERSION="2.0.7",le.defaults={domEvents:!1,touchAction:st,enable:!0,inputTarget:null,inputClass:null,preset:[[oe,{enable:!1}],[ne,{enable:!1},["rotate"]],[re,{direction:Be}],[te,{direction:Be},["swipe"]],[se],[se,{event:"doubletap",taps:2},["tap"]],[ie]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var wt=1,_t=2;ae.prototype={set:function(e){return de(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?_t:wt},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var n,i=this.recognizers,o=t.curRecognizer;(!o||o&&o.state&vt)&&(o=t.curRecognizer=null);for(var r=0;r<i.length;)n=i[r],t.stopped===_t||o&&n!=o&&!n.canRecognizeWith(o)?n.reset():n.recognize(e),!o&&n.state&(ft|gt|mt)&&(o=t.curRecognizer=n),r++}},get:function(e){if(e instanceof X)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(r(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(r(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=v(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==i&&t!==i){var n=this.handlers;return s(m(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==i){var n=this.handlers;return s(m(e),function(e){t?n[e]&&n[e].splice(v(n[e],t),1):delete n[e]}),this}},emit:function(e,t){this.options.domEvents&&ce(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](t),i++}},destroy:function(){this.element&&ue(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},de(le,{INPUT_START:Ne,INPUT_MOVE:ke,INPUT_END:Ie,INPUT_CANCEL:Le,STATE_POSSIBLE:pt,STATE_BEGAN:ft,STATE_CHANGED:gt,STATE_ENDED:mt,STATE_RECOGNIZED:vt,STATE_CANCELLED:yt,STATE_FAILED:bt,DIRECTION_NONE:Re,DIRECTION_LEFT:De,DIRECTION_RIGHT:Pe,DIRECTION_UP:Me,DIRECTION_DOWN:$e,DIRECTION_HORIZONTAL:Be,DIRECTION_VERTICAL:je,DIRECTION_ALL:He,Manager:ae,Input:C,TouchAction:W,TouchInput:H,MouseInput:M,PointerEventInput:$,TouchMouseInput:V,SingleTouchInput:B,Recognizer:X,AttrRecognizer:ee,Tap:se,Pan:te,Swipe:re,Pinch:ne,Rotate:oe,Press:ie,on:h,off:p,each:s,merge:be,extend:ye,assign:de,inherit:a,bindFn:u,prefixed:w});var Et="undefined"!=typeof e?e:"undefined"!=typeof self?self:{};Et.Hammer=le,"function"==typeof define&&define.amd?define("hammerjs",[],function(){return le}):"undefined"!=typeof module&&module.exports?module.exports=le:e[n]=le}(window,document,"Hammer"),define("utils/mousePosition",["require","exports","module"],function(e,t,n){function i(e){e.pageX?(o.x=e.pageX,o.y=e.pageY):e.originalEvent&&(o.x=e.originalEvent.clientX||e.originalEvent.pageX,o.y=e.originalEvent.clientY||e.originalEvent.pageY)}var o={x:0,y:0};document.body.addEventListener("mousemove",i,{capture:!0,passive:!0}),document.body.addEventListener("dragover",i,{capture:!0,passive:!0}),n.exports=o}),define("starc/starc.zoomController",["require","exports","module","jquery.cookie","jquery.mousewheel","hammerjs","utils/mousePosition"],function(e,t,n){e("jquery.cookie"),e("jquery.mousewheel");var i=e("hammerjs"),o=e("utils/mousePosition");n.exports=function(e){e.setScale(parseFloat($.queryString().zoom)||parseFloat($.cookie("zoom"))||1),e.on("scale",function(e){$.cookie("zoom",e,{expires:365,path:window.location.pathname.replace(/\/t\/.*/,"")})}),e.on("scale",function(t){var n=BrowserDetect&&"Safari"==BrowserDetect.browser?1:.4;e.$el.toggleClass("lod-1",t>=n)}),$(window).keydown(function(t){if(t.ctrlKey^t.metaKey&&!t.shiftKey&&!t.altKey){if("+"==String.fromCharCode(t.which)||"="==String.fromCharCode(t.which)||187==t.which||107==t.which||61==t.which||43==t.which||171==t.which)return e.setScale(1.25992105*e.getScale()),t.preventDefault(),!1;if("-"==String.fromCharCode(t.which)||31==t.which||189==t.which||173==t.which||109==t.which)return e.setScale(e.getScale()/1.25992105),t.preventDefault(),!1;if("0"==String.fromCharCode(t.which))return e.setScale(1),t.preventDefault(),!1}});var t=0,n=0,r=0,s=20,l=4,a=20;e.scrollContainer().on("mousewheel",function(i){if(i.ctrlKey^i.metaKey&&!i.shiftKey&&!i.altKey){var u=0;"undefined"!=typeof i.deltaY&&(u=i.deltaY),n++,t+=Math.abs(u);var c=t/n;Math.abs(u)>r&&(r=Math.abs(u));var d=l/(c||1),h=s/(r||1),p=(d+h)/2;p>1&&n<a&&(p=(a-n+p*n)/a);var f=e.diagramCoordsFromEvent({pageX:o.x,pageY:o.y});return 0!==o.x&&0!==o.y||(f=void 0),e.setScale(e.getScale()*(100+u*p)/100,f),i.preventDefault(),!1}});var u=new i(e.scrollContainer()[0],{recognizers:[[i.Pinch,{enable:!1}]]});e.scrollContainer().on("touchstart",function(e){var t=u.get("pinch");e.originalEvent.touches.length>1&&t&&t.set({enable:!0})}).on("touchend",function(){var e=u.get("pinch");e&&e.set({enable:!1})});var c,d;u.on("pinchstart",function(t){c=e.getScale(),d=e.diagramCoordsFromEvent({pageX:t.center.x,pageY:t.center.y})}),u.on("pinchmove",function(t){e.setScale(t.scale*c,d)})}}),define("starc/starc.keyboardShortcuts",["require","exports","module","views/PitchView","utils/trackModifiers"],function(e,t,n){var i=(e("views/PitchView"),e("utils/trackModifiers"));n.exports=function(e){var t=function(t){if(90!=t.keyCode||!i.meta_key_pressed&&!i.control_key_pressed||i.alt_key_pressed||i.shift_key_pressed||e.textPopupActive()||e.presentationMode()){if(89!=t.keyCode||!i.meta_key_pressed&&!i.control_key_pressed||i.alt_key_pressed||i.shift_key_pressed||e.textPopupActive()||e.presentationMode())if(90!=t.keyCode||!i.meta_key_pressed&&!i.control_key_pressed||!i.shift_key_pressed||i.alt_key_pressed||e.textPopupActive()||e.presentationMode())if(83!=t.keyCode||!i.meta_key_pressed&&!i.control_key_pressed||i.alt_key_pressed||i.shift_key_pressed)80!=t.keyCode||!i.meta_key_pressed&&!i.control_key_pressed||i.alt_key_pressed||i.shift_key_pressed?(82==t.keyCode&&(i.meta_key_pressed||i.control_key_pressed)&&i.alt_key_pressed&&i.shift_key_pressed||119==t.keyCode&&!(i.control_key_pressed||i.meta_key_pressed||i.alt_key_pressed))&&e.rootNodes().forEach(function(e){e.arrange()}):($(window).trigger("print-diagram"),t.preventDefault&&t.preventDefault());else{var n=new Date;n.getTime()-(this.autosave_warning_displayed||0)>2e4&&(this.autosave_warning_displayed=n.getTime(),window.Messages.info("<b>Coggles are saved automatically, no need to wear out the S key!</b>").timeout(5e3)),t.preventDefault&&t.preventDefault()}else e.warnIfHistoryMode()||(e.redoStep(),t.preventDefault&&t.preventDefault());else if(!e.warnIfHistoryMode())return e.redoStep(),t.preventDefault&&t.preventDefault(),!1}else if(!e.warnIfHistoryMode())return e.undoStep(),t.preventDefaul&&t.preventDefault(),!1;if(8==t.keyCode||32==t.keyCode){var o=t.srcElement||t.target;"INPUT"===o.tagName.toUpperCase()&&("TEXT"===o.type.toUpperCase()||"PASSWORD"===o.type.toUpperCase()||"FILE"===o.type.toUpperCase())||"TEXTAREA"===o.tagName.toUpperCase()?(o.readOnly||o.disabled)&&t.preventDefault():t.preventDefault()}i.shift_key_pressed&&i.alt_key_pressed&&t.keyCode>=37&&t.keyCode<=40&&(e.textPopupActive()||e.presentationMode()||e.rootNodes()[0].editNode()),27!=t.keyCode||"Firefox"!=BrowserDetect.browser||e.presentationMode()||t.preventDefault()};$(window).on("keydown",t),e.once("remove",function(){$(window).off("keydown",t)})}}),define("starc/starc.gestures",["require","exports","module","hammerjs","../utils/coordsFromEvent"],function(e,t,n){var i=e("hammerjs"),o=e("../utils/coordsFromEvent")("clientX","clientY");n.exports=function(e){function t(e){return e=e&&e.originalEvent||e,e=e&&e.gesture&&e.gesture.srcEvent||e,e&&e.touches&&e.touches.length||1}function n(n){if((!a||!c)&&t(n)<=1&&!e.editingPrevented()){d=$(n.target);var i=d.closest(".node-container").attr("data-nodeid");c=e.getNodeForId(i)}}function r(t){return d&&d.is(".ui-resizable-handle")?void(c=null):(c&&!c.model.isTitle()&&t.preventDefault(),a=o(t),u={left:e.scrollContainer().scrollLeft(),top:e.scrollContainer().scrollTop()},void(c&&c.startMoveSession&&(f&&e.suspendAutoGrow(!0),p=c.startMoveSession(),h={x:e.diagramCoordsFromEvent(t).x-c.model.x(),y:e.diagramCoordsFromEvent(t).y-c.model.y()})))}function s(n){if(a){if(t(n)>1&&c)return l();if(!c||c.model.isTitle()){if(!$("body").hasClass("touch")){var i=o(n),r=i.x-a.x,s=i.y-a.y,d=Math.round(u.left-r),f=Math.round(u.top-s);g.scrollLeft(d),g.scrollTop(f)}}else if(p&&h){var m=e.diagramCoordsFromEvent(n);p(m.x-h.x,m.y-h.y)}}}function l(){c&&c.endMoveSession&&c.endMoveSession(),f&&e.suspendAutoGrow(!1),c=!1,a=!1,u=!1,p=!1,h=!1}var a=!1,u=!1,c=!1,d=!1,h=!1,p=!1,f=$("body").hasClass("mobile-app"),g=e.scrollContainer(),m=new i(e.$el[0],{touchAction:"manipulation",domEvents:!0,recognizers:[[i.Tap,{threshold:4}],[i.Tap,{event:"doubletap",taps:2,threshold:4,time:250},["tap"]],[i.Press,{threshold:4,time:500}],[i.Pan,{direction:i.DIRECTION_ALL,threshold:3},[],["press"]]]});m.on("press",function(){m.stop(),l()}),g[0].addEventListener("mousedown",n,{capture:!0}),g[0].addEventListener("touchstart",n,{capture:!0}),g[0].addEventListener("pointerdown",n,{capture:!0}),m.on("panstart",r),m.on("panmove",s),m.on("panend",l),e.once("remove",function(){m.destroy(),g[0].removeEventListener("mousedown",n,{capture:!0}),g[0].removeEventListener("touchstart",n,{capture:!0}),g[0].removeEventListener("pointerdown",n,{capture:!0})})}}),define("utils/getDroppedFiles",["require","exports","module"],function(e,t,n){var i=function(e,t){var n=new $.Deferred,i=function(t){t&&!t.entry&&(t.entry=e),n.resolve([t])};return t=t||"",e.isFile?e._file?(e._file.relativePath=t,n.resolve(e._file)):e.file(function(e){e.relativePath=t,n.resolve(e)},i):e.isDirectory?n.resolve(e):n.resolve([]),n.promise()},o=function(e,t){return $.when.apply($,$.map(e,function(e){return i(e,t)})).then(function(){return Array.prototype.concat.apply([],arguments)})},r=function(e){e=e||{};var t=e.items;return t&&t.length&&(t[0].webkitGetAsEntry||t[0].getAsEntry)?o($.map(t,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):(new $.Deferred).resolve($.makeArray(e.files)).promise()};t.getDroppedFiles=r,t.handleFileTreeEntries=o,t.handleFileTreeEntry=i}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/widgets/progressbar",["jquery","../version","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.progressbar",{version:"1.12.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.attr({role:"progressbar","aria-valuemin":this.min}),this._addClass("ui-progressbar","ui-widget ui-widget-content"),this.valueDiv=e("<div>").appendTo(this.element),this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header"),this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow"),this.valueDiv.remove()},value:function(e){return void 0===e?this.options.value:(this.options.value=this._constrainedValue(e),void this._refreshValue())},_constrainedValue:function(e){return void 0===e&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",e),this._toggleClass(null,"ui-state-disabled",!!e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,n=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).width(n.toFixed(0)+"%"),this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,t===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}})}),define("utils/resizeImage",["require","exports","module"],function(e,t,n){function i(e,t){var n=e.height,i=e.width,o=1,r=t.maxWidth,s=t.maxHeight;return i>r&&(o=r/i,n=Math.floor(n*o),i=Math.floor(i*o)),n>s&&(o=s/n,n=Math.floor(n*o),i=Math.floor(i*o)),e.height=n,e.width=i,e}function o(e,t){var n=document.createElement("canvas"),i=n.getContext("2d"),o=e.orientation,r=e.width,s=e.height;switch(console.log("image orientation is "+e.orientation,r,s),o&&o>4?(n.width=s,n.height=r,e.width=s,e.height=r,e.orientation=1):(n.width=r,n.height=s),o){case 2:i.transform(-1,0,0,1,r,0);break;case 3:i.transform(-1,0,0,-1,r,s);break;case 4:i.transform(1,0,0,-1,0,s);break;case 5:i.transform(0,1,1,0,0,0);break;case 6:i.transform(0,1,-1,0,s,0);break;case 7:i.transform(0,-1,-1,0,s,r);break;case 8:i.transform(0,-1,1,0,0,r)}i.drawImage(e,0,0,r,s),n.toBlob(function(e){n.toBlob(function(n){t(n.size<e.size?n:e)},"image/png")},"image/jpeg",.95)}function r(e,t,n){var r=e.width,s=e.height;e=i(e,t),o(e,function(t){var i=r!==e.width||s!==e.height;n(t,i)})}HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){for(var i=atob(this.toDataURL(t,n).split(",")[1]),o=i.length,r=new Uint8Array(o),s=0;s<o;s++)r[s]=i.charCodeAt(s);e(new Blob([r],{type:t||"image/png"}))}}),n.exports.resizeImage=r,n.exports.applyMaxSize=i}),define("utils/imageFromFile",["require","exports","module"],function(e,t,n){n.exports=function(e,t){var n=new FileReader,i=new FileReader,o=null,r=null,s=function(){null!==o&&null!==r&&(r.orientation=o,t(r))},l=function(e){o=e,s()},a=function(e){r=e,s()};i.onload=function(e){var t=new DataView(e.target.result);if(65496!=t.getUint16(0,!1))return l(-2);for(var n=t.byteLength,i=2;i<n;){var o=t.getUint16(i,!1);if(i+=2,65505==o){if(1165519206!=t.getUint32(i+=2,!1))return l(-1);var r=18761==t.getUint16(i+=6,!1);i+=t.getUint32(i+4,r);var s=t.getUint16(i,r);i+=2;for(var a=0;a<s;a++)if(274==t.getUint16(i+12*a,r))return l(t.getUint16(i+12*a+8,r))}else{if(65280!=(65280&o))break;i+=t.getUint16(i,!1)}}return l(-1)},n.onload=function(e){var t=new Image;t.src=e.target.result,t.onload=function(){a(t)}},n.readAsDataURL(e),i.readAsArrayBuffer(e)}}),define("models/Message",["require","exports","module","backbone","env"],function(e,t,n){var i=e("backbone"),o=i.Model.extend({idAttribute:"_id",timeout:function(e){return setTimeout(function(){this.deactivate()}.bind(this),e),this},activate:function(){return this.set("active",!0),this},deactivate:function(){return this.set("active",!1),this}}),r=i.Collection.extend({model:o,url:e("env").api.url+"/api/1/messages",message:function(e){return this.add(e,{merge:!0})},error:function(e,t){return this.message({type:"error",message:e,_id:t,active:!0})},warning:function(e,t){return this.message({type:"warning",message:e,_id:t,active:!0})},info:function(e,t){return this.message({type:"info",message:e,_id:t,active:!0})},activateAfterTimeout:function(e,t){var n=this.get(e);n&&(n.activeTimeout=setTimeout(function(){n.set("active",!0)}))},cancelActivation:function(e){var t=this.get(e);t&&(clearTimeout(t.activeTimeout),t.set("active",!1))}});window.Messages=new r,window.Messages.add({_id:"whatspossible",type:"warning",translation_id:"doclist-discover-whatspossible",message:"Want to get more from Coggle? Discover <a href='https://coggle.it/diagram/VfQqad5caWRBKzhf/ea5d69d1d095b194f1276a5f0afc68c3283cd9c3592fc4dd91c7831e4a77a1e4' id='whatspossiblelink' data-bypass target='_blank'>what's possible</a>.<div id='hidewhatspossible' class='diagram-notice-closehandle close-handle'/></div>",active:!1}),window.Messages.add({_id:"update",type:"warning",translation_id:"update-coggle",message:"A Coggle update is available! <a onclick='window.location.reload(true);'>Update now</a>",active:!1}),window.Messages.add({_id:"readonly",type:"warning",translation_id:"readonly-warning",message:"You cannot edit this diagram. <div class='suggestion'>If you need to edit it, ask the author to give you permission.</div>",active:!1}),window.Messages.add({_id:"degraded",type:"warning",translation_id:"websocket-offline",message:"Changes may be slow due to network issues. <a href='/websockets' target='_blank' data-bypass>Help me fix this!</a>",active:!1}),window.Messages.add({_id:"disconnected",type:"error",translation_id:"disconnect-warning",message:"<b>Connection lost</b>: Changes may not be saved</div>",active:!1}),window.Messages.add({_id:"unrecoverable",type:"error",translation_id:"unrecoverable-warning",message:"There was an unrecoverable error, please reload the page. If you have information about what might have gone wrong, please email <a href='mailto:hello@coggle.it'>hello@coggle.it</a>",active:!1}),window.Messages.add({_id:"embedded",type:"notice",translation_id:"embedded-create-your-own",message:'Made with Coggle: <a href="https://coggle.it/?utm_source=createyourown&utm_medium=web&utm_campaign=embed" target="_blank">create your own mindmap</a>',active:!1}),window.Messages.add({_id:"image-resize-plug",type:"warning",translation_id:"image-resize-plug",message:"Your image was resized - get <a href='/plans'>Awesome</a> to upload larger images!",active:!1}),window.Messages.add({_id:"private-overage",type:"warning",translation_id:"private-overage",message:"Uh oh! Looks like <b>you've used more private diagrams</b> than your plan provides! To edit this diagram make it public or upgrade to <a href='/plans'>Awesome</a>",active:!1}),$(window).on("notify-info",function(e,t,n,i){var o=window.Messages.info(t);i?o.timeout(i):(n||void 0===n)&&o.timeout(5e3)}),$(window).on("notify-warning",function(e,t,n,i){var o=window.Messages.warning(t);i?o.timeout(i):(n||void 0===n)&&o.timeout(5e3)}),$(window).on("notify-error",function(e,t,n){window.Messages.error(t)}),$(window).on("notify-elevate",function(e){window.Messages.get("unrecoverable").set("active",!0)}),n.exports.MessageModel=o,n.exports.MessageCollection=r,n.exports.Messages=window.Messages}),define("starc/starc.import.image",["require","exports","module","jquery-ui/widgets/progressbar","utils/resizeImage","utils/resizeImage","utils/imageFromFile","views/NodeEditView","models/Message"],function(e,t,n){function i(e,t,n){var i=new FormData;i.append("files[]",t,n);var o=$.ajax({type:"POST",xhr:function(){var e=$.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",function(e){e.lengthComputable&&o.onprogress&&o.onprogress(e.loaded/e.total)},!1),e},url:e.model.uploadURL(),data:i,processData:!1,contentType:!1});return o}function o(e,t,n,o,a,u){if(!e.warnIfHistoryMode()&&!e.editingPrevented()){var c={maxWidth:window.getCoggleUser().isAwesome()?1600:150,maxHeight:window.getCoggleUser().isAwesome()?1600:150};l(t,function(o){r(o,c,function(r,l){l&&$(a).trigger("import:image:downscaled");var c=i(e,l?r:t,l?"resized.png":t.name);$(a).trigger("import:image:upload",[e,c,n]),getCoggleUser().getActions().perform("upload-image");var d="";t.name&&(d=t.name.replace(/[[\]\\]/g,"").replace(/\.[^.]{3,20}$/,"")),c.done(function(t){try{t=JSON.parse(t),t.error?$(a).trigger("import:image:error",[t.message||t.msg||"Image upload failed."]):$(a).trigger("import:image:done",[e,t.path,n,s(o,{maxWidth:300,maxHeight:300}),d])}catch(e){$(a).trigger("import:image:error",["Image upload failed."])}u(null)}).fail(function(){$(a).trigger("import:image:error",["Image upload failed."]),u(new Error("upload failed"))})})})}}e("jquery-ui/widgets/progressbar");var r=e("utils/resizeImage").resizeImage,s=e("utils/resizeImage").applyMaxSize,l=e("utils/imageFromFile"),a=e("views/NodeEditView"),u=e("models/Message").Messages;$(document).on("import:image:error",function(e,t){$(window).trigger("notify-error",t)}),$(document).on("import:image:done",function(e,t,n,i,o,r){if(a.activeEdit())return void a.activeEdit().$el.trigger("import:image:done",[t,n,i,o,r]);var s=t.model.getNodes().closest(i.x,i.y),l=s.distanceTo(i.x,i.y),u="!["+r+"]("+n+" "+o.width+"x"+o.height+")";if(l<400&&0===s.text().replace(/\s/g,"").length||l<60)a.activeEdit()&&a.activeEdit().commit(),s.set("text",s.text()+" "+u),s.deltarize({text:s.text()});else{var c=t.getNodeForId(s.id);c.addChild({text:u,pos:{x:(i.x-s.x())*s.ltr(),y:i.y-s.y()}})}}),$(document).on("import:image:upload",".node-editor",function(e,t,n,i){var o=$("<div>");o.progressbar({value:.1}),o.css({top:-30,left:60}),$(e.currentTarget).append(o),n.onprogress=function(e){o.progressbar({value:100*e})},n.always(function(){o.remove()}),e.stopPropagation()}),$(document).on("import:image:upload",function(e,t,n,i){var o=$("<div>");o.progressbar({value:.1}),o.css({top:i.y,left:i.x}),t.nodesContainer().append(o),n.onprogress=function(e){o.progressbar({value:100*e})},n.always(function(){o.remove()}),e.stopPropagation()}),$(document).on("import:image:downscaled",function(){var e=window.getCoggleUser();e.isAwesome()||(u.get("image-resize-plug").activate().timeout(7e3),e.getActions().perform("pitch:bigimages"))}),n.exports.import_type="^image/",n.exports.import_raw_file=!0,n.exports.import=_.rateLimit(o,{calls:1,every:2e3})}),define("starc/starc.import.links",["require","exports","module"],function(e,t,n){function i(e,t,n,i){for(var o in e)if(e.hasOwnProperty(o)&&new RegExp(o).test(n))return e[o](t,n,i),!0;return!1}var o=function(e,t,n){var i="[link to "+t.replace(/^[^.\/]*?:?\/\//g,"").replace(/\/.*/,"")+"]("+t+")",o=e.closestNode(n.x,n.y);o.addChild({text:i,pos:{x:(n.x-o.model.x())*o.model.ltr(),y:n.y-o.model.y()}})},r={},s={};r[".*\\.dropbox\\.com/.*\\.(jpg|gif|png|jpeg|tiff|mng|svg|JPG|GIF|PNG|JPEG|TIFF|MNG|SVG)(\\?.*)?$"]=function(e,t,n){var o=t.replace("www.dropbox.com","dl.dropboxusercontent.com");return i(s,o,n)},s["(jpg|gif|png|jpeg|tiff|mng|svg|JPG|GIF|PNG|JPEG|TIFF|MNG|SVG)(\\?.*)?$"]=function(e,t,n){var i="![dropped image link]("+t+")",o=e.closestNode(n.x,n.y);o.addChild({text:i,pos:{x:(n.x-o.model.x())*o.model.ltr(),y:n.y-o.model.y()}})},s["^file:"]=function(e,t,n){console.log("ignoring dropped file URL")};var l=function(e,t,n,l,a,u){console.log("handle uri list:",t),i(r,e,t,n)?u(null):i(s,e,t,n)?u(null):(o(e,t,n),u(null))};n.exports.import_type="text/uri-list",n.exports.import=l}),define("starc/starc.import.mm",["require","exports","module","underscore","../utils/colours","async","../models/Node"],function(e,t,n){function i(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<e;i++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}function o(e,t){return e.substring(0,t||4e3)}function r(e){if(!g(e))return null;var t,n,i=parseFloat(e.getAttribute("X_COGGLE_POSY")),o=parseFloat(e.getAttribute("X_COGGLE_POSX")),r=e.getAttribute("TEXT"),a=l.mediate(e.getAttribute("COLOR"));return(isNaN(o)||isNaN(i))&&(o=400*(Math.random()-.5),i=400*(Math.random()-.5)),e.getAttribute("starc-wrapped")&&(t=parseFloat(e.getAttribute("starc-width"))),e.getAttribute("starc-scale")&&(n=parseFloat(n)),r.length>u.MAX_TEXT_LENGTH&&($(window).trigger("notify-warning",'Item "'+s.escape(r.substring(0,30))+'..." is too long and has been truncated.'),r=r.substring(0,u.MAX_TEXT_LENGTH)),{text:r,pos:{x:o,y:i},colour:a,width:t,scale:n}}var s=e("underscore"),l=e("../utils/colours"),a=e("async"),u=e("../models/Node").NodeModel,c=40,d=14,h="---newline"+i(8)+"---",p="---32"+i(8)+"---",f=function(e,t){for(var n="\n",i="",o=!1,r=!1,s=0,l=0;l<e.length;l++)"\\"==e[l]?r=!r:("'"===e[l]||'"'===e[l]&&!r&&!o?o=e[l]:e[l]!==o||r?o&&e[l]==n&&(i+=e.substr(s,l-s),i+=t,s=l+1):o=!1,r=!1);return i+=e.substr(s)},g=function(e){return"NODE"===e.tagName.toUpperCase()||"X-COGGLE-ROOTNODE"===e.tagName.toUpperCase()},m=function(e){for(var t,n=[],i=0;i<e.children.length;i++)t=e.children[i],g(t)&&n.push(t);return n},v=function(e){for(var t=0;t<e.length;t++){var n=$(e[t]),i=n.attr("POSITION");"undefined"!=typeof i&&i!==!1||n.attr("POSITION",["left","right"][t%2])}},y=function(e,t){function n(e){function t(){var e=$(this),t=e.attr("src"),n=e.text();e.replaceWith("!["+n+"]("+t+")")}for(var i,r,s,l,a=0;a<e.length;a++){i=e[a],r="",l=[];for(var c=0;c<i.children.length;c++)"RICHCONTENT"===i.children[c].tagName.toUpperCase()?r+=i.children[c].innerHTML:g(i.children[c])&&l.push(i.children[c]);r.length&&(s=$(r),s.find("img").each(t),i.setAttribute("TEXT",o($.trim(s.text()),u.MAX_TEXT_LENGTH+1e3))),n(l)}}n(e)},b=function(e,t){function n(e,t){for(var i,s,l,a,u,c=0;c<e.length;c++)i=e[c],s=(i.getAttribute("SIZE")||10)/10,u=i.getAttribute("TEXT"),l=r.getSizeOfContent(u,t,void 0,s),a=!1,l.w>o&&(l=r.getSizeOfContent(u,t,o,s),a=!0),i.setAttribute("starc-width",l.w),i.setAttribute("starc-height",l.h),i.setAttribute("starc-scale",s),i.setAttribute("starc-wrapped",a),n(m(i),t+1)}var i=t&&t.initial_level||0,o=t&&t.wrap||300,r=t.diagram;n(e,i)},w=function(e,t,n,i,o,r){var s,l,a,u=0,c=0,d=[];if(null!==e)for(l=0;l<i.length;l++)s=i[l].getAttribute("POSITION"),(s==e||""===e&&!s)&&d.push(i[l]);else d=i;for(l=0;l<d.length;l++)a=d[l],c=Math.max(c,parseFloat(a.getAttribute("starc-treewidth"))),u+=parseFloat(a.getAttribute("starc-treeheight"));u+=d.length?(d.length-1)*r:0;var h=o+c+t,p=Math.max(n,u);return{w:h,h:p}},_=function(e,t){function n(e,t){for(var r=m(e),l=0;l<r.length;l++)n(r[l],!1);var a=t?["left","right",""]:[""];s.each(a,function(n){var s=w(t?n:null,parseFloat(e.getAttribute("starc-width")),parseFloat(e.getAttribute("starc-height")),r,i,o);e.setAttribute("starc-"+n+"treewidth",s.w),e.setAttribute("starc-"+n+"treeheight",s.h)})}for(var i=t&&t.x_space||c,o=t&&t.y_space||d,r=0;r<e.length;r++)n(e[r],!0)},E=function(e){function t(){for(var e,i,r=[],s=0;s<this.children.length;s++){e=this.children[s],g(e)&&r.push(e);for(var l=0;l<n.length;l++){var a=n[l];i=e.getAttribute(a),"undefined"!=typeof i&&i!==!1&&null!==i&&this.setAttribute(a,i)}}var c=this.getAttribute("TEXT");c?(c=c.replace(new RegExp(h,"g"),"\n").replace(new RegExp(p,"g"),"'"),this.setAttribute("TEXT",o(c,u.MAX_TEXT_LENGTH+1e3))):this.setAttribute("TEXT",""),r.map(Function.prototype.call,t)}var n=["COLOR","SIZE"];e.each(t)},C=function(){return this.id_map={},this.added_nodes=[],this},F=0;C.prototype.addRecursive=function(e,t,n,i,o){if(!e.length)return o(null);i||(i="");var r=c,h=d,p=$(e[0]).parent(),f=1;n.model.isRoot()&&"left"==i&&(f=-1);var v=t.x+f*(r+s.reduce(e.map(function(){var e=$(this);return e.children("node").length?parseFloat(e.attr("starc-width")):r}).get(),function(e,t){return Math.max(e,t)},0)),y=t.y,b="starc-"+i+"treeheight";void 0!==p.attr(b)&&(y-=parseFloat(p.attr(b))/2),a.eachSeries(e,function(e,t){if(!g(e))return t(null);var i,o,r=parseFloat(e.getAttribute("starc-treeheight")),a=e.getAttribute("TEXT"),c=e.getAttribute("LINK"),d=l.mediate(e.getAttribute("COLOR")),p=e.getAttribute("X_COGGLE_JOINEDTO");if(y+=r/2,e.getAttribute("starc-wrapped")&&(i=parseFloat(e.getAttribute("starc-width"))),e.getAttribute("starc-scale")&&(o=parseFloat(o)),c){var f=/^[^\[\n]*(?=(?: |\n|$))/i.exec(a);a=f?"["+f[0]+"]("+c+")"+a.substring(f[0].length):c+" "+a}a.length>u.MAX_TEXT_LENGTH&&($(window).trigger("notify-warning",'Item "'+s.escape(a.substring(0,30))+'..." is too long and has been truncated.'),a=a.substring(0,u.MAX_TEXT_LENGTH));var b=n.addChild({text:a,pos:{x:v,y:y},colour:d,width:i,scale:o,join:p});this.added_nodes.push(b),e.getAttribute("ID")&&(this.id_map[e.getAttribute("ID")]=b.model.id),y+=r/2+h,F+=1,F%20===0?setTimeout(function(){this.addRecursive($(m(e)),{x:0,y:0},b,void 0,t)}.bind(this)):this.addRecursive($(m(e)),{x:0,y:0},b,void 0,t)}.bind(this),o)},C.prototype.lookupId=function(e){for(var t in this.id_map)if(this.id_map.hasOwnProperty(t)&&t.startsWith(e))return this.id_map[t].slice(0,e.length)},C.prototype.fixupIds=function(){this.added_nodes.forEach(function(e){var t=e.model.text(),n=/(#)([a-f0-9]{6,32})(\)|\s|>)/g,i=!1,o=t.replace(n,function(e,t,n,o,r,s){var l=this.lookupId(n);return l?(i=!0,t+l+o):e}.bind(this)),r={};
i&&(e.model.set("text",o),r.text=o);var s=e.model.get("join");this.id_map[s]&&(s=this.id_map[s],e.model.set("join",s),r.join=s),"undefined"===r.text&&"undefined"===r.join||e.model.deltarize(r)}.bind(this))};var A=function(e,t,n,i,o,s){console.log("parse document...");var u=$($.parseXML(f(t.replace(/'/g,p),h))).find("map"),d=e.closestNode(n.x,n.y),m=d.model.isRoot(),w=u.children("node, x-coggle-rootnode"),F=new C;if(console.log("run fixups..."),E(w),console.log("tag positions..."),m&&v(1==w.length?w.children("node, x-coggle-rootnode"):w),console.log("parse rich content..."),y(w),console.log("tag sizes..."),b(w,{diagram:e}),console.log("tag subtrees..."),_(w),console.log("build..."),m){var A=!0;a.eachSeries(w,function(t,n){var i=$(t);if(!g(t))return n();i.attr("starc-treeheight",0),A?(A=!1,d.model.set("text",i.attr("TEXT")),d.model.set("colour",l.mediate(i.attr("COLOR"))),d.model.deltarize()):(d=e.createRoot(r(t)),F.added_nodes.push(d)),i.attr("ID")&&(F.id_map[i.attr("ID")]=d.model.id);var o=(d.model.x(),{x:-Math.abs(i.attr("starc-width")/2+c),y:0}),s={x:Math.abs(i.attr("starc-width")/2+c),y:0};a.series([function(e){F.addRecursive(i.children("node[POSITION=left]"),o,d,"left",e)},function(e){F.addRecursive(i.children("node[POSITION=right]"),s,d,"right",e)},function(e){F.addRecursive(i.children("node:not([POSITION])"),s,d,"",e)}],n)},function(){F.fixupIds(),s()})}else F.addRecursive(w,{x:n.x,y:n.y},d,void 0,function(){F.fixupIds(),s()})};n.exports.import_type=".mm$",n.exports.import=A}),define("starc/starc.import.text",["require","exports","module","underscore"],function(e,t,n){var i=e("underscore"),o=function(e){for(var t=0,n=8,i=0;i<e.length;i++)if(" "==e[i])t++;else{if("\t"!=e[i])break;t+=n}return t},r=function(e,t,n,r,s,l){function a(e,t){var n=t.addChild({text:e.text},void 0,!0);i.each(e.children,function(e){a(e,n)})}if(!e.editingPrevented()){for(var u=t.split(/[\r\n]+/),c={children:[]},d=c,h=[],p=[],f=0;f<u.length;f++){var g=o(u[f]);if(!/^\s*$/.exec(u[f])){var m=i.sortedIndex(p,g);h.length&&(m<=h.length||f==u.length-1)&&(d=m?h[m-1]:c,h=h.slice(0,m),p=p.slice(0,m));var v={text:$.trim(u[f]),children:[]};d.children.push(v),h.push(v),p.push(g)}}var y=e.closestNode(n.x,n.y);if(1===c.children.length&&y.model.isRoot()&&0===y.model.children().length){var b=c.children[0];y.model.set("text",b.text),y.model.deltarize({text:y.model.text()}),c.children=b.children}i.each(c.children,function(e){a(e,y)}),y.arrange(),l()}};n.exports.import_type="text/plain",n.exports.import=r}),define("starc/starc.import",["require","exports","module","utils/mousePosition","utils/getDroppedFiles","starc/starc.import.image","starc/starc.import.links","starc/starc.import.mm","starc/starc.import.text"],function(e,t,n){function i(e,t){var n=t.diagramCoordsFromEvent(e);if(n.failed){var i=a;n=t.diagramCoordsFromEvent({pageX:i.x,pageY:i.y})}return n}function o(e){if(e)for(var t in c){var n=c[t],i=n.import_type;if(new RegExp(i).test(e))return n}}function r(e){var t=/\.[^.]*$/i.exec(e.name);return o(e.type)||o(t&&t[0])}function s(e,t,n,i,o){var r=!1,s=null,l=function(){setTimeout(function(){r||(s=$("<div id='loading'><div class='loadspinner'><div class='b1'></div><div class='b2'></div><div classs='b3'></div></div><p></p></div>"),$(".coggle-workspace").append(s))},500)},a=function(){r=!0,null!==s&&s.fadeOut(250,function(){s.remove()})};if(l(),e.import_raw_file)e.import(t,n,i,n.name,o,a);else{var u=new FileReader;u.onloadend=function(r){e.import(t,u.result,i,n.name,o,a)},u.readAsText(n)}}function l(e,t,n){if(!t.editingPrevented()){var o=r(n);return!!o&&(s(o,t,n,i(e,t),e.currentTarget||e.target),!0)}}var a=e("utils/mousePosition"),u=e("utils/getDroppedFiles").getDroppedFiles,c=[e("starc/starc.import.image"),e("starc/starc.import.links"),e("starc/starc.import.mm"),e("starc/starc.import.text")];n.exports=function(e){e.$el.bind("drop",function(t){var n=!1,r=t.dataTransfer=t.originalEvent.dataTransfer;r&&r.files&&r.files.length&&u(r).always(function(i){i.map(function(i){console.log("drop file:",i.type,i.name),l(t,e,i)&&(n=!0)})});var s=r.getData("URL");if(s&&!n){var a=i(t,e);n=!0,o("text/uri-list").import(e,s,a,null,t.currentTarget||t.target,function(e){console.log(e)})}n||$(window).trigger("notify-info",["Sorry! That sort of file isn't supported. You can add .png, .jpg or .gif images, and import .mm or .txt files."]),t.preventDefault()}),$(document).bind("paste",function(t){var n=!1,i=t.clipboardData||t.originalEvent.clipboardData;if(i&&i.files&&i.files.length)for(var o=i.files,r=0;r<o.length;r++)l(t,e,o[r])&&(n=!0);n&&t.preventDefault()}),e.$el.bind("dragenter dragover",function(t){if(!e.editingPrevented()){var n=t.dataTransfer=t.originalEvent.dataTransfer;return n.dropEffect="copy",!1}});var t=function(t){var n=t.currentTarget.files[0];l(t,e,n)};$("body").on("change.coggleImport",".node-editor input[type=file]",t),$("body").on("change.coggleImport",".notification-panel input[type=file]",t),e.once("remove",function(){$("body").off(".coggleImport")})}}),function(e){"function"==typeof define&&define.amd?define("plugins/jquery.sage",["jquery","underscore","hammerjs","../utils/colours","../utils/pageCoords"],e):e(jQuery,_,Hammer,tinytinycolor)}(function(e,t,n,i,o){function r(e){return"#fff"==e|"#ffffff"==e?1:0}function s(e){ga&&ga("send","event",e[0],e[1],e[2],e[3])}function l(e,t){var n=e-t;return(n+m)%(2*m)-m}function a(e){var t=.5*v*100,n=50-.5*v*100,i=(100-2*t)/2+2,o=n+i*Math.sin(e),r=n-i*Math.cos(e);return{left:o+"%",top:r+"%"}}function u(e,n,i,o){e.button.css({opacity:1}),t.each(t.filter(o,function(t){return t!==e}),function(e){var t=1.2;e.button.css({opacity:Math.max(0,Math.min(1,t-t*n))})})}function c(e,t){t.find(".sagering").css({opacity:Math.max(0,Math.min(1,1.2-1.2*e))})}function d(e,n,i){e.button.css({opacity:1}),t.each(t.filter(i,function(t){return t!==e}),function(e){e.button.hide()})}function h(e){e.find(".sagering").fadeOut(200)}var p=i.darken,f=.2,g=100,m=Math.PI,v=.25,y=1.4,b=22/128,w=3/128;e.fn.sageButton=function(t,n,i){var o=e("<div/>",{class:"sagebutton"}).css({width:f*t,height:f*t,"background-color":i});return r(i)&&o.css({border:"2px solid rgba(0,0,0,0.1)"}),n&&(e(n).addClass("sagebuttonicon"),o.append(n)),o.animate({width:t,height:t},g,"swing"),o},e.fn.sageHint=function(t,n,i,o,r){return e("<div/>",{class:"sagehint"}).html(t).css({color:o,left:n,top:i,width:r.toFixed(2)+"%"}).appendTo(e(this))},e.fn.sage=function(i){function c(e){var t=e.button,i=new n(t[0],{recognizers:[[n.Pan,{event:"buttondrag",enable:!0,direction:n.DIRECTION_ALL,threshold:8}]]});i.on("buttondragstart",function(t){W(e)}),i.on("buttondragmove",function(t){T(t,e)}),i.on("buttondragend",function(t){Y(e),K()}),t.on("mouseup touchend pointerup MSPointerUp",function(t){Y(e),K(),t.preventDefault(),t.stopPropagation(),i.stop()}),t.on("mousedown touchstart pointerdown MSPointerDown",function(e){e.preventDefault(),e.stopPropagation()})}function h(e){var n=j.sageButton(v*R,t.result(e,"icon"),$);e.class&&n.addClass(e.class),e.activate||(e.activate=u),e.commit||(e.commit=d);var i=(e.at*(m/180)+m)%(2*m)-m,o={theta:i,action:e,button:n};return n.css(a(i)),t.result(e,"active")===!1?n.addClass("inactive"):c(o),j.append(n),o}function _(e){var n=t.result(e.action,"tip");if(e.action.tip_at){var i=t.result(e.action,"tip_at");e.button.sageHint(n,i.x,i.y,p($),i.width_pct||200)}else{var o=y,r=(e.action.at*(m/180)+m)%(2*m)-m,s=200,l=-v*R/2+R*(o-1)*Math.sin(r),a=-R*(o-1)*Math.cos(r);e.button.sageHint(n,l,a,p($),s)}}function E(){V.map(_)}function C(e){var t=o(e);if(!t)return console.warn("failed to determine page coordinate from",e);var n=t.x-D,i=t.y-P,r=Math.sqrt(n*n+i*i),s=Math.atan2(n,-i);return{r:r,t:s}}function F(e,t){e&&e.action&&e.action.activate&&(e.action.activate(e,t,j,V),clearTimeout(J))}function A(e){e&&(e.action&&e.action.deactivate&&e.action.deactivate(e,j,V),t.result(e.action,"active")!==!1&&e.button.animate({opacity:1},200))}function x(){V.map(A)}function S(e){e&&e.action&&e.action.cancel&&e.action.cancel()}function T(e,t){if(t&&t.action.setParameter){var n=C(e),i=n.r,o=n.t;t.action.setParameter(t,j,2*i/R,180*(o-t.theta)/m,e)}}function O(e,n){var i=3*e/R,o=V.slice(0).sort(function(e,t){return Math.abs(l(e.theta,n))-Math.abs(l(t.theta,n))})[0];return t.result(o.action,"active")===!1&&(o=null),{button:o,closeness:i}}function N(e){if(!(j.outerWidth()<.95*R)){if(z)return T(e,z);var t=C(e),n=O(t.r,t.t);return n.closeness>.45&&n.closeness<2?q=n.button:n.closeness=0,q&&(F(n.button,n.closeness),0===n.closeness&&(q=null)),U!==q&&(A(U,j,V),U=q),q&&q.action.commitOnClickhold&&n.closeness>=1&&W(q),e.preventDefault(),e.stopPropagation(),!1}}function k(e){27==e.keyCode&&(S(z),z=null,K(),s(["Sage","Interact","Escape"]))}function I(t){j.has(e(t.target)).length||K()}function L(){t.each(V,function(e){e.button.find(".sagehint").html(t.result(e.action,"tip"));var n=t.result(e.action,"tip_at");n&&e.button.find(".sagehint").css({left:n.x,top:n.y});var i=t.result(e.action,"icon");i.addClass("sagebuttonicon"),e.button.find(".sagebuttonicon").replaceWith(i)})}var R=i.size,D=i.x,P=i.y,M=(i.clickhold||!1,i.actions||{}),$=i.colour,B=e(this),j=e("<div>",{class:"sagemenu",tabindex:"0"}).css({width:f*R,height:f*R,left:D-f*R/2,top:P-f*R/2}),H=R-2*(b+w)*R,G=e("<div/>",{class:"sagering"}).css({width:f*H,height:f*H,left:f*w*R,top:f*w*R,borderWidth:f*b*R,borderColor:$});r($)?G.addClass("light-menu"):G.addClass("dark-menu"),j.append(G);var V=t.values(M).map(h);V.sort(function(e,t){return e.theta-t.theta}),B.append(j),j.animate({width:R,height:R,left:D-R/2,top:P-R/2},g,"swing"),G.animate({width:H,height:H,left:w*R,top:w*R,borderWidth:b*R},g,"swing");var q=null,U=null,z=null,W=t.once(function(e){s(["Sage","Commit",t.result(e.action,"tip")]),z=e,e.action.commit(e,j,V)}),Y=t.once(function(e){s(["Sage","Act",t.result(e.action,"tip")]),e.action.finish()}),K=t.once(function(){j.animate({opacity:0},200,"swing",j.remove.bind(j)),e(window).off("keydown",k),e(window).off("mousemove touchmove pointermove MSPointerMove",N),e(window).off("modifierschanged",L),window.removeEventListener("mouseup",X,{capture:!0,once:!0}),window.removeEventListener("touchend",X,{capture:!0,once:!0}),window.removeEventListener("pointerup",X,{capture:!0,once:!0}),window.removeEventListener("MSPointerUp",X,{capture:!0,once:!0}),window.removeEventListener("mousedown",I,!0),window.removeEventListener("touchstart",I,!0),window.removeEventListener("pointerdown",I,!0),window.removeEventListener("MSPointerDown",I,!0)}),X=t.once(function(t){e(window).off("mousemove touchmove pointermove MSPointerMove",N);var n=t.clientX||t.changedTouches&&t.changedTouches[0]&&t.changedTouches[0].clientX,i=t.clientY||t.changedTouches&&t.changedTouches[0]&&t.changedTouches[0].clientY,o=document.elementFromPoint(n,i);z?(Y(z),K()):q?(Y(q),K()):j.has(e(o)).length?(x(),window.addEventListener("mousedown",I,!0),window.addEventListener("touchstart",I,!0),window.addEventListener("pointerdown",I,!0),window.addEventListener("MSPointerDown",I,!0)):K()});e(window).on("keydown",k),e(window).on("mousemove touchmove pointermove MSPointerMove",N),e(window).on("modifierschanged",L),window.addEventListener("mouseup",X,{capture:!0,once:!0}),window.addEventListener("touchend",X,{capture:!0,once:!0}),window.addEventListener("pointerup",X,{capture:!0,once:!0}),window.addEventListener("MSPointerUp",X,{capture:!0,once:!0}),B.find("img").on("dragstart",function(e){e.preventDefault()});var J=setTimeout(E,1e3);return j.cancelClickHold=X,j},e.fn.sage.Button_Scale=v,e.fn.sage.fadeOthers=u,e.fn.sage.fadeRing=c,e.fn.sage.hideOthers=d,e.fn.sage.hideRing=h,e.fn.sage.buttonLeftTopCss=a}),define("starc/starc.copypaste",["require","exports","module","underscore","BrowserDetect","views/PitchView"],function(e,t,n){function i(e,t,n,i){function o(e,t){var n=t.addChild({pos:e.pos,text:e.text,width:e.width,scale:e.scale,colour:e.colour});u.each(e.children,function(e){o(e,n)})}if(!t)return h("no parent to attach to!"),null;var r=t.model;return!r.isRoot()||r.isTitle()||r.children().length||getCoggleUser().isAwesome()?void(n.length&&u.each(n,function(e){i&&(e.pos={x:(i.x-t.model.x())*t.model.ltr(),y:i.y-t.model.y()}),o(e,t)})):(d.MultiRoot(),null)}function o(e){for(var t=0,n=4,i=0;i<e.length;i++)if(" "==e[i])t++;else{if("\t"!=e[i])break;t+=n}return t}function r(e){e=String(e);for(var t=e.split(/\r?\n/),n={children:[],level:0},i=n,r=[],s=[],l=0;l<t.length;l++){var a=o(t[l]);if(!/^\s*$/.exec(t[l])){var c=u.sortedIndex(s,a);r.length&&(c<=r.length||l==t.length-1)&&(i=c?r[c-1]:n,r=r.slice(0,c),s=s.slice(0,c));var d={text:$.trim(t[l]),children:[]};i.children.push(d),r.push(d),s.push(a)}}return n.children}function s(e){try{return JSON.parse(e)}catch(e){return null}}function l(e,t){var n,i,o;if(e){if(window.clipboardData)h("get Text data"),i=window.clipboardData.getData("Text");else{var l=e.originalEvent&&e.originalEvent.clipboardData;if(l){try{h("get x-coggle-tree data"),n=l.getData("application/x-coggle-tree")}catch(e){h("failed to get x-coggle-tree data, falling back to plaintext:",e)}h("get text/plain data"),i=l.getData("text/plain")}else h("copy+paste not supported in this browser :(")}h("paste app data, parsing: ",n||i),o=s(n||i),o?o.was_json=!0:(h("paste plaintext fallback, parsing: ",i),o=r(i))}if(t&&(!o||!(o.was_json||o.length>1)||_(o))&&w()){var a=s(w());h("check fallback to internal clip data:",a,typeof a),a&&(a.was_json=!0,o=a)}return o}function a(e,t){h("setClipData:",u.clone(t));var n=JSON.stringify(t);if(b(n),e)if(window.clipboardData)h("set Text data"),window.clipboardData.setData("Text",n);else{var i=e.originalEvent&&e.originalEvent.clipboardData;i?(h("set text/plain data"),i.setData("text/plain",n),h("set x-coggle-tree data"),i.setData("application/x-coggle-tree",n)):h("copy+paste not supported in this browser :'(")}}var u=e("underscore"),c=e("BrowserDetect"),d=e("views/PitchView"),h=function(){window._debug_copypaste&&console.log.apply(console,arguments)},p=null,f=20,g=function(){if(null===p){var e="testforlocalstorage";try{var t=window.localStorage;t.setItem(e,e),t.removeItem(e),p=!0}catch(e){p=!1}}return p},m=function(){return"coggle-clip-"+window.getCoggleUser().id},v=function(){var e=window.localStorage.getItem(m());return e?JSON.parse(e)||[]:[]},y=function(e){window.localStorage.setItem(m(),JSON.stringify(e))},b=function(e){if(g()){var t=v();e!=t[t.length-1]&&(t.push(e),t.length>f&&(t=t.slice(t.length-f)),y(t))}},w=function(){if(!g())return"";var e=v();return e[e.length-1]||""},_=function(e){if(!g())return!1;for(var t=v(),n=0;n<t.length-1;n++)if(t[n]==e)return!0;return!1},E=function(e){if(!e.is("input,textarea"))return!0;var t=e.getInputSelection();return t.start==t.end},C=function(e){return e&&e.length&&e[0].children&&e[0].children.length};$.fn.coggleHandleCopyPaste=function(e){var t=$(this),n=e.node,o=e.diagram,r=function(e){if(h("beforecopy",E(t)),E(t)){if("Firefox"==c.browser)try{a(e,[n.model.serialise()])}catch(e){}e.preventDefault()}},s=function(e){h("copy",E(t)),E(t)&&(a(e,[n.model.serialise()]),e.preventDefault())},u=function(e){h("beforepaste"),E(t)&&e.preventDefault()},d=function(e){if(h("coggleCopyPaste paste",e,E(t)),E(t)){var r=l(e);if(r.was_json||C(r))return h("paste a coggle tree:",r),i(o,n,r,void 0),e.preventDefault(),!1}};return t.on("beforecopy",r),t.on("copy",s),t.on("beforepaste",u),t.on("paste",d),{remove:function(){t.off("beforecopy",r),t.off("copy",s),t.off("beforepaste",u),t.off("paste",d)}}},n.exports.copy=function(e){a(void 0,[e.node.serialise()])},n.exports.paste=function(e){var t=l(void 0,!0);h("check/paste a coggle tree:",t),t&&(t.was_json||C(t))&&i(e.diagram,e.node,t,e.at)}}),define("starc/starc.menu.background",["require","exports","module","plugins/jquery.sage","plugins/jquery.queryString","starc/starc.copypaste","jquery.l20n","BrowserDetect","env"],function(e,t,n){function i(e){ga&&ga("send","event",e[0],e[1],e[2],e[3])}function o(e){return e&&!c&&((new Image).src=e),e}function r(t){return e("env").cdn.url+"/img/sage/"+t}function s(e,t,n,i,o,r,s,l){function a(t){w||(t.append(y),y.css({transform:"rotate("+(e-g+"deg)"),"webkit-transform":"rotate("+(e-g+"deg)")}),w=!0)}var u=$.fn.sage.Button_Scale,c=2,h=.25,f=90,g=f*(i-c)/(h-c),m=f-g,v=r.diagramCoordsFromEvent({pageX:s,pageY:l}),y=$("<img>",{src:d[n]}).css("z-index",1);y.css({opacity:0});var b=.3*u,w=!1;return{at:e,icon:$("<img/>",{src:p[n]}),tip:$.l10n.get("zoom-page","zoom page"),tip_at:{x:29,y:-16,width_pct:150},commitOnClickhold:!0,activate:function(e,n,i,o){$.fn.sage.fadeOthers(e,n,i,o);var r=u*t*Math.max(b/u,1-n);e.button.css({width:r,height:r,"margin-left":(u-b)*t/2,"margin-top":(u-b)*t/2}),a(i),this.icon.css({opacity:Math.max(.2,Math.min(1,1.2-1.2*n))}),y.css({opacity:n})},deactivate:function(e,n,i){var o=u*t;e.button.css({width:o,height:o,"margin-left":0,"margin-top":0}),this.icon.css({opacity:""}),y.animate({opacity:0},100,"swing")},commit:function(e,n,i){$.fn.sage.hideOthers(e,n,i);var o=b*t;w?(e.button.css({width:o,height:o,"margin-left":(u-b)*t/2,"margin-top":(u-b)*t/2}),this.icon.css({opacity:0})):(a(n),e.button.animate({width:o,height:o,"margin-left":(u-b)*t/2,"margin-top":(u-b)*t/2},200,"swing"),y.css({opacity:1},400,"swing"),this.icon.animate({opacity:0},400,"swing"))},setParameter:function(e,n,i,o,s){var l=-g,a=m,u=Math.min(Math.max(l,o),a),d=c+(h-c)*(u-l)/(a-l),p=n.offset();this.cx=p.left+t/2,this.cy=p.top+t/2,e.button.css($.fn.sage.buttonLeftTopCss((this.at+u)*Math.PI/180)),e.button.find(".sagehint").text(Math.round(100*d)+"%"),r.setScale(d,v)},finish:function(){},cancel:function(){r.setScale(i)}}}function l(e,t){var n=t.initial_zoom,o=t.size,r=(t.colour,t.diagram),l=1,u=!!t.hasOwnProperty("readonly")&&t.readonly,c={};return $("body").hasClass("mobile-app")||(c.zoom=s(67.5,o,l,n,e,r,t.x,t.y)),u||(c.add={at:247.5,icon:$("<img/>",{src:g[l],alt:"add"}),tip:$.l10n.get("add-label","add label"),tip_at:{x:-45,y:11,width_pct:150},finish:function(){var e=r.diagramCoordsFromEvent({pageX:t.x,pageY:t.y}),n=r.createRoot({pos:e});n.editNode()}},c.undo={at:202.5,active:r.hasUndoStep.bind(r),icon:$("<img/>",{src:h[l]}),tip:$.l10n.get("undo","undo"),tip_at:{x:-16,y:35,width_pct:100},finish:r.undoStep.bind(r)},c.redo={at:157.5,active:r.hasRedoStep.bind(r),icon:$("<img/>",{src:h[l]}).css({transform:"scaleX(-1)","webkit-transform":"scaleX(-1)"}),tip:$.l10n.get("redo","redo"),tip_at:{x:2,y:35,width_pct:100},finish:r.redoStep.bind(r)},c.paste={at:22.5,icon:$("<img/>",{src:f[l],alt:"paste"}),tip:$.l10n.get("paste-branch","paste branch"),tip_at:{x:10,y:-34},finish:function(){var e=r.diagramCoordsFromEvent({pageX:t.x,pageY:t.y}),n=r.closestNode(e.x,e.y);a({diagram:r,at:e,node:n})}}),i(["Sage","Open","Background"]),getCoggleUser().getActions().unique("background-contextmenu-opened"),e.sage($.extend(t,{actions:c}))}e("plugins/jquery.sage"),e("plugins/jquery.queryString");var a=e("starc/starc.copypaste").paste;e("jquery.l20n");var u=e("BrowserDetect"),c=$.queryString().print,d=[null,o(r("zoomscale.png"))],h=[null,o(r("undo.png"))],p=[null,o(r("zoom.png"))],f=[null,o(r("paste.png"))],g=[null,o(r("plus.png"))];n.exports=function(e){e.$el.bind("contextmenu press",function(t){if($(t.target).is("svg")||$(t.target).is(".diagram-editor")){if(t.preventDefault(),t.stopPropagation(),!t.originalEvent)return!1;if(!$(".sagemenu").length){var n=$("body").hasClass("touch")?200:150;if("Android"!==u.OS){var i=window.innerHeight/$(window).height();n*=i}var o=e.documentCoordsFromEvent(t),r=l($("body"),{size:n,x:o.x,y:o.y,initial_zoom:e.getScale(),colour:"#ffffff",readonly:e.editingPrevented(),diagram:e});return"contextmenu"==t.type&&"Windows"===u.OS&&r&&r.cancelClickHold(t),!1}}})}}),define("views/ColourMenu",["require","exports","module","underscore","backbone","views/PitchView","jquery.outsideEvents","env","env"],function(e,t,n){var i=e("underscore"),o=(e("backbone"),e("views/PitchView"));e("jquery.outsideEvents");var r='<div class="colourmenu">    <?xml version="1.0" encoding="UTF-8"?>    <svg viewBox="0 0 136 121" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">        <path d="M16.5765012,44.2306491 C20.3268458,19.1970992 41.9215615,1.42108547e-14 68,1.42108547e-14 C93.913952,1.42108547e-14 115.400564,18.9556962 119.350408,43.757661 L135.169314,41.8153435 L135.413053,43.8004358 C136.396297,51.8083129 135.948016,59.9130863 134.094903,67.7490558 L134.120473,67.7559074 L133.772768,69.0535604 C133.66907,69.4563725 133.561635,69.8584143 133.450465,70.2596358 L132.91631,72.1874508 L132.88436,72.1785903 C130.70239,79.2359109 127.387642,85.887912 123.064959,91.8806006 L123.088252,91.8984738 L120.653933,95.0724448 L120.630501,95.0544656 C115.841334,100.931054 110.098585,105.96409 103.635988,109.952085 L103.650628,109.977443 L100.186527,111.977443 L100.171883,111.952079 C93.4868828,115.55486 86.2567712,118.011709 78.7729137,119.220961 L78.7767678,119.250237 L74.8108688,119.771434 L74.8070359,119.742319 C67.4558741,120.489535 60.0376985,120.03419 52.8348945,118.395171 L52.8348923,118.395179 L52.8265927,118.427271 L50.8899784,117.925955 C50.4869256,117.82162 50.0850295,117.713641 49.6843353,117.60204 L48.3866823,117.254334 L48.3935351,117.228759 C40.6808285,114.915623 33.4377486,111.251458 26.9943454,106.396006 L25.3970744,105.192376 L35.1210525,92.2882209 C32.8094753,90.3994993 30.6634584,88.3157791 28.7081031,86.0621616 L16.187096,96.0219235 L14.9419872,94.4573428 C9.79959283,87.9955052 5.88451584,80.6514337 3.37568898,72.7799097 L3.34753637,72.7879823 L2.24498695,68.9429355 L2.27313151,68.9348652 L2.27313955,68.9348629 C0.22947319,60.9299562 -0.342118181,52.6271557 0.594627349,44.4221527 L0.821438055,42.4355059 L16.5765012,44.2306491 Z M68,69 C77.3888407,69 85,61.3888407 85,52 C85,42.6111593 77.3888407,35 68,35 C58.6111593,35 51,42.6111593 51,52 C51,61.3888407 58.6111593,69 68,69 Z" id="background" fill="#FFFFFF"></path>        <g id="line_weight" transform="translate(28.000000, 43.000000)">            <g id="10" transform="translate(90.000000, 0.000000)">                <path d="M15.5093829,0.956459183 C16.565884,9.56096995 15.9197573,18.2819229 13.6045046,26.6378851 L0.107699962,22.8949633 C1.9358158,16.315739 2.44547487,9.4424539 1.61302786,2.66271704 L15.5093829,0.956459183 Z" fill="#FFFFFF"></path>                <path d="M6.25858873,4.10733354 L12.2200169,3.3753622 C12.7571963,10.1512179 12.1963623,17.0229827 10.5020774,23.7020412 L4.71727783,22.0978058 C6.20279834,16.1846087 6.70655001,10.1061894 6.25858873,4.10733354 L6.25858873,4.10733354 Z" fill="#979797" fill-rule="nonzero"></path>            </g>            <g id="8" transform="translate(81.000000, 22.000000)">                <path d="M22.7524056,4.08240559 C20.5086699,12.4561413 16.6426652,20.3000248 11.3658017,27.1802291 L0.253905535,18.6538604 C4.41352583,13.2385341 7.4608514,7.0566568 9.2287541,0.458754097 L22.7524056,4.08240559 Z" fill="#FFFFFF"></path>                <path d="M13.4783903,3.66799304 L18.313004,4.9634239 C16.2901055,11.38429 13.225068,17.4860609 9.19219218,22.9914422 L5.2233467,19.9460718 C8.85583769,14.9672641 11.6291109,9.46065547 13.4783903,3.66799304 Z" fill="#979797" fill-rule="nonzero"></path>            </g>            <g id="6" transform="translate(66.000000, 40.000000)">                <path d="M26.3658017,9.18022912 C21.0889382,16.0604335 14.5084403,21.8226766 7,26.1576766 L0,14.033321 C5.91495351,10.618321 11.0942852,6.0691867 15.2539055,0.653860398 L26.3658017,9.18022912 Z" fill="#FFFFFF"></path>                <path d="M17.9515738,5.24476753 L21.5261953,7.98764236 C17.3175607,13.0110953 12.2364751,17.4391638 6.34811989,21.0285872 L4.09741638,17.1302543 C9.45919347,13.8479882 14.0964198,9.81460151 17.9515738,5.24476753 L17.9515738,5.24476753 Z" fill="#979797" fill-rule="nonzero"></path>            </g>            <g id="4" transform="translate(46.000000, 54.000000)">                <path d="M27,12.1576766 C19.4915597,16.4926766 11.2110618,19.3104335 2.6141983,20.4402291 L0.786094465,6.5538604 C7.55571476,5.6591867 14.0850465,3.448321 20,0.0333209968 L27,12.1576766 Z" fill="#FFFFFF"></path>                <path d="M20.9914947,5.75064011 L22.4928004,8.35097794 C16.5062031,11.4928961 10.2152997,13.5418946 3.8575489,14.5616003 L3.46571629,11.5852201 C9.44362648,10.6173778 15.3583467,8.6920282 20.9914746,5.75065058 L20.9914947,5.75064011 Z" fill="#979797" fill-rule="nonzero"></path>            </g>            <g id="2" transform="translate(22.000000, 59.000000)">                <path d="M26.6141983,15.4402291 C18.0173348,16.5700248 9.29133013,15.9961413 0.917594405,13.7524056 L4.5412459,0.228754097 C11.1391486,1.9966568 18.0164742,2.44853409 24.7860945,1.5538604 L26.6141983,15.4402291 Z" fill="#FFFFFF"></path>                <path d="M4.85326214,6.79170026 L4.59429765,7.75816889 C10.830311,9.20952123 17.3033318,9.67020755 23.7585757,9.07195862 L23.6279246,8.07952638 C17.3039836,8.66149039 10.9631853,8.21008847 4.85326214,6.79170026 L4.85326214,6.79170026 Z" fill="#979797"></path>            </g>            <g id="auto" transform="translate(0.000000, 50.000000)">                <path d="M23.4726043,22.9020594 C15.0785024,20.7291459 7.20287222,16.9282315 0.279397854,11.7110194 L8.70523803,0.52955181 C14.1604389,4.6403405 20.3677079,7.63560534 26.9795412,9.34202273 L23.4726043,22.9020594 Z" fill="#FFFFFF"></path>                <path d="M9.74063146,13.4672717 L9.48184239,12.6176623 L8.18057286,12.6176623 L7.9217838,13.4672717 L7.10635411,13.4672717 L8.36611974,9.88328734 L9.29141271,9.88328734 L10.5560611,13.4672717 L9.74063146,13.4672717 Z M9.30117833,11.9828967 C9.06191932,11.2130361 8.92723643,10.7776563 8.8971256,10.6767444 C8.86701477,10.5758324 8.84544923,10.4960806 8.83242833,10.4374866 C8.77871713,10.6458209 8.62491007,11.1609525 8.37100255,11.9828967 L9.30117833,11.9828967 Z M13.9105533,9.89793578 L13.9105533,12.2075061 C13.9105533,12.4711793 13.8515533,12.7022968 13.7335514,12.9008655 C13.6155495,13.0994342 13.4450597,13.2516136 13.2220768,13.3574084 C12.9990939,13.4632032 12.7354246,13.5160998 12.4310611,13.5160998 C11.9720745,13.5160998 11.6156327,13.3985066 11.3617252,13.1633166 C11.1078177,12.9281267 10.9808658,12.6062712 10.9808658,12.1977405 L10.9808658,9.89793578 L11.7352604,9.89793578 L11.7352604,12.0829944 C11.7352604,12.3580608 11.7905984,12.5598817 11.901276,12.6884631 C12.0119536,12.8170445 12.1950573,12.8813342 12.4505924,12.8813342 C12.6979895,12.8813342 12.877431,12.8166376 12.9889225,12.6872424 C13.1004139,12.5578472 13.1561588,12.3548056 13.1561588,12.0781116 L13.1561588,9.89793578 L13.9105533,9.89793578 Z M16.1615299,13.4672717 L15.404694,13.4672717 L15.404694,10.5278186 L14.4354557,10.5278186 L14.4354557,9.89793578 L17.1307682,9.89793578 L17.1307682,10.5278186 L16.1615299,10.5278186 L16.1615299,13.4672717 Z M20.9198307,11.6777209 C20.9198307,12.2685442 20.7733478,12.7226412 20.4803776,13.0400256 C20.1874073,13.35741 19.7674897,13.5160998 19.2206119,13.5160998 C18.6737342,13.5160998 18.2538165,13.35741 17.9608463,13.0400256 C17.6678761,12.7226412 17.5213932,12.2669166 17.5213932,11.6728381 C17.5213932,11.0787596 17.668283,10.6250695 17.962067,10.3117541 C18.255851,9.99843877 18.6769894,9.84178343 19.2254947,9.84178343 C19.7740001,9.84178343 20.1935109,9.99965946 20.4840397,10.3154162 C20.7745685,10.631173 20.9198307,11.0852701 20.9198307,11.6777209 Z M18.3148502,11.6777209 C18.3148502,12.0764859 18.390533,12.3767759 18.541901,12.5785998 C18.6932689,12.7804238 18.9195036,12.8813342 19.2206119,12.8813342 C19.8244561,12.8813342 20.1263736,12.4801338 20.1263736,11.6777209 C20.1263736,10.8736805 19.8260837,10.4716662 19.2254947,10.4716662 C18.9243865,10.4716662 18.697338,10.5729836 18.5443424,10.7756213 C18.3913468,10.9782591 18.3148502,11.2789559 18.3148502,11.6777209 Z" fill="#979797" transform="translate(14.013092, 11.678942) rotate(26.000000) translate(-14.013092, -11.678942) "></path>            </g>        </g>        <g id="line_style" transform="translate(1.000000, 44.000000)">            <g id="solid">                <path d="M1.41966217,0.526895518 C0.436128563,9.14171772 1.16695219,17.8579266 3.55672807,26.1920655 L17.0143918,22.3331425 C15.1317887,15.7677251 14.5661834,8.89748562 15.3358047,2.11251082 L1.41966217,0.526895518 Z" fill="#FFFFFF"></path>                <path d="M9.45998264,3.45595605 L6.47549942,3.11590188 C6.02353923,9.55773722 6.595067,16.1739305 8.30977411,22.7485526 L11.1944602,21.9213822 C9.59003397,15.7379215 9.04858322,9.51655569 9.45998264,3.45595605 L9.45998264,3.45595605 Z" fill="#979797" fill-rule="nonzero"></path>            </g>            <g id="dashed" transform="translate(3.000000, 22.000000)">                <path d="M0.556728068,4.19206548 C2.94650394,12.5262044 6.94561734,20.3052462 12.3448614,27.0898364 L23.3061715,18.3707263 C19.0580068,13.0245785 15.896995,6.89855989 14.0143918,0.333142502 L0.556728068,4.19206548 Z" fill="#FFFFFF"></path>                <path d="M14.5061621,20.5850518 C13.7178629,19.4690126 12.966908,18.3256682 12.254623,17.1565482 L14.816589,15.5956734 C15.4935745,16.706854 16.2073089,17.7935294 16.9565413,18.8542596 L14.5061621,20.5850518 Z M11.1063343,15.1894583 C10.4403971,13.9977583 9.81388554,12.7820504 9.22790048,11.5438045 L11.9395819,10.2605337 C12.4966361,11.4376459 13.0921806,12.593264 13.7251767,13.7260155 L11.1063343,15.1894583 Z M8.29295142,9.46873807 C7.75613524,8.21535326 7.2601357,6.94123987 6.80584175,5.64777214 L9.63633691,4.65364079 C10.0684518,5.88396011 10.5401751,7.09571331 11.0506643,8.28762845 L8.29295142,9.46873807 Z" fill="#979797" fill-rule="nonzero"></path>            </g>        </g>        <g id="colours" transform="translate(18.000000, 2.000000)" fill-rule="nonzero">            <g id="colour-vivid">                <path d="M49.072503,14.018401 C55.385968,13.862526 61.651499,15.382989 67.201436,18.395851 C70.586984,14.832464 72.454874,10.565092 73.898291,6.1008211 C66.183244,1.9079969 57.502441,-0.19563522 48.723989,0.02218093 C47.156016,5.5332042 47.422813,10.122981 49.072503,14.018401 Z" id="Shape" fill="#E23E2B"></path>                <path d="M6.1008173,26.101716 C10.03987,28.747768 13.554841,32.495396 18.395848,32.79857 C21.317368,27.416892 25.628906,22.702804 31.230205,19.28039 C29.280702,15.002725 26.900819,10.988024 23.93084,7.3338736 C16.158272,12.082941 10.158363,18.63559 6.1008173,26.101716 Z" id="Shape" fill="#5F5F5F"></path>                <path class="enabled" d="M31.203539,19.296684 C31.212539,19.291184 31.221219,19.285884 31.230209,19.280394 C36.831507,15.857981 42.993617,14.172632 49.115466,14.028778 L48.766949,0.03255404 C40.271934,0.23608838 31.703407,2.5848064 23.93084,7.3338736 C23.92184,7.3393536 23.91315,7.3446736 23.90417,7.3501666 L31.203536,19.296684 L31.203539,19.296684 Z" id="Shape" fill="#B4B4B4"></path>                <path d="M7.350163,76.095834 C11.876633,74.553538 16.301747,72.845357 19.29668,68.796468 C19.29118,68.787468 19.28588,68.778788 19.28039,68.769798 C15.857973,63.168503 14.172624,57.006394 14.02877,50.884544 C8.902454,49.528946 4.4332776,50.271717 0.03255025,51.233058 C0.23608493,59.728073 2.5848026,68.2966 7.3338698,76.069167 C7.3393498,76.078167 7.3446728,76.086857 7.3501628,76.095837 L7.350163,76.095834 Z" id="Shape" fill="#075978"></path>                <path d="M0.02217714,51.276017 L14.018397,50.927504 C13.862523,44.614039 15.382985,38.348507 18.395848,32.79857 L6.1008173,26.101716 C1.9079931,33.816763 -0.19563901,42.497566 0.02217714,51.276017 L0.02217714,51.276017 Z" id="Shape" fill="#272727"></path>                <path d="M26.101712,93.899189 C33.816759,98.092014 42.497562,100.19565 51.276014,99.97783 C52.759239,95.570787 52.147363,90.825305 50.9275,85.98161 C44.614035,86.137484 38.348504,84.617022 32.798566,81.604159 C28.226124,84.680945 27.481338,89.428632 26.101712,93.899189 L26.101712,93.899189 Z" id="Shape" fill="#3E8975"></path>                <path d="M7.3338698,76.069167 C12.082937,83.841735 18.635587,89.841644 26.101712,93.899189 L32.798566,81.604159 C27.416888,78.682639 22.7028,74.3711 19.280387,68.769802 L7.3338698,76.069167 Z" id="Shape" fill="#0DA7D3"></path>                <path d="M76.069163,92.666137 C83.841731,87.91707 89.84164,81.36442 93.899186,73.898295 C90.386854,70.8643 87.096051,67.527239 81.604155,67.20144 C78.682635,72.583118 74.371097,77.297206 68.769798,80.71962 C69.124766,85.971552 73.105871,89.007901 76.069163,92.666137 Z" id="Shape" fill="#69B500"></path>                <path d="M51.233054,99.967457 C59.728069,99.763922 68.296596,97.415204 76.069163,92.666137 C76.078163,92.660637 76.086853,92.655337 76.095833,92.649847 L68.796464,80.703327 C68.787464,80.708827 68.778784,80.714127 68.769794,80.719617 C63.168496,84.142031 57.006386,85.82738 50.884537,85.971234 L51.23305,99.967454 L51.233054,99.967457 Z" id="Shape" fill="#0A660D"></path>                <path d="M85.971233,49.115466 C92.634237,52.268665 96.3602,50.614954 99.967453,48.766953 C99.763918,40.271938 97.4152,31.703411 92.666133,23.930843 C92.660633,23.921843 92.655333,23.913153 92.649843,23.904173 C87.708918,25.262345 83.426719,27.359078 80.703326,31.203538 C80.708826,31.212538 80.714126,31.221218 80.719616,31.230208 C84.14203,36.831506 85.827379,42.993615 85.971233,49.115465 L85.971233,49.115466 Z" id="Shape" fill="#FFAA38"></path>                <path d="M81.604155,67.20144 L93.899186,73.898295 C98.09201,66.183248 100.19564,57.502445 99.977826,48.723993 L85.981606,49.072507 C86.13748,55.385972 84.617018,61.651503 81.604155,67.20144 Z" id="Shape" fill="#E8E525"></path>                <path d="M67.201436,18.395851 C72.583115,21.317371 77.297203,25.62891 80.719616,31.230209 L92.666133,23.930843 C87.917066,16.158276 81.364416,10.158366 73.898291,6.1008211 L67.201436,18.395851 Z" id="Shape" fill="#A65427"></path>            </g>            <g id="colour-pastel" transform="translate(15.000000, 15.000000)">                <path d="M34.3125,0.625 C30.420759,0.70645 26.575229,1.435645 22.96875,2.78125 C23.529106,8.412155 24.506549,13.866743 28.375,17.25 C32.922135,15.553421 38.111214,15.575097 42.875,17.75 C46.201831,13.633058 47.651083,8.190033 49.28125,3.71875 C44.423425,1.500914 39.316167,0.520276 34.3125,0.625 Z" id="Shape" fill="#E096E9"></path>                <path d="M27.125,52.25 C25.688786,54.389457 24.090593,56.463613 23.25,58.875 C23.2468,58.8843 23.2532,58.89692 23.25,58.90625 C21.875542,61.118212 20.773886,63.466952 20.71875,66.28125 C29.354883,70.22407 38.787869,70.294419 47.03125,67.21875 C47.018933,64.10389 46.113933,61.441328 44.8125,59 C44.147105,56.708402 42.972451,54.685236 41.625,52.75 C37.077864,54.446579 31.888786,54.424903 27.125,52.25 Z" id="Shape" fill="#9ED56B"></path>                <path d="M3.71875,20.71875 C-0.22407,29.354883 -0.29442,38.78787 2.78125,47.03125 C8.04824,46.479592 13.561116,45.232631 17.25,41.625 C15.553421,37.077864 15.575097,31.888786 17.75,27.125 C13.513278,24.083576 8.434568,20.99907 3.71875,20.71875 Z" id="Shape" fill="#EFA670"></path>                <path d="M67.21875,22.96875 C62.033325,24.48222 56.968044,25.68199 52.75,28.375 C54.446579,32.922136 54.424903,38.111215 52.25,42.875 C56.742008,45.462438 61.536097,47.783678 66.28125,49.28125 C70.22407,40.645118 70.29442,31.212131 67.21875,22.96875 Z" id="Shape" fill="#7AA3E5"></path>                <path d="M52.25,42.875 C50.075091,47.6388 46.172137,51.053429 41.625,52.75 C43.45549,57.681261 45.438611,62.931707 47.03125,67.21875 C55.274626,64.143072 62.338431,57.917384 66.28125,49.28125 C61.60378,47.146665 56.92143,45.022784 52.25,42.875 Z" id="Shape" fill="#67D7C4"></path>                <path d="M17.25,41.625 C13.843694,42.896701 10.149792,44.269275 7.15625,45.375 C7.15955,45.384 7.15285,45.3973 7.15625,45.40625 L2.78125,47.03125 C5.856928,55.274625 12.082616,62.338431 20.71875,66.28125 L22.65625,62.03125 L25.875,54.96875 L27.125,52.25 C22.361201,50.075092 18.946571,46.172137 17.25,41.625 Z" id="Shape" fill="#EBD95F"></path>                <path d="M22.96875,2.78125 C14.725373,5.856929 7.661569,12.082617 3.71875,20.71875 L7.96875,22.65625 L15.03125,25.875 L17.75,27.125 C19.924908,22.361203 23.827862,18.946572 28.375,17.25 C26.479535,12.059118 24.736942,7.55191 22.96875,2.78125 Z" id="Shape" fill="#E68782"></path>                <path d="M49.28125,3.71875 C47.125625,8.443635 44.785276,13.593903 42.875,17.75 C47.638798,19.924908 51.053428,23.827862 52.75,28.375 C57.770086,26.533098 62.562908,24.694385 67.21875,22.96875 C64.143071,14.725374 57.917383,7.66157 49.28125,3.71875 Z" id="Shape" fill="#988EE3"></path>            </g>        </g>    </svg>    </div>',s=function(){
i.bindAll(this,"show","hide","_selected"),this.$el=$(r),this.$el.find("#colour-pastel path").addClass("enabled"),getCoggleUser().paysForColours()||this.$el.find("#colour-vivid path").addClass("enabled"),$.addOutsideEvent("touchstart")};s.instance=function(){return s._instance||(s._instance=new s),s._instance},s.prototype._selected=function(t){if(!this.callback)return this.hide();var n=$(t.target);return n.hasClass("enabled")?(n.closest("#colours").length?this.callback(!1,{colour:n.attr("fill")}):n.closest("#line_weight").length?this.callback(!1,{weight:parseFloat(n.closest("g").attr("id"))||null}):n.closest("#line_style").length&&this.callback(!1,{style:n.closest("g").attr("id")||null}),void this.hide()):(n.closest("#colours").length?o.show({id:"pitch:extendedcolours",title:"More Colours!",teaser:e("env").cdn.url+"/img/features/change-colours.gif",message:"The outer ring of colours is included in our Awesome plan along with loads of other great features. Upgrade now to use all the colours."}):o.show({id:"pitch:linestyles",title:"Line Styling",teaser:e("env").cdn.url+"/img/features/adjust-thickness.gif",message:"The Awesome plan comes with loads of great features, including control of line thickness and pattern! Upgrade now to customise your diagram."}),this.callback(!0))},s.prototype.show=function(e,t,n,i){return $(e).append(this.$el),this.$el.find("svg path").on("click",this._selected),this.$el.on("mousedownoutside",this.hide),this.$el.on("touchstartoutside",this.hide),this.$el.css({left:t,top:n}),setTimeout(function(){this.$el.addClass("active")}.bind(this),0),this.callback=i,this},s.prototype.extended=function(e){e&&(this.$el.find("#colour-vivid path").addClass("enabled"),this.$el.find("#colour-pastel path").addClass("enabled"),this.$el.find("#line_weight path").addClass("enabled"),this.$el.find("#line_style path").addClass("enabled"))},s.prototype.hide=function(){this.$el.removeClass("active"),this.$el.remove()},n.exports=s}),define("starc/starc.menu.node",["require","exports","module","underscore","plugins/jquery.sage","jquery.l20n","plugins/jquery.queryString","BrowserDetect","starc/starc.copypaste","models/NotificationSearch","views/ColourMenu","views/PitchView","utils/trackModifiers","env"],function(e,t,n){function i(e){ga&&ga("send","event",e[0],e[1],e[2],e[3])}function o(e){return e&&!m&&((new Image).src=e),e}function r(t){return e("env").cdn.url+"/img/sage/"+t}function s(e){function t(){return g&&(g.control_key_pressed||g.alt_key_pressed)&&!g.shift_key_pressed}var n=e.node,i=e.diagram,o=e.size;e.actions={add:{active:!n.joinedNode(),at:247.5,icon:$("<img/>",{src:v,alt:"add"}),tip:$.l10n.get("add-branch","add branch"),tip_at:{x:-45,y:11,width_pct:150},finish:function(){var e=i.getNodeForId(n.id);!n.isRoot()||n.isTitle()||n.children().length||getCoggleUser().isAwesome()?e.addChild(void 0,n.isRoot()?"left":void 0).editNode():f.MultiRoot()}},"copy-or-cogglify":{active:!n.joinedNode(),at:157.5,icon:function(){return g.shift_key_pressed?$("<img/>",{src:_,alt:$.l10n.get("copy-branch-to-diagram","copy branch to new diagram")}):g.alt_key_pressed||g.control_key_pressed?$("<img/>",{src:_,alt:$.l10n.get("move-branch-to-diagram","move branch to new diagram")}):$("<img/>",{src:x,alt:$.l10n.get("copy-branch","copy branch")})},tip:function(){return g.shift_key_pressed?$.l10n.get("copy-branch-to-diagram","copy branch to new diagram"):g.alt_key_pressed||g.control_key_pressed?$.l10n.get("move-branch-to-diagram","move branch to new diagram"):$.l10n.get("copy-branch","copy branch")},tip_at:{x:20,y:27,width_pct:150},finish:function(){g.shift_key_pressed?i.cogglify(i.getNodeForId(n.id),!1):(g.alt_key_pressed||g.control_key_pressed)&&i.cogglify(i.getNodeForId(n.id),!0),d({node:n})}},comment:{active:!n.joinedNode(),at:292.5,icon:function(){return g.shift_key_pressed?$("<img/>",{src:A,alt:this.tip()}):$("<img/>",{src:F,alt:this.tip()})},tip:function(){return g.shift_key_pressed?$.l10n.get("add-to-discussion","add to discussion"):$.l10n.get("comment-on-this","comment on this")},tip_at:function(){return g.shift_key_pressed?{x:-68,y:-16,width_pct:210}:{x:-63,y:-16,width_pct:210}},finish:function(){$(".notification-creation").trigger("expand");var e=h&&h.instance();g.shift_key_pressed?e.pushNode(n):e.setNodes([n]),setTimeout(function(){$(".notification-panel .editor textarea").focus()},200)}},rearrange:{active:!n.joinedNode(),at:22.5,icon:function(){return $("<img/>",{src:S,alt:"neatify"})},tip:$.l10n.get("auto-arrange","auto-arrange"),tip_at:{x:3,y:-40},finish:function(){var e=i.getNodeForId(n.id);e.arrange()}}},e.actions.paint={at:67.5,icon:$("<img/>",{src:y,alt:"add"}),tip:$.l10n.get("choose-style","choose style"),tip_at:{x:30,y:-15,width_pct:150},finish:function(){var t=i.documentCoordsFromEvent({pageX:e.x,pageY:e.y});p.instance().show($("body"),t.x,t.y,function(e,t){if(!e&&t){var o=i.getNodeForId(n.id);"undefined"!=typeof t.colour&&o.setColour(t.colour,!n.isRoot()&&!g.shift_key_pressed),"undefined"!=typeof t.weight&&o.setLineWeight(t.weight,!g.shift_key_pressed),"undefined"!=typeof t.style&&o.setLineStyle(t.style)}}).extended(getCoggleUser().isAwesome())}},n.isRoot()?n.isTitle()?e.actions["add right"]={at:112.5,icon:$("<img/>",{src:v,alt:"add"}),tip:$.l10n.get("add-branch","add branch"),tip_at:{x:31,y:11,width_pct:150},finish:function(){var e=i.getNodeForId(n.id);e.addChild(void 0,"right").editNode()}}:e.actions.remove={at:112.5,icon:$("<img/>",{src:b,alt:"remove"}),tip:$.l10n.get("delete-label","delete label"),tip_at:{x:32,y:11,width_pct:170},finish:function(){var e=i.getNodeForId(n.id);e&&e.deleteNode()}}:e.actions.remove={at:112.5,icon:function(){return t()?$("<img/>",{src:w,alt:"squash"}):$("<img/>",{src:b,alt:"remove"})},tip:function(){return t()?$.l10n.get("remove-item","remove item"):$.l10n.get("delete-branch","delete branch")},tip_at:function(){return t()?{x:38,y:11,width_pct:170}:{x:32,y:11,width_pct:170}},finish:function(){var e=i.getNodeForId(n.id);e&&(t()?e.squashNode():e.deleteNode())}};var r,s=null,l=null,a=$.fn.sage.Button_Scale;e.actions.linkify={active:!n.joinedNode(),at:337.5,icon:$("<img/>",{src:E,alt:"cross-link"}),tip:$.l10n.get("drag-to-create-link","drag to create link"),class:"wobble-button-nw",tip_at:{x:-35,y:-45,width_pct:160},commitOnClickhold:!0,activate:function(e,t,n,i){$.fn.sage.fadeOthers(e,t,n,i),$.fn.sage.fadeRing(t,n)},deactivate:function(e,t,n){$.fn.sage.fadeOthers(e,0,t,n),$.fn.sage.fadeRing(0,t),e.button.animate({width:a*o,height:a*o},200,"swing")},commit:function(e,t,s){$.fn.sage.hideOthers(e,t,s),$.fn.sage.hideRing(t),l=e.button,e.button.animate({width:.7*a*o,height:.7*a*o},200,"swing"),l.find(".sagehint").hide();var u=i.getNodeForId(n.id);u||(console.error("view not found for node",n.id),this.cancel()),r=u.newEphemeralCrosslink()},cancel:function(){s=null,l&&l.remove(),r&&r.remove(),r=null,l=null},finish:function(){if(s){var e=i.getNodeForId(n.id);e.createCrosslinkTo(s.x,s.y)}this.cancel()},setParameter:function(e,t,o,a,u){if(!r)return console.error("ephemeral link missing"),void this.cancel();s=i.diagramCoordsFromEvent(u),r.drawTo(s);var c=i.getNodeForId(n.id),d=c.targetForCrosslink(s.x,s.y);d?l.css({opacity:1}):l.css({opacity:.3});var h=i.documentCoordsFromEvent(u);l.appendTo($("body")),l.css({position:"absolute",top:h.y-l.height()/2,left:h.x-l.width()/2})}};var u={},c=null,m=null;return n.isTitle()||(e.actions.transplant={active:!n.joinedNode(),at:202.5,icon:$("<img/>",{src:C,alt:"transplant"}),class:"wobble-button-sw",tip:$.l10n.get("drag-to-transplant-branch","drag to transplant branch"),tip_at:{x:-40,y:32},commitOnClickhold:!0,activate:function(e,t,n,i){$.fn.sage.fadeOthers(e,t,n,i),$.fn.sage.fadeRing(t,n)},deactivate:function(e,t,n){$.fn.sage.fadeOthers(e,0,t,n),$.fn.sage.fadeRing(0,t),e.button.animate({width:a*o,height:a*o},200,"swing")},commit:function(e,t,i){$.fn.sage.hideOthers(e,t,i),$.fn.sage.hideRing(t),m=e.button;m.offset();m.find(".sagehint").hide(),u={x:n.x(),y:n.y(),parent:n.parent()},c=null},_cleanup:function(){var e=i.getNodeForId(n.id);e&&(e.getConnection().setOpacity(1),n.isRoot()&&e.setOpacity(1)),u=null,m&&(m.remove(),m=null)},cancel:function(){n.reparentTo(u.parent),n.positionAbsolutely(u.x,u.y),this._cleanup()},finish:function(){n.deltarize({parent_id:n.get("parent_id"),pos:n.pos()}),this._cleanup()},setParameter:function(e,t,o,r,s){if(m){var l=i.documentCoordsFromEvent(s);m.appendTo($("body")),m.css({position:"absolute",top:l.y-m.height()/2,left:l.x-m.width()/2});var a=i.diagramCoordsFromEvent(s),u=i.getNodeForId(n.id);null===c&&(c={x:a.x,y:a.y}),u?u.moveBranchTo(a.x,a.y,!0,c):this._cleanup()}}}),$("body").sage(e)}function l(e){return e.actions={copy:{at:157.5,icon:$("<img/>",{src:x,alt:"copy"}),tip:$.l10n.get("copy-branch","copy branch"),tip_at:{x:20,y:27,width_pct:150},finish:function(){d({node:e.node})}}},$("body").sage(e)}function a(e){return e.actions={expand:{at:337.5,icon:$("<img/>",{src:T,alt:"expand"}),tip:$.l10n.get("show-children","show children"),finish:function(){e.node.expandChildren()}},collapse:{at:112.5,icon:$("<img/>",{src:O,alt:"collapse"}),tip:$.l10n.get("hide-children","hide children"),finish:function(){e.node.collapseChildren()}}},$("body").sage(e)}function u(e,t,n){if(!$(".sagemenu").length){var o=n.getNodeForId(t);if(o){var r=$("body").hasClass("touch")?200:150;if("Android"!==c.OS){var u=window.innerHeight/$(window).height();r*=u}var d,h={size:r,x:e.x,y:e.y,node:o.model,diagram:n,colour:o.model.colour()};return n.historyMode()?(d=l(h),i(["Sage","Open","NodeHM"])):n.presentationMode()?(d=a(h),i(["Sage","Open","NodePM"])):n.editingPrevented()||(d=s(h),i(["Sage","Open","Node"])),getCoggleUser().getActions().unique("node-contextmenu-opened"),o.model.once("destroy",function(){d&&d.remove&&d.remove()}),d}}}e("underscore");e("plugins/jquery.sage"),e("jquery.l20n"),e("plugins/jquery.queryString");var c=e("BrowserDetect"),d=e("starc/starc.copypaste").copy,h=e("models/NotificationSearch"),p=e("views/ColourMenu"),f=e("views/PitchView"),g=e("utils/trackModifiers"),m=$.queryString().print,v=(o(r("undo-w.png")),o(r("plus-w.png"))),y=o(r("paint.png")),b=o(r("cross-w.png")),w=o(r("minus-w.png")),_=(o(r("dup-w.png")),o(r("cogglify-w.png"))),E=o(r("vdash-w.png")),C=o(r("transplant-w.png")),F=o(r("comment-w.png")),A=o(r("comment-plus-w.png")),x=o(r("copy-w.png")),S=o(r("rearrange-w.png")),T=o(r("expand-w.png")),O=o(r("collapse-w.png"));n.exports=function(e){e.$el.on("press contextmenu",".node-container .node-content, .starcbutton, path",function(t){if(!$(t.currentTarget).is("textarea,input")){var n=$(t.currentTarget).closest("[data-nodeid]").attr("data-nodeid"),i=e.documentCoordsFromEvent(t),o=u(i,n,e);return"contextmenu"==t.type?(t.preventDefault(),t.stopPropagation(),"Windows"===c.OS&&o&&o.cancelClickHold(t),!1):void 0}})}}),define("starc/starc.menu.colour",["require","exports","module","views/ColourMenu","utils/trackModifiers"],function(e,t,n){var i=e("views/ColourMenu"),o=e("utils/trackModifiers");n.exports=function(e){function t(t){if(!e.editingPrevented()){var n=$(t.currentTarget).closest("[data-nodeid]").attr("data-nodeid"),r=e.getNodeForId(n);if(r&&!r.model.isRoot()){var s=e.documentCoordsFromEvent(t);i.instance().show($("body"),s.x,s.y,function(e,t){!e&&t&&("undefined"!=typeof t.colour&&r.setColour(t.colour,!o.shift_key_pressed),"undefined"!=typeof t.weight&&r.setLineWeight(t.weight,!o.shift_key_pressed),"undefined"!=typeof t.style&&r.setLineStyle(t.style))}.bind(this)).extended(getCoggleUser().isAwesome())}}}e.$el.on("tap","path",t)}}),function(e){"function"==typeof define&&define.amd?define("plugins/jquery.callout",["jquery","jquery.outsideEvents","underscore","jquery-ui/position"],e):e(jQuery)}(function(e,t,n,i){var o=["left","center","right","top","middle","bottom"];e.fn.callout=function(t,i){var r=e(this),s="closed",l=e('<div class="callout"><div class="arrow"></div><div class="contents"></div><div class="arrow mask"></div></div>'),a={appendTo:r,at:"center bottom",my:"center top",of:void 0,callout:void 0,filter:function(e){return!0},closeOn:"mousedownoutside focusoutside",openOn:void 0,closeDelay:0,openDelay:0};i=e.extend(a,i);var u=n.once(function(){l.find(".contents").html(t),e(i.appendTo).append(l),l.reposition(),l.bind("mousedown touchdown click tap touchstart",function(e){e.stopPropagation()})}),c=function(){"closed"==s&&(i.onClose&&i.onClose(l),l.hide())},d=function(){"open"==s&&i.filter()&&(u(),l.show(),i.closeOn&&l.bind(i.closeOn,l.close),i.openOn&&l.bind(i.openOn,l.open),i.onOpen&&i.onOpen(l))};return i.openDelay&&i.openDelay>0&&(d=n.debounce(d,i.openDelay||0)),i.closeDelay&&i.closeDelay>0&&(c=n.debounce(c,i.closeDelay||0)),l.reposition=function(){return l.position({of:i.of||r,at:i.at,my:i.my,collision:"none",using:function(e,t){if(i.callout)for(var n=i.callout.split(" "),r=0;r<2;r++)n.length>r&&o.indexOf(n[r])!=-1&&l.addClass(n[r]);else{var s=t.horizontal,a=t.vertical;i.my.split(" ").indexOf(s)==-1&&("left"==s&&(s="right"),"right"==s&&(s="left")),i.my.split(" ").indexOf(a)==-1&&("top"==a&&(a="bottom"),"bottom"==a&&(a="top")),l.addClass(a).addClass(s)}l.css(e)}}),l},l.close=function(e){return s="closed",c(),l},l.open=function(){return s="open",d(),l},l.isOpen=function(){return"open"==s},i.closeOn&&r.bind(i.closeOn,l.close),i.openOn&&r.bind(i.openOn,l.open),l}}),define("starc/starc.hyperlinks",["require","exports","module","utils/trackModifiers","plugins/jquery.callout"],function(e,t,n){var i=e("utils/trackModifiers");e("plugins/jquery.callout"),n.exports=function(e){function t(){return!(e.editingPrevented()||e.textPopupActive())}function n(e){e.preventDefault(),e.stopPropagation()}function o(t){var n=t.attr("href"),i=t.closest("[data-nodeid]").attr("data-nodeid"),o=e.getNodeForId(i);if(o){var r=o.model.text(),s=r.indexOf(n);o.editNode({start:s,end:s+n.length})}}function r(e){var i=e.data("link-callout");if(!i){var r=e.attr("href"),l=/^#/.exec(r);e.closest(".node-content");i=e.callout(d({url:r,target:l?"":"_blank"}),{at:"center top",my:"center bottom",appendTo:$("body"),closeDelay:20,openDelay:50,filter:t,openOn:!1,closeOn:!1,onOpen:function(){i.reposition(),i.find(".button.editlink").off(".editCallout"),i.find(".button.editlink").one("click.editCallout touchstart.editCallout",function(t){return o(e),i.close(),n(t)}),i.find("a").on("click.editCallout",s)}}),e.data("link-callout",i)}return i}function s(t){var n=$(t.target).attr("href"),i=/^#/.exec(n);i||e.trigger("url:open",n,t)}function l(t){return e.editingPrevented()?s(t):i.control_key_pressed||i.meta_key_pressed?void s(t):(t.preventDefault(),t.stopPropagation(),!1)}function a(e){var t,i=$(e.target);i.is(".node-content a:not(.at-tagged):not(.diagram-link-origin)")&&(t=r(i),t.isOpen()?t.close():(t.open(),n(e))),t!=c&&(u(),c=t)}function u(){c&&c.close(),c=!1}var c,d=_.template("<div class='item-hyperlink'>        <a class='callout-link' href='<%-url%>' target='<%-target%>'><%-url%></a>        <span class='button green editlink'>EDIT</span></div>");$("body").hasClass("touch")?e.$el[0].addEventListener("click",a,!0):e.$el[0].addEventListener("tap",a,!0),e.$el.on("click",".node-content a:not(.at-tagged)",l),e.$el.on("panstart",u),e.scrollContainer().on("scroll",u),e.$el.on("dragstart","a, img",n)}}),define("starc/starc.node.buttons",["require","exports","module","starc/starc.buttons"],function(e,t,n){var i=e("starc/starc.buttons"),o=14,r=function(e){var t=e.getSize();return{r:{x:t.w/2+9,y:-2},l:{x:-t.w/2-11,y:-2},t:{x:-2,y:-t.h/2-15},b:{x:-2,y:t.h/2+11}}},s=function(e,t,n,i){return(e-n)*(e-n)+(t-i)*(t-i)},l=function(e,t,n){var i=r(t),l=n.x-e.x(),a=n.y-e.y();return s(l,a,i.r.x,i.r.y)<o*o||(s(l,a,i.l.x,i.l.y)<o*o||(s(l,a,i.t.x,i.t.y)<o*o||s(l,a,i.b.x,i.b.y)<o*o))},a=function(){this.n=this.l=this.r=this.t=this.b=this.shownFor=this.nodeView=this.hidden=null};a.prototype.showFor=function(e){this.shownFor!==e&&(this.remove(),this.shownFor=e),this.nodeView=e,this.render()},a.prototype.hide=function(){this.hidden=!0,this.render()},a.prototype.show=function(){this.hidden=!1,this.render()},a.prototype.render=function(){if(this.hidden||!this.nodeView||!this.nodeView.model||!this.nodeView.model.collection)return void this.remove();var e=this.nodeView.model,t=this.nodeView.diagram,n=this.nodeView.getLabel().$el;if(e.isRoot()){if(!this.r){this.removeChildButton(),this.r=new i(e,t,{side:"right"}),this.l=new i(e,t,{side:"left"}),this.t=new i(e,t,{side:"top"}),this.b=new i(e,t,{side:"bottom"});var o=r(this.nodeView);this.r.setOffset(o.r.x,o.r.y),this.l.setOffset(o.l.x,o.l.y),this.t.setOffset(o.t.x,o.t.y),this.b.setOffset(o.b.x,o.b.y),n.append(this.r.$el.addClass("right"),this.l.$el.addClass("left"),this.t.$el.addClass("top"),this.b.$el.addClass("bottom"))}}else this.n||(this.removeRootButtons(),this.n=new i(e,t,{}),n.append(this.n.$el))},a.prototype.removeRootButtons=function(){this.r&&this.r.remove(),this.l&&this.l.remove(),this.t&&this.t.remove(),this.b&&this.b.remove(),this.r=this.l=this.t=this.b=null},a.prototype.removeChildButton=function(){this.n&&this.n.remove(),this.n=null},a.prototype.remove=function(){this.removeRootButtons(),this.removeChildButton()},n.exports=function(e){function t(t){var n=e.diagramCoordsFromEvent(t),i=e.model.getNodes().closest(n.x,n.y);i&&i.isRoot()&&l(i,e.getNodeForId(i.id),n)?r.showFor(e.getNodeForId(i.id)):i&&s(i.x(),i.y(),n.x,n.y)<o*o?r.showFor(e.getNodeForId(i.id)):(c=!1,u||r.remove())}function n(t){u=!0;var n=$(t.currentTarget),i=n.closest("[data-nodeid]").attr("data-nodeid");r.showFor(e.getNodeForId(i))}function i(e){u=!1,c||r.remove()}var r=new a,u=!1,c=!1;e.$el.on("mouseenter",".node-container",n),e.$el.on("mouseleave",".node-container",i),document.body.addEventListener("mousemove",t,{capture:!0,passive:!0}),e.model.getNodes().on("change:parent_id",r.render.bind(r)),e.model.getNodes().on("change:text",function(e){r.nodeView&&r.nodeView.model===e&&e.isRoot()&&r.remove()}),e.once("remove",function(){e.model.getNodes().off(void 0,n),document.body.removeEventListener("mousemove",t,{capture:!0,passive:!0})})}}),define("starc/starc.node.blame",["require","exports","module","utils/coggle-timeago"],function(e,t,n){var i=e("utils/coggle-timeago"),o=_.template("    <div class='content' style='background: <%- user.colour %>'>        <div class='icon' style='background-image: url(<%-user.picture%>);'/>        <div class='name'><%- user.name %></div>        <time datetime='<%-node.action_ts%>'/>    </div>    "),r=function(e){this.diagram=e,this.$el=$('<div class="blamecallout"/>')};r.prototype.setNode=function(e){return this.node=e,this.render(),this},r.prototype.render=function(){if(!this.node)return this.remove();var e=this.diagram.model.getAccess().get(this.node.model.get("owner_id"));e&&(e=e.toJSON()),e||(e={name:"Unknown User",picture:"",colour:"#aaa"});var t={node:this.node.model.toJSON(),user:e};return this.$el.html(o(t)),i.loadLanguages(function(){i.timeago(this.$el.find("time"))}.bind(this)),this},r.prototype.remove=function(){return this.$el.remove(),this},n.exports=function(e){function t(t){if(e.historyMode()){var n=$(t.currentTarget),i=n.closest("[data-nodeid]").attr("data-nodeid"),r=e.getNodeForId(i);o.setNode(r),e.nodesContainer().append(o.render().$el),o.$el.css({top:r.boundingBox().y,left:r.boundingBox().x+r.boundingBox().width/2})}}function n(e){o.remove()}function i(){o.remove()}var o=new r(e);e.$el.on("mouseenter",".node-container",t),e.$el.on("mouseleave",".node-container",n),e.on("mode",i),e.once("remove",function(){e.off(void 0,i)})}}),define("starc/starc.node.joins",["require","exports","module"],function(e,t,n){function i(e){return e.id+"_join_events"}n.exports=function(e){function t(t,n){var o=e.getNodeForId(t.id);o&&(o.getLabel().$el.show(),o.off(void 0,void 0,i(t))),n.off(void 0,void 0,i(t)),t.off(void 0,void 0,i(t))}function n(n){var o=e.getNodeForId(n.id);if(o){var r=n.joinedNode();if(r){o.getLabel().$el.hide(),o.on("move",function(){var e=n.joinedNode();e&&e.positionAbsolutely(n.x(),n.y())},i(n)),o.on("movefinish",function(){var e=n.joinedNode();e&&e.deltarize({pos:e.pos()})},i(n));var s=0,l=function(){s+=1;var e=n.joinedNode();if(e){if(e.id===n.get("parent_id"))return void console.log(n.id+" is joined to its own parent "+e.id);if(e.get("parent_id")===n.id)return void console.log(n.id+" is joined to its own child "+e.id);if(s>2)return void console.log("terminating recursion on invalid model");n.positionAbsolutely(e.x(),e.y()),s-=1}};n.on("ancestor_moved path_changed",l,i(n)),r.on("ancestor_moved path_changed change:pos",l,i(n)),l();var a=function(){t(n,r)};r.once("destroy",a,i(n)),n.once("destroy change:join",a,i(n))}}}e.once("loaded",function(){e.model.getNodes().on("add remove change:join",n),e.model.getNodes().on("add",function(t){e.model.getNodes().where({join:t.id}).map(n)}),e.model.getNodes().each(n),e.once("remove",function(){e.model.getNodes().off(void 0,n)})})}}),define("starc/starc.node.editevents",["require","exports","module","models/NotificationSearch","views/NodeEditView","utils/trackModifiers"],function(e,t,n){var i=(e("models/NotificationSearch"),e("views/NodeEditView"));e("utils/trackModifiers");n.exports=function(e){function t(t){var n=$(t.target);if(!n.closest(".starcbutton").length){if(n.closest(".node-editor").length)return void t.stopPropagation();if(!e.editingPrevented()){var i=n.closest("[data-nodeid]").attr("data-nodeid"),o=e.getNodeForId(i);return o&&o.editNode(),t.stopPropagation(),t.preventDefault(),!1}}}function n(){i.activeEdit()&&i.activeEdit().commit()}e.once("loaded",function(){var i=$("body").hasClass("touch"),o=i?"click":"tap";e.$el.on(o,".node-container",t),e.$el.on(o,".rootbackground",t),e.$el.on(o,n)})}}),define("starc/starc.node.tabfocus",["require","exports","module"],function(e,t,n){n.exports=function(e){function t(t){if(13==t.keyCode){var n=$(t.currentTarget),i=n.closest("[data-nodeid]").attr("data-nodeid"),o=e.getNodeForId(i);o&&o.editNode()}}function n(e){var t=$(e.target).closest(".node-container");t.addClass("disable-focus"),setTimeout(function(){t.find(".node-content").blur()},0),setTimeout(function(){t.removeClass("disable-focus")},100)}e.$el[0].addEventListener("mousedown",n,{capture:!0}),e.$el.on("keyup",".node-container:not(.active) .node-content",t)}}),define("starc/starc.node.crosslinks",["require","exports","module"],function(e,t,n){n.exports=function(e){var t,n=_.throttle(function(){t&&t.length||(t=e.$el.find("#xlink-elements")),t.stop().hide(),i()},30),i=_.debounce(function(){t.stop().fadeIn(100)},200),o=_.debounce(function(){e.model.getNodes().each(function(t){var n=e.getNodeForId(t.id);n&&n.updateCrosslinks()})},200);e.once("loaded",function(){e.model.getNodes().on("add change remove",n),e.model.getNodes().on("add change remove",o),e.model.getNodes().each(o),e.once("remove",function(){e.model.getNodes().off(void 0,n),e.model.getNodes().off(void 0,o)})})}}),function(e){"function"==typeof define&&define.amd?define("plugins/jquery.restrictscroll",["jquery","underscore"],e):e(jQuery,_)}(function(e,t){var n={left_min:0,left_max:800,top_min:0,top_max:600},i=.15,o=function(e){var n=function(){if("function"!=typeof this.options.beforeLimit||this.options.beforeLimit()!==!1){var t=e.scrollLeft(),n=e.scrollTop(),o=this.options.left_min,r=this.options.left_max,s=this.options.top_min,l=this.options.top_max;t<o?e.scrollLeft(Math.round(o*i+t*(1-i)+.5)):t>r&&e.scrollLeft(Math.round(r*i+t*(1-i)-.5)),n<s?e.scrollTop(Math.round(s*i+n*(1-i)+.5)):n>l&&e.scrollTop(Math.round(l*i+n*(1-i)-.5))}};e[0].addEventListener("scroll",t.debounce(n,100).bind(this),{capture:!0,passive:!0})};o.prototype.setOptions=function(t){this.options=e.extend(this.options,t)},e.fn.restrictScroll=function(t){var i=e(this),r=e.data(this,"plugin_restrictScroll");r||(t=e.extend(n,t),r=new o(i),e.data(this,"plugin_restrictScroll",r)),r.setOptions(t)}}),define("starc/starc.bounds.scroll",["require","exports","module","plugins/jquery.restrictscroll","underscore"],function(e,t,n){e("plugins/jquery.restrictscroll");var i=e("underscore");n.exports=function(e){function t(){e.updateScrollBounds(!0)}var n=null,o=function(){return!e.textPopupActive()};e.updateScrollBounds=function(t){var i=window.innerHeight/$(window).height(),r=100*i;n&&t||(n=e.getFastBoundingRect(r));var s=n,l=e.scrollContainer().width()*i,a=e.scrollContainer().height()*i,u=(e.getScale()*i,{left_min:(-e._size.x1+s.xmin*e.getScale())*i-l,left_max:(-e._size.x1+s.xmax*e.getScale())*i,top_min:(-e._size.y1+s.ymin*e.getScale())*i-a,top_max:(-e._size.y1+s.ymax*e.getScale())*i,beforeLimit:o});e.scrollContainer().restrictScroll(u)};var r=i.debounce(function(){e.updateScrollBounds()},200);e.on("loaded",function(){r(),e.model.getNodes().on("change add remove",r),e.on("scale",t),e.on("resize",t),$(window).on("resize",t),e.once("remove",function(){e.model.getNodes().off(void 0,r),e.off(void 0,t),$(window).off("resize",t)})})}}),function(e){"function"==typeof define&&define.amd?define("plugins/jquery.dragScrolling",["jquery","underscore"],e):e(jQuery,_)}(function(e,t){var n;e.fn.dragScrolling=function(t){function i(t){function i(e){var t=(o-e)/o;return Math.min(t*t,1.2)}var o=15,r=2,s=n.scrollLeft(),l=n.scrollTop(),a=t.clientX||t.changedTouches&&t.changedTouches[0]&&t.changedTouches[0].clientX||0,u=t.clientY||t&&t.changedTouches&&t.changedTouches[0]&&t.changedTouches[0].clientY||0,c=e(window).width()-1,d=e(window).height(),h=a,p=c-a,f=u,g=d-u;h<o&&(s-=r*i(h)),p<o&&(s+=r*i(p)),f<o&&(l-=r*i(f)),g<o&&(l+=r*i(g)),n.scrollLeft(s),n.scrollTop(l)}function o(e){l=e}function r(e){a||t.filter&&!t.filter(e)||(window.addEventListener("mousemove",o,{capture:!0,passive:!0}),window.addEventListener("touchmove",o,{capture:!0,passive:!0}),window.addEventListener("pointermove",o,{capture:!0,passive:!0}),a=setInterval(function(){l&&i(l)},2))}function s(){window.removeEventListener("mousemove",o,{capture:!0,passive:!0}),window.removeEventListener("touchmove",o,{capture:!0,passive:!0}),window.removeEventListener("pointermove",o,{capture:!0,passive:!0}),clearInterval(a),a=null,l=null}n=e(this);var l=null,a=null;e("body").data("scroll-bounds.configured")||(e("body").data("scroll-bounds.configured",!0),window.addEventListener("mousedown",r,{capture:!0,passive:!0}),window.addEventListener("touchstart",r,{capture:!0,passive:!0}),window.addEventListener("pointerdown",r,{capture:!0,passive:!0}),window.addEventListener("mouseup",s,{capture:!0,passive:!0}),window.addEventListener("touchend",s,{capture:!0,passive:!0}),window.addEventListener("pointerup",s,{capture:!0,passive:!0}))}}),define("starc/starc.bounds.drag",["require","exports","module","plugins/jquery.dragScrolling"],function(e,t,n){e("plugins/jquery.dragScrolling"),n.exports=function(e){e.scrollContainer().dragScrolling({filter:function(e){return!$(e.target).is("svg")&&(!$(e.target).closest(".diagram-toolbar").length&&!$(e.target).closest("#diagram-header").length)}.bind(this)})}}),!function(e){if("function"==typeof define&&define.amd)define("jquery.textcomplete",["jquery"],e);else if("object"==typeof module&&module.exports){var t=require("jquery");module.exports=e(t)}else e(jQuery)}(function(e){if("undefined"==typeof e)throw new Error("jQuery.textcomplete requires jQuery");return+function(e){"use strict";var t=function(e){console.warn&&console.warn(e)},n=1;e.fn.textcomplete=function(i,o){var r=Array.prototype.slice.call(arguments);return this.each(function(){var s=this,l=e(this),a=l.data("textComplete");if(a||(o||(o={}),o._oid=n++,a=new e.fn.textcomplete.Completer(this,o),l.data("textComplete",a)),"string"==typeof i){if(!a)return;r.shift(),a[i].apply(a,r),"destroy"===i&&l.removeData("textComplete")}else e.each(i,function(n){e.each(["header","footer","placement","maxCount"],function(e){n[e]&&(a.option[e]=n[e],t(e+"as a strategy param is deprecated. Use option."),delete n[e])})}),a.register(e.fn.textcomplete.Strategy.parse(i,{el:s,$el:l}))})}}(e),+function(e){"use strict";function t(n,i){if(this.$el=e(n),this.id="textcomplete"+o++,this.strategies=[],this.views=[],this.option=e.extend({},t.defaults,i),!(this.$el.is("input[type=text]")||this.$el.is("input[type=search]")||this.$el.is("textarea")||n.isContentEditable||"true"==n.contentEditable))throw new Error("textcomplete must be called on a Textarea or a ContentEditable.");if(n===n.ownerDocument.activeElement)this.initialize();else{var s=this;this.$el.one("focus."+this.id,function(){s.initialize()}),this.option.adapter&&"CKEditor"!=this.option.adapter||"undefined"==typeof CKEDITOR||!this.$el.is("textarea")||CKEDITOR.on("instanceReady",function(t){-1==e.inArray(t.editor.id,r)&&(r.push(t.editor.id),t.editor.on("focus",function(n){s.$el=e(t.editor.editable().$),s.option.adapter||(s.option.adapter=e.fn.textcomplete.CKEditor),s.option.ckeditor_instance=t.editor,s.initialize()}))})}}var n=function(e){var t,n;return function(){var i=Array.prototype.slice.call(arguments);if(t)return void(n=i);t=!0;var o=this;i.unshift(function i(){if(n){var r=n;n=void 0,r.unshift(i),e.apply(o,r)}else t=!1}),e.apply(this,i)}},i=function(e){return"[object String]"===Object.prototype.toString.call(e)},o=0,r=[];t.defaults={appendTo:"body",className:"",dropdownClassName:"dropdown-menu textcomplete-dropdown",maxCount:10,zIndex:"100",rightEdgeOffset:30},e.extend(t.prototype,{id:null,option:null,strategies:null,adapter:null,dropdown:null,$el:null,$iframe:null,initialize:function(){var t=this.$el.get(0);if(this.$el.prop("ownerDocument")!==document&&window.frames.length)for(var n=0;n<window.frames.length;n++)if(this.$el.prop("ownerDocument")===window.frames[n].document){this.$iframe=e(window.frames[n].frameElement);break}this.dropdown=new e.fn.textcomplete.Dropdown(t,this,this.option);var i,o;this.option.adapter?i=this.option.adapter:(o=this.$el.is("textarea")||this.$el.is("input[type=text]")||this.$el.is("input[type=search]")?"number"==typeof t.selectionEnd?"Textarea":"IETextarea":"ContentEditable",i=e.fn.textcomplete[o]),this.adapter=new i(t,this,this.option)},destroy:function(){this.$el.off("."+this.id),this.adapter&&this.adapter.destroy(),this.dropdown&&this.dropdown.destroy(),this.$el=this.adapter=this.dropdown=null},deactivate:function(){this.dropdown&&this.dropdown.deactivate()},trigger:function(e,t){this.dropdown||this.initialize(),null!=e||(e=this.adapter.getTextFromHeadToCaret());var n=this._extractSearchQuery(e);if(n.length){var i=n[1];if(t&&this._term===i&&""!==i)return;this._term=i,this._search.apply(this,n)}else this._term=null,this.dropdown.deactivate()},fire:function(e){var t=Array.prototype.slice.call(arguments,1);return this.$el.trigger(e,t),this},register:function(e){Array.prototype.push.apply(this.strategies,e)},select:function(e,t,n){this._term=null,this.adapter.select(e,t,n),this.fire("change").fire("textComplete:select",e,t),this.adapter.focus()},_clearAtNext:!0,_term:null,_extractSearchQuery:function(t){for(var n=0;n<this.strategies.length;n++){var o=this.strategies[n],r=o.context(t);if(r||""===r){var s=e.isFunction(o.match)?o.match(t):o.match;i(r)&&(t=r);var l=t.match(s);if(l)return[o,l[o.index],l]}}return[]},_search:n(function(e,t,n,i){var o=this;t.search(n,function(i,r){o.dropdown.shown||o.dropdown.activate(),o._clearAtNext&&(o.dropdown.clear(),o._clearAtNext=!1),o.dropdown.setPosition(o.adapter.getCaretPosition()),o.dropdown.render(o._zip(i,t,n)),r||(e(),o._clearAtNext=!0)},i)}),_zip:function(t,n,i){return e.map(t,function(e){return{value:e,strategy:n,term:i}})}}),e.fn.textcomplete.Completer=t}(e),+function(e){"use strict";function t(n,i,r){this.$el=t.createElement(r),this.completer=i,this.id=i.id+"dropdown",this._data=[],this.$inputEl=e(n),this.option=r,r.listPosition&&(this.setPosition=r.listPosition),r.height&&this.$el.height(r.height);var s=this;e.each(["maxCount","placement","footer","header","noResultsMessage","className"],function(e,t){null!=r[t]&&(s[t]=r[t])}),this._bindEvents(n),o[this.id]=this}var n=e(window),i=function(e,t){var n,i,o=t.strategy.idProperty;for(n=0;n<e.length;n++)if(i=e[n],i.strategy===t.strategy)if(o){if(i.value[o]===t.value[o])return!0}else if(i.value===t.value)return!0;
return!1},o={};e(document).on("click",function(t){var n=t.originalEvent&&t.originalEvent.keepTextCompleteDropdown;e.each(o,function(e,t){e!==n&&t.deactivate()})});var r={SKIP_DEFAULT:0,KEY_UP:1,KEY_DOWN:2,KEY_ENTER:3,KEY_PAGEUP:4,KEY_PAGEDOWN:5,KEY_ESCAPE:6};e.extend(t,{createElement:function(t){var n=t.appendTo;n instanceof e||(n=e(n));var i=e("<ul></ul>").addClass(t.dropdownClassName).attr("id","textcomplete-dropdown-"+t._oid).css({display:"none",left:0,position:"absolute",zIndex:t.zIndex}).appendTo(n);return i}}),e.extend(t.prototype,{$el:null,$inputEl:null,completer:null,footer:null,header:null,id:null,maxCount:null,placement:"",shown:!1,data:[],className:"",destroy:function(){this.deactivate(),this.$el.off("."+this.id),this.$inputEl.off("."+this.id),this.clear(),this.$el.remove(),this.$el=this.$inputEl=this.completer=null,delete o[this.id]},render:function(t){var n=this._buildContents(t),i=e.map(t,function(e){return e.value});if(t.length){var o=t[0].strategy;o.id?this.$el.attr("data-strategy",o.id):this.$el.removeAttr("data-strategy"),this._renderHeader(i),this._renderFooter(i),n&&(this._renderContents(n),this._fitToBottom(),this._fitToRight(),this._activateIndexedItem()),this._setScroll()}else this.noResultsMessage?this._renderNoResultsMessage(i):this.shown&&this.deactivate()},setPosition:function(t){var i="absolute";return this.$inputEl.add(this.$inputEl.parents()).each(function(){return"absolute"!==e(this).css("position")&&("fixed"===e(this).css("position")?(t.top-=n.scrollTop(),t.left-=n.scrollLeft(),i="fixed",!1):void 0)}),this.$el.css(this._applyPlacement(t)),this.$el.css({position:i}),this},clear:function(){this.$el.html(""),this.data=[],this._index=0,this._$header=this._$footer=this._$noResultsMessage=null},activate:function(){return this.shown||(this.clear(),this.$el.show(),this.className&&this.$el.addClass(this.className),this.completer.fire("textComplete:show"),this.shown=!0),this},deactivate:function(){return this.shown&&(this.$el.hide(),this.className&&this.$el.removeClass(this.className),this.completer.fire("textComplete:hide"),this.shown=!1),this},isUp:function(e){return 38===e.keyCode||e.ctrlKey&&80===e.keyCode},isDown:function(e){return 40===e.keyCode||e.ctrlKey&&78===e.keyCode},isEnter:function(e){var t=e.ctrlKey||e.altKey||e.metaKey||e.shiftKey;return!t&&(13===e.keyCode||9===e.keyCode||this.option.completeOnSpace===!0&&32===e.keyCode)},isPageup:function(e){return 33===e.keyCode},isPagedown:function(e){return 34===e.keyCode},isEscape:function(e){return 27===e.keyCode},_data:null,_index:null,_$header:null,_$noResultsMessage:null,_$footer:null,_bindEvents:function(){this.$el.on("mousedown."+this.id,".textcomplete-item",e.proxy(this._onClick,this)),this.$el.on("touchstart."+this.id,".textcomplete-item",e.proxy(this._onClick,this)),this.$el.on("mouseover."+this.id,".textcomplete-item",e.proxy(this._onMouseover,this)),this.$inputEl.on("keydown."+this.id,e.proxy(this._onKeydown,this))},_onClick:function(t){var n=e(t.target);t.preventDefault(),t.originalEvent.keepTextCompleteDropdown=this.id,n.hasClass("textcomplete-item")||(n=n.closest(".textcomplete-item"));var i=this.data[parseInt(n.data("index"),10)];this.completer.select(i.value,i.strategy,t);var o=this;setTimeout(function(){o.deactivate(),"touchstart"===t.type&&o.$inputEl.focus()},0)},_onMouseover:function(t){var n=e(t.target);t.preventDefault(),n.hasClass("textcomplete-item")||(n=n.closest(".textcomplete-item")),this._index=parseInt(n.data("index"),10),this._activateIndexedItem()},_onKeydown:function(t){if(this.shown){var n;switch(e.isFunction(this.option.onKeydown)&&(n=this.option.onKeydown(t,r)),null==n&&(n=this._defaultKeydown(t)),n){case r.KEY_UP:t.preventDefault(),this._up();break;case r.KEY_DOWN:t.preventDefault(),this._down();break;case r.KEY_ENTER:t.preventDefault(),this._enter(t);break;case r.KEY_PAGEUP:t.preventDefault(),this._pageup();break;case r.KEY_PAGEDOWN:t.preventDefault(),this._pagedown();break;case r.KEY_ESCAPE:t.preventDefault(),this.deactivate()}}},_defaultKeydown:function(e){return this.isUp(e)?r.KEY_UP:this.isDown(e)?r.KEY_DOWN:this.isEnter(e)?r.KEY_ENTER:this.isPageup(e)?r.KEY_PAGEUP:this.isPagedown(e)?r.KEY_PAGEDOWN:this.isEscape(e)?r.KEY_ESCAPE:void 0},_up:function(){0===this._index?this._index=this.data.length-1:this._index-=1,this._activateIndexedItem(),this._setScroll()},_down:function(){this._index===this.data.length-1?this._index=0:this._index+=1,this._activateIndexedItem(),this._setScroll()},_enter:function(e){var t=this.data[parseInt(this._getActiveElement().data("index"),10)];this.completer.select(t.value,t.strategy,e),this.deactivate()},_pageup:function(){var t=0,n=this._getActiveElement().position().top-this.$el.innerHeight();this.$el.children().each(function(i){return e(this).position().top+e(this).outerHeight()>n?(t=i,!1):void 0}),this._index=t,this._activateIndexedItem(),this._setScroll()},_pagedown:function(){var t=this.data.length-1,n=this._getActiveElement().position().top+this.$el.innerHeight();this.$el.children().each(function(i){return e(this).position().top>n?(t=i,!1):void 0}),this._index=t,this._activateIndexedItem(),this._setScroll()},_activateIndexedItem:function(){this.$el.find(".textcomplete-item.active").removeClass("active"),this._getActiveElement().addClass("active")},_getActiveElement:function(){return this.$el.children(".textcomplete-item:nth("+this._index+")")},_setScroll:function(){var e=this._getActiveElement(),t=e.position().top,n=e.outerHeight(),i=this.$el.innerHeight(),o=this.$el.scrollTop();0===this._index||this._index==this.data.length-1||0>t?this.$el.scrollTop(t+o):t+n>i&&this.$el.scrollTop(t+n+o-i)},_buildContents:function(e){var t,n,o,r="";for(n=0;n<e.length&&this.data.length!==this.maxCount;n++)t=e[n],i(this.data,t)||(o=this.data.length,this.data.push(t),r+='<li class="textcomplete-item" data-index="'+o+'"><a>',r+=t.strategy.template(t.value,t.term),r+="</a></li>");return r},_renderHeader:function(t){if(this.header){this._$header||(this._$header=e('<li class="textcomplete-header"></li>').prependTo(this.$el));var n=e.isFunction(this.header)?this.header(t):this.header;this._$header.html(n)}},_renderFooter:function(t){if(this.footer){this._$footer||(this._$footer=e('<li class="textcomplete-footer"></li>').appendTo(this.$el));var n=e.isFunction(this.footer)?this.footer(t):this.footer;this._$footer.html(n)}},_renderNoResultsMessage:function(t){if(this.noResultsMessage){this._$noResultsMessage||(this._$noResultsMessage=e('<li class="textcomplete-no-results-message"></li>').appendTo(this.$el));var n=e.isFunction(this.noResultsMessage)?this.noResultsMessage(t):this.noResultsMessage;this._$noResultsMessage.html(n)}},_renderContents:function(e){this._$footer?this._$footer.before(e):this.$el.append(e)},_fitToBottom:function(){var e=n.scrollTop()+n.height(),t=this.$el.height();this.$el.position().top+t>e&&(this.completer.$iframe||this.$el.offset({top:e-t}))},_fitToRight:function(){for(var e,t=this.option.rightEdgeOffset,i=this.$el.offset().left,o=this.$el.width(),r=n.width()-t;i+o>r&&(this.$el.offset({left:i-t}),e=this.$el.offset().left,!(e>=i));)i=e},_applyPlacement:function(e){return-1!==this.placement.indexOf("top")?e={top:"auto",bottom:this.$el.parent().height()-e.top+e.lineHeight,left:e.left}:(e.bottom="auto",delete e.lineHeight),-1!==this.placement.indexOf("absleft")?e.left=0:-1!==this.placement.indexOf("absright")&&(e.right=0,e.left="auto"),e}}),e.fn.textcomplete.Dropdown=t,e.extend(e.fn.textcomplete,r)}(e),+function(e){"use strict";function t(t){e.extend(this,t),this.cache&&(this.search=n(this.search))}var n=function(e){var t={};return function(n,i){t[n]?i(t[n]):e.call(this,n,function(e){t[n]=(t[n]||[]).concat(e),i.apply(null,arguments)})}};t.parse=function(n,i){return e.map(n,function(e){var n=new t(e);return n.el=i.el,n.$el=i.$el,n})},e.extend(t.prototype,{match:null,replace:null,search:null,id:null,cache:!1,context:function(){return!0},index:2,template:function(e){return e},idProperty:null}),e.fn.textcomplete.Strategy=t}(e),+function(e){"use strict";function t(){}var n=Date.now||function(){return(new Date).getTime()},i=function(e,t){var i,o,r,s,l,a=function(){var u=n()-s;t>u?i=setTimeout(a,t-u):(i=null,l=e.apply(r,o),r=o=null)};return function(){return r=this,o=arguments,s=n(),i||(i=setTimeout(a,t)),l}};e.extend(t.prototype,{id:null,completer:null,el:null,$el:null,option:null,initialize:function(t,n,o){this.el=t,this.$el=e(t),this.id=n.id+this.constructor.name,this.completer=n,this.option=o,this.option.debounce&&(this._onKeyup=i(this._onKeyup,this.option.debounce)),this._bindEvents()},destroy:function(){this.$el.off("."+this.id),this.$el=this.el=this.completer=null},select:function(){throw new Error("Not implemented")},getCaretPosition:function(){var t=this._getCaretRelativePosition(),n=this.$el.offset(),i=this.option.appendTo;if(i){i instanceof e||(i=e(i));var o=i.offsetParent().offset();n.top-=o.top,n.left-=o.left}return t.top+=n.top,t.left+=n.left,t},focus:function(){this.$el.focus()},_bindEvents:function(){this.$el.on("keyup."+this.id,e.proxy(this._onKeyup,this))},_onKeyup:function(e){this._skipSearch(e)||this.completer.trigger(this.getTextFromHeadToCaret(),!0)},_skipSearch:function(e){switch(e.keyCode){case 9:case 13:case 16:case 17:case 18:case 33:case 34:case 40:case 38:case 27:return!0}if(e.ctrlKey)switch(e.keyCode){case 78:case 80:return!0}}}),e.fn.textcomplete.Adapter=t}(e),+function(e){"use strict";function t(e,t,n){this.initialize(e,t,n)}e.extend(t.prototype,e.fn.textcomplete.Adapter.prototype,{select:function(t,n,i){var o,r=this.getTextFromHeadToCaret(),s=this.el.value.substring(this.el.selectionEnd),l=n.replace(t,i);"undefined"!=typeof l&&(e.isArray(l)&&(s=l[1]+s,l=l[0]),o=e.isFunction(n.match)?n.match(r):n.match,r=r.replace(o,l),this.$el.val(r+s),this.el.selectionStart=this.el.selectionEnd=r.length)},getTextFromHeadToCaret:function(){return this.el.value.substring(0,this.el.selectionEnd)},_getCaretRelativePosition:function(){var t=e.fn.textcomplete.getCaretCoordinates(this.el,this.el.selectionStart);return{top:t.top+this._calculateLineHeight()-this.$el.scrollTop(),left:t.left-this.$el.scrollLeft(),lineHeight:this._calculateLineHeight()}},_calculateLineHeight:function(){var e=parseInt(this.$el.css("line-height"),10);if(isNaN(e)){var t=this.el.parentNode,n=document.createElement(this.el.nodeName),i=this.el.style;n.setAttribute("style","margin:0px;padding:0px;font-family:"+i.fontFamily+";font-size:"+i.fontSize),n.innerHTML="test",t.appendChild(n),e=n.clientHeight,t.removeChild(n)}return e}}),e.fn.textcomplete.Textarea=t}(e),+function(e){"use strict";function t(t,i,o){this.initialize(t,i,o),e("<span>"+n+"</span>").css({position:"absolute",top:-9999,left:-9999}).insertBefore(t)}var n="吶";e.extend(t.prototype,e.fn.textcomplete.Textarea.prototype,{select:function(t,n,i){var o,r=this.getTextFromHeadToCaret(),s=this.el.value.substring(r.length),l=n.replace(t,i);if("undefined"!=typeof l){e.isArray(l)&&(s=l[1]+s,l=l[0]),o=e.isFunction(n.match)?n.match(r):n.match,r=r.replace(o,l),this.$el.val(r+s),this.el.focus();var a=this.el.createTextRange();a.collapse(!0),a.moveEnd("character",r.length),a.moveStart("character",r.length),a.select()}},getTextFromHeadToCaret:function(){this.el.focus();var e=document.selection.createRange();e.moveStart("character",-this.el.value.length);var t=e.text.split(n);return 1===t.length?t[0]:t[1]}}),e.fn.textcomplete.IETextarea=t}(e),+function(e){"use strict";function t(e,t,n){this.initialize(e,t,n)}e.extend(t.prototype,e.fn.textcomplete.Adapter.prototype,{select:function(t,n,i){var o=this.getTextFromHeadToCaret(),r=this.el.ownerDocument.getSelection(),s=r.getRangeAt(0),l=s.cloneRange();l.selectNodeContents(s.startContainer);var a,u=l.toString(),c=u.substring(s.startOffset),d=n.replace(t,i);if("undefined"!=typeof d){e.isArray(d)&&(c=d[1]+c,d=d[0]),a=e.isFunction(n.match)?n.match(o):n.match,o=o.replace(a,d).replace(/ $/,"&nbsp"),s.selectNodeContents(s.startContainer),s.deleteContents();var h=this.el.ownerDocument.createElement("div");h.innerHTML=o;var p=this.el.ownerDocument.createElement("div");p.innerHTML=c;for(var f,g,m=this.el.ownerDocument.createDocumentFragment();f=h.firstChild;)g=m.appendChild(f);for(;f=p.firstChild;)m.appendChild(f);s.insertNode(m),s.setStartAfter(g),s.collapse(!0),r.removeAllRanges(),r.addRange(s)}},_getCaretRelativePosition:function(){var t=this.el.ownerDocument.getSelection().getRangeAt(0).cloneRange(),n=t.endContainer.parentNode,i=this.el.ownerDocument.createElement("span");t.insertNode(i),t.selectNodeContents(i),t.deleteContents(),setTimeout(function(){n.normalize()},0);var o=e(i),r=o.offset();if(r.left-=this.$el.offset().left,r.top+=o.height()-this.$el.offset().top,r.lineHeight=o.height(),this.completer.$iframe){var s=this.completer.$iframe.offset();r.top+=s.top,r.left+=s.left,r.top-=e(this.completer.$iframe[0].contentWindow.document).scrollTop()}return o.remove(),r},getTextFromHeadToCaret:function(){var e=this.el.ownerDocument.getSelection().getRangeAt(0),t=e.cloneRange();return t.selectNodeContents(e.startContainer),t.toString().substring(0,e.startOffset)}}),e.fn.textcomplete.ContentEditable=t}(e),+function(e){"use strict";function t(e,t,n){this.initialize(e,t,n)}e.extend(t.prototype,e.fn.textcomplete.ContentEditable.prototype,{_bindEvents:function(){var t=this;this.option.ckeditor_instance.on("key",function(e){var n=e.data;return t._onKeyup(n),(!t.completer.dropdown.shown||!t._skipSearch(n))&&void 0},null,null,1),this.$el.on("keyup."+this.id,e.proxy(this._onKeyup,this))}}),e.fn.textcomplete.CKEditor=t}(e),function(e){function t(e,t,r){if(!i)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var s=r&&r.debug||!1;if(s){var l=document.querySelector("#input-textarea-caret-position-mirror-div");l&&l.parentNode.removeChild(l)}var a=document.createElement("div");a.id="input-textarea-caret-position-mirror-div",document.body.appendChild(a);var u=a.style,c=window.getComputedStyle?getComputedStyle(e):e.currentStyle;u.whiteSpace="pre-wrap","INPUT"!==e.nodeName&&(u.wordWrap="break-word"),u.position="absolute",s||(u.visibility="hidden"),n.forEach(function(e){u[e]=c[e]}),o?e.scrollHeight>parseInt(c.height)&&(u.overflowY="scroll"):u.overflow="hidden",a.textContent=e.value.substring(0,t),"INPUT"===e.nodeName&&(a.textContent=a.textContent.replace(/\s/g," "));var d=document.createElement("span");d.textContent=e.value.substring(t)||".",a.appendChild(d);var h={top:d.offsetTop+parseInt(c.borderTopWidth),left:d.offsetLeft+parseInt(c.borderLeftWidth)};return s?d.style.backgroundColor="#aaa":document.body.removeChild(a),h}var n=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],i="undefined"!=typeof window,o=i&&null!=window.mozInnerScreenX;e.fn.textcomplete.getCaretCoordinates=t}(e),e}),define("starc/starc.textareas.completion",["require","exports","module","underscore","utils/coggle-encodeji","twemoji","views/NodeEditView","jquery.textcomplete","env"],function(e,t,n){var i=e("underscore"),o=e("utils/coggle-encodeji"),r=e("twemoji"),s=e("views/NodeEditView");e("jquery.textcomplete"),n.exports=function(t){function n(e,n){n(t.model.getAccess().search(e).concat(t.model.getInvites().search(e)))}function l(e){var t=e.toJSON();return t.name=e.displayName(),t.picture||(t.picture=""),f(t)}function a(e){$(this.el).trigger("picked-user",e);var t=e.displayName();return"$1@"+t.replace(/\s/g,"")+" "}function u(e,t){var n=i.uniq(i.map(o.possibleShortNames(e).slice(0,200),o.primaryShortName.bind(o)));t(n)}function c(t){var n=o.primaryShortName(t),i=o.replaceColons(":"+n+":"),s=$(r.parse(i,{base:e("env").cdn.url+"/img/",ext:".svg",folder:"twe"})).attr("src");return g({value:t,encoded:i,primary_name:n,icon:s})}function d(e){return"$1:"+o.primaryShortName(e)+":"}var h=/((?:^|\s)(?::[^:]{0,80}:)*):([^:]{0,80})$/,p={maxCount:30,height:"auto"};p.onKeydown=function(e,t){if(13===e.keyCode||9===e.keyCode)return e.stopPropagation(),e.preventDefault(),t.KEY_ENTER},p.listPosition=function(e){var t="absolute";return this.$inputEl.add(this.$inputEl.parents()).each(function(){return"absolute"!==$(this).css("position")&&("fixed"===$(this).css("position")?(e.top-=$(window).scrollTop(),e.left-=$(window).scrollLeft(),t="fixed",!1):void 0)}),this.$el.css(this._applyPlacement(e)),this.$el.css({position:t}),this.$el.css("height","auto"),this};var f=i.template("<div>            <span class='icon' style='background-image: url(<%-picture%>); background-color:<%-colour%>'/>            <span class='name'><%-name%></span>            <span class='email'><%-email%></span>        </div>"),g=i.template("<div>        <img class='twemoji' draggable='false' alt='<%-encoded%>' src='<%-icon%>'/>        <span class='emojiname'>:<%-value%>:</span>        </div>"),m={match:/(^|\s)@(\w{1,})$/,search:n,replace:a,template:l,name:"people"},v={match:h,search:u,replace:d,template:c,name:"emoji"},y=function(e){var t=s.activeEdit(),n=t.$el.find("textarea");p.appendTo=t.$el,n.textcomplete([m,v],p)},b=function(e){var t=$(e.currentTarget),n=t.find("textarea");p.appendTo=t,n.textcomplete([m,v],p)};t.on("node:editor:opened",y),$("body").on("focus",".notification-creation",b),t.once("remove",function(){t.off(void 0,y),$("body").off("focus",b)})}}),define("starc/starc.usercolours",["require","exports","module","underscore"],function(e,t,n){function i(e,t){e.each(function(){var e,n,i=$(this),o=i.text().trim();for(e=0;e<t.length;e++)if(o.toLowerCase()===t[e].get("email"))return void i.attr("data-uid",t[e].get("_id"));for(e=0;e<t.length;e++)if(n=t[e].get("name"),n&&o===n)return void i.attr("data-uid",t[e].get("_id"));for(e=0;e<t.length;e++)if(n=t[e].get("name"),n&&o.toLowerCase().replace(/\s/g,"")===n.toLowerCase().replace(/\s/g,""))return void i.attr("data-uid",t[e].get("_id"))})}function o(e,t,n){var i=n.property||"color";e.each(function(){for(var e=$(this).attr("data-uid"),n=0;n<t.length;n++)if(t[n].get("_id")==e)return void $(this).css(i,t[n].get("colour"))})}var r=e("underscore");n.exports=function(e){var t=r.throttle(function(){var t=e.model.getAccess().toArray().concat(e.model.getInvites().toArray()),n=$("a.at-tagged"),r=$(".node-container.titleroot a.at-tagged");i(n,t),o(n.not(r),t,{property:"background-color"}),o(r,t,{property:"color"})},300);e.once("loaded",function(){t(),e.model.getNodes().on("add change:text",t),e.model.getInvites().on("sync",t),e.model.getAccess().on("sync",t),e.model.getNotifications().on("sync",t),e.once("remove",function(){e.model.getNodes().off(void 0,t),e.model.getInvites().off(void 0,t),e.model.getAccess().off(void 0,t),e.model.getNotifications().off(void 0,t)})})}}),define("starc/starc.doubletap",["require","exports","module","utils/trackModifiers"],function(e,t,n){var i=e("utils/trackModifiers");n.exports=function(e){function t(e){var t=e.timeStamp,n=o||t,i=t-n,r=e.originalEvent.touches.length;o=t,!i||i>500||r>1||e.preventDefault()}function n(t){var n=getCoggleUser();if(i.shift_key_pressed)var o=e.createNodeAt(e.diagramCoordsFromEvent(t),function(){o&&o.editNode()});else e.createRoot({pos:e.diagramCoordsFromEvent(t)}).editNode({deleteEmpty:!0});n.getActions().perform("background:add-node",{type:i.shift_key_pressed?"child":"label"})}var o;e.scrollContainer().bind("touchstart",t),e.$el.on("doubletap","svg",n)}}),define("starc/starc.cogglify",["require","exports","module","underscore","env"],function(e,t,n){function i(e,t){var n=/^\[([^\]]+)\]\(([^)]+)\)$/.exec(e);return n&&(e=n[1]),"["+e+"]("+t+")"}function o(e,t,n){console.log("Failed to create linked coggle:",e,t,n),$(window).trigger("notify-error","Failed to create linked Coggle: "+t)}function r(e,t,n,i){var o=[];e.model.get("node_id");return s.each(e.children(),function(s){var a=new $.Deferred;$.ajax({type:"POST",url:l+"diagrams/"+n+"/nodes",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({text:s.model.text(),width:s.model.width(),scale:s.model.scale(),offset:{x:i?s.model.pos().x*e.model.ltr():s.model.pos().x,y:s.model.pos().y},parent:t,colour:s.model.colour(),line_weight:s.model.get("line_weight")||null,line_style:s.model.get("line_style")||null})}).then(function(e){r(s,e._id,n,!1).then(a.resolve,a.reject)},function(e,t,n){a.reject(JSON.parse(e.responseText))}),o.push(a)}),$.when.apply($,o)}var s=e("underscore"),l=e("env").api.url+"/api/1/";n.exports=function(e){e.prototype.cogglify=function(e,t){var n=window.location,a=n.origin||n.protocol+"//"+n.hostname+(n.port?":"+n.port:""),u=a+"/diagram/",c=this;console.log("on cogglify!",e,t);var d=/diagram\/[^\/]+\/([^\/#]+)/.exec(n.pathname);d&&(d=d[1]);var h=e.displayedText(),p=e.model.text(),f=t;$.ajax({type:"POST",url:l+"diagrams/"+c.model.get("_id")+"?clone[]=folder&clone[]=acl"}).fail(o).done(function(t,c,g){console.log("got diagram:",t);var m=u+t.short_id;$.ajax({type:"GET",url:l+"diagrams/"+t._id+"/nodes",contentType:"application/json; charset=utf-8",dataType:"json"}).done(function(u){$.ajax({type:"PUT",url:l+"diagrams/"+t._id+"/nodes/"+u[0]._id,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({text:i(h||"Unnamed Coggle",a+n.pathname+"#"+e.model.get("node_id").slice(0,6)),colour:e.model.get("colour")})}).fail(o),r(e,u[0]._id,t._id,!0).done(function(){function n(){e.model.set("text",i(p,m)),e.model.deltarize({text:e.model.text()}),f&&s.each(e.children(),function(e){e.deleteNode()})}d?$.ajax({type:"POST",url:l+"diagrams/"+t._id+"/links",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({type:"cogglify"})}).fail(function(e,t,i){o(e,t,i),n()}).done(function(e){m+="/"+e.key,n()}):n()}).fail(function(e){console.error("copy failed :(",e),$(window).trigger("notify-error","Failed to create linked Coggle: "+e)})}).fail(o)})}}}),define("starc/starc.undo",["require","exports","module"],function(e,t,n){var i=125;n.exports=function(e){e.prototype.disableUndo=function(){this._undo_disabled=!0},e.prototype.enableUndo=function(){this._undo_disabled=!1},e.prototype.undoDisabled=function(){return this._undo_disabled},e.prototype.pushUndo=function(e,t){t||(this.redo_stack=[]),e._undo_ts=new Date,this.undo_stack.push(e)},e.prototype.pushRedo=function(e){e._undo_ts=new Date,this.redo_stack.push(e)},e.prototype.hasUndoStep=function(){return 0!==this.undo_stack.length},e.prototype.undoStep=function(){if(0!==this.undo_stack.length){this.trigger("undo");var e=this.undo_stack;for(this.disableUndo();;){var t=e.pop();if(this.undo(t),this.pushRedo(_.clone(t)),0===e.length)break;var n=e[e.length-1];if(t._undo_ts.getTime()-n._undo_ts.getTime()>i)break}this.enableUndo()}},e.prototype.hasRedoStep=function(){return 0!==this.redo_stack.length},e.prototype.redoStep=function(){if(0!==this.redo_stack.length){this.trigger("redo");var e=this.redo_stack;for(this.disableUndo();;){var t=e.pop();if(this.redo(t),this.pushUndo(_.clone(t),!0),0===e.length)break;var n=e[e.length-1];if(t._undo_ts.getTime()-n._undo_ts.getTime()>i)break}this.enableUndo()}},e.prototype.undo=function(e){if(null===e.new_state)if("root parent"===e.old_state.parent_id)this.model.getNodes().addRoot(e.old_state);else{var t=this.getNodeForId(e.old_state.parent_id);if(!t)return console.warn("parent view missing during undo operation",e.old_state.parent_id);t.addChild(e.old_state)}else if(null===e.old_state){var n=this.getNodeForId(e.node_id);if(!n)return console.warn("node view missing during undo operation",e.node_id);n.deleteNode()}else{var i=this.model.getNodes().get(e.node_id);i.deltarize(e.old_state)}},e.prototype.redo=function(e){if(null===e.new_state){var t=this.getNodeForId(e.node_id);if(!t)return console.warn("node view missing during undo operation",e.node_id);t.deleteNode()}else if(null===e.old_state)if("root parent"===e.new_state.parent_id)this.model.getNodes().addRoot(e.new_state);else{var n=this.getNodeForId(e.new_state.parent_id);if(!n)return console.warn("parent view missing during undo operation",e.new_state.parent_id);n.addChild(e.new_state)}else{var i=this.model.getNodes().get(e.node_id);i.deltarize(e.new_state)}},e.prototype.enableUndoRedo=function(){this.undo_stack=[],this.redo_stack=[];var e=this.model.getNodes(),t=function(e,t,n){this.undoDisabled()||this.editingPrevented()||this.pushUndo({node_id:e.id,old_state:n,new_state:t})}.bind(this),n=function(e){this.undoDisabled()||this.editingPrevented()||this.pushUndo({node_id:e.id,old_state:null,new_state:_.clone(e.attributes)})}.bind(this),i=function(e){this.undoDisabled()||this.editingPrevented()||this.pushUndo({node_id:e.id,old_state:_.clone(e.attributes),new_state:null})}.bind(this);e.on("delta",t,this),e.on("node_added",n,this),e.on("node_deleted",i,this),this.on("remove",function(){e.off("delta",t),e.off("node_added",n),e.off("node_deleted",i),e.off(void 0,void 0,this)}.bind(this))}}}),define("starc/starc",["require","exports","module","underscore","tinytinycolor","utils/coggle-encodeji","utils/marked","utils/pageCoords","views/PitchView","jquery.l20n","jquery.scrollTo","plugins/jquery.fullscreen","plugins/jquery.queryString","starc/starc.node","views/NodeTextView","views/NodeEditView","./starc.zoomController","./starc.keyboardShortcuts","./starc.gestures","starc/starc.import","./starc.menu.background","./starc.menu.node","./starc.menu.colour","./starc.hyperlinks","./starc.node.buttons","./starc.node.blame","./starc.node.joins","./starc.node.editevents","./starc.node.tabfocus","./starc.node.crosslinks","./starc.bounds.scroll","./starc.bounds.drag","./starc.textareas.completion","./starc.usercolours","./starc.doubletap","./starc.cogglify","./starc.undo"],function(e,t,n){function i(e){o.bindAll(this,"scrollToFragment","getSizeOfHtml","getSizeOfNode","getSizeOfContent"),this.$el=$(g),this.scroll_target=e.scroll_target,this.model=e.model,this._writable=void 0,this.setReadOnly(!!e.readOnly),this._historyMode=!1,this._presentationMode=!1,this.nodes={},this.roots=[],this.scale=1,this._size={x1:0,y1:0,x2:0,y2:0},this.setDiagramSize(-f/2,-f/2,f/2,f/2),this.enableImports(),this.enableBackgroundMenu(),this.enableNodeMenus(),this.enableColourMenus(),this.enableUndoRedo(),this.enableGestures(),this.enableLinkCallouts(),this.enableDoubleTapCreate(),this.enableBlame(),this.enableJoins(),this.enableCrosslinkUpdates(),this.enableNodeEditing(),this.enableTextCompletion(),this.enableUserColourTagging(),this.model.getNodes().once("loaded",function(){this.loadNodes();var e=o.throttle(this.growSizeToContent.bind(this),50);this.model.getNodes().on("add change",e),this.on("scale",e),e(),$(window).on("hashchange.starcDiagram",this.scrollToFragment),location.hash?this.scrollToFragment():this.centreInScrolledView(this.rootNodes()[0]),this.trigger("loaded")}.bind(this))}var o=e("underscore"),r=e("tinytinycolor"),s=e("utils/coggle-encodeji"),l=e("utils/marked"),a=e("utils/pageCoords"),u=e("views/PitchView");e("jquery.l20n"),e("jquery.scrollTo"),e("plugins/jquery.fullscreen"),e("plugins/jquery.queryString");var c=e("starc/starc.node"),d=e("views/NodeTextView"),h=e("views/NodeEditView"),p="http://www.w3.org/2000/svg",f=200,g="<div class='diagram-editor'>    <div class='nodes'></div></div>";o.extend(i.prototype,Backbone.Events),i.prototype.nodesContainer=function(){return this._nodesContainer||(this._nodesContainer=this.$el.find(".nodes")),this._nodesContainer},i.prototype.nodesContainerPos=function(){return{left:-this._size.x1,top:-this._size.y1}},i.prototype.scrollContainer=function(){return this.scroll_target||$(window)},i.prototype.getPaper=function(){if(!this.paper){var e=$('<svg version="1.1"  xmlns="'+p+'" xmlns:xlink="http://www.w3.org/1999/xlink"preserveAspectRatio="xMinYMin" style="overflow: hidden; position: relative;">');this.$el.append(e),this.paper=e[0]}return this.paper},i.prototype.setDiagramSize=function(e,t,n,i){var o=n-e,r=i-t,s=this._size;if(e!=s.x1||t!=s.y1||n!=s.x2||i!=s.y2){var l,a,u="Explorer"===BrowserDetect.browser;u||(e!=s.x1&&(l=this.scrollContainer().scrollLeft()),t!=s.y1&&(a=this.scrollContainer().scrollTop())),this.$el.css({width:o,height:r}),this.nodesContainer().css({left:-e,top:-t});var c=[e,t,n-e,i-t].join(" "),d=this.getPaper();d.setAttribute("viewBox",c),d.setAttribute("width",o),d.setAttribute("height",r),u&&(e!=s.x1&&(l=this.scrollContainer().scrollLeft()),t!=s.y1&&(a=this.scrollContainer().scrollTop())),this.likelyInAutoScroll()||(e!=s.x1&&this.scrollContainer().scrollLeft(l+Math.round(s.x1-e)),t!=s.y1&&this.scrollContainer().scrollTop(a+Math.round(s.y1-t))),this._size.x1=e,this._size.y1=t,this._size.x2=n,this._size.y2=i,this.$el.css({"transform-origin":-this._size.x1+"px "+-this._size.y1+"px 0"}),this.trigger("resize")}};var m=function(e,t){var n;e<0?(e=-e,n=-1):n=1;var i=e%t;return i<.5*t?n*(e-i):n*(e+t-i)};i.prototype.growSizeToContent=function(){if(!this._disableGrowing){var e=Math.max(200,1.5*window.innerWidth)/this.getScale(),t=Math.max(200,1.5*window.innerHeight)/this.getScale(),n=this.getFastBoundingRect(0),i=this.getScale();i>1&&(n.xmin*=i,n.xmax*=i,n.ymin*=i,n.ymax*=i),n.xmin=Math.round(m(n.xmin-e,8)),n.ymin=Math.round(m(n.ymin-t,8)),n.xmax=Math.round(m(n.xmax+e,8)),n.ymax=Math.round(m(n.ymax+t,8)),this.setDiagramSize(n.xmin,n.ymin,n.xmax,n.ymax)}},i.prototype.suspendAutoGrow=function(e){var t=this._disableGrowing;this._disableGrowing=!!e,t&&!e&&this.growSizeToContent()},i.prototype.remove=function(){this.trigger("remove"),$(window).off(".starcDiagram"),h.activeEdit()&&h.activeEdit().cancel(),this.model.getNodes().off(void 0,void 0,this),this.model.off(void 0,void 0,this),o.values(this.nodes).map(function(e){e.remove()}),this.nodes={},this.roots=[],this.off()},i.prototype.enableZoomShortcuts=function(){e("./starc.zoomController")(this)},i.prototype.enableKeyboardShortcuts=function(){e("./starc.keyboardShortcuts")(this)},i.prototype.enableGestures=function(){e("./starc.gestures")(this)},i.prototype.enableImports=function(){e("starc/starc.import")(this)},i.prototype.enableBackgroundMenu=function(){e("./starc.menu.background")(this)},i.prototype.enableNodeMenus=function(){e("./starc.menu.node")(this)},i.prototype.enableColourMenus=function(){e("./starc.menu.colour")(this)},i.prototype.enableLinkCallouts=function(){e("./starc.hyperlinks")(this)},i.prototype.enableNodeButtons=function(){e("./starc.node.buttons")(this)},i.prototype.enableBlame=function(){e("./starc.node.blame")(this)},i.prototype.enableJoins=function(){e("./starc.node.joins")(this)},i.prototype.enableNodeEditing=function(){e("./starc.node.editevents")(this)},i.prototype.enableTabFocus=function(){e("./starc.node.tabfocus")(this)},i.prototype.enableCrosslinkUpdates=function(){e("./starc.node.crosslinks")(this)},i.prototype.enableScrollBounding=function(){e("./starc.bounds.scroll")(this)},i.prototype.enableBoundaryDragScrolling=function(){e("./starc.bounds.drag")(this)},i.prototype.enableTextCompletion=function(){e("./starc.textareas.completion")(this)},i.prototype.enableUserColourTagging=function(){e("./starc.usercolours")(this)},i.prototype.enableDoubleTapCreate=function(){e("./starc.doubletap")(this)},i.prototype.getScale=function(){return this.scale},i.prototype.setScale=function(e,t){e<1.02&&e>.98&&(e=1),e>2&&(e=2),e<.25&&(e=.25),t||(t=this.diagramCoordsFromEvent({pageX:window.innerWidth/2,pageY:window.innerHeight/2}));var n=this.getScale(),i=this.scrollContainer().scrollLeft(),o=this.scrollContainer().scrollTop();this.scale=e,this.$el.css({transform:"scale("+e+")","transform-origin":-this._size.x1+"px "+-this._size.y1+"px 0","-webkit-font-smoothing":e<.8?"antialiased":"subpixel-antialiased"}),t&&(this.scrollContainer().scrollLeft(Math.round(i+t.x*e-t.x*n)),this.scrollContainer().scrollTop(Math.round(o+t.y*e-t.y*n))),this.trigger("scale",e)},i.prototype.textSizeFromLevel=function(e){
var t=[17,15.3,13,12],n=t.length;return e>=0&&e<n?t[e]:e>=n?t[n-1]:17},i.prototype.getSizeOfHtml=function(e,t){if(!this.sizingContainer){var n=$(d.nodeTemplate());n.addClass("sizing-container"),n.css({left:-1e4,top:-1e4,visibility:"hidden"}),this.nodesContainer().append(n);var i=n.find(".node-content");this.sizingContainer=i[0],this.sizingContent=$('<div style="display: inline-block; word-break:break-word; margin: 0; padding: 0; min-height: 1.15em;">')[0],i.append(this.sizingContent)}var o=this.sizingContainer,r=this.sizingContent;return r.innerHTML=e,null!==t.width&&"undefined"!=typeof t.width?(o.style.width=t.width+"px",o.style.whiteSpace=""):(o.style.width="auto",o.style.whiteSpace="nowrap"),o.style.fontSize=t["font-size"],{w:r.offsetWidth,h:r.offsetHeight}},i.prototype.getSizeOfNode=function(e){var t=e.text();return t||(t=d.emptyNodeContentFor(e,!0)),this.getSizeOfContent(t,e.level(),e.width(),e.scale())},i.prototype.getSizeOfContent=function(e,t,n,i){return this.getSizeOfHtml(s.replaceAndRender(l(e||"")),{"font-size":this.textSizeFromLevel(t)*(i||1)+"px",width:n})},i.prototype.viewportBounds=function(e){e||(e=0);var t=this.diagramCoordsFromEvent({pageX:-e,pageY:-e}),n=this.diagramCoordsFromEvent({pageX:window.innerWidth+e,pageY:window.innerHeight+e});return{top:t.y,left:t.x,right:n.x,bottom:n.y}},i.prototype.documentCoordsFromEvent=function(e){var t=a(e);return t?t:(console.warn("failed to get page coords from",e,t),{x:0,y:0,failed:!0})},i.prototype.diagramCoordsFromEvent=function(e){var t=this.documentCoordsFromEvent(e),n=this.scrollContainer();if(n[0]!==window){t.x=n.scrollLeft()+t.x,t.y=n.scrollTop()+t.y;var i=n.offset();i&&(t.x-=i.left,t.y-=i.top)}return t.x=(t.x+this._size.x1)/this.getScale(),t.y=(t.y+this._size.y1)/this.getScale(),t},i.prototype.createNodeAt=function(e,t){if(!this.editingPrevented()){var n=this.model.getNodes().closest(e.x,e.y);if(n){if(n.isRoot()&&!n.children().length&&!n.isTitle()&&!getCoggleUser().isAwesome())return void u.MultiRoot();var i=this.getNodeForId(n.id);if(i){var o=i.addChild();return o.model.positionAbsolutely(e.x,e.y),o.model.deltarize(),t&&"function"==typeof t&&o.animate(t),o}}}},i.prototype.createRoot=function(e){if(!this.editingPrevented()){var t=this.model.getNodes().addRoot(e),n=this.nodes[t.id];return this.trigger("node_added",n),n}},i.prototype.setViewBoxToContent=function(e){this.suspendAutoGrow(!0),"undefined"==typeof e&&(e=120);var t=this.getSVGContentsBoundingRect(e),n=t.xmax-t.xmin,i=t.ymax-t.ymin;this.getPaper().setAttribute("height",i),this.getPaper().setAttribute("width",n),this.getPaper().setAttribute("viewBox",[t.xmin,t.ymin,n,i].join(" ")),$(this.getPaper()).css({width:n,height:i,margin:0}),this.$el.css({width:n,height:i}),this.nodesContainer().css({left:-t.xmin,top:-t.ymin}),this.scrollContainer().scrollTop(0),this.scrollContainer().scrollLeft(0)},i.prototype.visitDepthFirst=function(e,t){function n(t){e(t);var i=t.children();i.sort(function(e,t){return e.y()-t.y()}),o.each(i,n)}var i=new jQuery.Deferred;return"undefined"==typeof t?this.rootNodes().forEach(function(e){n(e.model)}.bind(this)):n(t),i.resolve(),i.promise()},i.prototype.getColour=function(e){var t=["#7aa3e5","#67d7c4","#9ed56b","#ebd95f","#efa670","#e68782","#e096e9","#988ee3"];return t[Math.abs(e)%t.length]},i.prototype.loadNodes=function(){if(!this._watching_nodes){this._watching_nodes=!0;var e=function(e){e.isRoot()?this.onRootNodeAdded(e):this.onNodeAdded(e)}.bind(this),t=function(e){var t=this.getNodeForId(e.id);t&&t.remove(),delete this.nodes[e.id]}.bind(this);this.model.getNodes().each(e),this.model.getNodes().on("add",e,this),this.model.getNodes().on("remove",t,this)}},i.toTitleText=function(e){function t(e){var t=e.clone();return t.find(".callout").remove(),t.find("img").replaceWith(function(){return $(this).attr("alt")||$(this).attr("title")}),s.replaceColons(t.text())}return t($("<div>",{html:l(e||"").replace(/<br\/>|\n/g," ")})).replace(/^ *| *$/g,"")},i.prototype.scrollTo=function(e){var t=this.getNodeForId(e.id);t&&(t.highlight(),this.scrollContainer().scrollTo(t.getLabel().$el,{duration:500,queue:!1,hash:!1,axis:"xy",offset:{top:-this.scrollContainer().height()/2,left:-this.scrollContainer().width()/2}}))},i.prototype.scrollToFragment=function(){var e=this.model.getNodes().matchingLink(window.location.hash.slice(1));e&&this.scrollTo(e)},i.prototype.setReadOnly=function(e){var t=!e;t!==this._writable&&(e?this.$el.addClass("readonly"):this.$el.removeClass("readonly"),this._writable=t,this.trigger("mode",this.mode()))},i.prototype.closestNode=function(e,t){var n=this.model.getNodes().closest(e,t);return this.getNodeForId(n.id)},i.prototype.startHistoryMode=function(){this.historyMode()||(this.$el.addClass("historymode"),this._historyMode=!0,this.trigger("mode",this.mode()))},i.prototype.stopHistoryMode=function(){this.historyMode()&&(this.$el.removeClass("historymode"),this._historyMode=!1,this.trigger("mode",this.mode()))},i.prototype.startPresentationMode=function(){this.presentationMode()||(this.$el.addClass("presentationmode"),this._presentationMode=!0,$.fullscreen(!0),this.trigger("mode",this.mode()))},i.prototype.stopPresentationMode=function(){this.presentationMode()&&(this.$el.removeClass("presentationmode"),this._presentationMode=!1,this.model.getNodes().getRoots().forEach(function(e){e.expandChildren("left",!0),e.expandChildren("right",!0),e.expandChildren("top",!0),e.expandChildren("bottom",!0)}),$.fullscreen(!1),this.trigger("mode",this.mode()))},i.prototype.mode=function(){return this.presentationMode()?["presentationmode"]:this.historyMode()?["historymode"]:this.readOnly()?["readonly"]:["normal"]},i.prototype.presentationMode=function(){return this._presentationMode},i.prototype.historyMode=function(){return this._historyMode},i.prototype.readOnly=function(){return!this.model.canWrite()||!this._writable},i.prototype.editingPrevented=function(){return this.presentationMode()||this.historyMode()||this.readOnly()},i.prototype.displayHistoryModeWarning=function(){window.Messages.warning("Unable to do that at the moment! Try closing the history viewer first.","history-warning").timeout(3e3)},i.prototype.warnIfHistoryMode=function(){return!!this.historyMode()&&(this.displayHistoryModeWarning(),!0)},i.prototype.textPopupActive=function(){return!!h.activeEdit()},i.prototype.collides=function(e,t,n,i){var r=1600,s=800,l=e,a=e+n,u=t-i/2,c=t+i/2;if(a<l){var d=a;a=l,l=d}for(var h=o.values(this.nodes),p=0;p<h.length;p++){var f=h[p];if(!(Math.abs(f.model.x()-e)>r||Math.abs(f.model.y()-t)>s)){var g=f.boundingBox();if(!(a<g.x&&l<g.x||a>g.x2&&l>g.x2||c<g.y&&u<g.y||c>g.y2&&u>g.y2))return f}}return!1},i.prototype.getSVGContentsBoundingRect=function(e){e||(e=0);var t,n,i,r={xmin:null,ymin:null,xmax:null,ymax:null},s=1200;return o.map(this.nodes,function(e){e.model.x()-s>r.xmin&&e.model.x()+s<r.xmax&&e.model.y()-s>r.ymin&&e.model.y()+s<r.ymax||(t=e.boundingBox(),r.xmin=null===r.xmin||t.x<r.xmin?t.x:r.xmin,r.ymin=null===r.ymin||t.y<r.ymin?t.y:r.ymin,r.xmax=null===r.xmax||t.x2>r.xmax?t.x2:r.xmax,r.ymax=null===r.ymax||t.y2>r.ymax?t.y2:r.ymax,e.crosslinks&&o.values(e.crosslinks).map(function(e){t=e.boundingBox(),r.xmin=t.x<r.xmin?t.x:r.xmin,r.ymin=t.y<r.ymin?t.y:r.ymin,r.xmax=t.x2>r.xmax?t.x2:r.xmax,r.ymax=t.y2>r.ymax?t.y2:r.ymax}),n=e.parent(),n&&!n.model.isRoot()&&n.model.ltr()!==e.model.ltr()&&(i=e.getConnection(),t=i.boundingBox(),r.xmin=t.x<r.xmin?t.x:r.xmin,r.ymin=t.y<r.ymin?t.y:r.ymin,r.xmax=t.x2>r.xmax?t.x2:r.xmax,r.ymax=t.y2>r.ymax?t.y2:r.ymax))}),r.xmin=Math.round(r.xmin-e),r.ymin=Math.round(r.ymin-e),r.xmax=Math.round(r.xmax+e),r.ymax=Math.round(r.ymax+e),r},i.prototype.getFastBoundingRect=function(e){e||(e=0);var t,n,i={xmin:null,ymin:null,xmax:null,ymax:null};return this.model.getNodes().each(function(e){t=e.x(),n=e.y(),i.xmin=null===i.xmin||t<i.xmin?t:i.xmin,i.ymin=null===i.ymin||n<i.ymin?n:i.ymin,i.xmax=null===i.xmax||t>i.xmax?t:i.xmax,i.ymax=null===i.ymax||n>i.ymax?n:i.ymax}),i.xmin=Math.round(i.xmin-e),i.ymin=Math.round(i.ymin-e),i.xmax=Math.round(i.xmax+e),i.ymax=Math.round(i.ymax+e),i},i.prototype.checkVersion=function(e){var t=3;t<e.server_version&&(window.Messages.warning("Coggle is out of date. We recommend you refresh the page for the latest version!","out-of-date-warning"),setTimeout(function(){location.reload(!0)},36e5))},i.prototype.getNodeForId=function(e){return this.nodes[e]},i.prototype.centreInScrolledView=function(e){e&&($("body").hasClass("mobile-app")&&"Android"==BrowserDetect.OS?(this.rootNodes()[0].editNode(),h.activeEdit().cancel()):(this.scrollContainer().scrollLeft(e.model.x()-(this._size.x1+this.scrollContainer().innerWidth()/2)),this.scrollContainer().scrollTop(e.model.y()-(this._size.y1+this.scrollContainer().innerHeight()/2))))},i.prototype.onRootNodeAdded=function(e){this.nodes[e.id]&&console.error("duplicate root ID: "+JSON.stringify(e.toJSON()));var t=new c(this,e);this.roots.push(t),this.nodes[e.id]=t,t.render(),e.get("title")&&this.model.set("title",i.toTitleText(e.text()))},i.prototype.onNodeAdded=function(e){this.lastNodeAddedAt=Date.now();var t=new c(this,e);this.nodes[e.id]=t},i.prototype.likelyInAutoScroll=function(){return!!$("body").hasClass("mobile-app")&&(!!h.activeEdit()&&!(Date.now()-this.lastNodeAddedAt>1e3))},i.prototype.rootNodes=function(){return this.roots},i.prototype.allNodes=function(){return this.nodes},i.prototype.getCrosslinkGroup=function(){return this.crosslink_group||(this.crosslink_group=document.createElementNS(p,"g"),this.crosslink_group.setAttribute("id","xlink-elements"),$(this.getPaper()).prepend(this.crosslink_group)),this.crosslink_group},i.prototype.randomWalkColour=function(e){var t=r(e).toHsl();return t.h+=(Math.floor(19*Math.random())-9)/256,t.s+=(Math.floor(13*Math.random())-6)/256,t.l+=(Math.floor(13*Math.random())-6)/256,t.h<0&&(t.h=1-t.h),t.h>1&&(t.h=t.h-1),t.s<0&&(t.s=0),t.s>1&&(t.s=1),t.l<0&&(t.l=0),t.l>1&&(t.l=1),r(t).toHexString()},i.prototype.averageColours=function(e){if(!e.length)return"#bbbbbb";for(var t=0,n=0,i=0,o=0;o<e.length;o++){var s=r(e[o]).toRgb();t+=s.r,n+=s.g,i+=s.b}return r({r:t/e.length,g:n/e.length,b:i/e.length}).toHexString()},e("./starc.cogglify")(i),e("./starc.undo")(i),n.exports=i}),define("views/DiagramViews",["require","exports","module","underscore","async","backbone","utils/coggle-timeago","jquery.lazy","starc/starc","utils/coggle-encodeji","env","env","env","env","env","env","env","env"],function(e,t,n){var i=e("underscore"),o=e("async"),r=e("backbone"),s=e("utils/coggle-timeago");e("jquery.lazy");var l=(e("starc/starc"),e("utils/coggle-encodeji")),a="<div class='content'>  <a href='/diagram/<%- short_id %>/t/<%- url_title %>' class='lazy preview open' data-src='"+e("env").cdn.url+"/diagram/<%- short_id %>/thumbnail?cachebust=3&mtime=<%- last_modified %>'></a>  <a href='/diagram/<%- short_id %>/t/<%- url_title %>' class='open title'>    <img src='"+e("env").cdn.url+"/img/padlock.png' class='private-icon' data-l10n-id='tooltip-private-icon' title='Diagram is private'/>    <% if(title.length) { %><%- title %><% } else { %><span data-l10n-id='unnamed-diagram'></span><% } %>  </a>  <time class='last-modified' datetime='<%- last_modified %>'/>  <span class='unread-notifications'><%- unread_notifications ? unread_notifications : undefined %></span></div><div class='diagram-icons icons'>  <img src='"+e("env").cdn.url+"/img/dots.png' data-l10n-id='tooltip-more' title='Diagram options' class='icon more' />  <img src='"+e("env").cdn.url+"/img/subscribed.png' data-l10n-id='tooltip-unsubscribe' title='Unsubscribe from notifications' class='icon unsubscribe' />  <img src='"+e("env").cdn.url+"/img/unsubscribed.png' data-l10n-id='tooltip-subscribe' title='Subscribe to notifications' class='icon subscribe' />  <img src='"+e("env").cdn.url+"/img/clone.png' data-l10n-id='tooltip-duplicate' title='Create a copy' class='icon clone' />  <img src='"+e("env").cdn.url+"/img/bin.png' data-l10n-id='tooltip-remove' title='Remove diagram' class='icon delete' />  <img src='"+e("env").cdn.url+"/img/undo.png' data-l10n-id='tooltip-restore' title='Restore diagram' class='icon undo' /></div>",u=r.View.extend({tagName:"li",className:"diagram col-sm-6 col-md-4",template:i.template(a),events:{"mousedown .delete":"removeDiagram","touchstart .delete":"removeDiagram","mousedown .undo":"unremoveDiagram","touchstart .undo":"unremoveDiagram","mousedown .clone":"makeClone","touchstart .clone":"makeClone","mousedown .subscribe":"toggleNotifications","touchstart .subscribe":"toggleNotifications","mousedown .unsubscribe":"toggleNotifications","touchstart .unsubscribe":"toggleNotifications","mousedown .more":"more","touchstart .more":"more",mouseleave:"less","click a.open":"updateLastView"},initialize:function(e){this.options=e,i.bindAll(this,"render","removeDiagram","unremoveDiagram","updateLastView"),this.$el.attr("data-id",this.model.id),this.listenTo(this.model,"change",this.render),this.el.view=this,this.el.model=this.model},render:function(){var e=this.model.toJSON();return e.title=this.model.cleanTitle(),this.$el.html(this.template(e)),l.replaceAndRender(this.$el.find(".title")[0]),this.model.canWrite()&&this.$el.find(".content").addClass("handle"),this.model.get("deleted")&&this.$el.addClass("deleted"),this.model.get("public")||this.$el.addClass("private"),(!this.model.canClone()||this.options.organisation&&this.options.organisation.id&&!this.options.organisation.canWrite())&&this.$el.find(".icon.clone").remove(),!this.options.folder||this.options.folder.isVirtual()||this.options.folder.isAdmin()||(this.$el.find(".icon.delete").remove(),this.$el.find(".icon.undo").remove()),this.model.get("subscribed")?this.$el.addClass("subscribed"):this.$el.removeClass("subscribed"),this.model.isModified()?this.$el.addClass("modified"):this.$el.removeClass("modified"),setTimeout(function(){this.$el.find(".lazy").lazy({appendScroll:$(".home-view"),bind:"event",afterLoad:function(e){e.addClass("thumb-loaded");var t=/url\((['"])?(.*?)\1\)/i.exec(e[0].style.backgroundImage);if(t){var n=new Image;n.src=t[2],n.complete&&n.width<e.width()&&n.height<e.height()&&e.addClass("small-thumb")}}}),s.timeago(this.$el.find("time.last-modified"))}.bind(this),0),this},updateLastView:function(){this.model.set({last_viewed:new Date})},toggleNotifications:function(e){return e.stopPropagation(),this.model.get("subscribed")?this.model.unsubscribe():this.model.subscribe(),!1},removeDiagram:function(e){return e.stopPropagation(),this.model.getAccess(function(e,t){return e?console.warn("failed to determine permission"):(this.previous_folder||(this.previous_folder=this.model.get("folder")),t.getMe()&&t.getMe().grant(["read","write","clone"],function(e){return e?console.warn("failed to grant permissions"):(t.getMe().revoke("list"),void this.model.set("deleted",!0))}.bind(this)),this.previous_folder&&(this.model.set("folder",null),this.model.save()),void $(this.el).addClass("deleted"))}.bind(this)),!1},unremoveDiagram:function(e){return e.stopPropagation(),this.model.getAccess(function(e,t){return e?console.warn("failed to determine permission"):(this.previous_folder&&(this.model.set("folder",this.previous_folder),this.model.save({wait:!0,success:function(){this.previous_folder=void 0}.bind(this)})),void t.getMe().grant("list",function(){this.model.set("deleted",!1),$(this.el).removeClass("deleted")}.bind(this)))}.bind(this)),!1},makeClone:function(e){return e.stopPropagation(),window.location="/clone/"+this.model.id,!1},more:function(e){return e.stopPropagation(),this.$el.addClass("expanded"),!1},less:function(e){return e.stopPropagation(),this.$el.removeClass("expanded"),!1}}),c=i.template("<div class='diagram-list-notice diagram-list-welcome' data-l10n-id='doclist-create'><b>Welcome to Coggle!</b> – your diagrams will be listed here. <div style='display:none;'><a class='create-diagram button'>Create Diagram</a></div></div><div class='diagram-list-notice diagram-list-readonly' data-l10n-id='doclist-readonly'><b>Welcome to Coggle!</b> – Ask the owner to grant you access to create a diagram here.</div><div class='diagram-list-notice diagram-list-folder-empty' data-l10n-id='doclist-folder-empty'><b>This is an empty folder!</b> – Create a new diagram here, or drag & drop diagrams into folders.</div><div class='diagram-list-notice diagram-list-shared' data-l10n-id='doclist-shared'><b>Shared with you</b> – diagrams created by other people then shared with you are in this folder.</div><ul class='row diagram-list'></ul></div>"),d=i.template("<div class='loadspinner'>"),h=r.View.extend({tagName:"div",className:"diagrams",initialize:function(e){this.options=e,i.bindAll(this,"render","removeOne","addOne","addAll","sortByOrder"),this.listenTo(this.collection,"remove",this.removeOne),this.listenTo(this.collection,"add",this.addOne),this.listenTo(this.collection,"sort",this.sortByOrder),this.loaded=this.collection.loaded||this.collection.length,this.listenToOnce(this.collection,"sync",function(){this.loaded||(this.loaded=!0,this.render())}.bind(this))},render:function(){return this.loaded?(this.$el.html(c(this.model&&this.model.toJSON())),this.options.folder?(this.options.folder.isShared()?(this.$el.find(".diagram-list-welcome").remove(),this.$el.find(".diagram-list-readonly").remove(),this.$el.find(".diagram-list-folder-empty").remove()):this.options.folder.isRoot()?(this.$el.find(".diagram-list-shared").remove(),this.$el.find(".diagram-list-folder-empty").remove(),this.options.folder.canWrite()?this.$el.find(".diagram-list-readonly").remove():this.$el.find(".diagram-list-welcome").remove()):(this.$el.find(".diagram-list-shared").remove(),this.$el.find(".diagram-list-welcome").remove(),this.$el.find(".diagram-list-readonly").remove()),this.options.folder.canWrite()&&this.addDragging({connect:this.options.folder.isAdmin()})):this.$el.find(".diagram-list-shared").remove(),this.collection.length&&(this.$el.find(".diagram-list-welcome").remove(),this.$el.find(".diagram-list-folder-empty").remove()),this.options.emptyContent===!1&&this.$el.find(".diagram-list-notice").remove(),this.addAll(),this.$el.fadeOut(0).fadeIn(150),this):(this.$el.html(d()),this)},addKeyboardHandlers:function(){$("body").off("keydown.diagramSelection"),$("body").on("keydown.diagramSelection",function(e){if((!$(e.target).is("input")||$(e.target).is(".search"))&&!(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)){var t;return 40==e.keyCode?(t=this.$el.find(".diagram.selected"),t.length?t.removeClass("selected").next().addClass("selected"):this.$el.find(".diagram").first().addClass("selected"),!1):38==e.keyCode?(t=this.$el.find(".diagram.selected"),t.length?t.removeClass("selected").prev().addClass("selected"):this.$el.find(".diagram").last().addClass("selected"),!1):void(13==e.keyCode?this.$el.find(".diagram.selected").find(".title").click():e.which>=41&&e.which<=90&&$(".search-view .search").focus())}}.bind(this)),this.addKeyboardHandlers()},remove:function(){$("body").off("keydown.diagramSelection"),r.View.prototype.remove.apply(this,arguments)},removeOne:function(e){this.$el.find(".diagram[data-id="+e.id+"]").remove()},sortByOrder:function(){var e=this.$el.find(".diagram-list>.diagram");e.sort(function(e,t){var n=parseFloat($(e).attr("data-order")),i=parseFloat($(t).attr("data-order"));return i-n}),e.detach().appendTo(this.$el.find(".diagram-list"))},addOne:function(e){if(this.$el.removeClass("empty"),!this.$el.find(".diagram[data-id="+e.id+"]").length){var t=new u({model:e,folder:this.options.folder,organisation:this.options.organisation});this.addChildView(t);var n=t.render().$el;n.attr("data-id",e.id),n.attr("data-order",e.get("order")),this.$el.find(".diagram-list").append(n)}},addAll:function(){0!==this.collection.length&&this.$el.removeClass("empty");var e=o.queue(function(e,t){this.addOne(e),setTimeout(t,0)}.bind(this),3);e.push(this.collection.toArray())},addDragging:function(e){this.draggingConfigured||(this.draggingConfigured=!0,this.setupDragging(e),$("body").hasClass("touch")&&(this.disableDragging(),this.$el.find(".diagram-list").on("touchstart",function(e){var t=!this.$el.find(".diagram-list").sortable("option","disabled");if(!t){var n=setTimeout(function(){n=!1,this.enableDragging(),this.$el.find(".diagram-list").trigger(e)}.bind(this),$("body").hasClass("desktop")?0:250);this.$el.find(".diagram-list").one("touchend touchmove",function(e){n&&(clearTimeout(n),n=!1,this.$el.find(".diagram-list").trigger(e),this.disableDragging())}.bind(this))}}.bind(this)),this.$el.on("sortdeactivate",function(e,t){this.disableDragging()}.bind(this))))},disableDragging:function(){this.$el.removeClass("drag-enabled"),this.$el.find(".diagram-list").sortable("disable")},enableDragging:function(){this.$el.addClass("drag-enabled"),this.$el.find(".diagram-list").sortable("enable")},setupDragging:function(e){function t(){$("#page>.home-view").scrollTop($("#page>.home-view").scrollTop()+10*n)}var n=0,o=!1;e=i.extend({connect:!0},e);var r=".diagram-list, .folders .folder:not(.disable-drop), .organisation";e.connect||(r="");this.$el.find(".diagram-list").sortable({connectWith:r,dropOnEmpty:!0,items:".diagram",delay:0,distance:$("body").hasClass("desktop")?3:0,tolerance:"pointer",placeholder:"diagram-placeholder col-sm-6 col-md-4",helper:"clone",revert:200,scrollSensitivity:40,scrollSpeed:10,handle:".handle",appendTo:"#page>.home-view",scroll:!1,start:function(e,i){$("body").addClass("dragging"),o=setInterval(t,20),$("#page>.home-view").on("mousemove",function(e){n=0,e.clientY<40&&(n=-1),$(window).innerHeight()-e.clientY<40&&(n=1)});var r=i.item[0].model;r.get("owner_id")!==getCoggleUser().id?$('.folders .folder[data-id="root"]').addClass("disable-drop"):$('.folders .folder[data-id="shared"]').addClass("disable-drop"),$(this).sortable("refresh")},stop:function(){$("body").removeClass("dragging"),$("#page>.home-view").off("mousemove"),clearInterval(o),$('.folders .folder[data-id="root"]').removeClass("disable-drop"),$('.folders .folder[data-id="shared"]').removeClass("disable-drop")},update:function(e,t){var n=t.item[0].model,i=!!$(t.item).prev()[0]&&$(t.item).prev()[0].model,o=!!$(t.item).next()[0]&&$(t.item).next()[0].model;i&&o?n.set("order",(i.get("order")+o.get("order"))/2):i?n.set("order",i.get("order")/2):o&&n.set("order",o.get("order")+20),n.hasChanged()&&n.save()}.bind(this)})}});n.exports.DiagramView=u,n.exports.DiagramList=h}),define("views/SearchResultsView",["require","exports","module","underscore","backbone","plugins/Backbone.childViews","views/DiagramViews","views/GlobalSearchView"],function(e,t,n){var i=e("underscore"),o=e("backbone");e("plugins/Backbone.childViews");var r=e("views/DiagramViews").DiagramList,s=(e("views/GlobalSearchView"),""),l=o.View.extend({tagName:"div",className:"search-results",template:i.template(s),events:{},initialize:function(e){i.bindAll(this,"render","renderError"),this.options=e,this.listenTo(this.collection,"search-failed",this.renderError),this.diagramList=new r({collection:this.collection,emptyContent:!1}),this.addChildView(this.diagramList)},renderError:function(e){return this.$el.html($("<error/>").text("Oops! Loading search results failed, please try again!")),this},render:function(){return this.$el.html(this.template()),this.$el.append(this.diagramList.render().$el),this}});n.exports=l}),function(e){"function"==typeof define&&define.amd?define("plugins/jquery.clockify",["jquery"],e):e(jQuery)}(function(e){function t(e){return{transform:e,"-ms-transform":e,"-webkit-transform":e,"-moz-transform":e,"-o-transform":e}}function n(){var e=new Date;return e.setHours(e.getHours()-12),e}var i=11,o=100;e.fn.clockify=function(r){function s(e,n,i){return function(){y[e].css(t("rotate("+i.h+"deg)")),b[e].css(t("rotate("+i.m+"deg)")),r.seconds&&w[e].css(t("rotate("+i.s+"deg)")),Math.abs(i.h-n.h)>30&&y[e].addClass("transitioning"),Math.abs(i.m-n.m)>30&&b[e].addClass("transitioning"),r.seconds&&Math.abs(i.s-n.s)>30&&w[e].addClass("transitioning")}}function l(e){return function(){y[e].removeClass("transitioning"),b[e].removeClass("transitioning"),r.seconds&&w[e].removeClass("transitioning")}}function a(e){for(var t=e-_,n=e.getHours(),r=e.getMinutes(),a=e.getSeconds(),u=Math.floor(t/6e4),c=Math.floor(t/36e5),d=Math.floor(t/432e5),h={s:6*a+360*u,m:6*r+.1*a+360*c,h:n%12*30+.5*r+360*d},p=0;p<i;p++)window.setTimeout(s(p,C,h),p*o/i),window.setTimeout(l(p),1e3+p*o/i);E=e,C=h}function u(){F||a(new Date)}function c(e,t){F=!0,a(t||n())}function d(e,t){F=!1,u()}function h(t){e.contains(document,f[0])||p(),u()}function p(){g&&(window.clearInterval(g),g=null),e(window).off("clockify-timetravel",c),e(window).off("clockify-timetravel-end",d),e(window).off("clockify-start",h)}r=r||{};var f=e(this);f.addClass("clockified");var g,m,v,y=[],b=[],w=[];for(m=0;m<i;m++)v=e("<div/>").addClass("hand").addClass("hour"),0===m&&v.addClass("first"),y.push(v.appendTo(f));for(m=0;m<i;m++)v=e("<div/>").addClass("hand").addClass("minute"),0===m&&v.addClass("first"),b.push(v.appendTo(f));if(r.seconds)for(m=0;m<i;m++)v=e("<div/>").addClass("hand").addClass("second"),0===m&&v.addClass("first"),w.push(v.appendTo(f));var _=new Date;_.setHours(0,0,0,0);var E=_,C={h:0,m:0,s:0},F=!1;e(window).on("clockify-timetravel",c),e(window).on("clockify-timetravel-end",d),e(window).on("clockify-start",h),g=r.seconds?window.setInterval(u,1e3):window.setInterval(u,6e4)}});var saveAs=saveAs||function(e){"use strict";if(!("undefined"==typeof e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},i=t.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in i,r=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},s=/constructor/i.test(e.HTMLElement),l=/CriOS\/[\d]+/.test(navigator.userAgent),a=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},u="application/octet-stream",c=4e4,d=function(e){var t=function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()};setTimeout(t,c)},h=function(e,t,n){t=[].concat(t);for(var i=t.length;i--;){var o=e["on"+t[i]];if("function"==typeof o)try{o.call(e,n||e)}catch(e){a(e)}}},p=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},f=function(t,a,c){c||(t=p(t));var f,g=this,m=t.type,v=m===u,y=function(){h(g,"writestart progress write writeend".split(" "))},b=function(){if((l||v&&s)&&e.FileReader){var i=new FileReader;return i.onloadend=function(){var t=l?i.result:i.result.replace(/^data:[^;]*;/,"data:attachment/file;"),n=e.open(t,"_blank");n||(e.location.href=t),t=void 0,g.readyState=g.DONE,y()},i.readAsDataURL(t),void(g.readyState=g.INIT)}if(f||(f=n().createObjectURL(t)),v)e.location.href=f;else{var o=e.open(f,"_blank");o||(e.location.href=f)}g.readyState=g.DONE,y(),d(f)};return g.readyState=g.INIT,o?(f=n().createObjectURL(t),void setTimeout(function(){i.href=f,i.download=a,r(i),y(),d(f),g.readyState=g.DONE})):void b()},g=f.prototype,m=function(e,t,n){return new f(e,t||e.name||"download",n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=p(e)),navigator.msSaveOrOpenBlob(e,t)}:(g.abort=function(){},g.readyState=g.INIT=0,g.WRITING=1,g.DONE=2,g.error=g.onwritestart=g.onprogress=g.onwrite=g.onabort=g.onerror=g.onwriteend=null,m)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);if("undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define("file-saver",[],function(){return saveAs}),define("starc/starc.coggleexport",["require","exports","module","BrowserDetect","jquery.l20n","file-saver"],function(e,t,n){function i(e,t){if(e in t)return t[e];throw'missing required option: "'+e+'"'}function o(e,t,n){return e in t?t[e]:n}function r(e,t){var n="application/octet-stream;charset=utf-8";s.browser.match(/webkit|safari/i)&&(n="text/plain;charset=utf-8"),l(new Blob([e],{type:n}),t)}var s=e("BrowserDetect");e("jquery.l20n");var l=e("file-saver");$.fn.addExportIcon=function(e){function t(){ga("send","event","Download",l),console.log("do ",l," export"),getCoggleUser().getActions().perform("diagram:download:"+s.toLowerCase().replace(".",""));var e=u();if("undefined"==typeof e.generate||"undefined"==e.finish)throw"export start() must return both generate and finish methods";n.visitDepthFirst(e.generate).always(function(){var t=window.document.title+s,n=e.finish();r(n,t)})}var n=i("diagram",e),s=i("extension",e),l=i("name",e),a=o("icon",e,"img/generic_export.png"),u=i("start",e),c=i("id",e),d=$(this),h=$("<div>",{class:"dltype"}),p=$("<a>").bind("click",t);p.append($("<img>",{src:a})),p.append($("<p>").text($.l10n.get("download-"+c,l))),h.append(p),d.append(h)}}),function(e){define("xmlwriter",[],function(){return function(){function t(e,t){e&&(this.encoding=e),t&&(this.version=t)}return function(){function e(e){return e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;")}function n(e){for(var t=e.c.length;t--;)"object"==typeof e.c[t]&&n(e.c[t]);e.n=e.a=e.c=null}function i(e,t,n,o){var r,s,l=t+"<"+e.n,a=e.c.length,u=0;for(r in e.a)l+=" "+r+'="'+e.a[r]+'"';if(l+=a?">":" />",o.push(l),a){do if(s=e.c[u++],"string"==typeof s){if(1==a)return o.push(o.pop()+s+"</"+e.n+">");o.push(t+n+s)}else"object"==typeof s&&i(s,t+n,n,o);while(u<a);o.push(t+"</"+e.n+">")}}t.prototype={encoding:"ISO-8859-1",version:"1.0",formatting:"indented",indentChar:"\t",indentation:1,newLine:"\n",writeStartDocument:function(e){this.close(),this.stack=[],this.standalone=e},writeEndDocument:function(){this.active=this.root,this.stack=[]},writeDocType:function(e){this.doctype=e},writeStartElement:function(e,t){t&&(e=t+":"+e);var n={n:e,a:{},c:[]};this.active?(this.active.c.push(n),this.stack.push(this.active)):this.root=n,this.active=n},deleteEndElement:function(){this.stack.pop(),this.active.c.pop()},writeEndElement:function(){this.active=this.stack.pop()||this.root},writeAttributeString:function(t,n){this.active&&(this.active.a[t]=e(n))},writeString:function(t){this.active&&this.active.c.push(e(t))},writeElementString:function(t,n,i){this.writeStartElement(t,i),this.writeString(e(n)),this.writeEndElement()},writeCDATA:function(e){e=e.replace(/>>]/g,"]]><![CDATA[>"),this.writeString("<![CDATA["+e+"]]>")},writeComment:function(e){this.writeString("<!-- "+e+" -->")},flush:function(e){"undefined"==typeof e&&(e={}),this.stack&&this.stack[0]&&this.writeEndDocument();var t="",n="",o=this.indentation,r="indented"==this.formatting.toLowerCase(),s="";if(e.suppress_xml_tag||(s+='<?xml version="'+this.version+'" encoding="'+this.encoding+'"',void 0!==this.standalone&&(s+=' standalone="'+(this.standalone?"yes":"no")+'" '),s+=" ?>"),s=[s],this.doctype&&this.root&&s.push("<!DOCTYPE "+this.root.n+" "+this.doctype+">"),r)for(;o--;)t+=this.indentChar;return this.root&&i(this.root,n,t,s),s.join(r?this.newLine:"")},close:function(){this.root&&n(this.root),this.active=this.root=this.stack=null},getDocument:window.ActiveXObject?function(){var e=new ActiveXObject("Microsoft.XMLDOM");return e.async=!1,e.loadXML(this.flush()),e}:function(){return(new DOMParser).parseFromString(this.flush(),"text/xml")}}}(),e.XMLWriter=t}.apply(e,arguments)})}(this),define("starc/starc.coggleexport.mm",["require","exports","module","starc/starc.coggleexport","xmlwriter","env"],function(e,t,n){function i(){var e=new XMLWriter,t=-1;return e.indentChar=" ",e.indentation=4,e.writeStartDocument(),e.writeStartElement("map"),e.writeAttributeString("version","0.9.0"),{generate:function(n){console.log("generate:",n.toJSON());var i=0;for(i=n.level();i<=t;i++)e.writeEndElement();n.isRoot()&&!n.isTitle()?e.writeStartElement("x-coggle-rootnode"):e.writeStartElement("node"),e.writeAttributeString("TEXT",n.text()),e.writeAttributeString("FOLDED","false"),e.writeAttributeString("POSITION",1===n.ltr()?"right":"left"),e.writeAttributeString("ID",n.id),
n.joinedNode()&&e.writeAttributeString("X_COGGLE_JOINEDTO",n.get("join")),n.isRoot()&&(e.writeAttributeString("X_COGGLE_POSX",""+n.x()),e.writeAttributeString("X_COGGLE_POSY",""+n.y())),e.writeStartElement("edge"),e.writeAttributeString("COLOR",n.colour()),e.writeEndElement(),e.writeStartElement("font"),e.writeAttributeString("NAME","Helvetica"),e.writeAttributeString("SIZE",""+Math.round(10*(n.scale()||1))),e.writeEndElement(),t=n.level()},finish:function(){var t=e.flush({suppress_xml_tag:!0});return t}}}e("starc/starc.coggleexport"),e("xmlwriter"),$.fn.addMMExportIcon=function(t){$(this).addExportIcon({extension:".mm",id:"mm",name:".mm File",icon:e("env").cdn.url+"/img/mm_export.png",start:i,diagram:t.diagram})}}),define("starc/starc.coggleexport.plaintext",["require","exports","module","starc/starc.coggleexport","env"],function(e,t,n){function i(e,t){return new Array(t+1).join(e)}function o(e,t){var n=i(s,t);return n+e.split(/\r?\n/).join("\n"+n)}function r(){console.log("plaintext export");var e=[];return{generate:function(t){e.push(o(t.text(),t.level()))},finish:function(){return e.join("\n")}}}e("starc/starc.coggleexport");var s="\t";$.fn.addTextExportIcon=function(t){$(this).addExportIcon({extension:".txt",id:"txt",name:"Plain-Text Outline",icon:e("env").cdn.url+"/img/txt_export.png",start:r,diagram:t.diagram})}}),define("views/DownloadDialogView",["require","exports","module","underscore","backbone","starc/starc.coggleexport","starc/starc.coggleexport.mm","starc/starc.coggleexport.plaintext","env","env"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=24375e4;e("starc/starc.coggleexport"),e("starc/starc.coggleexport.mm"),e("starc/starc.coggleexport.plaintext");var s='<div class="main"><div class="dltype"><a class="pdf"><img src="'+e("env").cdn.url+'/img/pdf.png"/><p class="when-failed" data-l10n-id="download-failed">File generation failed.</p><p data-l10n-id="download-pdf">Download PDF</p><div class="spin"></div></a></div><div class="dltype"><a class="png"><img src="'+e("env").cdn.url+'/img/png.png"/><p class="when-failed" data-l10n-id="download-failed">File generation failed.</p><p data-l10n-id="download-png">Download Image</p><div class="spin"></div></a></div></div><div class="desc"><p data-l10n-id="download-advanced">Advanced Types</p></div><div class="extra"></div><div class="upload-tip"><b>Looking for imports?</b> Drag a .mm or .txt file onto a diagram to import it! <a href="https://coggle.help/article/34-import-files-into-coggle" target="_blank">Read more.</a></div>';$.fn.dlSpinnify=function(){$(this).addClass("spin");for(var e=0;e<8;e++)$(this).append('<div class="s'+e+' spinpart"/>')};var l=o.View.extend({tagName:"div",className:"downloads",template:i.template(s),events:{"click .pdf":"pdfClicked","click .png":"pngClicked"},initialize:function(e){i.bindAll(this,"render","resetDownload","pdfClicked","pngClicked"),this.options=e,this.diagram=this.options.starcDiagram,this.listenTo(this.diagram.model.getNodes(),"change",this.resetDownload)},render:function(){return this.$el.html(this.template()),this.$el.find(".spin").dlSpinnify(),this.$el.find(".extra").addTextExportIcon({diagram:this.diagram}),this.$el.find(".extra").addMMExportIcon({diagram:this.diagram}),this.prepareDownloadAsync("png"),this.prepareDownloadAsync("pdf"),this},refresh:function(){this.$el.find(".preparing").length||this.$el.find(".available").length||(this.prepareDownloadAsync("png"),this.prepareDownloadAsync("pdf"))},resetDownload:function(){var e=this.$el.find("a");window._debug_render&&console.log("resetDownload!",e),e.attr("href",null),e.removeClass("available"),e.removeClass("failed")},pdfClicked:function(){this.$el.find(".pdf.preparing").length||this.$el.find(".pdf.available").length||this.prepareDownloadAsync("pdf")},pngClicked:function(){this.$el.find(".png.preparing").length||this.$el.find(".png.available").length||this.prepareDownloadAsync("png")},prepareDownloadAsync:function(e){var t=this.$el.find("."+e);t.removeClass("failed").addClass("preparing");var n=window.location.pathname.replace(/\/t\/[^\/]*/,"").replace("/diagram/","/api/1/diagrams/")+"/render";"static.coggle.it"==window.location.hostname&&(n="https://coggle.it"+n);var i=this.diagram.getSVGContentsBoundingRect(30),o=Math.abs(i.xmax-i.xmin),s=Math.abs(i.ymax-i.ymin),l=1;"png"===e&&o*s>r&&(l=Math.sqrt(r/(o*s)));var a=this.diagram.model.getDeltas().lastDelta().get("action_ts");n=n+"?type="+e+"&width="+o+"&height="+s+"&scale="+l+"&mtime="+a,$.ajax(n,{method:"GET",timeout:3e5,dataType:"json",xhrFields:{withCredentials:!0}}).done(function(n){console.log("done:",n),getCoggleUser().getActions().perform("diagram:download:"+e.toLowerCase()),t.removeClass("preparing").removeClass("failed").addClass("available"),t.attr({href:n.url,download:document.title,target:"_blank"})}).fail(function(n,i){console.log(n.responseText,i),getCoggleUser().getActions().perform("diagram:download-failed:"+e.toLowerCase()),t.removeClass("preparing").addClass("failed")})}});n.exports=l}),define("views/HistoryView",["require","exports","module","underscore","backbone","utils/coggle-timeago","env","env"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=e("utils/coggle-timeago"),s=o.View.extend({tagName:"ul",className:"dates discrete-slider",most_recent_date:null,from:null,events:{},initialize:function(e){i.bindAll(this,"reset","addTimes","render"),this.options=e},shouldDisplayLabel:function(e,t){var n=(new Date).getTime()-t.getTime();return n<216e5||t.toDateString()!=e.toDateString()},reset:function(e){this.revisionSelected(this.most_recent_date,e)},revisionSelected:function(e,t){return console.log("selected date:",e,"from:",this.from),this.from==e?void(t&&t(!1)):void $.ajax({url:this.model.url()+"/changes",data:{from_date:this.from.toJSON(),to_date:e.toJSON()}}).done(function(n){$(window).trigger("clockify-timetravel",[e]),n.error?t&&t(n.error):(this.from=e,$.each(n,function(e,t){try{this.model.getNodes().onDeltaV1(t)}catch(e){console.log("failed to apply:",e,t)}}.bind(this)),t&&t())}.bind(this))},addTimes:function(e){var t=this.slider=this.$el.discreteSlider();if(e.length<=1)return t.addStop({label:"no history yet",data:(new Date).toJSON()});e=e.map(function(e){return new Date(e)});var n=e[0];t.addStop({label:$.timeago(n),data:n.toJSON()});for(var i=1;i<e.length-1;i++){var o=e[i];this.shouldDisplayLabel(n,o)?(t.addStop({label:$.timeago(o),data:o.toJSON()}),n=o):t.addStop({label:$.timeago(o),class:"stop",data:o.toJSON()})}var r=e[e.length-1];this.current=t.addStop({label:$.timeago(r)+" (current)",data:r.toJSON()}),t.addSlider(),t.slideTo(this.current,0),this.from=e[e.length-1],this.most_recent_date=this.from;var s=0,l=null;this.$el.off("positionchange"),this.$el.on("positionchange",function(e,t){this.removeCloning(),this.$el.attr("disabled","disabled"),window.setTimeout(function(){this.$el.attr("disabled",!1)}.bind(this),s>=3e3?3e3:s+=500);var n=new Date($(t).attr("data"));ga("send","event","History","Change"),getCoggleUser().getActions().unique("diagram:history:seek"),this.revisionSelected(n,function(e){return e?void console.log(e):void(n!=l&&(this.model.canClone()&&this.addCloning(t),l=n))}.bind(this))}.bind(this))},removeCloning:function(){this.$el.find(".clonelink").remove()},addCloning:function(t){var n='<img src="'+e("env").cdn.url+'/img/clone.png" class="cloneimg"/>',i=('<img src="'+e("env").cdn.url+'/img/clone.png" class="cloneimg clonedone"/>',this.model.url()+"?clone[]=content&clone[]=folder&clone[]=title",$(t).attr("data")),o=$("<a>",{href:"/clone/"+this.model.id+"?clone[]=content&clone[]=folder&clone[]=title&date="+encodeURIComponent(i),html:n,title:"Create a copy of this version.",class:"clonelink"});o.prependTo(t)},render:function(e){this.$el.empty();var t=Math.floor(($(window).height()-140)/22),n=this.model.url()+"/dates";return $.ajax({url:n,data:{limit:t}}).done(function(t){r.loadLanguages(function(){this.addTimes(t),e&&e(t)}.bind(this))}.bind(this)),this}});n.exports=s}),define("views/NotificationSearchView",["require","exports","module","underscore","backbone"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r="<div class='filter'>    <input data-l10n-id='messages-search' placeholder='Search' value='<%- query %>'/>    <div class='overlays'>        <div class='clear' style='display:none'></div>    </div>    <% if(nodes.length >= 1) { %>        <div class='filter-details'>            Commenting on            \"<a href='<%-nodes[0].link%>' class='short-content'><%- nodes[0].text %></a>\"<% if(nodes.length == 1) { %>.            <% } else if(nodes.length == 2) { %>                and <a href='<%-nodes[1].link%>' class='short-content'>\"<%- nodes[1].text %>\".</a>            <% } else if(nodes.length > 2) { %>                and <%- nodes.length-1 %> other items.</span>            <% } %>            <div class='node-filter'>                <span data-l10n-id='messages-node-clear'>Clear</span>                <a class='clear-nodes'></a>            </div>        </div>    <% } %></div>",s=o.View.extend({tagName:"div",className:"search-box",events:{"keyup input":"search","keydown input":"updateClear","click .clear":"clear","click .node-filter":"clearNodes"},template:i.template(r),initialize:function(e){i.bindAll(this,"render","search","clear","updateClear"),this.options=e,this.listenTo(this.model,"change",function(){this.$el.find("input").is(":focus")||this.render(),this.updateClear()}.bind(this)),this.updateClear()},render:function(){var e=this.model.getNodes().map(function(e){var t=e.text().trim();return t.length>=15&&(t=t.substr(0,15).trim()+"..."),t.length||(t="empty item"),{text:t,link:"#"+e.shortId()}});return this.$el.html(this.template({query:this.model.getQuery(),nodes:e})),this},clear:function(){this.model.setQuery(""),this.$el.find("input").val(this.model.getQuery()),this.updateClear()},clearNodes:function(){this.model.setNodes([])},updateClear:function(){this.$el.find("input").val()&&0!==this.$el.find("input").val().trim().length?this.$el.find(".clear").show():this.$el.find(".clear").hide()},search:i.debounce(function(e){return e&&27==e.keyCode?this.clear():void this.model.setQuery(this.$el.find("input").val().trim())},250)});n.exports=s}),define("views/NotificationCreationView",["require","exports","module","underscore","backbone","plugins/jquery.markdownButtons","plugins/jquery.markdownShortcuts","models/NotificationSearch","models/Notification"],function(e,t,n){var i=e("underscore"),o=e("backbone");e("plugins/jquery.markdownButtons"),e("plugins/jquery.markdownShortcuts");var r=e("models/NotificationSearch"),s=e("models/Notification").NotificationModel,l="<div class='editor'><textarea data-l10n-id='messages-comments-notes' placeholder='Enter comments, discussion and notes.' rows='2'></textarea></div><div class='save-buttons'>    <div class='button danger remove'>Delete</div>    <div class='button secondary cancel'>Cancel</div>    <div class='button save'>Save</div></div>",a=o.View.extend({tagName:"div",className:"notification-creation",possiblyTaggedUsers:[],events:{"keydown textarea":"handleEnter","picked-user textarea":"userTagged","focus textarea":"showButtons","blur textarea":"hideButtons","click .cancel":"cancelEdit","click .save":"submit","click .remove":"delete","import:image:done":"onImageUpload"},template:i.template(l),initialize:function(){i.bindAll(this,"render","submit","growHeight","userTagged","cancelEdit","onImageUpload")},showButtons:function(){this.$el.find(".editor").addClass("focused")},hideButtons:function(){setTimeout(function(){this.$el.find("textarea").is(":focus")||this.$el.find(".editor").removeClass("focused")}.bind(this),500)},onImageUpload:function(e,t,n){return this.$el.find("textarea").val(this.$el.find("textarea").val()+" ![]("+n+")"),this.growHeight(),e.stopPropagation(),!1},userTagged:function(e,t){this.possiblyTaggedUsers.push(t)},growHeight:function(){var e=this.$el.find("textarea")[0].scrollHeight;this.$el.find("textarea").innerHeight()<e&&(this.$el.find("textarea").innerHeight(e+22),this.trigger("resize"))},resetHeight:function(){this.$el.find("textarea").css({height:""}),this.trigger("resize")},cancelEdit:function(){this.remove()},delete:function(){this.model&&this.model.destroy()},handleEnter:function(e){return(!e||!e.isDefaultPrevented())&&(e&&(13!==e.keyCode||e.altKey||e.shiftKey||e.ctrlKey)?this.growHeight():void this.submit())},submit:function(){this.resetHeight();var e=this.$el.find("textarea").val();if(0!==e.trim().length){var t=this.possiblyTaggedUsers.map(function(t){return e.indexOf("@"+t.displayName().replace(/\s/g,""))!==-1&&t.id});t=i.uniq(i.compact(t)),this.$el.find("textarea").prop("disabled",!0);var n=function(){this.$el.find("textarea").prop("disabled",!1),this.$el.find("textarea").val(""),this.possiblyTaggedUsers=[],this.$el.find("textarea").focus()}.bind(this),o=function(){this.$el.find("textarea").prop("disabled",!1),this.$el.find("textarea").focus(),this.$el.find("textarea").val(this.$el.find("textarea").val())}.bind(this),l=i.uniq(i.compact(i.union(s.extractTags(e),r.instance().activeTags())));this.model?this.model.save({message:e,tagged:t,tags:i.union(l,this.model.get("tags"))},{wait:!0,success:n,error:o}):this.collection.create({type:"chat",message:e,tagged:t,tags:l},{wait:!0,success:n,error:o}),ga("send","event","Notification","Chat"),getCoggleUser().getActions().perform("diagram:notifications:create")}else this.model&&this.model.save({message:""},{wait:!0})},render:function(){return this.$el.html(this.template()),this.$el.find("textarea").markdownButtons(),this.$el.find("textarea").markdownShortcuts({}),this.$el.find("textarea").val(this.model?this.model.get("message"):""),this}});n.exports=a}),define("models/Fact",["require","exports","module","backbone"],function(e,t,n){var i=e("backbone"),o=[{id:"math",text:"Did you know you can write math in Coggles? (Yeah, geeky!) Use \\\\( LaTeX here \\\\) to try it out!",weight:1,more:"http://bloggle.coggle.it/add-math-to-coggles/"},{id:"collaborate",text:"Did you know that you can collaborate in real-time with others? You can! Use the (+) button in the top right to invite others.",weight:1,more:"http://bloggle.coggle.it/how-to-collaborate-with-others-in-coggle/"},{id:"share",text:"Did you know that you can edit a Coggle at the same time as someone else? You can! Look for the (+) button in the top right to invite others.",weight:1,more:"http://bloggle.coggle.it/how-to-share-your-coggle-with-others/"},{id:"font",text:"Did you know you can use a fixed-width code font in Coggles? You can!<p>Just use `backticks` around the text, it also stops other special syntax from being interpreted.",weight:1,more:"http://bloggle.coggle.it/coggle-markdown-reference/"},{id:"bold",text:"Did you know you can use **bold text** in Coggles?<p>Just use **double asterisks** where you want the emphasis!",weight:1,more:"http://bloggle.coggle.it/coggle-markdown-reference/"},{id:"italic",text:"Did you know you can use *italic text* in Coggles?<p>Just use *asterisks* where you want the emphasis!",weight:1,more:"http://bloggle.coggle.it/coggle-markdown-reference/"},{id:"links",text:"Did you know you can put links in Coggles? You can!<p>They work like this:<br>[description](http://example.com)",weight:1,more:"http://bloggle.coggle.it/coggle-markdown-reference/"},{id:"download",text:"Did you know that you can download your Coggle as a PDF or an image. You can! Look for the download button in the top right of the screen",weight:1,more:"http://bloggle.coggle.it/how-to-export-a-coggle-as-a-vector-pdf/"},{id:"markdown",text:'Did you know that Coggle uses <a href="http://daringfireball.net/projects/markdown/">markdown syntax</a>? It does!<p>Try out links like this: &lt;http://example.com&gt;',weight:1,more:"http://bloggle.coggle.it/coggle-markdown-reference/"},{id:"latex",text:'Did you know Coggle supports LaTeX formulae? It does!<p>Use \\\\( LaTeX here \\\\) to try it out! Check out <a href="http://en.wikibooks.org/wiki/LaTeX/Mathematics">this link</a> for syntax help.',weight:1,more:"http://bloggle.coggle.it/add-math-to-coggles/"},{id:"move",text:"Want that item on a different part of the Coggle? No problem! Hold shift while dragging the (+) button of an item to reattach it somewhere else.",weight:1,more:""},{id:"fontsize",text:"Text too big? Too small? You can zoom!<br> use [ctrl] [+] / [ctrl] [-]",weight:1,more:"http://bloggle.coggle.it/change-the-text-size-in-a-coggle/"},{id:"zoomin",text:"Did you know you can zoom in for a closer look? You can!<br> use [ctrl] [+], or right click and drag the zoom icon!",weight:1,more:""},{id:"zoomout",text:"Did you know you can zoom out to see the big picture? You can!<br> use [ctrl] [-], or right click and drag the zoom icon!",weight:1,more:""},{id:"markdown2",text:'Did you know that <a href="http://daringfireball.net/projects/markdown/">Markdown</a> is awesome? It is, and Coggle supports it!',weight:1,more:"http://bloggle.coggle.it/coggle-markdown-reference/"},{id:"pdf",text:"You can download your Coggle as a PDF! Look for the download button in the top right of the screen.",weight:1,more:"http://bloggle.coggle.it/how-to-export-a-coggle-as-a-vector-pdf/"},{id:"png",text:"You can download your Coggle as an Image! Look for the download button in the top right of the screen.",weight:1,more:"http://bloggle.coggle.it/how-to-export-a-coggle-as-an-image/"},{id:"latex2",text:'Did you know Coggle supports LaTeX for math? It does!<p>Use \\\\( \\LaTeX here \\\\) to try it out! Here\'s <a href="http://en.wikibooks.org/wiki/LaTeX/Mathematics">a syntax guide</a>.',weight:1,more:"http://bloggle.coggle.it/add-math-to-coggles/"},{id:"history",text:"Did you know you can view the history of who changed what, when in your Coggle? You can! Click the clock icon in the top right.",weight:1,more:"http://bloggle.coggle.it/how-to-see-who-made-changes/"},{id:"images",text:"Did you know you can put images in your Coggle? You can!<p>Just drag and drop an image from your computer to wherever you want it.",weight:1,more:""},{id:"images2",text:"Did you know you can use images in Coggles? You can!<p>Drag and drop an image from your computer to wherever you want it. A mini version of the image is uploaded and saved!",weight:1,more:"http://bloggle.coggle.it/add-images-to-a-coggle/"},{id:"plaintext-in",text:"Did you know you can drag & drop plain text files onto Coggle to import them? You can!<p>If your file has indentation, Coggle will even add structure to the imported text.",weight:1,more:"http://bloggle.coggle.it/import-other-files-to-coggle/"},{id:"freemind-in",text:"Did you know you can drag & drop Freemind .mm files onto Coggle to import them? You can!",weight:1,more:""},{id:"link-drag",text:"Did you know you can drag a URL from your address bar onto a Coggle to make a link to that site? You can!",weight:1,more:""},{id:"text-size",text:"Did you know you can change the font? You can!<p>Use #, ##, or ### at the start of a line to make the text bigger.",weight:1,more:""},{id:"text-size2",text:"Did you know you can change the font? You can!<p>Drag the corner of the text editing area up or down to change the text size.",weight:1,more:""},{id:"text-size3",text:"Did you know you can change the text size? You can!<p>Drag the corner of the text editing area.",weight:1,more:""},{id:"md-reference",text:'Did you know you can use Markdown in Coggles to add links, images and more? You can!<p>Here\'s the <a href="http://bloggle.coggle.it/coggle-markdown-reference/">complete reference</a>.',weight:1,more:""},{id:"multiline-keys",text:"Did you know you can break text over multiple lines? You can! Hold [ctrl] while pressing [return] to insert a newline. You can also drag the corner of the text editing area, and then use [return] normally.",weight:1,more:"http://bloggle.coggle.it/use-multi-line-text-in-coggles/"},{id:"multiline-drag",text:"Did you know you can break text over multiple lines? You can! Drag the corner of the text editing area, then [return] will insert a newline instead of saving your edits. You can also hold [ctrl] while pressing [return] to insert a newline while typing.",weight:1,more:"http://bloggle.coggle.it/use-multi-line-text-in-coggles/"},{id:"multiline-wrap",text:"Did you know you can break text over multiple lines? You can! Drag the corner of the text editing area left/right to wrap text onto multiple lines.",more:"",weight:1},{id:"resize-images",text:"Did you know you can resize images? you can! Drag an image onto your Coggle from anywhere on the internet (provided you have permission to use it), and then drag the lower right corner of the image to resize it.",weight:1,more:""},{id:"image-size",text:'Did you know we support a Markdown extension to specify image size? We do! Specify a 200 by 100 pixel image like this: ![image description](http://url.to.image "optional title" 200x100)',weight:1,more:""},{id:"bold-kbshort",text:"Did you know you can use keyboard shortcuts to add **bold text** in Coggles? You can! Just press [ctrl]+[b] (or [cmd]+[b] on macs) with the text you want bold selected.",weight:1,more:""},{id:"shortcuts-1",text:"Did you know you can edit your Coggle using only the keyboard? You can, here's how:<p>[tab] to add a child node<br>[shift]+[tab] to move to the parent<br>[shift]+[return] to add a sibling",weight:1,more:""},{id:"shortcuts-2",text:"Did you know you can select which branch to edit using keyboard shortcuts? You can!<p>Use [alt]+[shift]+arrow keys to move along branches.",weight:1,more:""},{id:"task-lists",text:'Did you know you can <a href="https://help.github.com/articles/github-flavored-markdown">Markdown</a> to add checklists to Coggles? You can, here\'s an example:<p>- [ ] unchecked checkbox<br>- [X] checked checkbox</p><p>Clicking on a checkbox automatically changes the markdown, too.',weight:1,more:""},{id:"api-1",text:"Did you know we have an API? We do! Programs can use it to create, examine and manipulate Coggles automatically.",more:"http://bloggle.coggle.it/introducing-the-coggle-api/",weight:1},{id:"organisation",text:"Using Coggle in Business? You can create a Coggle Organisation to manage your Company's Coggles.",more:"https://coggle.it/organisations",weight:1},{id:"organisation2",text:"Did you know Coggle Organisations can put their logo on their Coggles? They can!",more:"https://coggle.it/organisations",weight:1},{id:"organisation3",text:"Did you know you can create a Coggle Organisation to organise your businesses Coggles? You can!",more:"https://coggle.it/organisations",weight:1}],r=i.Model.extend({idAttribute:"id"}),s=i.Collection.extend({model:r,url:"#facts"}),l=new s(o);n.exports.CoggleFacts=l,n.exports.FactModel=r,n.exports.FactCollection=s}),define("views/FactViews",["require","exports","module","underscore","backbone","models/Fact"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=e("models/Fact").CoggleFacts,s="<span class='text' data-l10n-id='fact-<%-id%>'><%=text%></span><span class='more'><%=more%></span>",l=o.View.extend({tagName:"li",className:"fact",template:i.template(s),events:{},initialize:function(e){i.bindAll(this,"render"),this.options=e},render:function(){var e=this.model.toJSON();return e.more&&e.more.length>0&&(e.more='<div><a target="_blank" href="'+e.more+'" data-l10n-id="cogglefacts-more">read more...</a></div>'),$(this.el).html(this.template(e)),this}}),a="<ul class='fact-list'></ul><a data-l10n-id='another-fact' class='next'>another!</a>",u=o.View.extend({tagName:"div",className:"random-fact",index:0,template:i.template(a),events:{"click .next":"random"},initialize:function(e){i.bindAll(this,"render","display","random","next"),this.collection=r,this.options=e},render:function(){return $(this.el).html(this.template()),this.random(),this},display:function(e){this.index=e;var t=this.collection.at(this.index),n=new l({model:t});$(this.el).find(".fact-list").empty(),$(this.el).find(".fact-list").append(n.render().el)},random:function(){var e=this.collection.length,t=Math.floor(Math.random()*e);this.display(t)},next:function(){var e=++this.index%this.collection.length;this.display(e)}});n.exports.FactView=l,n.exports.RandomFactView=u}),define("views/NotificationView",["require","exports","module","underscore","utils/marked","backbone","utils/coggle-timeago","plugins/Backbone.childViews","models/NotificationSearch","views/NotificationCreationView","views/FactViews","utils/coggle-encodeji"],function(e,t,n){var i=e("underscore"),o=e("utils/marked"),r=e("backbone"),s=e("utils/coggle-timeago");e("plugins/Backbone.childViews");var l=e("models/NotificationSearch"),a=e("views/NotificationCreationView"),u=e("views/FactViews").RandomFactView,c=e("utils/coggle-encodeji"),d="<div data-l10n-id='messages-start' class='end'>You've reached the start!</div><div data-l10n-id='messages-upgrade' class='get-more'>Need more than 2 weeks history? Find out about upgrading to <a href='/plans?src=comment-history' target='_blank'>Awesome</a> to get the full history.</div>",h=r.View.extend({tagName:"div",className:"notifications-end",template:i.template(d),render:function(){return this.$el.html(this.template()),this.$el.attr("timestamp","1970-01-01T00:00:00.000Z"),getCoggleUser().isAwesome()?this.$el.find(".get-more").remove():this.$el.find(".end").remove(),this}}),p="<div class='user'><div class='icon' style='background-color:<%-user.colour%>; background-image:url(<%-user.picture%>);'/><span class='name' style='color:<%-user.colour?user.colour:'#999999'%>'><%-user.name?user.name:'Guest'%></span><span class='time'><%-new Date(timestamp).getHours()%>:<%-('0'+(new Date(timestamp).getMinutes())).slice(-2)%></span></div>",f="<div class='message' style='border-color:<%-user.colour%>' ><%=message%></div>",g="<div class='edit'></div>",m="<div class='tag'><%=message%></div>",v="<div class='date timeago'><time datetime='<%-timestamp%>'></time></div>",y=r.View.extend({tagName:"li",className:"notification",templates:{chat:i.template(f),tag:i.template(m),newChatter:i.template(p),dateChange:i.template(v)},events:{"click .edit":"edit"},initialize:function(e){i.bindAll(this,"render"),this.access=e.access,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove),this.$el.attr("data-id",this.model.id),this.$el.attr("timestamp",this.model.get("timestamp")),this.options=e},render:function(){this.$el.empty();var e=this.model.toJSON();if("widget"===this.model.get("type"))return this.$el.html(this.model.get("view").render().$el),this.model.get("view").delegateEvents(),this;e.user||(e.user=this.access.get(e.owner)?this.access.get(e.owner).toJSON():{}),this.options.previousModel&&(e.previous=this.options.previousModel.toJSON());var t=e.previous&&new Date(e.previous.timestamp).getDate()!=new Date(e.timestamp).getDate(),n=!e.previous||e.previous.owner!=e.owner;if(t){var i=this.templates.dateChange(e);this.$el.append(i),s.loadLanguages(function(){this.$el.find("time").timeago()}.bind(this))}"chat"===e.type&&(e.previous&&"chat"!==e.previous.type||t||n)&&this.$el.append(this.templates.newChatter(e));var r=this.templates[e.type];e.message&&(e.message=o(this.model.messageWithTags()));var l=$(r(e));return r&&this.$el.append(l),"chat"!==e.type||!e.owner||getCoggleUser().id!==e.owner._id&&getCoggleUser().id!==e.owner||l.append($(g)),"chat"===e.type&&c.replaceAndRender(this.$el.find(".message")[0]),this},edit:function(){var e=new a({model:this.model});this.addChildView(e),this.$el.find(".message").prepend(e.render().$el),e.delegateEvents(),e.growHeight()}}),b=r.View.extend({tagName:"ul",className:"notifications",events:{scroll:"onScroll"},initialize:function(e){i.bindAll(this,"addOne","addAll","render"),this.options=e,this.endView=new h,this.addChildView(this.endView),this.access=e.access,this.listenTo(this.collection,"add",this.addOne),this.listenTo(this.collection,"remove reset",this.addAll),this.listenTo(l.instance(),"change",this.addAll),this.listenTo(this.collection,"ended",function(){this.$el.addClass("ended")}.bind(this)),this.collection.more(),this.addAll(),this.scrollToBottom(),setTimeout(function(){this.collection.addWidget(new u)}.bind(this),9e5)},render:function(){return this.addAll(),this},onScroll:function(e){this.lastScrolled=new Date,this.$el.prop("scrollHeight")>this.$el.innerHeight()&&this.$el.prop("scrollTop")<100&&this.collection.more()},scrollToBottom:function(e){(e||!this.$el.is(":hover")||!this.lastScrolled||Date.now()-this.lastScrolled.getTime()>5e3)&&setTimeout(function(){this.$el.prop({scrollTop:this.$el.prop("scrollHeight")})}.bind(this),0)},addOne:function(e){var t=this.collection.indexOf(e),n=t>0?this.collection.at(t-1):void 0,o=this.collection.at(t+1),r=new y({model:e,previousModel:n,access:this.access});this.addChildView(r);var s=r.render().$el,l=this.$el.prop("scrollHeight"),a=this.$el.prop("scrollTop"),u=this.$el.children().toArray(),c=i.sortedIndex(u,s,function(e){return new Date($(e).attr("timestamp")).getTime()});0===c&&this.$el.prepend(s),$(u[c-1]).after(s);var d=function(){if(o){var t=this.$el.prop("scrollHeight")-l;this.$el.prop("scrollTop",t+a)}else this.scrollToBottom(e.get("owner")===getCoggleUser().id)}.bind(this);d(),r.$el.find("img").one("load",d)},addAll:function(){this.$el.empty(),this.$el.prepend(this.endView.render().$el),l.instance().apply(this.collection).map(this.addOne),this.scrollToBottom()}});n.exports.NotificationView=y,n.exports.NotificationListView=b}),define("views/NotificationsPanelView",["require","exports","module","underscore","backbone","jquery.cookie","plugins/Backbone.childViews","models/NotificationSearch","views/NotificationSearchView","views/NotificationCreationView","views/NotificationView","views/FactViews","utils/coggle-encodeji"],function(e,t,n){var i=e("underscore"),o=e("backbone");e("jquery.cookie"),e("plugins/Backbone.childViews");var r=e("models/NotificationSearch"),s=e("views/NotificationSearchView"),l=e("views/NotificationCreationView"),a=e("views/NotificationView").NotificationListView,u=(e("views/FactViews").RandomFactView,e("utils/coggle-encodeji"),"<div class='control'>    <div class='close'></div>    <div class='title' data-l10n-id='messages-title'>Messages</div></div>"),c=o.View.extend({tagName:"div",className:"notification-panel",events:{"click .close":"close",mousemove:"resetPending"},template:i.template(u),unseenMessages:0,disconnectionTimeout:!1,initialize:function(e){i.bindAll(this,"render","isClosed","close","layout","resetPending","setLastViewed"),this.options=e,this.access=e.access,this.notificationList=new a({collection:this.collection,access:this.access}),this.searchView=new s({model:r.instance()}),this.addChildView(this.notificationList),this.addChildView(this.searchView),this.listenTo(r.instance(),"change",function(){$("body").addClass("notifications-open")}.bind(this)),this.creationView=new l({collection:this.collection}),this.addChildView(this.creationView),this.listenTo(this.creationView,"resize",this.layout),this.listenTo(this.collection,"add",function(e){"widget"!=e.get("type")&&e.get("owner")!=getCoggleUser().id&&this.isClosed()&&this.lastViewed&&new Date(e.get("timestamp")).getTime()>new Date(this.lastViewed).getTime()&&(this.unseenMessages=this.unseenMessages+1,this.trigger("unseen",this.unseenMessages))}.bind(this))},remove:function(){o.View.prototype.remove.apply(this),$("body").removeClass("notifications-open")},open:function(){$("body").addClass("notifications-open"),this.$el.trigger("notifications-state-changed"),this.notificationList.scrollToBottom(!0)},isClosed:function(){return!$("body").hasClass("notifications-open")},close:function(e){return r.instance().setQuery(""),r.instance().setNodes([]),$("body").removeClass("notifications-open"),$.cookie("messages-state","0",{path:"/"}),this.$el.trigger("notifications-state-changed"),ga("send","event","Notifications","Close"),e&&e.stopPropagation(),!1},setLastViewed:function(e){this.lastViewed=e},resetPending:i.throttle(function(){this.unseenMessages=0,this.trigger("unseen",this.unseenMessages)},100),layout:function(){if(this.notificationList){
var e=parseInt(this.notificationList.$el.css("padding-bottom")),t=this.creationView.$el.outerHeight();this.notificationList.$el.css({bottom:t});var n=this.notificationList.$el.scrollTop(),i=n+(t-e);i>n&&this.notificationList.$el.scrollTop(i)}},render:function(){return this.$el.html(this.template()),this.$el.append(this.searchView.render().$el),this.$el.append(this.notificationList.render().$el),this.$el.append(this.creationView.render().$el),this}});n.exports=c}),define("views/DiagramToolbar",["require","exports","module","underscore","backbone","plugins/jquery.callout","plugins/jquery.clockify","jquery.cookie","jquery.l20n","BrowserDetect","views/AccessListView","views/AccessSliderView","views/ShareViews","views/ShareViews","views/DownloadDialogView","views/HistoryView","views/NotificationsPanelView"],function(e,t,n){var i=e("underscore"),o=e("backbone");e("plugins/jquery.callout"),e("plugins/jquery.clockify"),e("jquery.cookie"),e("jquery.l20n");var r=e("BrowserDetect"),s=e("views/AccessListView"),l=e("views/AccessSliderView"),a=e("views/ShareViews").DiagramShareView,u=e("views/ShareViews").ShareView,c=e("views/DownloadDialogView"),d=e("views/HistoryView"),h=e("views/NotificationsPanelView"),p="<ul class='actions large'><li class='action history'><div class='icon' data-l10n-id='diagram-toolbar-history' title='View and copy previous versions.'></div></li><li class='action chat'><div class='icon' data-l10n-id='diagram-toolbar-messages' title='Comments and chat.'></div></li></ul><ul class='actions small'><li class='action present'><div class='icon' data-l10n-id='diagram-toolbar-present' title='Present this Coggle.'></div></li><li class='action social'><div class='icon' data-l10n-id='diagram-toolbar-share' title='Share this Coggle.'></div></li><li class='action download'><div class='icon' data-l10n-id='diagram-toolbar-download' title='Download this Coggle.'></div></li><li class='action clone'><div class='icon' data-l10n-id='diagram-toolbar-copy' title='Create a copy of this Coggle.'></div></li></ul><div class='public-tag' data-l10n-id='diagram-toolbar-public' title='May appear in the Coggle Gallery'>Public Diagram</div>",f=o.View.extend({tagName:"div",className:"toolbar",template:i.template(p),events:{"click .member.sharing":"openSharing","click .action.history":"toggleHistory","click .action.chat":"openNotifications","click .action.present":"togglePresent","click .action.download":"openDownload","click .action.social":"openSocial","click .action.clone":"performClone","click .public-tag":"publicTagClicked"},initialize:function(e){i.bindAll(this,"render","renderMemberList","renderNotificationsView","error","openSharing","openDownload","openPermissions","updatePublicTag"),this.options=e,this.diagram=this.options.diagram,this.workspace=this.options.workspace,this.starcDiagram=this.options.workspace.getStarcView(),this.notifications=null,this.listenTo(this.diagram,"change",this.updatePublicTag),this.listenTo(this.starcDiagram,"node:editor:opened",function(){this.$el.addClass("toolbar-hidden")}.bind(this)),this.listenTo(this.starcDiagram,"node:editor:closed",function(){this.$el.removeClass("toolbar-hidden")}.bind(this)),$(document).on("keydown.toolbarContext",function(e){27==e.keyCode&&$("body").hasClass("presentation-mode")&&this.togglePresent()}.bind(this))},remove:function(){o.View.prototype.remove.apply(this),$(document).off("keydown.toolbarContext")},error:function(e){this.$el.trigger("notify-warning",e)},renderMemberList:function(){this.diagram.canWrite()&&!this.diagram.accessViaToken()&&(this.memberList||(this.memberList=new s({collections:[this.diagram.getAccess(function(){}),this.diagram.getInvites(function(){})]}),this.addChildView(this.memberList),this.memberList.$el.addClass("collapses"),this.listenTo(this.memberList,"selected",this.openPermissions),this.diagram.canWrite()&&this.memberList.addSharing()),this.$el.find(".actions.large").after(this.memberList.render().$el),this.memberList.delegateEvents())},renderNotificationsView:function(){if(this.workspace.isRealtime()&&!getCoggleUser().isGuest()&&(this.diagram.canWrite()||!this.diagram.accessViaToken())&&!this.notificationsView){this.notificationsView=new h({collection:this.diagram.getNotifications(),access:this.diagram.getAccess()}),this.addChildView(this.notificationsView),this.listenTo(this.notificationsView,"unseen",function(e){this.setPendingNotifications(e)}.bind(this));var e=function(){this.notificationsView.setLastViewed(this.diagram.get("last_viewed"))}.bind(this);this.listenTo(this.diagram,"change",e),this.listenTo(this.diagram,"sync",e),e(),(this.workspace.readOnly()||getCoggleUser().isGuest())&&this.notificationsView.$el.addClass("readonly"),this.workspace.$el.find(".diagram-container").append(this.notificationsView.render().$el)}},getNotificationsView:function(){return this.notificationsView},render:function(){this.$el.html(this.template()),this.$el.find(".action.history").clockify(),this.updatePublicTag(),this.renderMemberList(),this.renderNotificationsView();var e=getCoggleUser().getActiveOrg();return(!this.diagram.canWrite()||this.diagram.accessViaToken()||e.id&&!e.allowsSharing())&&this.$el.find(".action.social").remove(),(this.diagram.canWrite()||!this.diagram.canClone()||e.id&&!e.canRead())&&this.$el.find(".action.clone").remove(),(getCoggleUser().isGuest()||this.diagram.accessViaToken())&&this.$el.find(".action.chat").remove(),this.diagram.canWrite()||this.$el.find(".action.history").remove(),this.diagram.canClone()||this.$el.find(".action.download").remove(),"1"==$.cookie("messages-state")&&(getCoggleUser().isGuest()||$("body").hasClass("touch")||this.openNotifications()),this},publicTagClicked:function(){this.openSocial(),getCoggleUser().getActions().perform("pitch:privatediagrams")},updatePublicTag:function(){this.diagram.get("public")&&!this.diagram.get("deletedForEveryone")?this.$el.find(".public-tag").show():this.$el.find(".public-tag").hide()},openSharing:function(){this.shareView||(this.shareView=new u({model:this.diagram}).render(),this.addChildView(this.shareView),this.listenTo(this.shareView,"error",this.error)),getCoggleUser().getActions().perform("diagram:invites:open"),this.sharingCallout||(this.sharingCallout=this.$el.find(".member.sharing").callout(this.shareView.$el,{my:"right top",at:"center+15 bottom"})),this.sharingCallout.open(),this.shareView.delegateEvents(),"Explorer"===r.browser&&10==r.version||this.shareView.render().$el.find("input").focus(),this.sharingCallout.reposition(),window.getCoggleUser().getActions(function(e,t){!e&&t&&this.sharingCallout.find(".share-view").contextualHelp({actions:t,content:$("<div data-l10n-id='help-toolbar-invitemulti'/>").html("To save time, you can invite multiple people at once: type (or paste) email addresses separated by spaces, commas<b>,</b> or semicolons<b>;</b>"),position:{my:"center center",at:"left+20 bottom+6"},title:$.l10n.get("help-toolbar-invitemulti-title","Invite Multiple People"),after:"invited multiple to diagram",action:"help:invitemultiple",on_complete:function(){this.sharingCallout.find("input").focus()}.bind(this)})}.bind(this))},openSocial:function(){this.diagram.canWrite()&&(this.socialView||(this.socialView=new a({model:this.diagram}).render(),this.addChildView(this.socialView)),ga("send","event","Social","Open"),this.socialCallout||(this.socialCallout=this.$el.find(".action.social").callout(this.socialView.$el,{my:"right top",at:"center bottom"})),this.socialCallout.open(),this.socialView.delegateEvents())},toggleHistory:function(){return $("body").hasClass("presentation-mode")?void $(window).trigger("notify-info",["Close presentation mode first!"]):(this.historyCallout||(this.historyView=new d({model:this.diagram,diagram:this.starcDiagram}),this.historyView.$el.addClass("right-align"),this.historyCallout=this.$el.find(".history").callout(this.historyView.$el,{closeOn:!1,my:"center top",at:"center bottom"}),this.addChildView(this.historyView)),void($("body").hasClass("history-mode")?($("body").removeClass("history-mode"),this.historyCallout.close(),this.historyView.reset(function(){this.starcDiagram.stopHistoryMode(),this.historyCallout.close(),$(window).trigger("clockify-timetravel-end")}.bind(this))):($("body").addClass("history-mode"),this.$el.find(".action.history").addClass("opening"),this.historyView.render(function(){this.$el.find(".action.history").removeClass("opening"),this.historyCallout.open(),this.historyView.current&&this.historyView.slider.slideTo(this.historyView.current,0),this.starcDiagram.startHistoryMode(),this.historyView.delegateEvents()}.bind(this)),ga("send","event","History","View"),$(window).trigger("clockify-timetravel"),getCoggleUser().getActions().perform("diagram:history:open"))))},openNotifications:function(){this.getNotificationsView()&&($.cookie("messages-state","1",{path:"/"}),this.getNotificationsView().open())},setPendingNotifications:function(e){e?(this.$el.find(".action.chat").addClass("pending"),this.$el.find(".action.chat").text(e)):(this.$el.find(".action.chat").removeClass("pending"),this.$el.find(".action.chat").empty())},togglePresent:function(){$("body").hasClass("presentation-mode")?($("body").removeClass("presentation-mode"),this.starcDiagram.stopPresentationMode(),this.trigger("presenting",!1)):($("body").addClass("presentation-mode"),this.starcDiagram.startPresentationMode(),this.trigger("presenting",!0),ga("send","event","PresentationMode","Open"))},openPermissions:function(e,t){if(this.diagram.get("my_access").indexOf("write")!=-1){var n=new l({model:e,removable:!0}).render();n.$el.find(".discrete-slider").addClass("right-align"),n.$el.find('li[data="admin"]').remove(),t.$el.callout(n.$el.addClass("right-align"),{my:"right top",at:"center bottom",onClose:function(){n.remove()}}).open()}},openDownload:function(e){this.downloadView||(this.downloadView=new c({starcDiagram:this.starcDiagram}).render(),this.addChildView(this.downloadView)),this.$el.find(".download").callout(this.downloadView.$el,{my:"right top",at:"center bottom"}).open(),this.downloadView.refresh(),this.downloadView.delegateEvents()},performClone:function(){var e="/clone/"+window.location.pathname.replace(/\/t\/[^\/]*/,"").replace(/^\/diagram\//,"");top.location!=location?top.location=e:o.history.navigate(e,!0)}});n.exports=f}),define("views/DiagramNodeMenu",["require","exports","module","underscore","backbone","controllers/MarkdownTextareaController","starc/starc.copypaste","views/ColourMenu","views/NodeEditView","views/PitchView","utils/trackModifiers","env"],function(e,t,n){function i(t){return e("env").cdn.url+"/img/"+t}var o=e("underscore"),r=e("backbone"),s=e("controllers/MarkdownTextareaController"),l=e("starc/starc.copypaste").copy,a=e("views/ColourMenu"),u=e("views/NodeEditView"),c=(e("views/PitchView"),e("utils/trackModifiers")),d=function(e){return'<img src="'+i(e)+'"/>'},h=" <div class='diagram-node-menu-button menu-bold' title='Bold (Ctrl-B)'>"+d("bold.png")+"</div><div class='diagram-node-menu-button menu-italics' title='Italics (Ctrl-I)'>"+d("italics.png")+"</div><div class='diagram-node-menu-button menu-link' title='Link to a website'>"+d("linkicon.png")+"</div><div class='diagram-node-menu-button menu-image' title='Add Image'>"+d("picture.png")+"</div><div class='diagram-node-menu-button menu-icon' title='Add Icon (:)'>"+d("zap.png")+"</div><div class='diagram-node-menu-button menu-colour' title='Pick Colour'>"+d("sage/paint.png")+"</div><div class='diagram-node-menu-spacer'></div><div class='diagram-node-menu-button menu-add-child' title='Create a New Child (Tab)'>+Child</div><div class='diagram-node-menu-button menu-add-sibling<%=root?' disabled':''%>' title='Create a new sibling (Shift+Return)'>+Sibling</div><div class='diagram-node-menu-button menu-arrange' title='Arrange Children'>"+d("rearrange-w.png")+"</div><div class='diagram-node-menu-button menu-copy' title='Copy Node'>"+d("dup-w.png")+"</div><div class='diagram-node-menu-button menu-remove<%=title?' disabled':''%>' title='Remove Node (Bksp)'>"+d("cross-w.png")+"</div><div class='diagram-node-menu-button menu-move-to-diagram' title='Move to a New Diagram'>"+d("cogglify-w.png")+"</div>",p=r.View.extend({tagName:"div",className:"diagram-node-menu",template:o.template(h),events:{"click .menu-bold":"bold","click .menu-italics":"italics","click .menu-link":"link","click .menu-image":"image","click .menu-icon":"icon","click .menu-add-child":"addChild","click .menu-add-sibling":"addSibling","click .menu-remove":"removeNode","click .menu-arrange":"arrange","click .menu-colour":"pickColour","click .menu-copy":"copy","click .menu-move-to-diagram":"moveToDiagram"},initialize:function(e){o.bindAll(this,"render","remove"),this.options=e,this.diagram=this.options.diagram,this.hide(),this.listenTo(this.diagram,"node:editor:opened",function(e){this.configureFor(e)}.bind(this)),this.listenTo(this.diagram,"node:editor:closed",function(e){this.hide()}.bind(this))},render:function(){var e={root:!!this.node&&this.node.isRoot(),title:!!this.node&&this.node.isTitle()};return this.$el.html(this.template(e)),this},configureFor:function(e){this.node=e,this.$el.css({"background-color":this.node.colour()}),this.render(),this.$el.removeClass("menu-hidden")},hide:function(){this.$el.addClass("menu-hidden")},bold:function(){u.activeEdit()&&s.bold(u.activeEdit().$el.find("textarea"))},italics:function(){u.activeEdit()&&s.italics(u.activeEdit().$el.find("textarea"))},link:function(){u.activeEdit()&&s.link(u.activeEdit().$el.find("textarea"))},image:function(){u.activeEdit()&&u.activeEdit().$el.find("input").trigger("click")},icon:function(){u.activeEdit()&&s.icon(u.activeEdit().$el.find("textarea"))},addChild:function(){this.diagram.getNodeForId(this.node.id).getNavigationController().activateEmptyChildOrCreateNew()},addSibling:function(){this.diagram.getNodeForId(this.node.id).getNavigationController().activateEmptySiblingOrCreateNew()},removeNode:function(){this.diagram.getNodeForId(this.node.id).deleteNode()},arrange:function(){this.diagram.getNodeForId(this.node.id).arrange()},pickColour:function(e){var t=this.node,n=(this.diagram,this.diagram.documentCoordsFromEvent(e));n.y-=80;a.instance().show($("body"),n.x,n.y,function(e,n){!e&&n&&("undefined"!=typeof n.colour&&nodeView.setColour(n.colour,!t.isRoot()&&!c.shift_key_pressed),"undefined"!=typeof n.weight&&nodeView.setLineWeight(n.weight,!c.shift_key_pressed),"undefined"!=typeof n.style&&nodeView.setLineStyle(n.style))}).extended(getCoggleUser().isAwesome())},copy:function(){l({node:this.node})},moveToDiagram:function(){u.activeEdit()&&u.activeEdit().commit(),this.diagram.cogglify(this.diagram.getNodeForId(this.node.id),!0)}});n.exports=p}),define("starc/starc.print",["require","exports","module","underscore","plugins/jquery.loadmathjax","jquery.l20n","plugins/jquery.queryString"],function(e,t,n){var i=e("underscore");e("plugins/jquery.loadmathjax"),e("jquery.l20n"),e("plugins/jquery.queryString"),n.exports=function(e){function t(){console.log("Clean up page for printing..."),$("link[media=print]").attr("media",""),$.queryString().printtype&&["pdf","png"].indexOf($.queryString().printtype)!==-1&&$("body").addClass("printtype-"+$.queryString().printtype),$("iframe").remove(),console.log("iframes removed"),e.diagram.setScale(1),i.each(i.values(e.diagram.allNodes()),function(e){e.updateCrosslinks()}),e.diagram.setViewBoxToContent(30),setTimeout(window.print,5)}$.l10n(function(){window.setTimeout(function(){window.onMathJaxComplete(t)},0)})}}),define("controllers/DeltaGenerator",["require","exports","module","underscore"],function(e,t,n){function i(e,t){o.bindAll(this,"generatePatch","generateNodeAdded","generateNodeRemoved","resume","pause"),this.emitDelta=t,this.nodes=e,e.on("node_added",this.generateNodeAdded,this),e.on("delta",this.generatePatch,this),e.on("node_deleted",this.generateNodeRemoved,this),this.paused=!1}var o=e("underscore");i.prototype.destroy=function(){this.nodes.off(void 0,void 0,this),delete this.emitDelta},i.prototype.pause=function(){this.paused=!0},i.prototype.resume=function(){this.paused=!1},i.prototype.generatePatch=function(e,t,n){if(!this.paused){if(!e.collection)return console.error("updated node not in collection!");console.log("SAVING update",t,n);var i={type:"patch",node_id:e.id,data:t||{}};e.isTitle()&&(i.root=!0),n&&(i.old_data=n),this.emitDelta(i)}},i.prototype.generateNodeAdded=function(e){if(!this.paused){console.log("SAVING node added",arguments);var t={type:"node added",node_id:e.id,data:{parent_id:e.isRoot()?"root parent":e.parent().id,text:e.get("text"),join:e.get("join"),colour:e.colour(),pos:e.pos(),width:e.get("width")||void 0,scale:e.get("scale")||1,line_weight:e.get("line_weight")||void 0}};this.emitDelta(t)}},i.prototype.generateNodeRemoved=function(e){if(!this.paused){console.log("SAVING node removed",arguments);var t={type:"node removed",node_id:e.id};this.emitDelta(t),e.off(void 0,void 0,this)}},n.exports=i}),function(e){"function"==typeof define&&define.amd?define("plugins/jquery.localQueue",["underscore"],e):e(_)}(function(e){function t(t){function n(){if(null===p){var e="testforlocalstorage";try{localStorage.setItem(e,e),localStorage.removeItem(e),p=!0}catch(e){p=!1}}return p}function i(){null===c&&(n()&&(c=JSON.parse(localStorage.getItem(a))),c||(c=[]),c.length?(d=JSON.parse(localStorage.getItem(u))||0,d+=1):d=0)}function o(t){var n=[];return e.each(t,function(t){var i={};e.each(e.filter(e.keys(t),function(e){return"_"!=e[0]}),function(e){i[e]=t[e]}),n.push(i)}),n}function r(){n()&&(localStorage.setItem(a,JSON.stringify(o(c))),h||localStorage.setItem(u,JSON.stringify(d)),h=!0)}function s(){if(n()){if(localStorage.getItem(a)!==JSON.stringify(o(c)))throw console.log("stored:",localStorage.getItem(a)),console.log("memory:",JSON.stringify(c)),"local storage round-trip failed!"}else console.log("local storage not saved: not supported!")}var l=location.protocol+"//"+location.host+location.pathname.replace(/\/t\/[^\/]*/,""),a=("localqueue.v1.["+l+"]."+t).toLowerCase(),u=a+".load_count",c=null,d=null,h=!1,p=null;return{push:function(e){i(),c.push(JSON.parse(JSON.stringify(e))),r(),s()},pop:function(){i();var e=c.shift();return r(),e},peek:function(){return i(),c.length?c[0]:null},remove:function(e){c.splice(e,1),r()},any:function(t){return i(),e.some(c,t)},filter:function(t){c=e.filter(c,t),r()},length:function(){return i(),c.length},clear:function(){c=[],r()},getArray:function(){return i(),c},loadCount:function(){return i(),r(),d},supported:function(){return n()}}}var n=window;n.getLocalQueue=t}),function(e){"use strict";function t(e,t,n){var i=E[t];return i||(i=e(t,n),i.feature&&++C[t>>8&255]>d&&(E[t]=i)),i}function n(e,t,n){var i=65280&t,o=_.udata[i]||{},r=o[t];return r?new _(t,r):new _(t,c)}function i(e,t,n){return n?e(t,n):new _(t,null)}function o(e,t,n){var i;if(t<p||p+m<=t&&t<h||h+w<t)return e(t,n);if(p<=t&&t<p+m){var o={},r=(t-p)*v;for(i=0;i<v;++i)o[f+i]=h+y*(i+r);return new _(t,[,,o])}var s=t-h,l=s%y,a=[];if(0!==l)a[0]=[h+s-l,g+l];else for(a[0]=[p+Math.floor(s/b),f+Math.floor(s%b/y)],a[2]={},i=1;i<y;++i)a[2][g+i]=t+i;return new _(t,a)}function r(e,t,n){return t<60||13311<t&&t<42607?new _(t,c):e(t,n)}function s(e){return k("NFD",e)}function l(e){return k("NFKD",e)}function a(e){return k("NFC",e)}function u(e){return k("NFKC",e)}for(var c=[null,0,{}],d=10,h=44032,p=4352,f=4449,g=4519,m=19,v=21,y=28,b=v*y,w=m*b,_=function(e,t){this.codepoint=e,this.feature=t},E={},C=[],F=0;F<=255;++F)C[F]=0;var A=[r,t,i,o,n];_.fromCharCode=A.reduceRight(function(e,t){return function(n,i){return t(e,n,i)}},null),_.isHighSurrogate=function(e){return e>=55296&&e<=56319},_.isLowSurrogate=function(e){return e>=56320&&e<=57343},_.prototype.prepFeature=function(){this.feature||(this.feature=_.fromCharCode(this.codepoint,!0).feature)},_.prototype.toString=function(){if(this.codepoint<65536)return String.fromCharCode(this.codepoint);var e=this.codepoint-65536;return String.fromCharCode(Math.floor(e/1024)+55296,e%1024+56320)},_.prototype.getDecomp=function(){return this.prepFeature(),this.feature[0]||null},_.prototype.isCompatibility=function(){return this.prepFeature(),!!this.feature[1]&&256&this.feature[1]},_.prototype.isExclude=function(){return this.prepFeature(),!!this.feature[1]&&512&this.feature[1]},_.prototype.getCanonicalClass=function(){return this.prepFeature(),this.feature[1]?255&this.feature[1]:0},_.prototype.getComposite=function(e){if(this.prepFeature(),!this.feature[2])return null;var t=this.feature[2][e.codepoint];return t?_.fromCharCode(t):null};var x=function(e){this.str=e,this.cursor=0};x.prototype.next=function(){if(this.str&&this.cursor<this.str.length){var e,t=this.str.charCodeAt(this.cursor++);return _.isHighSurrogate(t)&&this.cursor<this.str.length&&_.isLowSurrogate(e=this.str.charCodeAt(this.cursor))&&(t=1024*(t-55296)+(e-56320)+65536,++this.cursor),_.fromCharCode(t)}return this.str=null,null};var S=function(e,t){this.it=e,this.canonical=t,this.resBuf=[]};S.prototype.next=function(){function e(t,n){var i=n.getDecomp();if(!i||t&&n.isCompatibility())return[n];for(var o=[],r=0;r<i.length;++r){var s=e(t,_.fromCharCode(i[r]));o=o.concat(s)}return o}if(0===this.resBuf.length){var t=this.it.next();if(!t)return null;this.resBuf=e(this.canonical,t)}return this.resBuf.shift()};var T=function(e){this.it=e,this.resBuf=[]};T.prototype.next=function(){var e;if(0===this.resBuf.length)do{var t=this.it.next();if(!t)break;e=t.getCanonicalClass();var n=this.resBuf.length;if(0!==e)for(;n>0;--n){var i=this.resBuf[n-1],o=i.getCanonicalClass();if(o<=e)break}this.resBuf.splice(n,0,t)}while(0!==e);return this.resBuf.shift()};var O=function(e){this.it=e,this.procBuf=[],this.resBuf=[],this.lastClass=null};O.prototype.next=function(){for(;0===this.resBuf.length;){var e=this.it.next();if(!e){this.resBuf=this.procBuf,this.procBuf=[];break}if(0===this.procBuf.length)this.lastClass=e.getCanonicalClass(),this.procBuf.push(e);else{var t=this.procBuf[0],n=t.getComposite(e),i=e.getCanonicalClass();n&&(this.lastClass<i||0===this.lastClass)?this.procBuf[0]=n:(0===i&&(this.resBuf=this.procBuf,this.procBuf=[]),this.lastClass=i,this.procBuf.push(e))}}return this.resBuf.shift()};var N=function(e,t){switch(e){case"NFD":return new T(new S(new x(t),!0));case"NFKD":return new T(new S(new x(t),!1));case"NFC":return new O(new T(new S(new x(t),!0)));case"NFKC":return new O(new T(new S(new x(t),!1)))}throw e+" is invalid"},k=function(e,t){for(var n,i=N(e,t),o="";n=i.next();)o+=n.toString();return o};_.udata={0:{60:[,,{824:8814}],61:[,,{824:8800}],62:[,,{824:8815}],65:[,,{768:192,769:193,770:194,771:195,772:256,774:258,775:550,776:196,777:7842,778:197,780:461,783:512,785:514,803:7840,805:7680,808:260}],66:[,,{775:7682,803:7684,817:7686}],67:[,,{769:262,770:264,775:266,780:268,807:199}],68:[,,{775:7690,780:270,803:7692,807:7696,813:7698,817:7694}],69:[,,{768:200,769:201,770:202,771:7868,772:274,774:276,775:278,776:203,777:7866,780:282,783:516,785:518,803:7864,807:552,808:280,813:7704,816:7706}],70:[,,{775:7710}],71:[,,{769:500,770:284,772:7712,774:286,775:288,780:486,807:290}],72:[,,{770:292,775:7714,776:7718,780:542,803:7716,807:7720,814:7722}],73:[,,{768:204,769:205,770:206,771:296,772:298,774:300,775:304,776:207,777:7880,780:463,783:520,785:522,803:7882,808:302,816:7724}],74:[,,{770:308}],75:[,,{769:7728,780:488,803:7730,807:310,817:7732}],76:[,,{769:313,780:317,803:7734,807:315,813:7740,817:7738}],77:[,,{769:7742,775:7744,803:7746}],78:[,,{768:504,769:323,771:209,775:7748,780:327,803:7750,807:325,813:7754,817:7752}],79:[,,{768:210,769:211,770:212,771:213,772:332,774:334,775:558,776:214,777:7886,779:336,780:465,783:524,785:526,795:416,803:7884,808:490}],80:[,,{769:7764,775:7766}],82:[,,{769:340,775:7768,780:344,783:528,785:530,803:7770,807:342,817:7774}],83:[,,{769:346,770:348,775:7776,780:352,803:7778,806:536,807:350}],84:[,,{775:7786,780:356,803:7788,806:538,807:354,813:7792,817:7790}],85:[,,{768:217,769:218,770:219,771:360,772:362,774:364,776:220,777:7910,778:366,779:368,780:467,783:532,785:534,795:431,803:7908,804:7794,808:370,813:7798,816:7796}],86:[,,{771:7804,803:7806}],87:[,,{768:7808,769:7810,770:372,775:7814,776:7812,803:7816}],88:[,,{775:7818,776:7820}],89:[,,{768:7922,769:221,770:374,771:7928,772:562,775:7822,776:376,777:7926,803:7924}],90:[,,{769:377,770:7824,775:379,780:381,803:7826,817:7828}],97:[,,{768:224,769:225,770:226,771:227,772:257,774:259,775:551,776:228,777:7843,778:229,780:462,783:513,785:515,803:7841,805:7681,808:261}],98:[,,{775:7683,803:7685,817:7687}],99:[,,{769:263,770:265,775:267,780:269,807:231}],100:[,,{775:7691,780:271,803:7693,807:7697,813:7699,817:7695}],101:[,,{768:232,769:233,770:234,771:7869,772:275,774:277,775:279,776:235,777:7867,780:283,783:517,785:519,803:7865,807:553,808:281,813:7705,816:7707}],102:[,,{775:7711}],103:[,,{769:501,770:285,772:7713,774:287,775:289,780:487,807:291}],104:[,,{770:293,775:7715,776:7719,780:543,803:7717,807:7721,814:7723,817:7830}],105:[,,{768:236,769:237,770:238,771:297,772:299,774:301,776:239,777:7881,780:464,783:521,785:523,803:7883,808:303,816:7725}],106:[,,{770:309,780:496}],107:[,,{769:7729,780:489,803:7731,807:311,817:7733}],108:[,,{769:314,780:318,803:7735,807:316,813:7741,817:7739}],109:[,,{769:7743,775:7745,803:7747}],110:[,,{768:505,769:324,771:241,775:7749,780:328,803:7751,807:326,813:7755,817:7753}],111:[,,{768:242,769:243,770:244,771:245,772:333,774:335,775:559,776:246,777:7887,779:337,780:466,783:525,785:527,795:417,803:7885,808:491}],112:[,,{769:7765,775:7767}],114:[,,{769:341,775:7769,780:345,783:529,785:531,803:7771,807:343,817:7775}],115:[,,{769:347,770:349,775:7777,780:353,803:7779,806:537,807:351}],116:[,,{775:7787,776:7831,780:357,803:7789,806:539,807:355,813:7793,817:7791}],117:[,,{768:249,769:250,770:251,771:361,772:363,774:365,776:252,777:7911,778:367,779:369,780:468,783:533,785:535,795:432,803:7909,804:7795,808:371,813:7799,816:7797}],118:[,,{771:7805,803:7807}],119:[,,{768:7809,769:7811,770:373,775:7815,776:7813,778:7832,803:7817}],120:[,,{775:7819,776:7821}],121:[,,{768:7923,769:253,770:375,771:7929,772:563,775:7823,776:255,777:7927,778:7833,803:7925}],122:[,,{769:378,770:7825,775:380,780:382,803:7827,817:7829}],160:[[32],256],168:[[32,776],256,{768:8173,769:901,834:8129}],170:[[97],256],175:[[32,772],256],178:[[50],256],179:[[51],256],180:[[32,769],256],181:[[956],256],184:[[32,807],256],185:[[49],256],186:[[111],256],188:[[49,8260,52],256],189:[[49,8260,50],256],190:[[51,8260,52],256],192:[[65,768]],193:[[65,769]],194:[[65,770],,{768:7846,769:7844,771:7850,777:7848}],195:[[65,771]],196:[[65,776],,{772:478}],197:[[65,778],,{769:506}],198:[,,{769:508,772:482}],199:[[67,807],,{769:7688}],200:[[69,768]],201:[[69,769]],202:[[69,770],,{768:7872,769:7870,771:7876,777:7874}],203:[[69,776]],204:[[73,768]],205:[[73,769]],206:[[73,770]],207:[[73,776],,{769:7726}],209:[[78,771]],210:[[79,768]],211:[[79,769]],212:[[79,770],,{768:7890,769:7888,771:7894,777:7892}],213:[[79,771],,{769:7756,772:556,776:7758}],214:[[79,776],,{772:554}],216:[,,{769:510}],217:[[85,768]],218:[[85,769]],219:[[85,770]],220:[[85,776],,{768:475,769:471,772:469,780:473}],221:[[89,769]],224:[[97,768]],225:[[97,769]],226:[[97,770],,{768:7847,769:7845,771:7851,777:7849}],227:[[97,771]],228:[[97,776],,{772:479}],229:[[97,778],,{769:507}],230:[,,{769:509,772:483}],231:[[99,807],,{769:7689}],232:[[101,768]],233:[[101,769]],234:[[101,770],,{768:7873,769:7871,771:7877,777:7875}],235:[[101,776]],236:[[105,768]],237:[[105,769]],238:[[105,770]],239:[[105,776],,{769:7727}],241:[[110,771]],242:[[111,768]],243:[[111,769]],244:[[111,770],,{768:7891,769:7889,771:7895,777:7893}],245:[[111,771],,{769:7757,772:557,776:7759}],246:[[111,776],,{772:555}],248:[,,{769:511}],249:[[117,768]],250:[[117,769]],251:[[117,770]],252:[[117,776],,{768:476,769:472,772:470,780:474}],253:[[121,769]],255:[[121,776]]},256:{256:[[65,772]],257:[[97,772]],258:[[65,774],,{768:7856,769:7854,771:7860,777:7858}],259:[[97,774],,{768:7857,769:7855,771:7861,777:7859}],260:[[65,808]],261:[[97,808]],262:[[67,769]],263:[[99,769]],264:[[67,770]],265:[[99,770]],266:[[67,775]],267:[[99,775]],268:[[67,780]],269:[[99,780]],270:[[68,780]],271:[[100,780]],274:[[69,772],,{768:7700,769:7702}],275:[[101,772],,{768:7701,769:7703}],276:[[69,774]],277:[[101,774]],278:[[69,775]],279:[[101,775]],280:[[69,808]],281:[[101,808]],282:[[69,780]],283:[[101,780]],284:[[71,770]],285:[[103,770]],286:[[71,774]],287:[[103,774]],288:[[71,775]],289:[[103,775]],290:[[71,807]],291:[[103,807]],292:[[72,770]],293:[[104,770]],296:[[73,771]],297:[[105,771]],298:[[73,772]],299:[[105,772]],300:[[73,774]],301:[[105,774]],302:[[73,808]],303:[[105,808]],304:[[73,775]],306:[[73,74],256],307:[[105,106],256],308:[[74,770]],309:[[106,770]],310:[[75,807]],311:[[107,807]],313:[[76,769]],314:[[108,769]],315:[[76,807]],316:[[108,807]],317:[[76,780]],318:[[108,780]],319:[[76,183],256],320:[[108,183],256],323:[[78,769]],324:[[110,769]],325:[[78,807]],326:[[110,807]],327:[[78,780]],328:[[110,780]],329:[[700,110],256],332:[[79,772],,{768:7760,769:7762}],333:[[111,772],,{768:7761,769:7763}],334:[[79,774]],335:[[111,774]],336:[[79,779]],337:[[111,779]],340:[[82,769]],341:[[114,769]],342:[[82,807]],343:[[114,807]],344:[[82,780]],345:[[114,780]],346:[[83,769],,{775:7780}],347:[[115,769],,{775:7781}],348:[[83,770]],349:[[115,770]],350:[[83,807]],351:[[115,807]],352:[[83,780],,{775:7782}],353:[[115,780],,{775:7783}],354:[[84,807]],355:[[116,807]],356:[[84,780]],357:[[116,780]],360:[[85,771],,{769:7800}],361:[[117,771],,{769:7801}],362:[[85,772],,{776:7802}],363:[[117,772],,{776:7803}],364:[[85,774]],365:[[117,774]],366:[[85,778]],367:[[117,778]],368:[[85,779]],369:[[117,779]],370:[[85,808]],371:[[117,808]],372:[[87,770]],373:[[119,770]],374:[[89,770]],375:[[121,770]],376:[[89,776]],377:[[90,769]],378:[[122,769]],379:[[90,775]],380:[[122,775]],381:[[90,780]],382:[[122,780]],383:[[115],256,{775:7835}],416:[[79,795],,{768:7900,769:7898,771:7904,777:7902,803:7906}],417:[[111,795],,{768:7901,769:7899,771:7905,777:7903,803:7907}],431:[[85,795],,{768:7914,769:7912,771:7918,777:7916,803:7920}],432:[[117,795],,{768:7915,769:7913,771:7919,777:7917,803:7921}],439:[,,{780:494}],452:[[68,381],256],453:[[68,382],256],454:[[100,382],256],455:[[76,74],256],456:[[76,106],256],457:[[108,106],256],458:[[78,74],256],459:[[78,106],256],460:[[110,106],256],461:[[65,780]],462:[[97,780]],463:[[73,780]],464:[[105,780]],465:[[79,780]],466:[[111,780]],467:[[85,780]],468:[[117,780]],469:[[220,772]],470:[[252,772]],471:[[220,769]],472:[[252,769]],473:[[220,780]],474:[[252,780]],475:[[220,768]],476:[[252,768]],478:[[196,772]],479:[[228,772]],480:[[550,772]],481:[[551,772]],482:[[198,772]],483:[[230,772]],486:[[71,780]],487:[[103,780]],488:[[75,780]],489:[[107,780]],490:[[79,808],,{772:492}],491:[[111,808],,{772:493}],492:[[490,772]],493:[[491,772]],494:[[439,780]],495:[[658,780]],496:[[106,780]],497:[[68,90],256],498:[[68,122],256],499:[[100,122],256],500:[[71,769]],501:[[103,769]],504:[[78,768]],505:[[110,768]],506:[[197,769]],507:[[229,769]],508:[[198,769]],509:[[230,769]],510:[[216,769]],511:[[248,769]],66045:[,220]},512:{512:[[65,783]],513:[[97,783]],514:[[65,785]],515:[[97,785]],516:[[69,783]],517:[[101,783]],518:[[69,785]],519:[[101,785]],520:[[73,783]],521:[[105,783]],522:[[73,785]],523:[[105,785]],524:[[79,783]],525:[[111,783]],526:[[79,785]],527:[[111,785]],528:[[82,783]],529:[[114,783]],530:[[82,785]],531:[[114,785]],532:[[85,783]],533:[[117,783]],534:[[85,785]],535:[[117,785]],536:[[83,806]],537:[[115,806]],538:[[84,806]],539:[[116,806]],542:[[72,780]],543:[[104,780]],550:[[65,775],,{772:480}],551:[[97,775],,{772:481}],552:[[69,807],,{774:7708}],553:[[101,807],,{774:7709}],554:[[214,772]],555:[[246,772]],556:[[213,772]],557:[[245,772]],558:[[79,775],,{772:560}],559:[[111,775],,{772:561}],560:[[558,772]],561:[[559,772]],562:[[89,772]],563:[[121,772]],658:[,,{780:495}],688:[[104],256],689:[[614],256],690:[[106],256],691:[[114],256],692:[[633],256],693:[[635],256],694:[[641],256],695:[[119],256],
696:[[121],256],728:[[32,774],256],729:[[32,775],256],730:[[32,778],256],731:[[32,808],256],732:[[32,771],256],733:[[32,779],256],736:[[611],256],737:[[108],256],738:[[115],256],739:[[120],256],740:[[661],256],66272:[,220]},768:{768:[,230],769:[,230],770:[,230],771:[,230],772:[,230],773:[,230],774:[,230],775:[,230],776:[,230,{769:836}],777:[,230],778:[,230],779:[,230],780:[,230],781:[,230],782:[,230],783:[,230],784:[,230],785:[,230],786:[,230],787:[,230],788:[,230],789:[,232],790:[,220],791:[,220],792:[,220],793:[,220],794:[,232],795:[,216],796:[,220],797:[,220],798:[,220],799:[,220],800:[,220],801:[,202],802:[,202],803:[,220],804:[,220],805:[,220],806:[,220],807:[,202],808:[,202],809:[,220],810:[,220],811:[,220],812:[,220],813:[,220],814:[,220],815:[,220],816:[,220],817:[,220],818:[,220],819:[,220],820:[,1],821:[,1],822:[,1],823:[,1],824:[,1],825:[,220],826:[,220],827:[,220],828:[,220],829:[,230],830:[,230],831:[,230],832:[[768],230],833:[[769],230],834:[,230],835:[[787],230],836:[[776,769],230],837:[,240],838:[,230],839:[,220],840:[,220],841:[,220],842:[,230],843:[,230],844:[,230],845:[,220],846:[,220],848:[,230],849:[,230],850:[,230],851:[,220],852:[,220],853:[,220],854:[,220],855:[,230],856:[,232],857:[,220],858:[,220],859:[,230],860:[,233],861:[,234],862:[,234],863:[,233],864:[,234],865:[,234],866:[,233],867:[,230],868:[,230],869:[,230],870:[,230],871:[,230],872:[,230],873:[,230],874:[,230],875:[,230],876:[,230],877:[,230],878:[,230],879:[,230],884:[[697]],890:[[32,837],256],894:[[59]],900:[[32,769],256],901:[[168,769]],902:[[913,769]],903:[[183]],904:[[917,769]],905:[[919,769]],906:[[921,769]],908:[[927,769]],910:[[933,769]],911:[[937,769]],912:[[970,769]],913:[,,{768:8122,769:902,772:8121,774:8120,787:7944,788:7945,837:8124}],917:[,,{768:8136,769:904,787:7960,788:7961}],919:[,,{768:8138,769:905,787:7976,788:7977,837:8140}],921:[,,{768:8154,769:906,772:8153,774:8152,776:938,787:7992,788:7993}],927:[,,{768:8184,769:908,787:8008,788:8009}],929:[,,{788:8172}],933:[,,{768:8170,769:910,772:8169,774:8168,776:939,788:8025}],937:[,,{768:8186,769:911,787:8040,788:8041,837:8188}],938:[[921,776]],939:[[933,776]],940:[[945,769],,{837:8116}],941:[[949,769]],942:[[951,769],,{837:8132}],943:[[953,769]],944:[[971,769]],945:[,,{768:8048,769:940,772:8113,774:8112,787:7936,788:7937,834:8118,837:8115}],949:[,,{768:8050,769:941,787:7952,788:7953}],951:[,,{768:8052,769:942,787:7968,788:7969,834:8134,837:8131}],953:[,,{768:8054,769:943,772:8145,774:8144,776:970,787:7984,788:7985,834:8150}],959:[,,{768:8056,769:972,787:8e3,788:8001}],961:[,,{787:8164,788:8165}],965:[,,{768:8058,769:973,772:8161,774:8160,776:971,787:8016,788:8017,834:8166}],969:[,,{768:8060,769:974,787:8032,788:8033,834:8182,837:8179}],970:[[953,776],,{768:8146,769:912,834:8151}],971:[[965,776],,{768:8162,769:944,834:8167}],972:[[959,769]],973:[[965,769]],974:[[969,769],,{837:8180}],976:[[946],256],977:[[952],256],978:[[933],256,{769:979,776:980}],979:[[978,769]],980:[[978,776]],981:[[966],256],982:[[960],256],1008:[[954],256],1009:[[961],256],1010:[[962],256],1012:[[920],256],1013:[[949],256],1017:[[931],256],66422:[,230],66423:[,230],66424:[,230],66425:[,230],66426:[,230]},1024:{1024:[[1045,768]],1025:[[1045,776]],1027:[[1043,769]],1030:[,,{776:1031}],1031:[[1030,776]],1036:[[1050,769]],1037:[[1048,768]],1038:[[1059,774]],1040:[,,{774:1232,776:1234}],1043:[,,{769:1027}],1045:[,,{768:1024,774:1238,776:1025}],1046:[,,{774:1217,776:1244}],1047:[,,{776:1246}],1048:[,,{768:1037,772:1250,774:1049,776:1252}],1049:[[1048,774]],1050:[,,{769:1036}],1054:[,,{776:1254}],1059:[,,{772:1262,774:1038,776:1264,779:1266}],1063:[,,{776:1268}],1067:[,,{776:1272}],1069:[,,{776:1260}],1072:[,,{774:1233,776:1235}],1075:[,,{769:1107}],1077:[,,{768:1104,774:1239,776:1105}],1078:[,,{774:1218,776:1245}],1079:[,,{776:1247}],1080:[,,{768:1117,772:1251,774:1081,776:1253}],1081:[[1080,774]],1082:[,,{769:1116}],1086:[,,{776:1255}],1091:[,,{772:1263,774:1118,776:1265,779:1267}],1095:[,,{776:1269}],1099:[,,{776:1273}],1101:[,,{776:1261}],1104:[[1077,768]],1105:[[1077,776]],1107:[[1075,769]],1110:[,,{776:1111}],1111:[[1110,776]],1116:[[1082,769]],1117:[[1080,768]],1118:[[1091,774]],1140:[,,{783:1142}],1141:[,,{783:1143}],1142:[[1140,783]],1143:[[1141,783]],1155:[,230],1156:[,230],1157:[,230],1158:[,230],1159:[,230],1217:[[1046,774]],1218:[[1078,774]],1232:[[1040,774]],1233:[[1072,774]],1234:[[1040,776]],1235:[[1072,776]],1238:[[1045,774]],1239:[[1077,774]],1240:[,,{776:1242}],1241:[,,{776:1243}],1242:[[1240,776]],1243:[[1241,776]],1244:[[1046,776]],1245:[[1078,776]],1246:[[1047,776]],1247:[[1079,776]],1250:[[1048,772]],1251:[[1080,772]],1252:[[1048,776]],1253:[[1080,776]],1254:[[1054,776]],1255:[[1086,776]],1256:[,,{776:1258}],1257:[,,{776:1259}],1258:[[1256,776]],1259:[[1257,776]],1260:[[1069,776]],1261:[[1101,776]],1262:[[1059,772]],1263:[[1091,772]],1264:[[1059,776]],1265:[[1091,776]],1266:[[1059,779]],1267:[[1091,779]],1268:[[1063,776]],1269:[[1095,776]],1272:[[1067,776]],1273:[[1099,776]]},1280:{1415:[[1381,1410],256],1425:[,220],1426:[,230],1427:[,230],1428:[,230],1429:[,230],1430:[,220],1431:[,230],1432:[,230],1433:[,230],1434:[,222],1435:[,220],1436:[,230],1437:[,230],1438:[,230],1439:[,230],1440:[,230],1441:[,230],1442:[,220],1443:[,220],1444:[,220],1445:[,220],1446:[,220],1447:[,220],1448:[,230],1449:[,230],1450:[,220],1451:[,230],1452:[,230],1453:[,222],1454:[,228],1455:[,230],1456:[,10],1457:[,11],1458:[,12],1459:[,13],1460:[,14],1461:[,15],1462:[,16],1463:[,17],1464:[,18],1465:[,19],1466:[,19],1467:[,20],1468:[,21],1469:[,22],1471:[,23],1473:[,24],1474:[,25],1476:[,230],1477:[,220],1479:[,18]},1536:{1552:[,230],1553:[,230],1554:[,230],1555:[,230],1556:[,230],1557:[,230],1558:[,230],1559:[,230],1560:[,30],1561:[,31],1562:[,32],1570:[[1575,1619]],1571:[[1575,1620]],1572:[[1608,1620]],1573:[[1575,1621]],1574:[[1610,1620]],1575:[,,{1619:1570,1620:1571,1621:1573}],1608:[,,{1620:1572}],1610:[,,{1620:1574}],1611:[,27],1612:[,28],1613:[,29],1614:[,30],1615:[,31],1616:[,32],1617:[,33],1618:[,34],1619:[,230],1620:[,230],1621:[,220],1622:[,220],1623:[,230],1624:[,230],1625:[,230],1626:[,230],1627:[,230],1628:[,220],1629:[,230],1630:[,230],1631:[,220],1648:[,35],1653:[[1575,1652],256],1654:[[1608,1652],256],1655:[[1735,1652],256],1656:[[1610,1652],256],1728:[[1749,1620]],1729:[,,{1620:1730}],1730:[[1729,1620]],1746:[,,{1620:1747}],1747:[[1746,1620]],1749:[,,{1620:1728}],1750:[,230],1751:[,230],1752:[,230],1753:[,230],1754:[,230],1755:[,230],1756:[,230],1759:[,230],1760:[,230],1761:[,230],1762:[,230],1763:[,220],1764:[,230],1767:[,230],1768:[,230],1770:[,220],1771:[,230],1772:[,230],1773:[,220]},1792:{1809:[,36],1840:[,230],1841:[,220],1842:[,230],1843:[,230],1844:[,220],1845:[,230],1846:[,230],1847:[,220],1848:[,220],1849:[,220],1850:[,230],1851:[,220],1852:[,220],1853:[,230],1854:[,220],1855:[,230],1856:[,230],1857:[,230],1858:[,220],1859:[,230],1860:[,220],1861:[,230],1862:[,220],1863:[,230],1864:[,220],1865:[,230],1866:[,230],2027:[,230],2028:[,230],2029:[,230],2030:[,230],2031:[,230],2032:[,230],2033:[,230],2034:[,220],2035:[,230]},2048:{2070:[,230],2071:[,230],2072:[,230],2073:[,230],2075:[,230],2076:[,230],2077:[,230],2078:[,230],2079:[,230],2080:[,230],2081:[,230],2082:[,230],2083:[,230],2085:[,230],2086:[,230],2087:[,230],2089:[,230],2090:[,230],2091:[,230],2092:[,230],2093:[,230],2137:[,220],2138:[,220],2139:[,220],2276:[,230],2277:[,230],2278:[,220],2279:[,230],2280:[,230],2281:[,220],2282:[,230],2283:[,230],2284:[,230],2285:[,220],2286:[,220],2287:[,220],2288:[,27],2289:[,28],2290:[,29],2291:[,230],2292:[,230],2293:[,230],2294:[,220],2295:[,230],2296:[,230],2297:[,220],2298:[,220],2299:[,230],2300:[,230],2301:[,230],2302:[,230],2303:[,230]},2304:{2344:[,,{2364:2345}],2345:[[2344,2364]],2352:[,,{2364:2353}],2353:[[2352,2364]],2355:[,,{2364:2356}],2356:[[2355,2364]],2364:[,7],2381:[,9],2385:[,230],2386:[,220],2387:[,230],2388:[,230],2392:[[2325,2364],512],2393:[[2326,2364],512],2394:[[2327,2364],512],2395:[[2332,2364],512],2396:[[2337,2364],512],2397:[[2338,2364],512],2398:[[2347,2364],512],2399:[[2351,2364],512],2492:[,7],2503:[,,{2494:2507,2519:2508}],2507:[[2503,2494]],2508:[[2503,2519]],2509:[,9],2524:[[2465,2492],512],2525:[[2466,2492],512],2527:[[2479,2492],512]},2560:{2611:[[2610,2620],512],2614:[[2616,2620],512],2620:[,7],2637:[,9],2649:[[2582,2620],512],2650:[[2583,2620],512],2651:[[2588,2620],512],2654:[[2603,2620],512],2748:[,7],2765:[,9],68109:[,220],68111:[,230],68152:[,230],68153:[,1],68154:[,220],68159:[,9],68325:[,230],68326:[,220]},2816:{2876:[,7],2887:[,,{2878:2891,2902:2888,2903:2892}],2888:[[2887,2902]],2891:[[2887,2878]],2892:[[2887,2903]],2893:[,9],2908:[[2849,2876],512],2909:[[2850,2876],512],2962:[,,{3031:2964}],2964:[[2962,3031]],3014:[,,{3006:3018,3031:3020}],3015:[,,{3006:3019}],3018:[[3014,3006]],3019:[[3015,3006]],3020:[[3014,3031]],3021:[,9]},3072:{3142:[,,{3158:3144}],3144:[[3142,3158]],3149:[,9],3157:[,84],3158:[,91],3260:[,7],3263:[,,{3285:3264}],3264:[[3263,3285]],3270:[,,{3266:3274,3285:3271,3286:3272}],3271:[[3270,3285]],3272:[[3270,3286]],3274:[[3270,3266],,{3285:3275}],3275:[[3274,3285]],3277:[,9]},3328:{3398:[,,{3390:3402,3415:3404}],3399:[,,{3390:3403}],3402:[[3398,3390]],3403:[[3399,3390]],3404:[[3398,3415]],3405:[,9],3530:[,9],3545:[,,{3530:3546,3535:3548,3551:3550}],3546:[[3545,3530]],3548:[[3545,3535],,{3530:3549}],3549:[[3548,3530]],3550:[[3545,3551]]},3584:{3635:[[3661,3634],256],3640:[,103],3641:[,103],3642:[,9],3656:[,107],3657:[,107],3658:[,107],3659:[,107],3763:[[3789,3762],256],3768:[,118],3769:[,118],3784:[,122],3785:[,122],3786:[,122],3787:[,122],3804:[[3755,3737],256],3805:[[3755,3745],256]},3840:{3852:[[3851],256],3864:[,220],3865:[,220],3893:[,220],3895:[,220],3897:[,216],3907:[[3906,4023],512],3917:[[3916,4023],512],3922:[[3921,4023],512],3927:[[3926,4023],512],3932:[[3931,4023],512],3945:[[3904,4021],512],3953:[,129],3954:[,130],3955:[[3953,3954],512],3956:[,132],3957:[[3953,3956],512],3958:[[4018,3968],512],3959:[[4018,3969],256],3960:[[4019,3968],512],3961:[[4019,3969],256],3962:[,130],3963:[,130],3964:[,130],3965:[,130],3968:[,130],3969:[[3953,3968],512],3970:[,230],3971:[,230],3972:[,9],3974:[,230],3975:[,230],3987:[[3986,4023],512],3997:[[3996,4023],512],4002:[[4001,4023],512],4007:[[4006,4023],512],4012:[[4011,4023],512],4025:[[3984,4021],512],4038:[,220]},4096:{4133:[,,{4142:4134}],4134:[[4133,4142]],4151:[,7],4153:[,9],4154:[,9],4237:[,220],4348:[[4316],256],69702:[,9],69759:[,9],69785:[,,{69818:69786}],69786:[[69785,69818]],69787:[,,{69818:69788}],69788:[[69787,69818]],69797:[,,{69818:69803}],69803:[[69797,69818]],69817:[,9],69818:[,7]},4352:{69888:[,230],69889:[,230],69890:[,230],69934:[[69937,69927]],69935:[[69938,69927]],69937:[,,{69927:69934}],69938:[,,{69927:69935}],69939:[,9],69940:[,9],70003:[,7],70080:[,9]},4608:{70197:[,9],70198:[,7],70377:[,7],70378:[,9]},4864:{4957:[,230],4958:[,230],4959:[,230],70460:[,7],70471:[,,{70462:70475,70487:70476}],70475:[[70471,70462]],70476:[[70471,70487]],70477:[,9],70502:[,230],70503:[,230],70504:[,230],70505:[,230],70506:[,230],70507:[,230],70508:[,230],70512:[,230],70513:[,230],70514:[,230],70515:[,230],70516:[,230]},5120:{70841:[,,{70832:70844,70842:70843,70845:70846}],70843:[[70841,70842]],70844:[[70841,70832]],70846:[[70841,70845]],70850:[,9],70851:[,7]},5376:{71096:[,,{71087:71098}],71097:[,,{71087:71099}],71098:[[71096,71087]],71099:[[71097,71087]],71103:[,9],71104:[,7]},5632:{71231:[,9],71350:[,9],71351:[,7]},5888:{5908:[,9],5940:[,9],6098:[,9],6109:[,230]},6144:{6313:[,228]},6400:{6457:[,222],6458:[,230],6459:[,220]},6656:{6679:[,230],6680:[,220],6752:[,9],6773:[,230],6774:[,230],6775:[,230],6776:[,230],6777:[,230],6778:[,230],6779:[,230],6780:[,230],6783:[,220],6832:[,230],6833:[,230],6834:[,230],6835:[,230],6836:[,230],6837:[,220],6838:[,220],6839:[,220],6840:[,220],6841:[,220],6842:[,220],6843:[,230],6844:[,230],6845:[,220]},6912:{6917:[,,{6965:6918}],6918:[[6917,6965]],6919:[,,{6965:6920}],6920:[[6919,6965]],6921:[,,{6965:6922}],6922:[[6921,6965]],6923:[,,{6965:6924}],6924:[[6923,6965]],6925:[,,{6965:6926}],6926:[[6925,6965]],6929:[,,{6965:6930}],6930:[[6929,6965]],6964:[,7],6970:[,,{6965:6971}],6971:[[6970,6965]],6972:[,,{6965:6973}],6973:[[6972,6965]],6974:[,,{6965:6976}],6975:[,,{6965:6977}],6976:[[6974,6965]],6977:[[6975,6965]],6978:[,,{6965:6979}],6979:[[6978,6965]],6980:[,9],7019:[,230],7020:[,220],7021:[,230],7022:[,230],7023:[,230],7024:[,230],7025:[,230],7026:[,230],7027:[,230],7082:[,9],7083:[,9],7142:[,7],7154:[,9],7155:[,9]},7168:{7223:[,7],7376:[,230],7377:[,230],7378:[,230],7380:[,1],7381:[,220],7382:[,220],7383:[,220],7384:[,220],7385:[,220],7386:[,230],7387:[,230],7388:[,220],7389:[,220],7390:[,220],7391:[,220],7392:[,230],7394:[,1],7395:[,1],7396:[,1],7397:[,1],7398:[,1],7399:[,1],7400:[,1],7405:[,220],7412:[,230],7416:[,230],7417:[,230]},7424:{7468:[[65],256],7469:[[198],256],7470:[[66],256],7472:[[68],256],7473:[[69],256],7474:[[398],256],7475:[[71],256],7476:[[72],256],7477:[[73],256],7478:[[74],256],7479:[[75],256],7480:[[76],256],7481:[[77],256],7482:[[78],256],7484:[[79],256],7485:[[546],256],7486:[[80],256],7487:[[82],256],7488:[[84],256],7489:[[85],256],7490:[[87],256],7491:[[97],256],7492:[[592],256],7493:[[593],256],7494:[[7426],256],7495:[[98],256],7496:[[100],256],7497:[[101],256],7498:[[601],256],7499:[[603],256],7500:[[604],256],7501:[[103],256],7503:[[107],256],7504:[[109],256],7505:[[331],256],7506:[[111],256],7507:[[596],256],7508:[[7446],256],7509:[[7447],256],7510:[[112],256],7511:[[116],256],7512:[[117],256],7513:[[7453],256],7514:[[623],256],7515:[[118],256],7516:[[7461],256],7517:[[946],256],7518:[[947],256],7519:[[948],256],7520:[[966],256],7521:[[967],256],7522:[[105],256],7523:[[114],256],7524:[[117],256],7525:[[118],256],7526:[[946],256],7527:[[947],256],7528:[[961],256],7529:[[966],256],7530:[[967],256],7544:[[1085],256],7579:[[594],256],7580:[[99],256],7581:[[597],256],7582:[[240],256],7583:[[604],256],7584:[[102],256],7585:[[607],256],7586:[[609],256],7587:[[613],256],7588:[[616],256],7589:[[617],256],7590:[[618],256],7591:[[7547],256],7592:[[669],256],7593:[[621],256],7594:[[7557],256],7595:[[671],256],7596:[[625],256],7597:[[624],256],7598:[[626],256],7599:[[627],256],7600:[[628],256],7601:[[629],256],7602:[[632],256],7603:[[642],256],7604:[[643],256],7605:[[427],256],7606:[[649],256],7607:[[650],256],7608:[[7452],256],7609:[[651],256],7610:[[652],256],7611:[[122],256],7612:[[656],256],7613:[[657],256],7614:[[658],256],7615:[[952],256],7616:[,230],7617:[,230],7618:[,220],7619:[,230],7620:[,230],7621:[,230],7622:[,230],7623:[,230],7624:[,230],7625:[,230],7626:[,220],7627:[,230],7628:[,230],7629:[,234],7630:[,214],7631:[,220],7632:[,202],7633:[,230],7634:[,230],7635:[,230],7636:[,230],7637:[,230],7638:[,230],7639:[,230],7640:[,230],7641:[,230],7642:[,230],7643:[,230],7644:[,230],7645:[,230],7646:[,230],7647:[,230],7648:[,230],7649:[,230],7650:[,230],7651:[,230],7652:[,230],7653:[,230],7654:[,230],7655:[,230],7656:[,230],7657:[,230],7658:[,230],7659:[,230],7660:[,230],7661:[,230],7662:[,230],7663:[,230],7664:[,230],7665:[,230],7666:[,230],7667:[,230],7668:[,230],7669:[,230],7676:[,233],7677:[,220],7678:[,230],7679:[,220]},7680:{7680:[[65,805]],7681:[[97,805]],7682:[[66,775]],7683:[[98,775]],7684:[[66,803]],7685:[[98,803]],7686:[[66,817]],7687:[[98,817]],7688:[[199,769]],7689:[[231,769]],7690:[[68,775]],7691:[[100,775]],7692:[[68,803]],7693:[[100,803]],7694:[[68,817]],7695:[[100,817]],7696:[[68,807]],7697:[[100,807]],7698:[[68,813]],7699:[[100,813]],7700:[[274,768]],7701:[[275,768]],7702:[[274,769]],7703:[[275,769]],7704:[[69,813]],7705:[[101,813]],7706:[[69,816]],7707:[[101,816]],7708:[[552,774]],7709:[[553,774]],7710:[[70,775]],7711:[[102,775]],7712:[[71,772]],7713:[[103,772]],7714:[[72,775]],7715:[[104,775]],7716:[[72,803]],7717:[[104,803]],7718:[[72,776]],7719:[[104,776]],7720:[[72,807]],7721:[[104,807]],7722:[[72,814]],7723:[[104,814]],7724:[[73,816]],7725:[[105,816]],7726:[[207,769]],7727:[[239,769]],7728:[[75,769]],7729:[[107,769]],7730:[[75,803]],7731:[[107,803]],7732:[[75,817]],7733:[[107,817]],7734:[[76,803],,{772:7736}],7735:[[108,803],,{772:7737}],7736:[[7734,772]],7737:[[7735,772]],7738:[[76,817]],7739:[[108,817]],7740:[[76,813]],7741:[[108,813]],7742:[[77,769]],7743:[[109,769]],7744:[[77,775]],7745:[[109,775]],7746:[[77,803]],7747:[[109,803]],7748:[[78,775]],7749:[[110,775]],7750:[[78,803]],7751:[[110,803]],7752:[[78,817]],7753:[[110,817]],7754:[[78,813]],7755:[[110,813]],7756:[[213,769]],7757:[[245,769]],7758:[[213,776]],7759:[[245,776]],7760:[[332,768]],7761:[[333,768]],7762:[[332,769]],7763:[[333,769]],7764:[[80,769]],7765:[[112,769]],7766:[[80,775]],7767:[[112,775]],7768:[[82,775]],7769:[[114,775]],7770:[[82,803],,{772:7772}],7771:[[114,803],,{772:7773}],7772:[[7770,772]],7773:[[7771,772]],7774:[[82,817]],7775:[[114,817]],7776:[[83,775]],7777:[[115,775]],7778:[[83,803],,{775:7784}],7779:[[115,803],,{775:7785}],7780:[[346,775]],7781:[[347,775]],7782:[[352,775]],7783:[[353,775]],7784:[[7778,775]],7785:[[7779,775]],7786:[[84,775]],7787:[[116,775]],7788:[[84,803]],7789:[[116,803]],7790:[[84,817]],7791:[[116,817]],7792:[[84,813]],7793:[[116,813]],7794:[[85,804]],7795:[[117,804]],7796:[[85,816]],7797:[[117,816]],7798:[[85,813]],7799:[[117,813]],7800:[[360,769]],7801:[[361,769]],7802:[[362,776]],7803:[[363,776]],7804:[[86,771]],7805:[[118,771]],7806:[[86,803]],7807:[[118,803]],7808:[[87,768]],7809:[[119,768]],7810:[[87,769]],7811:[[119,769]],7812:[[87,776]],7813:[[119,776]],7814:[[87,775]],7815:[[119,775]],7816:[[87,803]],7817:[[119,803]],7818:[[88,775]],7819:[[120,775]],7820:[[88,776]],7821:[[120,776]],7822:[[89,775]],7823:[[121,775]],7824:[[90,770]],7825:[[122,770]],7826:[[90,803]],7827:[[122,803]],7828:[[90,817]],7829:[[122,817]],7830:[[104,817]],7831:[[116,776]],7832:[[119,778]],7833:[[121,778]],7834:[[97,702],256],7835:[[383,775]],7840:[[65,803],,{770:7852,774:7862}],7841:[[97,803],,{770:7853,774:7863}],7842:[[65,777]],7843:[[97,777]],7844:[[194,769]],7845:[[226,769]],7846:[[194,768]],7847:[[226,768]],7848:[[194,777]],7849:[[226,777]],7850:[[194,771]],7851:[[226,771]],7852:[[7840,770]],7853:[[7841,770]],7854:[[258,769]],7855:[[259,769]],7856:[[258,768]],7857:[[259,768]],7858:[[258,777]],7859:[[259,777]],7860:[[258,771]],7861:[[259,771]],7862:[[7840,774]],7863:[[7841,774]],7864:[[69,803],,{770:7878}],7865:[[101,803],,{770:7879}],7866:[[69,777]],7867:[[101,777]],7868:[[69,771]],7869:[[101,771]],7870:[[202,769]],7871:[[234,769]],7872:[[202,768]],7873:[[234,768]],7874:[[202,777]],7875:[[234,777]],7876:[[202,771]],7877:[[234,771]],7878:[[7864,770]],7879:[[7865,770]],7880:[[73,777]],7881:[[105,777]],7882:[[73,803]],7883:[[105,803]],7884:[[79,803],,{770:7896}],7885:[[111,803],,{770:7897}],7886:[[79,777]],7887:[[111,777]],7888:[[212,769]],7889:[[244,769]],7890:[[212,768]],7891:[[244,768]],7892:[[212,777]],7893:[[244,777]],7894:[[212,771]],7895:[[244,771]],7896:[[7884,770]],7897:[[7885,770]],7898:[[416,769]],7899:[[417,769]],7900:[[416,768]],7901:[[417,768]],7902:[[416,777]],7903:[[417,777]],7904:[[416,771]],7905:[[417,771]],7906:[[416,803]],7907:[[417,803]],7908:[[85,803]],7909:[[117,803]],7910:[[85,777]],7911:[[117,777]],7912:[[431,769]],7913:[[432,769]],7914:[[431,768]],7915:[[432,768]],7916:[[431,777]],7917:[[432,777]],7918:[[431,771]],7919:[[432,771]],7920:[[431,803]],7921:[[432,803]],7922:[[89,768]],7923:[[121,768]],7924:[[89,803]],7925:[[121,803]],7926:[[89,777]],7927:[[121,777]],7928:[[89,771]],7929:[[121,771]]},7936:{7936:[[945,787],,{768:7938,769:7940,834:7942,837:8064}],7937:[[945,788],,{768:7939,769:7941,834:7943,837:8065}],7938:[[7936,768],,{837:8066}],7939:[[7937,768],,{837:8067}],7940:[[7936,769],,{837:8068}],7941:[[7937,769],,{837:8069}],7942:[[7936,834],,{837:8070}],7943:[[7937,834],,{837:8071}],7944:[[913,787],,{768:7946,769:7948,834:7950,837:8072}],7945:[[913,788],,{768:7947,769:7949,834:7951,837:8073}],7946:[[7944,768],,{837:8074}],7947:[[7945,768],,{837:8075}],7948:[[7944,769],,{837:8076}],7949:[[7945,769],,{837:8077}],7950:[[7944,834],,{837:8078}],7951:[[7945,834],,{837:8079}],7952:[[949,787],,{768:7954,769:7956}],7953:[[949,788],,{768:7955,769:7957}],7954:[[7952,768]],7955:[[7953,768]],7956:[[7952,769]],7957:[[7953,769]],7960:[[917,787],,{768:7962,769:7964}],7961:[[917,788],,{768:7963,769:7965}],7962:[[7960,768]],7963:[[7961,768]],7964:[[7960,769]],7965:[[7961,769]],7968:[[951,787],,{768:7970,769:7972,834:7974,837:8080}],7969:[[951,788],,{768:7971,769:7973,834:7975,837:8081}],7970:[[7968,768],,{837:8082}],7971:[[7969,768],,{837:8083}],7972:[[7968,769],,{837:8084}],7973:[[7969,769],,{837:8085}],7974:[[7968,834],,{837:8086}],7975:[[7969,834],,{837:8087}],7976:[[919,787],,{768:7978,769:7980,834:7982,837:8088}],7977:[[919,788],,{768:7979,769:7981,834:7983,837:8089}],7978:[[7976,768],,{837:8090}],7979:[[7977,768],,{837:8091}],7980:[[7976,769],,{837:8092}],7981:[[7977,769],,{837:8093}],7982:[[7976,834],,{837:8094}],7983:[[7977,834],,{837:8095}],7984:[[953,787],,{768:7986,769:7988,834:7990}],7985:[[953,788],,{768:7987,769:7989,834:7991}],7986:[[7984,768]],7987:[[7985,768]],7988:[[7984,769]],7989:[[7985,769]],7990:[[7984,834]],7991:[[7985,834]],7992:[[921,787],,{768:7994,769:7996,834:7998}],7993:[[921,788],,{768:7995,769:7997,834:7999}],7994:[[7992,768]],7995:[[7993,768]],7996:[[7992,769]],7997:[[7993,769]],7998:[[7992,834]],7999:[[7993,834]],8e3:[[959,787],,{768:8002,769:8004}],8001:[[959,788],,{768:8003,769:8005}],8002:[[8e3,768]],8003:[[8001,768]],8004:[[8e3,769]],8005:[[8001,769]],8008:[[927,787],,{768:8010,769:8012}],8009:[[927,788],,{768:8011,769:8013}],8010:[[8008,768]],8011:[[8009,768]],8012:[[8008,769]],8013:[[8009,769]],8016:[[965,787],,{768:8018,769:8020,834:8022}],8017:[[965,788],,{768:8019,769:8021,834:8023}],8018:[[8016,768]],8019:[[8017,768]],8020:[[8016,769]],8021:[[8017,769]],8022:[[8016,834]],8023:[[8017,834]],8025:[[933,788],,{768:8027,769:8029,834:8031}],8027:[[8025,768]],8029:[[8025,769]],8031:[[8025,834]],8032:[[969,787],,{768:8034,769:8036,834:8038,837:8096}],8033:[[969,788],,{768:8035,769:8037,834:8039,837:8097}],8034:[[8032,768],,{837:8098}],8035:[[8033,768],,{837:8099}],8036:[[8032,769],,{837:8100}],8037:[[8033,769],,{837:8101}],8038:[[8032,834],,{837:8102}],8039:[[8033,834],,{837:8103}],8040:[[937,787],,{768:8042,769:8044,834:8046,837:8104}],8041:[[937,788],,{768:8043,769:8045,834:8047,837:8105}],8042:[[8040,768],,{837:8106}],8043:[[8041,768],,{837:8107}],8044:[[8040,769],,{837:8108}],8045:[[8041,769],,{837:8109}],8046:[[8040,834],,{837:8110}],8047:[[8041,834],,{837:8111}],8048:[[945,768],,{837:8114}],8049:[[940]],8050:[[949,768]],8051:[[941]],8052:[[951,768],,{837:8130}],8053:[[942]],8054:[[953,768]],8055:[[943]],8056:[[959,768]],8057:[[972]],8058:[[965,768]],8059:[[973]],8060:[[969,768],,{837:8178}],8061:[[974]],8064:[[7936,837]],8065:[[7937,837]],8066:[[7938,837]],8067:[[7939,837]],8068:[[7940,837]],8069:[[7941,837]],8070:[[7942,837]],8071:[[7943,837]],8072:[[7944,837]],8073:[[7945,837]],8074:[[7946,837]],8075:[[7947,837]],8076:[[7948,837]],8077:[[7949,837]],8078:[[7950,837]],8079:[[7951,837]],8080:[[7968,837]],8081:[[7969,837]],8082:[[7970,837]],8083:[[7971,837]],8084:[[7972,837]],8085:[[7973,837]],8086:[[7974,837]],8087:[[7975,837]],8088:[[7976,837]],8089:[[7977,837]],8090:[[7978,837]],8091:[[7979,837]],8092:[[7980,837]],8093:[[7981,837]],8094:[[7982,837]],8095:[[7983,837]],8096:[[8032,837]],8097:[[8033,837]],8098:[[8034,837]],8099:[[8035,837]],8100:[[8036,837]],8101:[[8037,837]],8102:[[8038,837]],8103:[[8039,837]],8104:[[8040,837]],8105:[[8041,837]],8106:[[8042,837]],8107:[[8043,837]],8108:[[8044,837]],8109:[[8045,837]],8110:[[8046,837]],8111:[[8047,837]],8112:[[945,774]],8113:[[945,772]],8114:[[8048,837]],8115:[[945,837]],8116:[[940,837]],8118:[[945,834],,{837:8119}],8119:[[8118,837]],8120:[[913,774]],8121:[[913,772]],8122:[[913,768]],8123:[[902]],8124:[[913,837]],8125:[[32,787],256],8126:[[953]],8127:[[32,787],256,{768:8141,769:8142,834:8143}],8128:[[32,834],256],8129:[[168,834]],8130:[[8052,837]],8131:[[951,837]],8132:[[942,837]],8134:[[951,834],,{837:8135}],8135:[[8134,837]],8136:[[917,768]],8137:[[904]],8138:[[919,768]],8139:[[905]],8140:[[919,837]],8141:[[8127,768]],8142:[[8127,769]],8143:[[8127,834]],8144:[[953,774]],8145:[[953,772]],8146:[[970,768]],8147:[[912]],8150:[[953,834]],8151:[[970,834]],8152:[[921,774]],8153:[[921,772]],8154:[[921,768]],8155:[[906]],8157:[[8190,768]],8158:[[8190,769]],8159:[[8190,834]],8160:[[965,774]],8161:[[965,772]],8162:[[971,768]],8163:[[944]],8164:[[961,787]],8165:[[961,788]],8166:[[965,834]],8167:[[971,834]],8168:[[933,774]],8169:[[933,772]],8170:[[933,768]],8171:[[910]],8172:[[929,788]],8173:[[168,768]],8174:[[901]],8175:[[96]],8178:[[8060,837]],8179:[[969,837]],8180:[[974,837]],8182:[[969,834],,{837:8183}],8183:[[8182,837]],8184:[[927,768]],8185:[[908]],8186:[[937,768]],8187:[[911]],8188:[[937,837]],8189:[[180]],8190:[[32,788],256,{768:8157,769:8158,834:8159}]},8192:{8192:[[8194]],8193:[[8195]],8194:[[32],256],8195:[[32],256],8196:[[32],256],8197:[[32],256],8198:[[32],256],8199:[[32],256],8200:[[32],256],8201:[[32],256],8202:[[32],256],8209:[[8208],256],8215:[[32,819],256],8228:[[46],256],8229:[[46,46],256],8230:[[46,46,46],256],8239:[[32],256],8243:[[8242,8242],256],8244:[[8242,8242,8242],256],8246:[[8245,8245],256],8247:[[8245,8245,8245],256],8252:[[33,33],256],8254:[[32,773],256],8263:[[63,63],256],8264:[[63,33],256],8265:[[33,63],256],8279:[[8242,8242,8242,8242],256],8287:[[32],256],8304:[[48],256],8305:[[105],256],8308:[[52],256],8309:[[53],256],8310:[[54],256],8311:[[55],256],8312:[[56],256],8313:[[57],256],8314:[[43],256],8315:[[8722],256],8316:[[61],256],8317:[[40],256],8318:[[41],256],8319:[[110],256],8320:[[48],256],8321:[[49],256],8322:[[50],256],8323:[[51],256],8324:[[52],256],8325:[[53],256],8326:[[54],256],8327:[[55],256],8328:[[56],256],8329:[[57],256],8330:[[43],256],8331:[[8722],256],8332:[[61],256],8333:[[40],256],8334:[[41],256],8336:[[97],256],8337:[[101],256],8338:[[111],256],8339:[[120],256],8340:[[601],256],8341:[[104],256],8342:[[107],256],8343:[[108],256],8344:[[109],256],8345:[[110],256],8346:[[112],256],8347:[[115],256],8348:[[116],256],8360:[[82,115],256],8400:[,230],8401:[,230],8402:[,1],8403:[,1],8404:[,230],8405:[,230],8406:[,230],8407:[,230],8408:[,1],8409:[,1],8410:[,1],8411:[,230],8412:[,230],8417:[,230],8421:[,1],8422:[,1],8423:[,230],8424:[,220],8425:[,230],8426:[,1],8427:[,1],8428:[,220],8429:[,220],8430:[,220],8431:[,220],8432:[,230]},8448:{8448:[[97,47,99],256],8449:[[97,47,115],256],8450:[[67],256],8451:[[176,67],256],8453:[[99,47,111],256],8454:[[99,47,117],256],8455:[[400],256],8457:[[176,70],256],8458:[[103],256],8459:[[72],256],8460:[[72],256],8461:[[72],256],8462:[[104],256],8463:[[295],256],8464:[[73],256],8465:[[73],256],8466:[[76],256],8467:[[108],256],8469:[[78],256],8470:[[78,111],256],8473:[[80],256],8474:[[81],256],8475:[[82],256],8476:[[82],256],8477:[[82],256],8480:[[83,77],256],8481:[[84,69,76],256],8482:[[84,77],256],8484:[[90],256],8486:[[937]],8488:[[90],256],8490:[[75]],8491:[[197]],8492:[[66],256],8493:[[67],256],8495:[[101],256],8496:[[69],256],8497:[[70],256],8499:[[77],256],8500:[[111],256],8501:[[1488],256],8502:[[1489],256],8503:[[1490],256],8504:[[1491],256],8505:[[105],256],8507:[[70,65,88],256],8508:[[960],256],8509:[[947],256],8510:[[915],256],8511:[[928],256],8512:[[8721],256],8517:[[68],256],8518:[[100],256],8519:[[101],256],8520:[[105],256],8521:[[106],256],8528:[[49,8260,55],256],8529:[[49,8260,57],256],8530:[[49,8260,49,48],256],8531:[[49,8260,51],256],8532:[[50,8260,51],256],8533:[[49,8260,53],256],8534:[[50,8260,53],256],8535:[[51,8260,53],256],8536:[[52,8260,53],256],8537:[[49,8260,54],256],8538:[[53,8260,54],256],8539:[[49,8260,56],256],8540:[[51,8260,56],256],8541:[[53,8260,56],256],8542:[[55,8260,56],256],8543:[[49,8260],256],8544:[[73],256],8545:[[73,73],256],8546:[[73,73,73],256],8547:[[73,86],256],8548:[[86],256],8549:[[86,73],256],8550:[[86,73,73],256],8551:[[86,73,73,73],256],8552:[[73,88],256],8553:[[88],256],8554:[[88,73],256],8555:[[88,73,73],256],8556:[[76],256],8557:[[67],256],8558:[[68],256],8559:[[77],256],8560:[[105],256],8561:[[105,105],256],8562:[[105,105,105],256],8563:[[105,118],256],8564:[[118],256],8565:[[118,105],256],8566:[[118,105,105],256],8567:[[118,105,105,105],256],8568:[[105,120],256],8569:[[120],256],8570:[[120,105],256],8571:[[120,105,105],256],8572:[[108],256],8573:[[99],256],8574:[[100],256],8575:[[109],256],8585:[[48,8260,51],256],8592:[,,{824:8602}],8594:[,,{824:8603}],8596:[,,{824:8622}],8602:[[8592,824]],8603:[[8594,824]],8622:[[8596,824]],8653:[[8656,824]],8654:[[8660,824]],8655:[[8658,824]],8656:[,,{824:8653}],8658:[,,{824:8655}],8660:[,,{824:8654}]},8704:{8707:[,,{824:8708}],8708:[[8707,824]],8712:[,,{824:8713}],8713:[[8712,824]],8715:[,,{824:8716}],8716:[[8715,824]],8739:[,,{824:8740}],8740:[[8739,824]],8741:[,,{824:8742}],8742:[[8741,824]],8748:[[8747,8747],256],8749:[[8747,8747,8747],256],8751:[[8750,8750],256],8752:[[8750,8750,8750],256],8764:[,,{824:8769}],8769:[[8764,824]],8771:[,,{824:8772}],8772:[[8771,824]],8773:[,,{824:8775}],8775:[[8773,824]],8776:[,,{824:8777}],8777:[[8776,824]],8781:[,,{824:8813}],8800:[[61,824]],8801:[,,{824:8802}],8802:[[8801,824]],8804:[,,{824:8816}],8805:[,,{824:8817}],8813:[[8781,824]],8814:[[60,824]],8815:[[62,824]],8816:[[8804,824]],8817:[[8805,824]],8818:[,,{824:8820}],8819:[,,{824:8821}],8820:[[8818,824]],8821:[[8819,824]],8822:[,,{824:8824}],8823:[,,{824:8825}],8824:[[8822,824]],8825:[[8823,824]],8826:[,,{824:8832}],8827:[,,{824:8833}],8828:[,,{824:8928}],8829:[,,{824:8929}],8832:[[8826,824]],8833:[[8827,824]],8834:[,,{824:8836}],8835:[,,{824:8837}],8836:[[8834,824]],8837:[[8835,824]],8838:[,,{824:8840}],8839:[,,{824:8841}],8840:[[8838,824]],8841:[[8839,824]],8849:[,,{824:8930}],8850:[,,{824:8931}],8866:[,,{824:8876}],8872:[,,{824:8877}],8873:[,,{824:8878}],8875:[,,{824:8879}],8876:[[8866,824]],8877:[[8872,824]],8878:[[8873,824]],8879:[[8875,824]],8882:[,,{824:8938}],8883:[,,{824:8939}],8884:[,,{824:8940}],8885:[,,{824:8941}],8928:[[8828,824]],8929:[[8829,824]],8930:[[8849,824]],8931:[[8850,824]],8938:[[8882,824]],8939:[[8883,824]],8940:[[8884,824]],8941:[[8885,824]]},8960:{9001:[[12296]],9002:[[12297]]},9216:{9312:[[49],256],9313:[[50],256],9314:[[51],256],9315:[[52],256],9316:[[53],256],9317:[[54],256],9318:[[55],256],9319:[[56],256],9320:[[57],256],9321:[[49,48],256],9322:[[49,49],256],9323:[[49,50],256],9324:[[49,51],256],9325:[[49,52],256],9326:[[49,53],256],9327:[[49,54],256],9328:[[49,55],256],9329:[[49,56],256],9330:[[49,57],256],9331:[[50,48],256],9332:[[40,49,41],256],9333:[[40,50,41],256],9334:[[40,51,41],256],9335:[[40,52,41],256],9336:[[40,53,41],256],9337:[[40,54,41],256],9338:[[40,55,41],256],9339:[[40,56,41],256],9340:[[40,57,41],256],9341:[[40,49,48,41],256],9342:[[40,49,49,41],256],9343:[[40,49,50,41],256],9344:[[40,49,51,41],256],9345:[[40,49,52,41],256],9346:[[40,49,53,41],256],9347:[[40,49,54,41],256],9348:[[40,49,55,41],256],9349:[[40,49,56,41],256],9350:[[40,49,57,41],256],9351:[[40,50,48,41],256],9352:[[49,46],256],9353:[[50,46],256],9354:[[51,46],256],9355:[[52,46],256],9356:[[53,46],256],9357:[[54,46],256],9358:[[55,46],256],9359:[[56,46],256],9360:[[57,46],256],9361:[[49,48,46],256],9362:[[49,49,46],256],9363:[[49,50,46],256],9364:[[49,51,46],256],9365:[[49,52,46],256],9366:[[49,53,46],256],9367:[[49,54,46],256],9368:[[49,55,46],256],9369:[[49,56,46],256],9370:[[49,57,46],256],9371:[[50,48,46],256],9372:[[40,97,41],256],9373:[[40,98,41],256],9374:[[40,99,41],256],9375:[[40,100,41],256],9376:[[40,101,41],256],9377:[[40,102,41],256],9378:[[40,103,41],256],9379:[[40,104,41],256],9380:[[40,105,41],256],9381:[[40,106,41],256],9382:[[40,107,41],256],9383:[[40,108,41],256],9384:[[40,109,41],256],9385:[[40,110,41],256],9386:[[40,111,41],256],9387:[[40,112,41],256],9388:[[40,113,41],256],9389:[[40,114,41],256],9390:[[40,115,41],256],9391:[[40,116,41],256],9392:[[40,117,41],256],9393:[[40,118,41],256],9394:[[40,119,41],256],
9395:[[40,120,41],256],9396:[[40,121,41],256],9397:[[40,122,41],256],9398:[[65],256],9399:[[66],256],9400:[[67],256],9401:[[68],256],9402:[[69],256],9403:[[70],256],9404:[[71],256],9405:[[72],256],9406:[[73],256],9407:[[74],256],9408:[[75],256],9409:[[76],256],9410:[[77],256],9411:[[78],256],9412:[[79],256],9413:[[80],256],9414:[[81],256],9415:[[82],256],9416:[[83],256],9417:[[84],256],9418:[[85],256],9419:[[86],256],9420:[[87],256],9421:[[88],256],9422:[[89],256],9423:[[90],256],9424:[[97],256],9425:[[98],256],9426:[[99],256],9427:[[100],256],9428:[[101],256],9429:[[102],256],9430:[[103],256],9431:[[104],256],9432:[[105],256],9433:[[106],256],9434:[[107],256],9435:[[108],256],9436:[[109],256],9437:[[110],256],9438:[[111],256],9439:[[112],256],9440:[[113],256],9441:[[114],256],9442:[[115],256],9443:[[116],256],9444:[[117],256],9445:[[118],256],9446:[[119],256],9447:[[120],256],9448:[[121],256],9449:[[122],256],9450:[[48],256]},10752:{10764:[[8747,8747,8747,8747],256],10868:[[58,58,61],256],10869:[[61,61],256],10870:[[61,61,61],256],10972:[[10973,824],512]},11264:{11388:[[106],256],11389:[[86],256],11503:[,230],11504:[,230],11505:[,230]},11520:{11631:[[11617],256],11647:[,9],11744:[,230],11745:[,230],11746:[,230],11747:[,230],11748:[,230],11749:[,230],11750:[,230],11751:[,230],11752:[,230],11753:[,230],11754:[,230],11755:[,230],11756:[,230],11757:[,230],11758:[,230],11759:[,230],11760:[,230],11761:[,230],11762:[,230],11763:[,230],11764:[,230],11765:[,230],11766:[,230],11767:[,230],11768:[,230],11769:[,230],11770:[,230],11771:[,230],11772:[,230],11773:[,230],11774:[,230],11775:[,230]},11776:{11935:[[27597],256],12019:[[40863],256]},12032:{12032:[[19968],256],12033:[[20008],256],12034:[[20022],256],12035:[[20031],256],12036:[[20057],256],12037:[[20101],256],12038:[[20108],256],12039:[[20128],256],12040:[[20154],256],12041:[[20799],256],12042:[[20837],256],12043:[[20843],256],12044:[[20866],256],12045:[[20886],256],12046:[[20907],256],12047:[[20960],256],12048:[[20981],256],12049:[[20992],256],12050:[[21147],256],12051:[[21241],256],12052:[[21269],256],12053:[[21274],256],12054:[[21304],256],12055:[[21313],256],12056:[[21340],256],12057:[[21353],256],12058:[[21378],256],12059:[[21430],256],12060:[[21448],256],12061:[[21475],256],12062:[[22231],256],12063:[[22303],256],12064:[[22763],256],12065:[[22786],256],12066:[[22794],256],12067:[[22805],256],12068:[[22823],256],12069:[[22899],256],12070:[[23376],256],12071:[[23424],256],12072:[[23544],256],12073:[[23567],256],12074:[[23586],256],12075:[[23608],256],12076:[[23662],256],12077:[[23665],256],12078:[[24027],256],12079:[[24037],256],12080:[[24049],256],12081:[[24062],256],12082:[[24178],256],12083:[[24186],256],12084:[[24191],256],12085:[[24308],256],12086:[[24318],256],12087:[[24331],256],12088:[[24339],256],12089:[[24400],256],12090:[[24417],256],12091:[[24435],256],12092:[[24515],256],12093:[[25096],256],12094:[[25142],256],12095:[[25163],256],12096:[[25903],256],12097:[[25908],256],12098:[[25991],256],12099:[[26007],256],12100:[[26020],256],12101:[[26041],256],12102:[[26080],256],12103:[[26085],256],12104:[[26352],256],12105:[[26376],256],12106:[[26408],256],12107:[[27424],256],12108:[[27490],256],12109:[[27513],256],12110:[[27571],256],12111:[[27595],256],12112:[[27604],256],12113:[[27611],256],12114:[[27663],256],12115:[[27668],256],12116:[[27700],256],12117:[[28779],256],12118:[[29226],256],12119:[[29238],256],12120:[[29243],256],12121:[[29247],256],12122:[[29255],256],12123:[[29273],256],12124:[[29275],256],12125:[[29356],256],12126:[[29572],256],12127:[[29577],256],12128:[[29916],256],12129:[[29926],256],12130:[[29976],256],12131:[[29983],256],12132:[[29992],256],12133:[[3e4],256],12134:[[30091],256],12135:[[30098],256],12136:[[30326],256],12137:[[30333],256],12138:[[30382],256],12139:[[30399],256],12140:[[30446],256],12141:[[30683],256],12142:[[30690],256],12143:[[30707],256],12144:[[31034],256],12145:[[31160],256],12146:[[31166],256],12147:[[31348],256],12148:[[31435],256],12149:[[31481],256],12150:[[31859],256],12151:[[31992],256],12152:[[32566],256],12153:[[32593],256],12154:[[32650],256],12155:[[32701],256],12156:[[32769],256],12157:[[32780],256],12158:[[32786],256],12159:[[32819],256],12160:[[32895],256],12161:[[32905],256],12162:[[33251],256],12163:[[33258],256],12164:[[33267],256],12165:[[33276],256],12166:[[33292],256],12167:[[33307],256],12168:[[33311],256],12169:[[33390],256],12170:[[33394],256],12171:[[33400],256],12172:[[34381],256],12173:[[34411],256],12174:[[34880],256],12175:[[34892],256],12176:[[34915],256],12177:[[35198],256],12178:[[35211],256],12179:[[35282],256],12180:[[35328],256],12181:[[35895],256],12182:[[35910],256],12183:[[35925],256],12184:[[35960],256],12185:[[35997],256],12186:[[36196],256],12187:[[36208],256],12188:[[36275],256],12189:[[36523],256],12190:[[36554],256],12191:[[36763],256],12192:[[36784],256],12193:[[36789],256],12194:[[37009],256],12195:[[37193],256],12196:[[37318],256],12197:[[37324],256],12198:[[37329],256],12199:[[38263],256],12200:[[38272],256],12201:[[38428],256],12202:[[38582],256],12203:[[38585],256],12204:[[38632],256],12205:[[38737],256],12206:[[38750],256],12207:[[38754],256],12208:[[38761],256],12209:[[38859],256],12210:[[38893],256],12211:[[38899],256],12212:[[38913],256],12213:[[39080],256],12214:[[39131],256],12215:[[39135],256],12216:[[39318],256],12217:[[39321],256],12218:[[39340],256],12219:[[39592],256],12220:[[39640],256],12221:[[39647],256],12222:[[39717],256],12223:[[39727],256],12224:[[39730],256],12225:[[39740],256],12226:[[39770],256],12227:[[40165],256],12228:[[40565],256],12229:[[40575],256],12230:[[40613],256],12231:[[40635],256],12232:[[40643],256],12233:[[40653],256],12234:[[40657],256],12235:[[40697],256],12236:[[40701],256],12237:[[40718],256],12238:[[40723],256],12239:[[40736],256],12240:[[40763],256],12241:[[40778],256],12242:[[40786],256],12243:[[40845],256],12244:[[40860],256],12245:[[40864],256]},12288:{12288:[[32],256],12330:[,218],12331:[,228],12332:[,232],12333:[,222],12334:[,224],12335:[,224],12342:[[12306],256],12344:[[21313],256],12345:[[21316],256],12346:[[21317],256],12358:[,,{12441:12436}],12363:[,,{12441:12364}],12364:[[12363,12441]],12365:[,,{12441:12366}],12366:[[12365,12441]],12367:[,,{12441:12368}],12368:[[12367,12441]],12369:[,,{12441:12370}],12370:[[12369,12441]],12371:[,,{12441:12372}],12372:[[12371,12441]],12373:[,,{12441:12374}],12374:[[12373,12441]],12375:[,,{12441:12376}],12376:[[12375,12441]],12377:[,,{12441:12378}],12378:[[12377,12441]],12379:[,,{12441:12380}],12380:[[12379,12441]],12381:[,,{12441:12382}],12382:[[12381,12441]],12383:[,,{12441:12384}],12384:[[12383,12441]],12385:[,,{12441:12386}],12386:[[12385,12441]],12388:[,,{12441:12389}],12389:[[12388,12441]],12390:[,,{12441:12391}],12391:[[12390,12441]],12392:[,,{12441:12393}],12393:[[12392,12441]],12399:[,,{12441:12400,12442:12401}],12400:[[12399,12441]],12401:[[12399,12442]],12402:[,,{12441:12403,12442:12404}],12403:[[12402,12441]],12404:[[12402,12442]],12405:[,,{12441:12406,12442:12407}],12406:[[12405,12441]],12407:[[12405,12442]],12408:[,,{12441:12409,12442:12410}],12409:[[12408,12441]],12410:[[12408,12442]],12411:[,,{12441:12412,12442:12413}],12412:[[12411,12441]],12413:[[12411,12442]],12436:[[12358,12441]],12441:[,8],12442:[,8],12443:[[32,12441],256],12444:[[32,12442],256],12445:[,,{12441:12446}],12446:[[12445,12441]],12447:[[12424,12426],256],12454:[,,{12441:12532}],12459:[,,{12441:12460}],12460:[[12459,12441]],12461:[,,{12441:12462}],12462:[[12461,12441]],12463:[,,{12441:12464}],12464:[[12463,12441]],12465:[,,{12441:12466}],12466:[[12465,12441]],12467:[,,{12441:12468}],12468:[[12467,12441]],12469:[,,{12441:12470}],12470:[[12469,12441]],12471:[,,{12441:12472}],12472:[[12471,12441]],12473:[,,{12441:12474}],12474:[[12473,12441]],12475:[,,{12441:12476}],12476:[[12475,12441]],12477:[,,{12441:12478}],12478:[[12477,12441]],12479:[,,{12441:12480}],12480:[[12479,12441]],12481:[,,{12441:12482}],12482:[[12481,12441]],12484:[,,{12441:12485}],12485:[[12484,12441]],12486:[,,{12441:12487}],12487:[[12486,12441]],12488:[,,{12441:12489}],12489:[[12488,12441]],12495:[,,{12441:12496,12442:12497}],12496:[[12495,12441]],12497:[[12495,12442]],12498:[,,{12441:12499,12442:12500}],12499:[[12498,12441]],12500:[[12498,12442]],12501:[,,{12441:12502,12442:12503}],12502:[[12501,12441]],12503:[[12501,12442]],12504:[,,{12441:12505,12442:12506}],12505:[[12504,12441]],12506:[[12504,12442]],12507:[,,{12441:12508,12442:12509}],12508:[[12507,12441]],12509:[[12507,12442]],12527:[,,{12441:12535}],12528:[,,{12441:12536}],12529:[,,{12441:12537}],12530:[,,{12441:12538}],12532:[[12454,12441]],12535:[[12527,12441]],12536:[[12528,12441]],12537:[[12529,12441]],12538:[[12530,12441]],12541:[,,{12441:12542}],12542:[[12541,12441]],12543:[[12467,12488],256]},12544:{12593:[[4352],256],12594:[[4353],256],12595:[[4522],256],12596:[[4354],256],12597:[[4524],256],12598:[[4525],256],12599:[[4355],256],12600:[[4356],256],12601:[[4357],256],12602:[[4528],256],12603:[[4529],256],12604:[[4530],256],12605:[[4531],256],12606:[[4532],256],12607:[[4533],256],12608:[[4378],256],12609:[[4358],256],12610:[[4359],256],12611:[[4360],256],12612:[[4385],256],12613:[[4361],256],12614:[[4362],256],12615:[[4363],256],12616:[[4364],256],12617:[[4365],256],12618:[[4366],256],12619:[[4367],256],12620:[[4368],256],12621:[[4369],256],12622:[[4370],256],12623:[[4449],256],12624:[[4450],256],12625:[[4451],256],12626:[[4452],256],12627:[[4453],256],12628:[[4454],256],12629:[[4455],256],12630:[[4456],256],12631:[[4457],256],12632:[[4458],256],12633:[[4459],256],12634:[[4460],256],12635:[[4461],256],12636:[[4462],256],12637:[[4463],256],12638:[[4464],256],12639:[[4465],256],12640:[[4466],256],12641:[[4467],256],12642:[[4468],256],12643:[[4469],256],12644:[[4448],256],12645:[[4372],256],12646:[[4373],256],12647:[[4551],256],12648:[[4552],256],12649:[[4556],256],12650:[[4558],256],12651:[[4563],256],12652:[[4567],256],12653:[[4569],256],12654:[[4380],256],12655:[[4573],256],12656:[[4575],256],12657:[[4381],256],12658:[[4382],256],12659:[[4384],256],12660:[[4386],256],12661:[[4387],256],12662:[[4391],256],12663:[[4393],256],12664:[[4395],256],12665:[[4396],256],12666:[[4397],256],12667:[[4398],256],12668:[[4399],256],12669:[[4402],256],12670:[[4406],256],12671:[[4416],256],12672:[[4423],256],12673:[[4428],256],12674:[[4593],256],12675:[[4594],256],12676:[[4439],256],12677:[[4440],256],12678:[[4441],256],12679:[[4484],256],12680:[[4485],256],12681:[[4488],256],12682:[[4497],256],12683:[[4498],256],12684:[[4500],256],12685:[[4510],256],12686:[[4513],256],12690:[[19968],256],12691:[[20108],256],12692:[[19977],256],12693:[[22235],256],12694:[[19978],256],12695:[[20013],256],12696:[[19979],256],12697:[[30002],256],12698:[[20057],256],12699:[[19993],256],12700:[[19969],256],12701:[[22825],256],12702:[[22320],256],12703:[[20154],256]},12800:{12800:[[40,4352,41],256],12801:[[40,4354,41],256],12802:[[40,4355,41],256],12803:[[40,4357,41],256],12804:[[40,4358,41],256],12805:[[40,4359,41],256],12806:[[40,4361,41],256],12807:[[40,4363,41],256],12808:[[40,4364,41],256],12809:[[40,4366,41],256],12810:[[40,4367,41],256],12811:[[40,4368,41],256],12812:[[40,4369,41],256],12813:[[40,4370,41],256],12814:[[40,4352,4449,41],256],12815:[[40,4354,4449,41],256],12816:[[40,4355,4449,41],256],12817:[[40,4357,4449,41],256],12818:[[40,4358,4449,41],256],12819:[[40,4359,4449,41],256],12820:[[40,4361,4449,41],256],12821:[[40,4363,4449,41],256],12822:[[40,4364,4449,41],256],12823:[[40,4366,4449,41],256],12824:[[40,4367,4449,41],256],12825:[[40,4368,4449,41],256],12826:[[40,4369,4449,41],256],12827:[[40,4370,4449,41],256],12828:[[40,4364,4462,41],256],12829:[[40,4363,4457,4364,4453,4523,41],256],12830:[[40,4363,4457,4370,4462,41],256],12832:[[40,19968,41],256],12833:[[40,20108,41],256],12834:[[40,19977,41],256],12835:[[40,22235,41],256],12836:[[40,20116,41],256],12837:[[40,20845,41],256],12838:[[40,19971,41],256],12839:[[40,20843,41],256],12840:[[40,20061,41],256],12841:[[40,21313,41],256],12842:[[40,26376,41],256],12843:[[40,28779,41],256],12844:[[40,27700,41],256],12845:[[40,26408,41],256],12846:[[40,37329,41],256],12847:[[40,22303,41],256],12848:[[40,26085,41],256],12849:[[40,26666,41],256],12850:[[40,26377,41],256],12851:[[40,31038,41],256],12852:[[40,21517,41],256],12853:[[40,29305,41],256],12854:[[40,36001,41],256],12855:[[40,31069,41],256],12856:[[40,21172,41],256],12857:[[40,20195,41],256],12858:[[40,21628,41],256],12859:[[40,23398,41],256],12860:[[40,30435,41],256],12861:[[40,20225,41],256],12862:[[40,36039,41],256],12863:[[40,21332,41],256],12864:[[40,31085,41],256],12865:[[40,20241,41],256],12866:[[40,33258,41],256],12867:[[40,33267,41],256],12868:[[21839],256],12869:[[24188],256],12870:[[25991],256],12871:[[31631],256],12880:[[80,84,69],256],12881:[[50,49],256],12882:[[50,50],256],12883:[[50,51],256],12884:[[50,52],256],12885:[[50,53],256],12886:[[50,54],256],12887:[[50,55],256],12888:[[50,56],256],12889:[[50,57],256],12890:[[51,48],256],12891:[[51,49],256],12892:[[51,50],256],12893:[[51,51],256],12894:[[51,52],256],12895:[[51,53],256],12896:[[4352],256],12897:[[4354],256],12898:[[4355],256],12899:[[4357],256],12900:[[4358],256],12901:[[4359],256],12902:[[4361],256],12903:[[4363],256],12904:[[4364],256],12905:[[4366],256],12906:[[4367],256],12907:[[4368],256],12908:[[4369],256],12909:[[4370],256],12910:[[4352,4449],256],12911:[[4354,4449],256],12912:[[4355,4449],256],12913:[[4357,4449],256],12914:[[4358,4449],256],12915:[[4359,4449],256],12916:[[4361,4449],256],12917:[[4363,4449],256],12918:[[4364,4449],256],12919:[[4366,4449],256],12920:[[4367,4449],256],12921:[[4368,4449],256],12922:[[4369,4449],256],12923:[[4370,4449],256],12924:[[4366,4449,4535,4352,4457],256],12925:[[4364,4462,4363,4468],256],12926:[[4363,4462],256],12928:[[19968],256],12929:[[20108],256],12930:[[19977],256],12931:[[22235],256],12932:[[20116],256],12933:[[20845],256],12934:[[19971],256],12935:[[20843],256],12936:[[20061],256],12937:[[21313],256],12938:[[26376],256],12939:[[28779],256],12940:[[27700],256],12941:[[26408],256],12942:[[37329],256],12943:[[22303],256],12944:[[26085],256],12945:[[26666],256],12946:[[26377],256],12947:[[31038],256],12948:[[21517],256],12949:[[29305],256],12950:[[36001],256],12951:[[31069],256],12952:[[21172],256],12953:[[31192],256],12954:[[30007],256],12955:[[22899],256],12956:[[36969],256],12957:[[20778],256],12958:[[21360],256],12959:[[27880],256],12960:[[38917],256],12961:[[20241],256],12962:[[20889],256],12963:[[27491],256],12964:[[19978],256],12965:[[20013],256],12966:[[19979],256],12967:[[24038],256],12968:[[21491],256],12969:[[21307],256],12970:[[23447],256],12971:[[23398],256],12972:[[30435],256],12973:[[20225],256],12974:[[36039],256],12975:[[21332],256],12976:[[22812],256],12977:[[51,54],256],12978:[[51,55],256],12979:[[51,56],256],12980:[[51,57],256],12981:[[52,48],256],12982:[[52,49],256],12983:[[52,50],256],12984:[[52,51],256],12985:[[52,52],256],12986:[[52,53],256],12987:[[52,54],256],12988:[[52,55],256],12989:[[52,56],256],12990:[[52,57],256],12991:[[53,48],256],12992:[[49,26376],256],12993:[[50,26376],256],12994:[[51,26376],256],12995:[[52,26376],256],12996:[[53,26376],256],12997:[[54,26376],256],12998:[[55,26376],256],12999:[[56,26376],256],13e3:[[57,26376],256],13001:[[49,48,26376],256],13002:[[49,49,26376],256],13003:[[49,50,26376],256],13004:[[72,103],256],13005:[[101,114,103],256],13006:[[101,86],256],13007:[[76,84,68],256],13008:[[12450],256],13009:[[12452],256],13010:[[12454],256],13011:[[12456],256],13012:[[12458],256],13013:[[12459],256],13014:[[12461],256],13015:[[12463],256],13016:[[12465],256],13017:[[12467],256],13018:[[12469],256],13019:[[12471],256],13020:[[12473],256],13021:[[12475],256],13022:[[12477],256],13023:[[12479],256],13024:[[12481],256],13025:[[12484],256],13026:[[12486],256],13027:[[12488],256],13028:[[12490],256],13029:[[12491],256],13030:[[12492],256],13031:[[12493],256],13032:[[12494],256],13033:[[12495],256],13034:[[12498],256],13035:[[12501],256],13036:[[12504],256],13037:[[12507],256],13038:[[12510],256],13039:[[12511],256],13040:[[12512],256],13041:[[12513],256],13042:[[12514],256],13043:[[12516],256],13044:[[12518],256],13045:[[12520],256],13046:[[12521],256],13047:[[12522],256],13048:[[12523],256],13049:[[12524],256],13050:[[12525],256],13051:[[12527],256],13052:[[12528],256],13053:[[12529],256],13054:[[12530],256]},13056:{13056:[[12450,12497,12540,12488],256],13057:[[12450,12523,12501,12449],256],13058:[[12450,12531,12506,12450],256],13059:[[12450,12540,12523],256],13060:[[12452,12491,12531,12464],256],13061:[[12452,12531,12481],256],13062:[[12454,12457,12531],256],13063:[[12456,12473,12463,12540,12489],256],13064:[[12456,12540,12459,12540],256],13065:[[12458,12531,12473],256],13066:[[12458,12540,12512],256],13067:[[12459,12452,12522],256],13068:[[12459,12521,12483,12488],256],13069:[[12459,12525,12522,12540],256],13070:[[12460,12525,12531],256],13071:[[12460,12531,12510],256],13072:[[12462,12460],256],13073:[[12462,12491,12540],256],13074:[[12461,12517,12522,12540],256],13075:[[12462,12523,12480,12540],256],13076:[[12461,12525],256],13077:[[12461,12525,12464,12521,12512],256],13078:[[12461,12525,12513,12540,12488,12523],256],13079:[[12461,12525,12527,12483,12488],256],13080:[[12464,12521,12512],256],13081:[[12464,12521,12512,12488,12531],256],13082:[[12463,12523,12476,12452,12525],256],13083:[[12463,12525,12540,12493],256],13084:[[12465,12540,12473],256],13085:[[12467,12523,12490],256],13086:[[12467,12540,12509],256],13087:[[12469,12452,12463,12523],256],13088:[[12469,12531,12481,12540,12512],256],13089:[[12471,12522,12531,12464],256],13090:[[12475,12531,12481],256],13091:[[12475,12531,12488],256],13092:[[12480,12540,12473],256],13093:[[12487,12471],256],13094:[[12489,12523],256],13095:[[12488,12531],256],13096:[[12490,12494],256],13097:[[12494,12483,12488],256],13098:[[12495,12452,12484],256],13099:[[12497,12540,12475,12531,12488],256],13100:[[12497,12540,12484],256],13101:[[12496,12540,12524,12523],256],13102:[[12500,12450,12473,12488,12523],256],13103:[[12500,12463,12523],256],13104:[[12500,12467],256],13105:[[12499,12523],256],13106:[[12501,12449,12521,12483,12489],256],13107:[[12501,12451,12540,12488],256],13108:[[12502,12483,12471,12455,12523],256],13109:[[12501,12521,12531],256],13110:[[12504,12463,12479,12540,12523],256],13111:[[12506,12477],256],13112:[[12506,12491,12498],256],13113:[[12504,12523,12484],256],13114:[[12506,12531,12473],256],13115:[[12506,12540,12472],256],13116:[[12505,12540,12479],256],13117:[[12509,12452,12531,12488],256],13118:[[12508,12523,12488],256],13119:[[12507,12531],256],13120:[[12509,12531,12489],256],13121:[[12507,12540,12523],256],13122:[[12507,12540,12531],256],13123:[[12510,12452,12463,12525],256],13124:[[12510,12452,12523],256],13125:[[12510,12483,12495],256],13126:[[12510,12523,12463],256],13127:[[12510,12531,12471,12519,12531],256],13128:[[12511,12463,12525,12531],256],13129:[[12511,12522],256],13130:[[12511,12522,12496,12540,12523],256],13131:[[12513,12460],256],13132:[[12513,12460,12488,12531],256],13133:[[12513,12540,12488,12523],256],13134:[[12516,12540,12489],256],13135:[[12516,12540,12523],256],13136:[[12518,12450,12531],256],13137:[[12522,12483,12488,12523],256],13138:[[12522,12521],256],13139:[[12523,12500,12540],256],13140:[[12523,12540,12502,12523],256],13141:[[12524,12512],256],13142:[[12524,12531,12488,12466,12531],256],13143:[[12527,12483,12488],256],13144:[[48,28857],256],13145:[[49,28857],256],13146:[[50,28857],256],13147:[[51,28857],256],13148:[[52,28857],256],13149:[[53,28857],256],13150:[[54,28857],256],13151:[[55,28857],256],13152:[[56,28857],256],13153:[[57,28857],256],13154:[[49,48,28857],256],13155:[[49,49,28857],256],13156:[[49,50,28857],256],13157:[[49,51,28857],256],13158:[[49,52,28857],256],13159:[[49,53,28857],256],13160:[[49,54,28857],256],13161:[[49,55,28857],256],13162:[[49,56,28857],256],13163:[[49,57,28857],256],13164:[[50,48,28857],256],13165:[[50,49,28857],256],13166:[[50,50,28857],256],13167:[[50,51,28857],256],13168:[[50,52,28857],256],13169:[[104,80,97],256],13170:[[100,97],256],13171:[[65,85],256],13172:[[98,97,114],256],13173:[[111,86],256],13174:[[112,99],256],13175:[[100,109],256],13176:[[100,109,178],256],13177:[[100,109,179],256],13178:[[73,85],256],13179:[[24179,25104],256],13180:[[26157,21644],256],13181:[[22823,27491],256],13182:[[26126,27835],256],13183:[[26666,24335,20250,31038],256],13184:[[112,65],256],13185:[[110,65],256],13186:[[956,65],256],13187:[[109,65],256],13188:[[107,65],256],13189:[[75,66],256],13190:[[77,66],256],13191:[[71,66],256],13192:[[99,97,108],256],13193:[[107,99,97,108],256],13194:[[112,70],256],13195:[[110,70],256],13196:[[956,70],256],13197:[[956,103],256],13198:[[109,103],256],13199:[[107,103],256],13200:[[72,122],256],13201:[[107,72,122],256],13202:[[77,72,122],256],13203:[[71,72,122],256],13204:[[84,72,122],256],13205:[[956,8467],256],13206:[[109,8467],256],13207:[[100,8467],256],13208:[[107,8467],256],13209:[[102,109],256],13210:[[110,109],256],13211:[[956,109],256],13212:[[109,109],256],13213:[[99,109],256],13214:[[107,109],256],13215:[[109,109,178],256],13216:[[99,109,178],256],13217:[[109,178],256],13218:[[107,109,178],256],13219:[[109,109,179],256],13220:[[99,109,179],256],13221:[[109,179],256],13222:[[107,109,179],256],13223:[[109,8725,115],256],13224:[[109,8725,115,178],256],13225:[[80,97],256],13226:[[107,80,97],256],13227:[[77,80,97],256],13228:[[71,80,97],256],13229:[[114,97,100],256],13230:[[114,97,100,8725,115],256],13231:[[114,97,100,8725,115,178],256],13232:[[112,115],256],13233:[[110,115],256],13234:[[956,115],256],13235:[[109,115],256],13236:[[112,86],256],13237:[[110,86],256],13238:[[956,86],256],13239:[[109,86],256],13240:[[107,86],256],13241:[[77,86],256],13242:[[112,87],256],13243:[[110,87],256],13244:[[956,87],256],13245:[[109,87],256],13246:[[107,87],256],13247:[[77,87],256],13248:[[107,937],256],13249:[[77,937],256],13250:[[97,46,109,46],256],13251:[[66,113],256],13252:[[99,99],256],13253:[[99,100],256],13254:[[67,8725,107,103],256],13255:[[67,111,46],256],13256:[[100,66],256],13257:[[71,121],256],13258:[[104,97],256],13259:[[72,80],256],13260:[[105,110],256],13261:[[75,75],256],13262:[[75,77],256],13263:[[107,116],256],13264:[[108,109],256],13265:[[108,110],256],13266:[[108,111,103],256],13267:[[108,120],256],13268:[[109,98],256],13269:[[109,105,108],256],13270:[[109,111,108],256],13271:[[80,72],256],13272:[[112,46,109,46],256],13273:[[80,80,77],256],13274:[[80,82],256],13275:[[115,114],256],13276:[[83,118],256],13277:[[87,98],256],13278:[[86,8725,109],256],13279:[[65,8725,109],256],13280:[[49,26085],256],13281:[[50,26085],256],13282:[[51,26085],256],13283:[[52,26085],256],13284:[[53,26085],256],13285:[[54,26085],256],13286:[[55,26085],256],13287:[[56,26085],256],13288:[[57,26085],256],13289:[[49,48,26085],256],13290:[[49,49,26085],256],13291:[[49,50,26085],256],13292:[[49,51,26085],256],13293:[[49,52,26085],256],13294:[[49,53,26085],256],13295:[[49,54,26085],256],13296:[[49,55,26085],256],13297:[[49,56,26085],256],13298:[[49,57,26085],256],13299:[[50,48,26085],256],13300:[[50,49,26085],256],13301:[[50,50,26085],256],13302:[[50,51,26085],256],13303:[[50,52,26085],256],13304:[[50,53,26085],256],13305:[[50,54,26085],256],13306:[[50,55,26085],256],13307:[[50,56,26085],256],13308:[[50,57,26085],256],13309:[[51,48,26085],256],13310:[[51,49,26085],256],13311:[[103,97,108],256]},27136:{92912:[,1],92913:[,1],92914:[,1],92915:[,1],92916:[,1]},27392:{92976:[,230],92977:[,230],92978:[,230],92979:[,230],92980:[,230],92981:[,230],92982:[,230]},42496:{42607:[,230],42612:[,230],42613:[,230],42614:[,230],42615:[,230],42616:[,230],42617:[,230],42618:[,230],42619:[,230],42620:[,230],42621:[,230],42652:[[1098],256],42653:[[1100],256],42655:[,230],42736:[,230],42737:[,230]},42752:{42864:[[42863],256],43e3:[[294],256],43001:[[339],256]},43008:{43014:[,9],43204:[,9],43232:[,230],43233:[,230],43234:[,230],43235:[,230],43236:[,230],43237:[,230],43238:[,230],43239:[,230],43240:[,230],43241:[,230],43242:[,230],43243:[,230],43244:[,230],43245:[,230],43246:[,230],43247:[,230],43248:[,230],43249:[,230]},43264:{43307:[,220],43308:[,220],43309:[,220],43347:[,9],43443:[,7],43456:[,9]},43520:{43696:[,230],43698:[,230],43699:[,230],43700:[,220],43703:[,230],43704:[,230],43710:[,230],43711:[,230],43713:[,230],43766:[,9]},43776:{43868:[[42791],256],43869:[[43831],256],43870:[[619],256],43871:[[43858],256],44013:[,9]},48128:{113822:[,1]},53504:{119134:[[119127,119141],512],119135:[[119128,119141],512],119136:[[119135,119150],512],119137:[[119135,119151],512],119138:[[119135,119152],512],119139:[[119135,119153],512],119140:[[119135,119154],512],119141:[,216],119142:[,216],119143:[,1],119144:[,1],119145:[,1],119149:[,226],119150:[,216],119151:[,216],119152:[,216],119153:[,216],119154:[,216],119163:[,220],119164:[,220],119165:[,220],119166:[,220],119167:[,220],119168:[,220],119169:[,220],119170:[,220],119173:[,230],119174:[,230],119175:[,230],119176:[,230],119177:[,230],119178:[,220],119179:[,220],119210:[,230],119211:[,230],119212:[,230],119213:[,230],119227:[[119225,119141],512],119228:[[119226,119141],512],119229:[[119227,119150],512],119230:[[119228,119150],512],119231:[[119227,119151],512],119232:[[119228,119151],512]},53760:{119362:[,230],119363:[,230],119364:[,230]},54272:{119808:[[65],256],119809:[[66],256],119810:[[67],256],119811:[[68],256],119812:[[69],256],119813:[[70],256],119814:[[71],256],119815:[[72],256],119816:[[73],256],119817:[[74],256],119818:[[75],256],119819:[[76],256],119820:[[77],256],119821:[[78],256],119822:[[79],256],119823:[[80],256],119824:[[81],256],119825:[[82],256],119826:[[83],256],119827:[[84],256],119828:[[85],256],119829:[[86],256],119830:[[87],256],119831:[[88],256],119832:[[89],256],119833:[[90],256],119834:[[97],256],119835:[[98],256],119836:[[99],256],119837:[[100],256],119838:[[101],256],119839:[[102],256],119840:[[103],256],119841:[[104],256],119842:[[105],256],119843:[[106],256],119844:[[107],256],119845:[[108],256],119846:[[109],256],119847:[[110],256],119848:[[111],256],119849:[[112],256],119850:[[113],256],119851:[[114],256],119852:[[115],256],119853:[[116],256],119854:[[117],256],119855:[[118],256],119856:[[119],256],119857:[[120],256],119858:[[121],256],119859:[[122],256],119860:[[65],256],119861:[[66],256],119862:[[67],256],119863:[[68],256],119864:[[69],256],119865:[[70],256],119866:[[71],256],119867:[[72],256],119868:[[73],256],119869:[[74],256],119870:[[75],256],119871:[[76],256],119872:[[77],256],119873:[[78],256],119874:[[79],256],119875:[[80],256],119876:[[81],256],119877:[[82],256],119878:[[83],256],119879:[[84],256],119880:[[85],256],119881:[[86],256],119882:[[87],256],119883:[[88],256],119884:[[89],256],119885:[[90],256],119886:[[97],256],119887:[[98],256],119888:[[99],256],119889:[[100],256],119890:[[101],256],119891:[[102],256],119892:[[103],256],119894:[[105],256],119895:[[106],256],119896:[[107],256],119897:[[108],256],119898:[[109],256],119899:[[110],256],119900:[[111],256],119901:[[112],256],119902:[[113],256],119903:[[114],256],119904:[[115],256],119905:[[116],256],119906:[[117],256],119907:[[118],256],119908:[[119],256],119909:[[120],256],119910:[[121],256],119911:[[122],256],119912:[[65],256],119913:[[66],256],119914:[[67],256],119915:[[68],256],119916:[[69],256],119917:[[70],256],119918:[[71],256],119919:[[72],256],119920:[[73],256],119921:[[74],256],119922:[[75],256],119923:[[76],256],119924:[[77],256],119925:[[78],256],119926:[[79],256],119927:[[80],256],119928:[[81],256],119929:[[82],256],119930:[[83],256],119931:[[84],256],119932:[[85],256],119933:[[86],256],119934:[[87],256],119935:[[88],256],119936:[[89],256],119937:[[90],256],119938:[[97],256],119939:[[98],256],119940:[[99],256],119941:[[100],256],119942:[[101],256],119943:[[102],256],119944:[[103],256],119945:[[104],256],119946:[[105],256],119947:[[106],256],119948:[[107],256],119949:[[108],256],119950:[[109],256],119951:[[110],256],119952:[[111],256],119953:[[112],256],119954:[[113],256],119955:[[114],256],119956:[[115],256],119957:[[116],256],119958:[[117],256],119959:[[118],256],119960:[[119],256],119961:[[120],256],119962:[[121],256],119963:[[122],256],119964:[[65],256],119966:[[67],256],119967:[[68],256],119970:[[71],256],119973:[[74],256],119974:[[75],256],119977:[[78],256],119978:[[79],256],119979:[[80],256],119980:[[81],256],119982:[[83],256],119983:[[84],256],119984:[[85],256],119985:[[86],256],119986:[[87],256],119987:[[88],256],119988:[[89],256],119989:[[90],256],119990:[[97],256],119991:[[98],256],119992:[[99],256],119993:[[100],256],119995:[[102],256],119997:[[104],256],119998:[[105],256],119999:[[106],256],12e4:[[107],256],120001:[[108],256],120002:[[109],256],120003:[[110],256],120005:[[112],256],120006:[[113],256],120007:[[114],256],120008:[[115],256],120009:[[116],256],120010:[[117],256],120011:[[118],256],120012:[[119],256],120013:[[120],256],120014:[[121],256],120015:[[122],256],120016:[[65],256],120017:[[66],256],120018:[[67],256],120019:[[68],256],120020:[[69],256],120021:[[70],256],120022:[[71],256],120023:[[72],256],120024:[[73],256],120025:[[74],256],120026:[[75],256],120027:[[76],256],120028:[[77],256],120029:[[78],256],120030:[[79],256],120031:[[80],256],120032:[[81],256],120033:[[82],256],120034:[[83],256],120035:[[84],256],120036:[[85],256],120037:[[86],256],120038:[[87],256],120039:[[88],256],120040:[[89],256],120041:[[90],256],120042:[[97],256],120043:[[98],256],120044:[[99],256],120045:[[100],256],120046:[[101],256],120047:[[102],256],120048:[[103],256],120049:[[104],256],120050:[[105],256],120051:[[106],256],120052:[[107],256],120053:[[108],256],120054:[[109],256],120055:[[110],256],120056:[[111],256],120057:[[112],256],120058:[[113],256],120059:[[114],256],120060:[[115],256],120061:[[116],256],120062:[[117],256],120063:[[118],256]},54528:{120064:[[119],256],120065:[[120],256],120066:[[121],256],120067:[[122],256],120068:[[65],256],120069:[[66],256],120071:[[68],256],120072:[[69],256],120073:[[70],256],120074:[[71],256],120077:[[74],256],120078:[[75],256],120079:[[76],256],120080:[[77],256],120081:[[78],256],120082:[[79],256],120083:[[80],256],120084:[[81],256],120086:[[83],256],120087:[[84],256],120088:[[85],256],120089:[[86],256],120090:[[87],256],120091:[[88],256],120092:[[89],256],120094:[[97],256],120095:[[98],256],120096:[[99],256],120097:[[100],256],120098:[[101],256],120099:[[102],256],120100:[[103],256],120101:[[104],256],120102:[[105],256],120103:[[106],256],120104:[[107],256],120105:[[108],256],120106:[[109],256],120107:[[110],256],120108:[[111],256],120109:[[112],256],120110:[[113],256],120111:[[114],256],120112:[[115],256],120113:[[116],256],120114:[[117],256],120115:[[118],256],120116:[[119],256],120117:[[120],256],120118:[[121],256],120119:[[122],256],120120:[[65],256],120121:[[66],256],120123:[[68],256],120124:[[69],256],120125:[[70],256],120126:[[71],256],120128:[[73],256],120129:[[74],256],120130:[[75],256],120131:[[76],256],120132:[[77],256],120134:[[79],256],120138:[[83],256],120139:[[84],256],120140:[[85],256],120141:[[86],256],120142:[[87],256],120143:[[88],256],120144:[[89],256],120146:[[97],256],120147:[[98],256],120148:[[99],256],120149:[[100],256],120150:[[101],256],120151:[[102],256],120152:[[103],256],120153:[[104],256],120154:[[105],256],120155:[[106],256],120156:[[107],256],120157:[[108],256],120158:[[109],256],120159:[[110],256],120160:[[111],256],120161:[[112],256],120162:[[113],256],120163:[[114],256],120164:[[115],256],120165:[[116],256],120166:[[117],256],120167:[[118],256],120168:[[119],256],120169:[[120],256],120170:[[121],256],120171:[[122],256],120172:[[65],256],120173:[[66],256],120174:[[67],256],120175:[[68],256],120176:[[69],256],120177:[[70],256],120178:[[71],256],120179:[[72],256],120180:[[73],256],120181:[[74],256],120182:[[75],256],120183:[[76],256],120184:[[77],256],120185:[[78],256],120186:[[79],256],120187:[[80],256],120188:[[81],256],120189:[[82],256],120190:[[83],256],120191:[[84],256],120192:[[85],256],120193:[[86],256],
120194:[[87],256],120195:[[88],256],120196:[[89],256],120197:[[90],256],120198:[[97],256],120199:[[98],256],120200:[[99],256],120201:[[100],256],120202:[[101],256],120203:[[102],256],120204:[[103],256],120205:[[104],256],120206:[[105],256],120207:[[106],256],120208:[[107],256],120209:[[108],256],120210:[[109],256],120211:[[110],256],120212:[[111],256],120213:[[112],256],120214:[[113],256],120215:[[114],256],120216:[[115],256],120217:[[116],256],120218:[[117],256],120219:[[118],256],120220:[[119],256],120221:[[120],256],120222:[[121],256],120223:[[122],256],120224:[[65],256],120225:[[66],256],120226:[[67],256],120227:[[68],256],120228:[[69],256],120229:[[70],256],120230:[[71],256],120231:[[72],256],120232:[[73],256],120233:[[74],256],120234:[[75],256],120235:[[76],256],120236:[[77],256],120237:[[78],256],120238:[[79],256],120239:[[80],256],120240:[[81],256],120241:[[82],256],120242:[[83],256],120243:[[84],256],120244:[[85],256],120245:[[86],256],120246:[[87],256],120247:[[88],256],120248:[[89],256],120249:[[90],256],120250:[[97],256],120251:[[98],256],120252:[[99],256],120253:[[100],256],120254:[[101],256],120255:[[102],256],120256:[[103],256],120257:[[104],256],120258:[[105],256],120259:[[106],256],120260:[[107],256],120261:[[108],256],120262:[[109],256],120263:[[110],256],120264:[[111],256],120265:[[112],256],120266:[[113],256],120267:[[114],256],120268:[[115],256],120269:[[116],256],120270:[[117],256],120271:[[118],256],120272:[[119],256],120273:[[120],256],120274:[[121],256],120275:[[122],256],120276:[[65],256],120277:[[66],256],120278:[[67],256],120279:[[68],256],120280:[[69],256],120281:[[70],256],120282:[[71],256],120283:[[72],256],120284:[[73],256],120285:[[74],256],120286:[[75],256],120287:[[76],256],120288:[[77],256],120289:[[78],256],120290:[[79],256],120291:[[80],256],120292:[[81],256],120293:[[82],256],120294:[[83],256],120295:[[84],256],120296:[[85],256],120297:[[86],256],120298:[[87],256],120299:[[88],256],120300:[[89],256],120301:[[90],256],120302:[[97],256],120303:[[98],256],120304:[[99],256],120305:[[100],256],120306:[[101],256],120307:[[102],256],120308:[[103],256],120309:[[104],256],120310:[[105],256],120311:[[106],256],120312:[[107],256],120313:[[108],256],120314:[[109],256],120315:[[110],256],120316:[[111],256],120317:[[112],256],120318:[[113],256],120319:[[114],256]},54784:{120320:[[115],256],120321:[[116],256],120322:[[117],256],120323:[[118],256],120324:[[119],256],120325:[[120],256],120326:[[121],256],120327:[[122],256],120328:[[65],256],120329:[[66],256],120330:[[67],256],120331:[[68],256],120332:[[69],256],120333:[[70],256],120334:[[71],256],120335:[[72],256],120336:[[73],256],120337:[[74],256],120338:[[75],256],120339:[[76],256],120340:[[77],256],120341:[[78],256],120342:[[79],256],120343:[[80],256],120344:[[81],256],120345:[[82],256],120346:[[83],256],120347:[[84],256],120348:[[85],256],120349:[[86],256],120350:[[87],256],120351:[[88],256],120352:[[89],256],120353:[[90],256],120354:[[97],256],120355:[[98],256],120356:[[99],256],120357:[[100],256],120358:[[101],256],120359:[[102],256],120360:[[103],256],120361:[[104],256],120362:[[105],256],120363:[[106],256],120364:[[107],256],120365:[[108],256],120366:[[109],256],120367:[[110],256],120368:[[111],256],120369:[[112],256],120370:[[113],256],120371:[[114],256],120372:[[115],256],120373:[[116],256],120374:[[117],256],120375:[[118],256],120376:[[119],256],120377:[[120],256],120378:[[121],256],120379:[[122],256],120380:[[65],256],120381:[[66],256],120382:[[67],256],120383:[[68],256],120384:[[69],256],120385:[[70],256],120386:[[71],256],120387:[[72],256],120388:[[73],256],120389:[[74],256],120390:[[75],256],120391:[[76],256],120392:[[77],256],120393:[[78],256],120394:[[79],256],120395:[[80],256],120396:[[81],256],120397:[[82],256],120398:[[83],256],120399:[[84],256],120400:[[85],256],120401:[[86],256],120402:[[87],256],120403:[[88],256],120404:[[89],256],120405:[[90],256],120406:[[97],256],120407:[[98],256],120408:[[99],256],120409:[[100],256],120410:[[101],256],120411:[[102],256],120412:[[103],256],120413:[[104],256],120414:[[105],256],120415:[[106],256],120416:[[107],256],120417:[[108],256],120418:[[109],256],120419:[[110],256],120420:[[111],256],120421:[[112],256],120422:[[113],256],120423:[[114],256],120424:[[115],256],120425:[[116],256],120426:[[117],256],120427:[[118],256],120428:[[119],256],120429:[[120],256],120430:[[121],256],120431:[[122],256],120432:[[65],256],120433:[[66],256],120434:[[67],256],120435:[[68],256],120436:[[69],256],120437:[[70],256],120438:[[71],256],120439:[[72],256],120440:[[73],256],120441:[[74],256],120442:[[75],256],120443:[[76],256],120444:[[77],256],120445:[[78],256],120446:[[79],256],120447:[[80],256],120448:[[81],256],120449:[[82],256],120450:[[83],256],120451:[[84],256],120452:[[85],256],120453:[[86],256],120454:[[87],256],120455:[[88],256],120456:[[89],256],120457:[[90],256],120458:[[97],256],120459:[[98],256],120460:[[99],256],120461:[[100],256],120462:[[101],256],120463:[[102],256],120464:[[103],256],120465:[[104],256],120466:[[105],256],120467:[[106],256],120468:[[107],256],120469:[[108],256],120470:[[109],256],120471:[[110],256],120472:[[111],256],120473:[[112],256],120474:[[113],256],120475:[[114],256],120476:[[115],256],120477:[[116],256],120478:[[117],256],120479:[[118],256],120480:[[119],256],120481:[[120],256],120482:[[121],256],120483:[[122],256],120484:[[305],256],120485:[[567],256],120488:[[913],256],120489:[[914],256],120490:[[915],256],120491:[[916],256],120492:[[917],256],120493:[[918],256],120494:[[919],256],120495:[[920],256],120496:[[921],256],120497:[[922],256],120498:[[923],256],120499:[[924],256],120500:[[925],256],120501:[[926],256],120502:[[927],256],120503:[[928],256],120504:[[929],256],120505:[[1012],256],120506:[[931],256],120507:[[932],256],120508:[[933],256],120509:[[934],256],120510:[[935],256],120511:[[936],256],120512:[[937],256],120513:[[8711],256],120514:[[945],256],120515:[[946],256],120516:[[947],256],120517:[[948],256],120518:[[949],256],120519:[[950],256],120520:[[951],256],120521:[[952],256],120522:[[953],256],120523:[[954],256],120524:[[955],256],120525:[[956],256],120526:[[957],256],120527:[[958],256],120528:[[959],256],120529:[[960],256],120530:[[961],256],120531:[[962],256],120532:[[963],256],120533:[[964],256],120534:[[965],256],120535:[[966],256],120536:[[967],256],120537:[[968],256],120538:[[969],256],120539:[[8706],256],120540:[[1013],256],120541:[[977],256],120542:[[1008],256],120543:[[981],256],120544:[[1009],256],120545:[[982],256],120546:[[913],256],120547:[[914],256],120548:[[915],256],120549:[[916],256],120550:[[917],256],120551:[[918],256],120552:[[919],256],120553:[[920],256],120554:[[921],256],120555:[[922],256],120556:[[923],256],120557:[[924],256],120558:[[925],256],120559:[[926],256],120560:[[927],256],120561:[[928],256],120562:[[929],256],120563:[[1012],256],120564:[[931],256],120565:[[932],256],120566:[[933],256],120567:[[934],256],120568:[[935],256],120569:[[936],256],120570:[[937],256],120571:[[8711],256],120572:[[945],256],120573:[[946],256],120574:[[947],256],120575:[[948],256]},55040:{120576:[[949],256],120577:[[950],256],120578:[[951],256],120579:[[952],256],120580:[[953],256],120581:[[954],256],120582:[[955],256],120583:[[956],256],120584:[[957],256],120585:[[958],256],120586:[[959],256],120587:[[960],256],120588:[[961],256],120589:[[962],256],120590:[[963],256],120591:[[964],256],120592:[[965],256],120593:[[966],256],120594:[[967],256],120595:[[968],256],120596:[[969],256],120597:[[8706],256],120598:[[1013],256],120599:[[977],256],120600:[[1008],256],120601:[[981],256],120602:[[1009],256],120603:[[982],256],120604:[[913],256],120605:[[914],256],120606:[[915],256],120607:[[916],256],120608:[[917],256],120609:[[918],256],120610:[[919],256],120611:[[920],256],120612:[[921],256],120613:[[922],256],120614:[[923],256],120615:[[924],256],120616:[[925],256],120617:[[926],256],120618:[[927],256],120619:[[928],256],120620:[[929],256],120621:[[1012],256],120622:[[931],256],120623:[[932],256],120624:[[933],256],120625:[[934],256],120626:[[935],256],120627:[[936],256],120628:[[937],256],120629:[[8711],256],120630:[[945],256],120631:[[946],256],120632:[[947],256],120633:[[948],256],120634:[[949],256],120635:[[950],256],120636:[[951],256],120637:[[952],256],120638:[[953],256],120639:[[954],256],120640:[[955],256],120641:[[956],256],120642:[[957],256],120643:[[958],256],120644:[[959],256],120645:[[960],256],120646:[[961],256],120647:[[962],256],120648:[[963],256],120649:[[964],256],120650:[[965],256],120651:[[966],256],120652:[[967],256],120653:[[968],256],120654:[[969],256],120655:[[8706],256],120656:[[1013],256],120657:[[977],256],120658:[[1008],256],120659:[[981],256],120660:[[1009],256],120661:[[982],256],120662:[[913],256],120663:[[914],256],120664:[[915],256],120665:[[916],256],120666:[[917],256],120667:[[918],256],120668:[[919],256],120669:[[920],256],120670:[[921],256],120671:[[922],256],120672:[[923],256],120673:[[924],256],120674:[[925],256],120675:[[926],256],120676:[[927],256],120677:[[928],256],120678:[[929],256],120679:[[1012],256],120680:[[931],256],120681:[[932],256],120682:[[933],256],120683:[[934],256],120684:[[935],256],120685:[[936],256],120686:[[937],256],120687:[[8711],256],120688:[[945],256],120689:[[946],256],120690:[[947],256],120691:[[948],256],120692:[[949],256],120693:[[950],256],120694:[[951],256],120695:[[952],256],120696:[[953],256],120697:[[954],256],120698:[[955],256],120699:[[956],256],120700:[[957],256],120701:[[958],256],120702:[[959],256],120703:[[960],256],120704:[[961],256],120705:[[962],256],120706:[[963],256],120707:[[964],256],120708:[[965],256],120709:[[966],256],120710:[[967],256],120711:[[968],256],120712:[[969],256],120713:[[8706],256],120714:[[1013],256],120715:[[977],256],120716:[[1008],256],120717:[[981],256],120718:[[1009],256],120719:[[982],256],120720:[[913],256],120721:[[914],256],120722:[[915],256],120723:[[916],256],120724:[[917],256],120725:[[918],256],120726:[[919],256],120727:[[920],256],120728:[[921],256],120729:[[922],256],120730:[[923],256],120731:[[924],256],120732:[[925],256],120733:[[926],256],120734:[[927],256],120735:[[928],256],120736:[[929],256],120737:[[1012],256],120738:[[931],256],120739:[[932],256],120740:[[933],256],120741:[[934],256],120742:[[935],256],120743:[[936],256],120744:[[937],256],120745:[[8711],256],120746:[[945],256],120747:[[946],256],120748:[[947],256],120749:[[948],256],120750:[[949],256],120751:[[950],256],120752:[[951],256],120753:[[952],256],120754:[[953],256],120755:[[954],256],120756:[[955],256],120757:[[956],256],120758:[[957],256],120759:[[958],256],120760:[[959],256],120761:[[960],256],120762:[[961],256],120763:[[962],256],120764:[[963],256],120765:[[964],256],120766:[[965],256],120767:[[966],256],120768:[[967],256],120769:[[968],256],120770:[[969],256],120771:[[8706],256],120772:[[1013],256],120773:[[977],256],120774:[[1008],256],120775:[[981],256],120776:[[1009],256],120777:[[982],256],120778:[[988],256],120779:[[989],256],120782:[[48],256],120783:[[49],256],120784:[[50],256],120785:[[51],256],120786:[[52],256],120787:[[53],256],120788:[[54],256],120789:[[55],256],120790:[[56],256],120791:[[57],256],120792:[[48],256],120793:[[49],256],120794:[[50],256],120795:[[51],256],120796:[[52],256],120797:[[53],256],120798:[[54],256],120799:[[55],256],120800:[[56],256],120801:[[57],256],120802:[[48],256],120803:[[49],256],120804:[[50],256],120805:[[51],256],120806:[[52],256],120807:[[53],256],120808:[[54],256],120809:[[55],256],120810:[[56],256],120811:[[57],256],120812:[[48],256],120813:[[49],256],120814:[[50],256],120815:[[51],256],120816:[[52],256],120817:[[53],256],120818:[[54],256],120819:[[55],256],120820:[[56],256],120821:[[57],256],120822:[[48],256],120823:[[49],256],120824:[[50],256],120825:[[51],256],120826:[[52],256],120827:[[53],256],120828:[[54],256],120829:[[55],256],120830:[[56],256],120831:[[57],256]},59392:{125136:[,220],125137:[,220],125138:[,220],125139:[,220],125140:[,220],125141:[,220],125142:[,220]},60928:{126464:[[1575],256],126465:[[1576],256],126466:[[1580],256],126467:[[1583],256],126469:[[1608],256],126470:[[1586],256],126471:[[1581],256],126472:[[1591],256],126473:[[1610],256],126474:[[1603],256],126475:[[1604],256],126476:[[1605],256],126477:[[1606],256],126478:[[1587],256],126479:[[1593],256],126480:[[1601],256],126481:[[1589],256],126482:[[1602],256],126483:[[1585],256],126484:[[1588],256],126485:[[1578],256],126486:[[1579],256],126487:[[1582],256],126488:[[1584],256],126489:[[1590],256],126490:[[1592],256],126491:[[1594],256],126492:[[1646],256],126493:[[1722],256],126494:[[1697],256],126495:[[1647],256],126497:[[1576],256],126498:[[1580],256],126500:[[1607],256],126503:[[1581],256],126505:[[1610],256],126506:[[1603],256],126507:[[1604],256],126508:[[1605],256],126509:[[1606],256],126510:[[1587],256],126511:[[1593],256],126512:[[1601],256],126513:[[1589],256],126514:[[1602],256],126516:[[1588],256],126517:[[1578],256],126518:[[1579],256],126519:[[1582],256],126521:[[1590],256],126523:[[1594],256],126530:[[1580],256],126535:[[1581],256],126537:[[1610],256],126539:[[1604],256],126541:[[1606],256],126542:[[1587],256],126543:[[1593],256],126545:[[1589],256],126546:[[1602],256],126548:[[1588],256],126551:[[1582],256],126553:[[1590],256],126555:[[1594],256],126557:[[1722],256],126559:[[1647],256],126561:[[1576],256],126562:[[1580],256],126564:[[1607],256],126567:[[1581],256],126568:[[1591],256],126569:[[1610],256],126570:[[1603],256],126572:[[1605],256],126573:[[1606],256],126574:[[1587],256],126575:[[1593],256],126576:[[1601],256],126577:[[1589],256],126578:[[1602],256],126580:[[1588],256],126581:[[1578],256],126582:[[1579],256],126583:[[1582],256],126585:[[1590],256],126586:[[1592],256],126587:[[1594],256],126588:[[1646],256],126590:[[1697],256],126592:[[1575],256],126593:[[1576],256],126594:[[1580],256],126595:[[1583],256],126596:[[1607],256],126597:[[1608],256],126598:[[1586],256],126599:[[1581],256],126600:[[1591],256],126601:[[1610],256],126603:[[1604],256],126604:[[1605],256],126605:[[1606],256],126606:[[1587],256],126607:[[1593],256],126608:[[1601],256],126609:[[1589],256],126610:[[1602],256],126611:[[1585],256],126612:[[1588],256],126613:[[1578],256],126614:[[1579],256],126615:[[1582],256],126616:[[1584],256],126617:[[1590],256],126618:[[1592],256],126619:[[1594],256],126625:[[1576],256],126626:[[1580],256],126627:[[1583],256],126629:[[1608],256],126630:[[1586],256],126631:[[1581],256],126632:[[1591],256],126633:[[1610],256],126635:[[1604],256],126636:[[1605],256],126637:[[1606],256],126638:[[1587],256],126639:[[1593],256],126640:[[1601],256],126641:[[1589],256],126642:[[1602],256],126643:[[1585],256],126644:[[1588],256],126645:[[1578],256],126646:[[1579],256],126647:[[1582],256],126648:[[1584],256],126649:[[1590],256],126650:[[1592],256],126651:[[1594],256]},61696:{127232:[[48,46],256],127233:[[48,44],256],127234:[[49,44],256],127235:[[50,44],256],127236:[[51,44],256],127237:[[52,44],256],127238:[[53,44],256],127239:[[54,44],256],127240:[[55,44],256],127241:[[56,44],256],127242:[[57,44],256],127248:[[40,65,41],256],127249:[[40,66,41],256],127250:[[40,67,41],256],127251:[[40,68,41],256],127252:[[40,69,41],256],127253:[[40,70,41],256],127254:[[40,71,41],256],127255:[[40,72,41],256],127256:[[40,73,41],256],127257:[[40,74,41],256],127258:[[40,75,41],256],127259:[[40,76,41],256],127260:[[40,77,41],256],127261:[[40,78,41],256],127262:[[40,79,41],256],127263:[[40,80,41],256],127264:[[40,81,41],256],127265:[[40,82,41],256],127266:[[40,83,41],256],127267:[[40,84,41],256],127268:[[40,85,41],256],127269:[[40,86,41],256],127270:[[40,87,41],256],127271:[[40,88,41],256],127272:[[40,89,41],256],127273:[[40,90,41],256],127274:[[12308,83,12309],256],127275:[[67],256],127276:[[82],256],127277:[[67,68],256],127278:[[87,90],256],127280:[[65],256],127281:[[66],256],127282:[[67],256],127283:[[68],256],127284:[[69],256],127285:[[70],256],127286:[[71],256],127287:[[72],256],127288:[[73],256],127289:[[74],256],127290:[[75],256],127291:[[76],256],127292:[[77],256],127293:[[78],256],127294:[[79],256],127295:[[80],256],127296:[[81],256],127297:[[82],256],127298:[[83],256],127299:[[84],256],127300:[[85],256],127301:[[86],256],127302:[[87],256],127303:[[88],256],127304:[[89],256],127305:[[90],256],127306:[[72,86],256],127307:[[77,86],256],127308:[[83,68],256],127309:[[83,83],256],127310:[[80,80,86],256],127311:[[87,67],256],127338:[[77,67],256],127339:[[77,68],256],127376:[[68,74],256]},61952:{127488:[[12411,12363],256],127489:[[12467,12467],256],127490:[[12469],256],127504:[[25163],256],127505:[[23383],256],127506:[[21452],256],127507:[[12487],256],127508:[[20108],256],127509:[[22810],256],127510:[[35299],256],127511:[[22825],256],127512:[[20132],256],127513:[[26144],256],127514:[[28961],256],127515:[[26009],256],127516:[[21069],256],127517:[[24460],256],127518:[[20877],256],127519:[[26032],256],127520:[[21021],256],127521:[[32066],256],127522:[[29983],256],127523:[[36009],256],127524:[[22768],256],127525:[[21561],256],127526:[[28436],256],127527:[[25237],256],127528:[[25429],256],127529:[[19968],256],127530:[[19977],256],127531:[[36938],256],127532:[[24038],256],127533:[[20013],256],127534:[[21491],256],127535:[[25351],256],127536:[[36208],256],127537:[[25171],256],127538:[[31105],256],127539:[[31354],256],127540:[[21512],256],127541:[[28288],256],127542:[[26377],256],127543:[[26376],256],127544:[[30003],256],127545:[[21106],256],127546:[[21942],256],127552:[[12308,26412,12309],256],127553:[[12308,19977,12309],256],127554:[[12308,20108,12309],256],127555:[[12308,23433,12309],256],127556:[[12308,28857,12309],256],127557:[[12308,25171,12309],256],127558:[[12308,30423,12309],256],127559:[[12308,21213,12309],256],127560:[[12308,25943,12309],256],127568:[[24471],256],127569:[[21487],256]},63488:{194560:[[20029]],194561:[[20024]],194562:[[20033]],194563:[[131362]],194564:[[20320]],194565:[[20398]],194566:[[20411]],194567:[[20482]],194568:[[20602]],194569:[[20633]],194570:[[20711]],194571:[[20687]],194572:[[13470]],194573:[[132666]],194574:[[20813]],194575:[[20820]],194576:[[20836]],194577:[[20855]],194578:[[132380]],194579:[[13497]],194580:[[20839]],194581:[[20877]],194582:[[132427]],194583:[[20887]],194584:[[20900]],194585:[[20172]],194586:[[20908]],194587:[[20917]],194588:[[168415]],194589:[[20981]],194590:[[20995]],194591:[[13535]],194592:[[21051]],194593:[[21062]],194594:[[21106]],194595:[[21111]],194596:[[13589]],194597:[[21191]],194598:[[21193]],194599:[[21220]],194600:[[21242]],194601:[[21253]],194602:[[21254]],194603:[[21271]],194604:[[21321]],194605:[[21329]],194606:[[21338]],194607:[[21363]],194608:[[21373]],194609:[[21375]],194610:[[21375]],194611:[[21375]],194612:[[133676]],194613:[[28784]],194614:[[21450]],194615:[[21471]],194616:[[133987]],194617:[[21483]],194618:[[21489]],194619:[[21510]],194620:[[21662]],194621:[[21560]],194622:[[21576]],194623:[[21608]],194624:[[21666]],194625:[[21750]],194626:[[21776]],194627:[[21843]],194628:[[21859]],194629:[[21892]],194630:[[21892]],194631:[[21913]],194632:[[21931]],194633:[[21939]],194634:[[21954]],194635:[[22294]],194636:[[22022]],194637:[[22295]],194638:[[22097]],194639:[[22132]],194640:[[20999]],194641:[[22766]],194642:[[22478]],194643:[[22516]],194644:[[22541]],194645:[[22411]],194646:[[22578]],194647:[[22577]],194648:[[22700]],194649:[[136420]],194650:[[22770]],194651:[[22775]],194652:[[22790]],194653:[[22810]],194654:[[22818]],194655:[[22882]],194656:[[136872]],194657:[[136938]],194658:[[23020]],194659:[[23067]],194660:[[23079]],194661:[[23e3]],194662:[[23142]],194663:[[14062]],194664:[[14076]],194665:[[23304]],194666:[[23358]],194667:[[23358]],194668:[[137672]],194669:[[23491]],194670:[[23512]],194671:[[23527]],194672:[[23539]],194673:[[138008]],194674:[[23551]],194675:[[23558]],194676:[[24403]],194677:[[23586]],194678:[[14209]],194679:[[23648]],194680:[[23662]],194681:[[23744]],194682:[[23693]],194683:[[138724]],194684:[[23875]],194685:[[138726]],194686:[[23918]],194687:[[23915]],194688:[[23932]],194689:[[24033]],194690:[[24034]],194691:[[14383]],194692:[[24061]],194693:[[24104]],194694:[[24125]],194695:[[24169]],194696:[[14434]],194697:[[139651]],194698:[[14460]],194699:[[24240]],194700:[[24243]],194701:[[24246]],194702:[[24266]],194703:[[172946]],194704:[[24318]],194705:[[140081]],194706:[[140081]],194707:[[33281]],194708:[[24354]],194709:[[24354]],194710:[[14535]],194711:[[144056]],194712:[[156122]],194713:[[24418]],194714:[[24427]],194715:[[14563]],194716:[[24474]],194717:[[24525]],194718:[[24535]],194719:[[24569]],194720:[[24705]],194721:[[14650]],194722:[[14620]],194723:[[24724]],194724:[[141012]],194725:[[24775]],194726:[[24904]],194727:[[24908]],194728:[[24910]],194729:[[24908]],194730:[[24954]],194731:[[24974]],194732:[[25010]],194733:[[24996]],194734:[[25007]],194735:[[25054]],194736:[[25074]],194737:[[25078]],194738:[[25104]],194739:[[25115]],194740:[[25181]],194741:[[25265]],194742:[[25300]],194743:[[25424]],194744:[[142092]],194745:[[25405]],194746:[[25340]],194747:[[25448]],194748:[[25475]],194749:[[25572]],194750:[[142321]],194751:[[25634]],194752:[[25541]],194753:[[25513]],194754:[[14894]],194755:[[25705]],194756:[[25726]],194757:[[25757]],194758:[[25719]],194759:[[14956]],194760:[[25935]],194761:[[25964]],194762:[[143370]],194763:[[26083]],194764:[[26360]],194765:[[26185]],194766:[[15129]],194767:[[26257]],194768:[[15112]],194769:[[15076]],194770:[[20882]],194771:[[20885]],194772:[[26368]],194773:[[26268]],194774:[[32941]],194775:[[17369]],194776:[[26391]],194777:[[26395]],194778:[[26401]],194779:[[26462]],194780:[[26451]],194781:[[144323]],194782:[[15177]],194783:[[26618]],194784:[[26501]],194785:[[26706]],194786:[[26757]],194787:[[144493]],194788:[[26766]],194789:[[26655]],194790:[[26900]],194791:[[15261]],194792:[[26946]],194793:[[27043]],194794:[[27114]],194795:[[27304]],194796:[[145059]],194797:[[27355]],194798:[[15384]],194799:[[27425]],194800:[[145575]],194801:[[27476]],194802:[[15438]],194803:[[27506]],194804:[[27551]],194805:[[27578]],194806:[[27579]],194807:[[146061]],194808:[[138507]],194809:[[146170]],194810:[[27726]],194811:[[146620]],194812:[[27839]],194813:[[27853]],194814:[[27751]],194815:[[27926]]},63744:{63744:[[35912]],63745:[[26356]],63746:[[36554]],63747:[[36040]],63748:[[28369]],63749:[[20018]],63750:[[21477]],63751:[[40860]],63752:[[40860]],63753:[[22865]],63754:[[37329]],63755:[[21895]],63756:[[22856]],63757:[[25078]],63758:[[30313]],63759:[[32645]],63760:[[34367]],63761:[[34746]],63762:[[35064]],63763:[[37007]],63764:[[27138]],63765:[[27931]],63766:[[28889]],63767:[[29662]],63768:[[33853]],63769:[[37226]],63770:[[39409]],63771:[[20098]],63772:[[21365]],63773:[[27396]],63774:[[29211]],63775:[[34349]],63776:[[40478]],63777:[[23888]],63778:[[28651]],63779:[[34253]],63780:[[35172]],63781:[[25289]],63782:[[33240]],63783:[[34847]],63784:[[24266]],63785:[[26391]],63786:[[28010]],63787:[[29436]],63788:[[37070]],63789:[[20358]],63790:[[20919]],63791:[[21214]],63792:[[25796]],63793:[[27347]],63794:[[29200]],63795:[[30439]],63796:[[32769]],63797:[[34310]],63798:[[34396]],63799:[[36335]],63800:[[38706]],63801:[[39791]],63802:[[40442]],63803:[[30860]],63804:[[31103]],63805:[[32160]],63806:[[33737]],63807:[[37636]],63808:[[40575]],63809:[[35542]],63810:[[22751]],63811:[[24324]],63812:[[31840]],63813:[[32894]],63814:[[29282]],63815:[[30922]],63816:[[36034]],63817:[[38647]],63818:[[22744]],63819:[[23650]],63820:[[27155]],63821:[[28122]],63822:[[28431]],63823:[[32047]],63824:[[32311]],63825:[[38475]],63826:[[21202]],63827:[[32907]],63828:[[20956]],63829:[[20940]],63830:[[31260]],63831:[[32190]],63832:[[33777]],63833:[[38517]],63834:[[35712]],63835:[[25295]],63836:[[27138]],63837:[[35582]],63838:[[20025]],63839:[[23527]],63840:[[24594]],63841:[[29575]],63842:[[30064]],63843:[[21271]],63844:[[30971]],63845:[[20415]],63846:[[24489]],63847:[[19981]],63848:[[27852]],63849:[[25976]],63850:[[32034]],63851:[[21443]],63852:[[22622]],63853:[[30465]],63854:[[33865]],63855:[[35498]],63856:[[27578]],63857:[[36784]],63858:[[27784]],63859:[[25342]],63860:[[33509]],63861:[[25504]],63862:[[30053]],63863:[[20142]],63864:[[20841]],63865:[[20937]],63866:[[26753]],63867:[[31975]],63868:[[33391]],63869:[[35538]],63870:[[37327]],63871:[[21237]],63872:[[21570]],63873:[[22899]],63874:[[24300]],63875:[[26053]],63876:[[28670]],63877:[[31018]],63878:[[38317]],63879:[[39530]],63880:[[40599]],63881:[[40654]],63882:[[21147]],63883:[[26310]],63884:[[27511]],63885:[[36706]],63886:[[24180]],63887:[[24976]],63888:[[25088]],63889:[[25754]],63890:[[28451]],63891:[[29001]],63892:[[29833]],63893:[[31178]],63894:[[32244]],63895:[[32879]],63896:[[36646]],63897:[[34030]],63898:[[36899]],63899:[[37706]],63900:[[21015]],63901:[[21155]],63902:[[21693]],63903:[[28872]],63904:[[35010]],63905:[[35498]],63906:[[24265]],63907:[[24565]],63908:[[25467]],63909:[[27566]],63910:[[31806]],63911:[[29557]],63912:[[20196]],63913:[[22265]],63914:[[23527]],63915:[[23994]],63916:[[24604]],63917:[[29618]],63918:[[29801]],63919:[[32666]],63920:[[32838]],63921:[[37428]],63922:[[38646]],63923:[[38728]],63924:[[38936]],63925:[[20363]],63926:[[31150]],63927:[[37300]],63928:[[38584]],63929:[[24801]],63930:[[20102]],63931:[[20698]],63932:[[23534]],63933:[[23615]],63934:[[26009]],63935:[[27138]],63936:[[29134]],63937:[[30274]],63938:[[34044]],63939:[[36988]],63940:[[40845]],63941:[[26248]],63942:[[38446]],63943:[[21129]],63944:[[26491]],63945:[[26611]],63946:[[27969]],63947:[[28316]],63948:[[29705]],63949:[[30041]],63950:[[30827]],63951:[[32016]],63952:[[39006]],63953:[[20845]],63954:[[25134]],63955:[[38520]],63956:[[20523]],63957:[[23833]],63958:[[28138]],63959:[[36650]],63960:[[24459]],63961:[[24900]],63962:[[26647]],63963:[[29575]],63964:[[38534]],63965:[[21033]],63966:[[21519]],63967:[[23653]],63968:[[26131]],63969:[[26446]],63970:[[26792]],63971:[[27877]],63972:[[29702]],63973:[[30178]],63974:[[32633]],63975:[[35023]],63976:[[35041]],63977:[[37324]],63978:[[38626]],63979:[[21311]],63980:[[28346]],63981:[[21533]],63982:[[29136]],63983:[[29848]],63984:[[34298]],63985:[[38563]],63986:[[40023]],63987:[[40607]],63988:[[26519]],63989:[[28107]],63990:[[33256]],63991:[[31435]],63992:[[31520]],63993:[[31890]],63994:[[29376]],63995:[[28825]],63996:[[35672]],63997:[[20160]],63998:[[33590]],63999:[[21050]],194816:[[27966]],194817:[[28023]],194818:[[27969]],194819:[[28009]],194820:[[28024]],194821:[[28037]],194822:[[146718]],194823:[[27956]],194824:[[28207]],194825:[[28270]],194826:[[15667]],194827:[[28363]],194828:[[28359]],194829:[[147153]],194830:[[28153]],194831:[[28526]],194832:[[147294]],194833:[[147342]],194834:[[28614]],194835:[[28729]],194836:[[28702]],194837:[[28699]],194838:[[15766]],194839:[[28746]],194840:[[28797]],194841:[[28791]],194842:[[28845]],194843:[[132389]],194844:[[28997]],194845:[[148067]],194846:[[29084]],194847:[[148395]],194848:[[29224]],194849:[[29237]],194850:[[29264]],194851:[[149e3]],194852:[[29312]],194853:[[29333]],194854:[[149301]],194855:[[149524]],194856:[[29562]],194857:[[29579]],194858:[[16044]],194859:[[29605]],194860:[[16056]],194861:[[16056]],194862:[[29767]],194863:[[29788]],194864:[[29809]],194865:[[29829]],194866:[[29898]],194867:[[16155]],194868:[[29988]],194869:[[150582]],194870:[[30014]],194871:[[150674]],194872:[[30064]],194873:[[139679]],194874:[[30224]],194875:[[151457]],194876:[[151480]],194877:[[151620]],194878:[[16380]],194879:[[16392]],194880:[[30452]],194881:[[151795]],194882:[[151794]],194883:[[151833]],194884:[[151859]],194885:[[30494]],194886:[[30495]],194887:[[30495]],194888:[[30538]],194889:[[16441]],194890:[[30603]],194891:[[16454]],194892:[[16534]],194893:[[152605]],194894:[[30798]],194895:[[30860]],194896:[[30924]],194897:[[16611]],194898:[[153126]],194899:[[31062]],194900:[[153242]],194901:[[153285]],194902:[[31119]],194903:[[31211]],194904:[[16687]],194905:[[31296]],194906:[[31306]],194907:[[31311]],194908:[[153980]],194909:[[154279]],194910:[[154279]],194911:[[31470]],194912:[[16898]],194913:[[154539]],194914:[[31686]],194915:[[31689]],194916:[[16935]],194917:[[154752]],194918:[[31954]],194919:[[17056]],194920:[[31976]],194921:[[31971]],194922:[[32e3]],194923:[[155526]],194924:[[32099]],194925:[[17153]],194926:[[32199]],194927:[[32258]],194928:[[32325]],194929:[[17204]],194930:[[156200]],194931:[[156231]],194932:[[17241]],194933:[[156377]],194934:[[32634]],194935:[[156478]],194936:[[32661]],194937:[[32762]],194938:[[32773]],194939:[[156890]],194940:[[156963]],194941:[[32864]],194942:[[157096]],194943:[[32880]],194944:[[144223]],194945:[[17365]],194946:[[32946]],194947:[[33027]],194948:[[17419]],194949:[[33086]],194950:[[23221]],194951:[[157607]],194952:[[157621]],194953:[[144275]],194954:[[144284]],194955:[[33281]],194956:[[33284]],194957:[[36766]],194958:[[17515]],194959:[[33425]],194960:[[33419]],194961:[[33437]],194962:[[21171]],194963:[[33457]],194964:[[33459]],194965:[[33469]],194966:[[33510]],194967:[[158524]],194968:[[33509]],194969:[[33565]],194970:[[33635]],194971:[[33709]],194972:[[33571]],194973:[[33725]],194974:[[33767]],194975:[[33879]],194976:[[33619]],194977:[[33738]],194978:[[33740]],194979:[[33756]],194980:[[158774]],194981:[[159083]],194982:[[158933]],194983:[[17707]],194984:[[34033]],194985:[[34035]],194986:[[34070]],194987:[[160714]],194988:[[34148]],194989:[[159532]],194990:[[17757]],194991:[[17761]],194992:[[159665]],194993:[[159954]],194994:[[17771]],194995:[[34384]],194996:[[34396]],194997:[[34407]],194998:[[34409]],194999:[[34473]],195e3:[[34440]],195001:[[34574]],195002:[[34530]],195003:[[34681]],195004:[[34600]],195005:[[34667]],195006:[[34694]],195007:[[17879]],195008:[[34785]],195009:[[34817]],195010:[[17913]],195011:[[34912]],195012:[[34915]],195013:[[161383]],195014:[[35031]],195015:[[35038]],195016:[[17973]],195017:[[35066]],195018:[[13499]],195019:[[161966]],195020:[[162150]],195021:[[18110]],195022:[[18119]],195023:[[35488]],195024:[[35565]],195025:[[35722]],195026:[[35925]],195027:[[162984]],195028:[[36011]],195029:[[36033]],195030:[[36123]],195031:[[36215]],195032:[[163631]],195033:[[133124]],195034:[[36299]],195035:[[36284]],195036:[[36336]],195037:[[133342]],195038:[[36564]],195039:[[36664]],195040:[[165330]],195041:[[165357]],195042:[[37012]],195043:[[37105]],195044:[[37137]],195045:[[165678]],195046:[[37147]],195047:[[37432]],195048:[[37591]],195049:[[37592]],195050:[[37500]],195051:[[37881]],195052:[[37909]],195053:[[166906]],195054:[[38283]],195055:[[18837]],195056:[[38327]],195057:[[167287]],195058:[[18918]],195059:[[38595]],195060:[[23986]],195061:[[38691]],195062:[[168261]],195063:[[168474]],195064:[[19054]],195065:[[19062]],195066:[[38880]],195067:[[168970]],195068:[[19122]],195069:[[169110]],195070:[[38923]],195071:[[38923]]},64e3:{64e3:[[20999]],64001:[[24230]],64002:[[25299]],64003:[[31958]],64004:[[23429]],64005:[[27934]],64006:[[26292]],64007:[[36667]],64008:[[34892]],64009:[[38477]],64010:[[35211]],64011:[[24275]],64012:[[20800]],64013:[[21952]],64016:[[22618]],64018:[[26228]],64021:[[20958]],64022:[[29482]],64023:[[30410]],64024:[[31036]],64025:[[31070]],64026:[[31077]],64027:[[31119]],64028:[[38742]],64029:[[31934]],64030:[[32701]],64032:[[34322]],64034:[[35576]],64037:[[36920]],64038:[[37117]],64042:[[39151]],64043:[[39164]],64044:[[39208]],64045:[[40372]],64046:[[37086]],64047:[[38583]],64048:[[20398]],64049:[[20711]],64050:[[20813]],64051:[[21193]],64052:[[21220]],64053:[[21329]],64054:[[21917]],64055:[[22022]],64056:[[22120]],64057:[[22592]],64058:[[22696]],64059:[[23652]],64060:[[23662]],64061:[[24724]],64062:[[24936]],64063:[[24974]],64064:[[25074]],64065:[[25935]],64066:[[26082]],64067:[[26257]],64068:[[26757]],64069:[[28023]],64070:[[28186]],64071:[[28450]],64072:[[29038]],64073:[[29227]],64074:[[29730]],64075:[[30865]],64076:[[31038]],64077:[[31049]],64078:[[31048]],64079:[[31056]],64080:[[31062]],64081:[[31069]],64082:[[31117]],64083:[[31118]],64084:[[31296]],64085:[[31361]],64086:[[31680]],64087:[[32244]],64088:[[32265]],64089:[[32321]],64090:[[32626]],64091:[[32773]],64092:[[33261]],64093:[[33401]],
64094:[[33401]],64095:[[33879]],64096:[[35088]],64097:[[35222]],64098:[[35585]],64099:[[35641]],64100:[[36051]],64101:[[36104]],64102:[[36790]],64103:[[36920]],64104:[[38627]],64105:[[38911]],64106:[[38971]],64107:[[24693]],64108:[[148206]],64109:[[33304]],64112:[[20006]],64113:[[20917]],64114:[[20840]],64115:[[20352]],64116:[[20805]],64117:[[20864]],64118:[[21191]],64119:[[21242]],64120:[[21917]],64121:[[21845]],64122:[[21913]],64123:[[21986]],64124:[[22618]],64125:[[22707]],64126:[[22852]],64127:[[22868]],64128:[[23138]],64129:[[23336]],64130:[[24274]],64131:[[24281]],64132:[[24425]],64133:[[24493]],64134:[[24792]],64135:[[24910]],64136:[[24840]],64137:[[24974]],64138:[[24928]],64139:[[25074]],64140:[[25140]],64141:[[25540]],64142:[[25628]],64143:[[25682]],64144:[[25942]],64145:[[26228]],64146:[[26391]],64147:[[26395]],64148:[[26454]],64149:[[27513]],64150:[[27578]],64151:[[27969]],64152:[[28379]],64153:[[28363]],64154:[[28450]],64155:[[28702]],64156:[[29038]],64157:[[30631]],64158:[[29237]],64159:[[29359]],64160:[[29482]],64161:[[29809]],64162:[[29958]],64163:[[30011]],64164:[[30237]],64165:[[30239]],64166:[[30410]],64167:[[30427]],64168:[[30452]],64169:[[30538]],64170:[[30528]],64171:[[30924]],64172:[[31409]],64173:[[31680]],64174:[[31867]],64175:[[32091]],64176:[[32244]],64177:[[32574]],64178:[[32773]],64179:[[33618]],64180:[[33775]],64181:[[34681]],64182:[[35137]],64183:[[35206]],64184:[[35222]],64185:[[35519]],64186:[[35576]],64187:[[35531]],64188:[[35585]],64189:[[35582]],64190:[[35565]],64191:[[35641]],64192:[[35722]],64193:[[36104]],64194:[[36664]],64195:[[36978]],64196:[[37273]],64197:[[37494]],64198:[[38524]],64199:[[38627]],64200:[[38742]],64201:[[38875]],64202:[[38911]],64203:[[38923]],64204:[[38971]],64205:[[39698]],64206:[[40860]],64207:[[141386]],64208:[[141380]],64209:[[144341]],64210:[[15261]],64211:[[16408]],64212:[[16441]],64213:[[152137]],64214:[[154832]],64215:[[163539]],64216:[[40771]],64217:[[40846]],195072:[[38953]],195073:[[169398]],195074:[[39138]],195075:[[19251]],195076:[[39209]],195077:[[39335]],195078:[[39362]],195079:[[39422]],195080:[[19406]],195081:[[170800]],195082:[[39698]],195083:[[4e4]],195084:[[40189]],195085:[[19662]],195086:[[19693]],195087:[[40295]],195088:[[172238]],195089:[[19704]],195090:[[172293]],195091:[[172558]],195092:[[172689]],195093:[[40635]],195094:[[19798]],195095:[[40697]],195096:[[40702]],195097:[[40709]],195098:[[40719]],195099:[[40726]],195100:[[40763]],195101:[[173568]]},64256:{64256:[[102,102],256],64257:[[102,105],256],64258:[[102,108],256],64259:[[102,102,105],256],64260:[[102,102,108],256],64261:[[383,116],256],64262:[[115,116],256],64275:[[1396,1398],256],64276:[[1396,1381],256],64277:[[1396,1387],256],64278:[[1406,1398],256],64279:[[1396,1389],256],64285:[[1497,1460],512],64286:[,26],64287:[[1522,1463],512],64288:[[1506],256],64289:[[1488],256],64290:[[1491],256],64291:[[1492],256],64292:[[1499],256],64293:[[1500],256],64294:[[1501],256],64295:[[1512],256],64296:[[1514],256],64297:[[43],256],64298:[[1513,1473],512],64299:[[1513,1474],512],64300:[[64329,1473],512],64301:[[64329,1474],512],64302:[[1488,1463],512],64303:[[1488,1464],512],64304:[[1488,1468],512],64305:[[1489,1468],512],64306:[[1490,1468],512],64307:[[1491,1468],512],64308:[[1492,1468],512],64309:[[1493,1468],512],64310:[[1494,1468],512],64312:[[1496,1468],512],64313:[[1497,1468],512],64314:[[1498,1468],512],64315:[[1499,1468],512],64316:[[1500,1468],512],64318:[[1502,1468],512],64320:[[1504,1468],512],64321:[[1505,1468],512],64323:[[1507,1468],512],64324:[[1508,1468],512],64326:[[1510,1468],512],64327:[[1511,1468],512],64328:[[1512,1468],512],64329:[[1513,1468],512],64330:[[1514,1468],512],64331:[[1493,1465],512],64332:[[1489,1471],512],64333:[[1499,1471],512],64334:[[1508,1471],512],64335:[[1488,1500],256],64336:[[1649],256],64337:[[1649],256],64338:[[1659],256],64339:[[1659],256],64340:[[1659],256],64341:[[1659],256],64342:[[1662],256],64343:[[1662],256],64344:[[1662],256],64345:[[1662],256],64346:[[1664],256],64347:[[1664],256],64348:[[1664],256],64349:[[1664],256],64350:[[1658],256],64351:[[1658],256],64352:[[1658],256],64353:[[1658],256],64354:[[1663],256],64355:[[1663],256],64356:[[1663],256],64357:[[1663],256],64358:[[1657],256],64359:[[1657],256],64360:[[1657],256],64361:[[1657],256],64362:[[1700],256],64363:[[1700],256],64364:[[1700],256],64365:[[1700],256],64366:[[1702],256],64367:[[1702],256],64368:[[1702],256],64369:[[1702],256],64370:[[1668],256],64371:[[1668],256],64372:[[1668],256],64373:[[1668],256],64374:[[1667],256],64375:[[1667],256],64376:[[1667],256],64377:[[1667],256],64378:[[1670],256],64379:[[1670],256],64380:[[1670],256],64381:[[1670],256],64382:[[1671],256],64383:[[1671],256],64384:[[1671],256],64385:[[1671],256],64386:[[1677],256],64387:[[1677],256],64388:[[1676],256],64389:[[1676],256],64390:[[1678],256],64391:[[1678],256],64392:[[1672],256],64393:[[1672],256],64394:[[1688],256],64395:[[1688],256],64396:[[1681],256],64397:[[1681],256],64398:[[1705],256],64399:[[1705],256],64400:[[1705],256],64401:[[1705],256],64402:[[1711],256],64403:[[1711],256],64404:[[1711],256],64405:[[1711],256],64406:[[1715],256],64407:[[1715],256],64408:[[1715],256],64409:[[1715],256],64410:[[1713],256],64411:[[1713],256],64412:[[1713],256],64413:[[1713],256],64414:[[1722],256],64415:[[1722],256],64416:[[1723],256],64417:[[1723],256],64418:[[1723],256],64419:[[1723],256],64420:[[1728],256],64421:[[1728],256],64422:[[1729],256],64423:[[1729],256],64424:[[1729],256],64425:[[1729],256],64426:[[1726],256],64427:[[1726],256],64428:[[1726],256],64429:[[1726],256],64430:[[1746],256],64431:[[1746],256],64432:[[1747],256],64433:[[1747],256],64467:[[1709],256],64468:[[1709],256],64469:[[1709],256],64470:[[1709],256],64471:[[1735],256],64472:[[1735],256],64473:[[1734],256],64474:[[1734],256],64475:[[1736],256],64476:[[1736],256],64477:[[1655],256],64478:[[1739],256],64479:[[1739],256],64480:[[1733],256],64481:[[1733],256],64482:[[1737],256],64483:[[1737],256],64484:[[1744],256],64485:[[1744],256],64486:[[1744],256],64487:[[1744],256],64488:[[1609],256],64489:[[1609],256],64490:[[1574,1575],256],64491:[[1574,1575],256],64492:[[1574,1749],256],64493:[[1574,1749],256],64494:[[1574,1608],256],64495:[[1574,1608],256],64496:[[1574,1735],256],64497:[[1574,1735],256],64498:[[1574,1734],256],64499:[[1574,1734],256],64500:[[1574,1736],256],64501:[[1574,1736],256],64502:[[1574,1744],256],64503:[[1574,1744],256],64504:[[1574,1744],256],64505:[[1574,1609],256],64506:[[1574,1609],256],64507:[[1574,1609],256],64508:[[1740],256],64509:[[1740],256],64510:[[1740],256],64511:[[1740],256]},64512:{64512:[[1574,1580],256],64513:[[1574,1581],256],64514:[[1574,1605],256],64515:[[1574,1609],256],64516:[[1574,1610],256],64517:[[1576,1580],256],64518:[[1576,1581],256],64519:[[1576,1582],256],64520:[[1576,1605],256],64521:[[1576,1609],256],64522:[[1576,1610],256],64523:[[1578,1580],256],64524:[[1578,1581],256],64525:[[1578,1582],256],64526:[[1578,1605],256],64527:[[1578,1609],256],64528:[[1578,1610],256],64529:[[1579,1580],256],64530:[[1579,1605],256],64531:[[1579,1609],256],64532:[[1579,1610],256],64533:[[1580,1581],256],64534:[[1580,1605],256],64535:[[1581,1580],256],64536:[[1581,1605],256],64537:[[1582,1580],256],64538:[[1582,1581],256],64539:[[1582,1605],256],64540:[[1587,1580],256],64541:[[1587,1581],256],64542:[[1587,1582],256],64543:[[1587,1605],256],64544:[[1589,1581],256],64545:[[1589,1605],256],64546:[[1590,1580],256],64547:[[1590,1581],256],64548:[[1590,1582],256],64549:[[1590,1605],256],64550:[[1591,1581],256],64551:[[1591,1605],256],64552:[[1592,1605],256],64553:[[1593,1580],256],64554:[[1593,1605],256],64555:[[1594,1580],256],64556:[[1594,1605],256],64557:[[1601,1580],256],64558:[[1601,1581],256],64559:[[1601,1582],256],64560:[[1601,1605],256],64561:[[1601,1609],256],64562:[[1601,1610],256],64563:[[1602,1581],256],64564:[[1602,1605],256],64565:[[1602,1609],256],64566:[[1602,1610],256],64567:[[1603,1575],256],64568:[[1603,1580],256],64569:[[1603,1581],256],64570:[[1603,1582],256],64571:[[1603,1604],256],64572:[[1603,1605],256],64573:[[1603,1609],256],64574:[[1603,1610],256],64575:[[1604,1580],256],64576:[[1604,1581],256],64577:[[1604,1582],256],64578:[[1604,1605],256],64579:[[1604,1609],256],64580:[[1604,1610],256],64581:[[1605,1580],256],64582:[[1605,1581],256],64583:[[1605,1582],256],64584:[[1605,1605],256],64585:[[1605,1609],256],64586:[[1605,1610],256],64587:[[1606,1580],256],64588:[[1606,1581],256],64589:[[1606,1582],256],64590:[[1606,1605],256],64591:[[1606,1609],256],64592:[[1606,1610],256],64593:[[1607,1580],256],64594:[[1607,1605],256],64595:[[1607,1609],256],64596:[[1607,1610],256],64597:[[1610,1580],256],64598:[[1610,1581],256],64599:[[1610,1582],256],64600:[[1610,1605],256],64601:[[1610,1609],256],64602:[[1610,1610],256],64603:[[1584,1648],256],64604:[[1585,1648],256],64605:[[1609,1648],256],64606:[[32,1612,1617],256],64607:[[32,1613,1617],256],64608:[[32,1614,1617],256],64609:[[32,1615,1617],256],64610:[[32,1616,1617],256],64611:[[32,1617,1648],256],64612:[[1574,1585],256],64613:[[1574,1586],256],64614:[[1574,1605],256],64615:[[1574,1606],256],64616:[[1574,1609],256],64617:[[1574,1610],256],64618:[[1576,1585],256],64619:[[1576,1586],256],64620:[[1576,1605],256],64621:[[1576,1606],256],64622:[[1576,1609],256],64623:[[1576,1610],256],64624:[[1578,1585],256],64625:[[1578,1586],256],64626:[[1578,1605],256],64627:[[1578,1606],256],64628:[[1578,1609],256],64629:[[1578,1610],256],64630:[[1579,1585],256],64631:[[1579,1586],256],64632:[[1579,1605],256],64633:[[1579,1606],256],64634:[[1579,1609],256],64635:[[1579,1610],256],64636:[[1601,1609],256],64637:[[1601,1610],256],64638:[[1602,1609],256],64639:[[1602,1610],256],64640:[[1603,1575],256],64641:[[1603,1604],256],64642:[[1603,1605],256],64643:[[1603,1609],256],64644:[[1603,1610],256],64645:[[1604,1605],256],64646:[[1604,1609],256],64647:[[1604,1610],256],64648:[[1605,1575],256],64649:[[1605,1605],256],64650:[[1606,1585],256],64651:[[1606,1586],256],64652:[[1606,1605],256],64653:[[1606,1606],256],64654:[[1606,1609],256],64655:[[1606,1610],256],64656:[[1609,1648],256],64657:[[1610,1585],256],64658:[[1610,1586],256],64659:[[1610,1605],256],64660:[[1610,1606],256],64661:[[1610,1609],256],64662:[[1610,1610],256],64663:[[1574,1580],256],64664:[[1574,1581],256],64665:[[1574,1582],256],64666:[[1574,1605],256],64667:[[1574,1607],256],64668:[[1576,1580],256],64669:[[1576,1581],256],64670:[[1576,1582],256],64671:[[1576,1605],256],64672:[[1576,1607],256],64673:[[1578,1580],256],64674:[[1578,1581],256],64675:[[1578,1582],256],64676:[[1578,1605],256],64677:[[1578,1607],256],64678:[[1579,1605],256],64679:[[1580,1581],256],64680:[[1580,1605],256],64681:[[1581,1580],256],64682:[[1581,1605],256],64683:[[1582,1580],256],64684:[[1582,1605],256],64685:[[1587,1580],256],64686:[[1587,1581],256],64687:[[1587,1582],256],64688:[[1587,1605],256],64689:[[1589,1581],256],64690:[[1589,1582],256],64691:[[1589,1605],256],64692:[[1590,1580],256],64693:[[1590,1581],256],64694:[[1590,1582],256],64695:[[1590,1605],256],64696:[[1591,1581],256],64697:[[1592,1605],256],64698:[[1593,1580],256],64699:[[1593,1605],256],64700:[[1594,1580],256],64701:[[1594,1605],256],64702:[[1601,1580],256],64703:[[1601,1581],256],64704:[[1601,1582],256],64705:[[1601,1605],256],64706:[[1602,1581],256],64707:[[1602,1605],256],64708:[[1603,1580],256],64709:[[1603,1581],256],64710:[[1603,1582],256],64711:[[1603,1604],256],64712:[[1603,1605],256],64713:[[1604,1580],256],64714:[[1604,1581],256],64715:[[1604,1582],256],64716:[[1604,1605],256],64717:[[1604,1607],256],64718:[[1605,1580],256],64719:[[1605,1581],256],64720:[[1605,1582],256],64721:[[1605,1605],256],64722:[[1606,1580],256],64723:[[1606,1581],256],64724:[[1606,1582],256],64725:[[1606,1605],256],64726:[[1606,1607],256],64727:[[1607,1580],256],64728:[[1607,1605],256],64729:[[1607,1648],256],64730:[[1610,1580],256],64731:[[1610,1581],256],64732:[[1610,1582],256],64733:[[1610,1605],256],64734:[[1610,1607],256],64735:[[1574,1605],256],64736:[[1574,1607],256],64737:[[1576,1605],256],64738:[[1576,1607],256],64739:[[1578,1605],256],64740:[[1578,1607],256],64741:[[1579,1605],256],64742:[[1579,1607],256],64743:[[1587,1605],256],64744:[[1587,1607],256],64745:[[1588,1605],256],64746:[[1588,1607],256],64747:[[1603,1604],256],64748:[[1603,1605],256],64749:[[1604,1605],256],64750:[[1606,1605],256],64751:[[1606,1607],256],64752:[[1610,1605],256],64753:[[1610,1607],256],64754:[[1600,1614,1617],256],64755:[[1600,1615,1617],256],64756:[[1600,1616,1617],256],64757:[[1591,1609],256],64758:[[1591,1610],256],64759:[[1593,1609],256],64760:[[1593,1610],256],64761:[[1594,1609],256],64762:[[1594,1610],256],64763:[[1587,1609],256],64764:[[1587,1610],256],64765:[[1588,1609],256],64766:[[1588,1610],256],64767:[[1581,1609],256]},64768:{64768:[[1581,1610],256],64769:[[1580,1609],256],64770:[[1580,1610],256],64771:[[1582,1609],256],64772:[[1582,1610],256],64773:[[1589,1609],256],64774:[[1589,1610],256],64775:[[1590,1609],256],64776:[[1590,1610],256],64777:[[1588,1580],256],64778:[[1588,1581],256],64779:[[1588,1582],256],64780:[[1588,1605],256],64781:[[1588,1585],256],64782:[[1587,1585],256],64783:[[1589,1585],256],64784:[[1590,1585],256],64785:[[1591,1609],256],64786:[[1591,1610],256],64787:[[1593,1609],256],64788:[[1593,1610],256],64789:[[1594,1609],256],64790:[[1594,1610],256],64791:[[1587,1609],256],64792:[[1587,1610],256],64793:[[1588,1609],256],64794:[[1588,1610],256],64795:[[1581,1609],256],64796:[[1581,1610],256],64797:[[1580,1609],256],64798:[[1580,1610],256],64799:[[1582,1609],256],64800:[[1582,1610],256],64801:[[1589,1609],256],64802:[[1589,1610],256],64803:[[1590,1609],256],64804:[[1590,1610],256],64805:[[1588,1580],256],64806:[[1588,1581],256],64807:[[1588,1582],256],64808:[[1588,1605],256],64809:[[1588,1585],256],64810:[[1587,1585],256],64811:[[1589,1585],256],64812:[[1590,1585],256],64813:[[1588,1580],256],64814:[[1588,1581],256],64815:[[1588,1582],256],64816:[[1588,1605],256],64817:[[1587,1607],256],64818:[[1588,1607],256],64819:[[1591,1605],256],64820:[[1587,1580],256],64821:[[1587,1581],256],64822:[[1587,1582],256],64823:[[1588,1580],256],64824:[[1588,1581],256],64825:[[1588,1582],256],64826:[[1591,1605],256],64827:[[1592,1605],256],64828:[[1575,1611],256],64829:[[1575,1611],256],64848:[[1578,1580,1605],256],64849:[[1578,1581,1580],256],64850:[[1578,1581,1580],256],64851:[[1578,1581,1605],256],64852:[[1578,1582,1605],256],64853:[[1578,1605,1580],256],64854:[[1578,1605,1581],256],64855:[[1578,1605,1582],256],64856:[[1580,1605,1581],256],64857:[[1580,1605,1581],256],64858:[[1581,1605,1610],256],64859:[[1581,1605,1609],256],64860:[[1587,1581,1580],256],64861:[[1587,1580,1581],256],64862:[[1587,1580,1609],256],64863:[[1587,1605,1581],256],64864:[[1587,1605,1581],256],64865:[[1587,1605,1580],256],64866:[[1587,1605,1605],256],64867:[[1587,1605,1605],256],64868:[[1589,1581,1581],256],64869:[[1589,1581,1581],256],64870:[[1589,1605,1605],256],64871:[[1588,1581,1605],256],64872:[[1588,1581,1605],256],64873:[[1588,1580,1610],256],64874:[[1588,1605,1582],256],64875:[[1588,1605,1582],256],64876:[[1588,1605,1605],256],64877:[[1588,1605,1605],256],64878:[[1590,1581,1609],256],64879:[[1590,1582,1605],256],64880:[[1590,1582,1605],256],64881:[[1591,1605,1581],256],64882:[[1591,1605,1581],256],64883:[[1591,1605,1605],256],64884:[[1591,1605,1610],256],64885:[[1593,1580,1605],256],64886:[[1593,1605,1605],256],64887:[[1593,1605,1605],256],64888:[[1593,1605,1609],256],64889:[[1594,1605,1605],256],64890:[[1594,1605,1610],256],64891:[[1594,1605,1609],256],64892:[[1601,1582,1605],256],64893:[[1601,1582,1605],256],64894:[[1602,1605,1581],256],64895:[[1602,1605,1605],256],64896:[[1604,1581,1605],256],64897:[[1604,1581,1610],256],64898:[[1604,1581,1609],256],64899:[[1604,1580,1580],256],64900:[[1604,1580,1580],256],64901:[[1604,1582,1605],256],64902:[[1604,1582,1605],256],64903:[[1604,1605,1581],256],64904:[[1604,1605,1581],256],64905:[[1605,1581,1580],256],64906:[[1605,1581,1605],256],64907:[[1605,1581,1610],256],64908:[[1605,1580,1581],256],64909:[[1605,1580,1605],256],64910:[[1605,1582,1580],256],64911:[[1605,1582,1605],256],64914:[[1605,1580,1582],256],64915:[[1607,1605,1580],256],64916:[[1607,1605,1605],256],64917:[[1606,1581,1605],256],64918:[[1606,1581,1609],256],64919:[[1606,1580,1605],256],64920:[[1606,1580,1605],256],64921:[[1606,1580,1609],256],64922:[[1606,1605,1610],256],64923:[[1606,1605,1609],256],64924:[[1610,1605,1605],256],64925:[[1610,1605,1605],256],64926:[[1576,1582,1610],256],64927:[[1578,1580,1610],256],64928:[[1578,1580,1609],256],64929:[[1578,1582,1610],256],64930:[[1578,1582,1609],256],64931:[[1578,1605,1610],256],64932:[[1578,1605,1609],256],64933:[[1580,1605,1610],256],64934:[[1580,1581,1609],256],64935:[[1580,1605,1609],256],64936:[[1587,1582,1609],256],64937:[[1589,1581,1610],256],64938:[[1588,1581,1610],256],64939:[[1590,1581,1610],256],64940:[[1604,1580,1610],256],64941:[[1604,1605,1610],256],64942:[[1610,1581,1610],256],64943:[[1610,1580,1610],256],64944:[[1610,1605,1610],256],64945:[[1605,1605,1610],256],64946:[[1602,1605,1610],256],64947:[[1606,1581,1610],256],64948:[[1602,1605,1581],256],64949:[[1604,1581,1605],256],64950:[[1593,1605,1610],256],64951:[[1603,1605,1610],256],64952:[[1606,1580,1581],256],64953:[[1605,1582,1610],256],64954:[[1604,1580,1605],256],64955:[[1603,1605,1605],256],64956:[[1604,1580,1605],256],64957:[[1606,1580,1581],256],64958:[[1580,1581,1610],256],64959:[[1581,1580,1610],256],64960:[[1605,1580,1610],256],64961:[[1601,1605,1610],256],64962:[[1576,1581,1610],256],64963:[[1603,1605,1605],256],64964:[[1593,1580,1605],256],64965:[[1589,1605,1605],256],64966:[[1587,1582,1610],256],64967:[[1606,1580,1610],256],65008:[[1589,1604,1746],256],65009:[[1602,1604,1746],256],65010:[[1575,1604,1604,1607],256],65011:[[1575,1603,1576,1585],256],65012:[[1605,1581,1605,1583],256],65013:[[1589,1604,1593,1605],256],65014:[[1585,1587,1608,1604],256],65015:[[1593,1604,1610,1607],256],65016:[[1608,1587,1604,1605],256],65017:[[1589,1604,1609],256],65018:[[1589,1604,1609,32,1575,1604,1604,1607,32,1593,1604,1610,1607,32,1608,1587,1604,1605],256],65019:[[1580,1604,32,1580,1604,1575,1604,1607],256],65020:[[1585,1740,1575,1604],256]},65024:{65040:[[44],256],65041:[[12289],256],65042:[[12290],256],65043:[[58],256],65044:[[59],256],65045:[[33],256],65046:[[63],256],65047:[[12310],256],65048:[[12311],256],65049:[[8230],256],65056:[,230],65057:[,230],65058:[,230],65059:[,230],65060:[,230],65061:[,230],65062:[,230],65063:[,220],65064:[,220],65065:[,220],65066:[,220],65067:[,220],65068:[,220],65069:[,220],65072:[[8229],256],65073:[[8212],256],65074:[[8211],256],65075:[[95],256],65076:[[95],256],65077:[[40],256],65078:[[41],256],65079:[[123],256],65080:[[125],256],65081:[[12308],256],65082:[[12309],256],65083:[[12304],256],65084:[[12305],256],65085:[[12298],256],65086:[[12299],256],65087:[[12296],256],65088:[[12297],256],65089:[[12300],256],65090:[[12301],256],65091:[[12302],256],65092:[[12303],256],65095:[[91],256],65096:[[93],256],65097:[[8254],256],65098:[[8254],256],65099:[[8254],256],65100:[[8254],256],65101:[[95],256],65102:[[95],256],65103:[[95],256],65104:[[44],256],65105:[[12289],256],65106:[[46],256],65108:[[59],256],65109:[[58],256],65110:[[63],256],65111:[[33],256],65112:[[8212],256],65113:[[40],256],65114:[[41],256],65115:[[123],256],65116:[[125],256],65117:[[12308],256],65118:[[12309],256],65119:[[35],256],65120:[[38],256],65121:[[42],256],65122:[[43],256],65123:[[45],256],65124:[[60],256],65125:[[62],256],65126:[[61],256],65128:[[92],256],65129:[[36],256],65130:[[37],256],65131:[[64],256],65136:[[32,1611],256],65137:[[1600,1611],256],65138:[[32,1612],256],65140:[[32,1613],256],65142:[[32,1614],256],65143:[[1600,1614],256],65144:[[32,1615],256],65145:[[1600,1615],256],65146:[[32,1616],256],65147:[[1600,1616],256],65148:[[32,1617],256],65149:[[1600,1617],256],65150:[[32,1618],256],65151:[[1600,1618],256],65152:[[1569],256],65153:[[1570],256],65154:[[1570],256],65155:[[1571],256],65156:[[1571],256],65157:[[1572],256],65158:[[1572],256],65159:[[1573],256],65160:[[1573],256],65161:[[1574],256],65162:[[1574],256],65163:[[1574],256],65164:[[1574],256],65165:[[1575],256],65166:[[1575],256],65167:[[1576],256],65168:[[1576],256],65169:[[1576],256],65170:[[1576],256],65171:[[1577],256],65172:[[1577],256],65173:[[1578],256],65174:[[1578],256],65175:[[1578],256],65176:[[1578],256],65177:[[1579],256],65178:[[1579],256],65179:[[1579],256],65180:[[1579],256],65181:[[1580],256],65182:[[1580],256],65183:[[1580],256],65184:[[1580],256],65185:[[1581],256],65186:[[1581],256],65187:[[1581],256],65188:[[1581],256],65189:[[1582],256],65190:[[1582],256],65191:[[1582],256],65192:[[1582],256],65193:[[1583],256],65194:[[1583],256],65195:[[1584],256],65196:[[1584],256],65197:[[1585],256],65198:[[1585],256],65199:[[1586],256],65200:[[1586],256],65201:[[1587],256],65202:[[1587],256],65203:[[1587],256],65204:[[1587],256],65205:[[1588],256],65206:[[1588],256],65207:[[1588],256],65208:[[1588],256],65209:[[1589],256],65210:[[1589],256],65211:[[1589],256],65212:[[1589],256],65213:[[1590],256],65214:[[1590],256],65215:[[1590],256],65216:[[1590],256],65217:[[1591],256],65218:[[1591],256],65219:[[1591],256],65220:[[1591],256],65221:[[1592],256],65222:[[1592],256],65223:[[1592],256],65224:[[1592],256],65225:[[1593],256],65226:[[1593],256],65227:[[1593],256],65228:[[1593],256],65229:[[1594],256],65230:[[1594],256],65231:[[1594],256],65232:[[1594],256],65233:[[1601],256],65234:[[1601],256],65235:[[1601],256],65236:[[1601],256],65237:[[1602],256],65238:[[1602],256],65239:[[1602],256],65240:[[1602],256],65241:[[1603],256],65242:[[1603],256],65243:[[1603],256],65244:[[1603],256],65245:[[1604],256],65246:[[1604],256],65247:[[1604],256],65248:[[1604],256],65249:[[1605],256],65250:[[1605],256],65251:[[1605],256],65252:[[1605],256],65253:[[1606],256],65254:[[1606],256],65255:[[1606],256],65256:[[1606],256],65257:[[1607],256],65258:[[1607],256],65259:[[1607],256],65260:[[1607],256],65261:[[1608],256],65262:[[1608],256],65263:[[1609],256],65264:[[1609],256],65265:[[1610],256],65266:[[1610],256],65267:[[1610],256],65268:[[1610],256],65269:[[1604,1570],256],65270:[[1604,1570],256],65271:[[1604,1571],256],65272:[[1604,1571],256],65273:[[1604,1573],256],65274:[[1604,1573],256],65275:[[1604,1575],256],65276:[[1604,1575],256]},65280:{65281:[[33],256],65282:[[34],256],65283:[[35],256],65284:[[36],256],65285:[[37],256],65286:[[38],256],65287:[[39],256],65288:[[40],256],65289:[[41],256],65290:[[42],256],65291:[[43],256],65292:[[44],256],65293:[[45],256],65294:[[46],256],65295:[[47],256],65296:[[48],256],65297:[[49],256],65298:[[50],256],65299:[[51],256],65300:[[52],256],65301:[[53],256],65302:[[54],256],65303:[[55],256],65304:[[56],256],65305:[[57],256],65306:[[58],256],65307:[[59],256],65308:[[60],256],65309:[[61],256],65310:[[62],256],65311:[[63],256],65312:[[64],256],65313:[[65],256],65314:[[66],256],65315:[[67],256],65316:[[68],256],65317:[[69],256],65318:[[70],256],65319:[[71],256],65320:[[72],256],65321:[[73],256],65322:[[74],256],65323:[[75],256],65324:[[76],256],65325:[[77],256],65326:[[78],256],65327:[[79],256],65328:[[80],256],65329:[[81],256],65330:[[82],256],65331:[[83],256],65332:[[84],256],65333:[[85],256],65334:[[86],256],65335:[[87],256],65336:[[88],256],65337:[[89],256],65338:[[90],256],65339:[[91],256],65340:[[92],256],65341:[[93],256],65342:[[94],256],65343:[[95],256],65344:[[96],256],65345:[[97],256],65346:[[98],256],65347:[[99],256],65348:[[100],256],65349:[[101],256],65350:[[102],256],65351:[[103],256],65352:[[104],256],65353:[[105],256],65354:[[106],256],65355:[[107],256],65356:[[108],256],65357:[[109],256],65358:[[110],256],65359:[[111],256],65360:[[112],256],65361:[[113],256],65362:[[114],256],65363:[[115],256],65364:[[116],256],65365:[[117],256],65366:[[118],256],65367:[[119],256],65368:[[120],256],65369:[[121],256],65370:[[122],256],65371:[[123],256],65372:[[124],256],65373:[[125],256],65374:[[126],256],65375:[[10629],256],65376:[[10630],256],65377:[[12290],256],65378:[[12300],256],65379:[[12301],256],65380:[[12289],256],65381:[[12539],256],65382:[[12530],256],65383:[[12449],256],65384:[[12451],256],65385:[[12453],256],65386:[[12455],256],65387:[[12457],256],65388:[[12515],256],65389:[[12517],256],65390:[[12519],256],65391:[[12483],256],65392:[[12540],256],65393:[[12450],256],65394:[[12452],256],65395:[[12454],256],65396:[[12456],256],65397:[[12458],256],65398:[[12459],256],65399:[[12461],256],65400:[[12463],256],65401:[[12465],256],65402:[[12467],256],65403:[[12469],256],65404:[[12471],256],65405:[[12473],256],65406:[[12475],256],65407:[[12477],256],65408:[[12479],256],65409:[[12481],256],65410:[[12484],256],65411:[[12486],256],65412:[[12488],256],65413:[[12490],256],65414:[[12491],256],65415:[[12492],256],65416:[[12493],256],65417:[[12494],256],65418:[[12495],256],65419:[[12498],256],65420:[[12501],256],65421:[[12504],256],65422:[[12507],256],65423:[[12510],256],65424:[[12511],256],65425:[[12512],256],65426:[[12513],256],65427:[[12514],256],65428:[[12516],256],65429:[[12518],256],65430:[[12520],256],65431:[[12521],256],65432:[[12522],256],65433:[[12523],256],65434:[[12524],256],65435:[[12525],256],65436:[[12527],256],65437:[[12531],256],65438:[[12441],256],65439:[[12442],256],65440:[[12644],256],65441:[[12593],256],65442:[[12594],256],65443:[[12595],256],65444:[[12596],256],65445:[[12597],256],65446:[[12598],256],65447:[[12599],256],65448:[[12600],256],65449:[[12601],256],65450:[[12602],256],65451:[[12603],256],65452:[[12604],256],65453:[[12605],256],65454:[[12606],256],65455:[[12607],256],65456:[[12608],256],65457:[[12609],256],65458:[[12610],256],65459:[[12611],256],65460:[[12612],256],65461:[[12613],256],65462:[[12614],256],65463:[[12615],256],65464:[[12616],256],65465:[[12617],256],65466:[[12618],256],65467:[[12619],256],65468:[[12620],256],65469:[[12621],256],65470:[[12622],256],65474:[[12623],256],65475:[[12624],256],65476:[[12625],256],65477:[[12626],256],65478:[[12627],256],65479:[[12628],256],65482:[[12629],256],65483:[[12630],256],65484:[[12631],256],65485:[[12632],256],65486:[[12633],256],65487:[[12634],256],65490:[[12635],256],65491:[[12636],256],65492:[[12637],256],65493:[[12638],256],65494:[[12639],256],65495:[[12640],256],65498:[[12641],256],65499:[[12642],256],65500:[[12643],256],65504:[[162],256],65505:[[163],256],65506:[[172],256],65507:[[175],256],65508:[[166],256],65509:[[165],256],65510:[[8361],256],65512:[[9474],256],65513:[[8592],256],65514:[[8593],256],65515:[[8594],256],65516:[[8595],256],65517:[[9632],256],65518:[[9675],256]}};var I={nfc:a,nfd:s,nfkc:u,nfkd:l};"object"==typeof module?module.exports=I:"function"==typeof define&&define.amd?define("unorm",[],function(){return I}):e.unorm=I,I.shimApplied=!1,String.prototype.normalize||(String.prototype.normalize=function(e){var t=""+this;if(e=void 0===e?"NFC":e,"NFC"===e)return I.nfc(t);if("NFD"===e)return I.nfd(t);if("NFKC"===e)return I.nfkc(t);if("NFKD"===e)return I.nfkd(t);throw new RangeError("Invalid normalization form: "+e)},I.shimApplied=!0)}(this),define("controllers/Reconciler",["require","exports","module","plugins/jquery.localQueue","underscore","unorm"],function(e,t,n){function i(e){var t={node_id:e.node_id};switch(e.type){case"add node":t.type="node added",t.data={text:e.text,colour:e.colour,width:e.width,pos:e.pos,parent_id:e.parent_id};break;case"move node":t.type="node moved",t.data={pos:e.pos};break;case"reparent node":t.type="node reparented",t.data={old_parent_id:e.old_parent_id,new_parent_id:e.new_parent_id};break;case"edit node":t.type="node edited",t.data={text:e.text};break;case"paint node":t.type="node painted",t.data={colour:e.colour};break;case"resize node":t.type="node resized",t.data={width:e.width};break;case"scale node":t.type="node scaled",t.data={scale:e.scale};break;case"edit root":t.type="root edited",t.data={text:e.text};break;case"remove node":t.type="node removed",t.data={};break;case"patch":t=e;break;case"node added":t=e;break;case"node removed":t=e;break;default:throw'unknown unreconciled type: "'+e.type+'"'}return t}function o(e,t){if("object"==typeof e&&"object"==typeof t){for(var n in e)if(e.hasOwnProperty(n)){if(!t.hasOwnProperty(n))return!1;if(!o(e[n],t[n]))return!1}return!0}return"number"==typeof e&&"number"==typeof t?Math.abs(e-t)<=a:"string"==typeof e&&"string"==typeof t&&e.normalize?e.normalize()==t.normalize():e==t}function r(e,t){if(t.node_id==e.node_id){if("node added"===e.type)return!("node added"!==t.type||!e.data||!t.data||e.data.text!=t.data.text||e.data.parent_id!=t.data.parent_id);if("add node"===e.type)return!("node added"!==t.type||!t.data||e.text!=t.data.text||e.parent_id!=t.data.parent_id);if("remove node"===e.type||"node removed"===e.type)return"node removed"===t.type;if("reparent node"===e.type||"patch"===e.type&&e.data.parent_id){var n=null;return"reparent node"===e.type?n=e.new_parent_id:"patch"===e.type&&(n=e.data.parent_id),!("patch"!==t.type||!t.data||t.data.parent_id!=n)||!("node reparented"!==t.type||!t.data||t.data.new_parent_id!=n)}if(u.indexOf(e.type)!==-1){if(u.indexOf(t.type)!==-1||"node added"===t.type){var i;i="patch"===e.type?e.data:e;for(var r in i)if(i.hasOwnProperty(r)&&c.indexOf(r)===-1&&("undefined"!=typeof i[r]&&!t.data.hasOwnProperty(r)||!o(i[r],t.data[r])))return!1;return!0}return!1}return e.type in d||(d[e.type]=1,console.error("unknown unreconciled delta type! Reconciliation will fail:",e,t)),!1}}function s(e){this.unreconciled=getLocalQueue("starc.unreconciled"),this.unreconciled.supported()||console.log("local storage not supported: will not preserve offline changes!"),this.send=e,this.evaluationInterval=setInterval(function(){this.evaluateReconilationState()}.bind(this),3e3)}e("plugins/jquery.localQueue");var l=e("underscore"),a=(e("unorm"),1e-7),u=["patch","node edited","root edited","node painted","node resized","node scaled","node moved","node reparented","edit node","edit root","paint node","resize node","scale node","move node","reparent node"],c=["owner_id","action_ts","server_version","client_version","node_id","diagram","type","old"],d={};l.extend(s.prototype,Backbone.Events),s.prototype.destroy=function(){clearTimeout(this.errorTimeout),clearInterval(this.evaluationInterval),this.off(),this.wasRemoved=!0},s.prototype.evaluateReconilationState=function(){if(this.wasRemoved)return console.error("evaluateReconilationState called after removal!");var e=this.oldest_unreconciled;this.oldest_unreconciled=this.unreconciled.peek();var t=null!==this.oldest_unreconciled&&this.oldest_unreconciled==e;t?this.unreconciled_at||(this.unreconciled_at=Date.now()):this.unreconciled_at=!1},s.prototype.unreconciledDuration=function(){return this.unreconciled_at?Date.now()-this.unreconciled_at:0},s.prototype.reconciliationAttempts=function(){return this.unreconciled.loadCount()},s.prototype.sync=function(){console.log("reconciler: attempting sync"),this.syncOfflineChanges()},s.prototype.hasChanges=function(){return 0!==this.unreconciled.length()},s.prototype.queueDelta=function(e){if(this.wasRemoved)return console.error("queueDelta called after removal!");var t=l.clone(e);this.unreconciled.push(t),this.syncOfflineChanges()},s.prototype.tryPop=function(e){var t=0;this.unreconciled.filter(function(n){return 0!==t||!r(n,e)||(t++,!1)});var n=0!==t;return n},s.prototype.discardChanges=function(){console.log("Discarding unsynchronised changes:",this.unreconciled.getArray()),this.unreconciled.clear()},s.prototype.syncOfflineChanges=function(){if(this.wasRemoved)return console.error("syncOfflineChanges called after removal!");var e=this;if(e.syncAttemptsSinceSuccess||(e.syncAttemptsSinceSuccess=0),!e.syncing){clearTimeout(e.errorTimeout);var t=e.unreconciled.getArray();if(0===t.length)return void(e.syncAttemptsSinceSuccess=0);e.syncAttemptsSinceSuccess+=1;var n=function(t,n){e.send(t,function(t,i){return e.wasRemoved?n(new Error("removed")):t?n(t):(i.map(function(t){e.tryPop(t)}),console.log(e.unreconciled.length()+" unreconciled changes remain"),
n(null),void 0)})},i=100,o=function(e){var r=t.slice(0,i);return t=t.slice(i),r.length?void n(r,function(t){return t?e(t):o(e)}):e()};console.log("starting sync..."),e.syncing=!0,o(function(t){e.syncing=!1,t?(console.log("sync attempt failed"),clearTimeout(e.errorTimeout),e.errorTimeout=setTimeout(function(){e.wasRemoved||e.syncOfflineChanges()},1e4)):(console.log("sync attempt complete"),e.syncAttemptsSinceSuccess>1?setTimeout(function(){e.wasRemoved||e.syncOfflineChanges()},1e3*Math.pow(1.5,e.syncAttemptsSinceSuccess)):e.wasRemoved||e.syncOfflineChanges())})}},s.prototype.asServerDeltas=function(){return this.unreconciled.getArray().map(function(e){return i(e)})},n.exports=s}),function(e,t){"function"==typeof define&&define.amd?define("reconnecting-websocket",[],t):"undefined"!=typeof module&&module.exports?module.exports=t():e.ReconnectingWebSocket=t()}(this,function(){function e(e,t,n){var i={automaticOpen:!0,reconnectInterval:1e3,maxReconnectInterval:3e4,reconnectDecay:1.5,timeoutInterval:2e3};n||(n={});for(var o in i)"undefined"!=typeof n[o]?this[o]=n[o]:this[o]=i[o];this.url=e,this.reconnectAttempts=0,this.readyState=WebSocket.CONNECTING;var r,s=this,l=!1,a=!1;this.open=function(e){if(!r){e||clearTimeout(a),r=new WebSocket(s.url,t||[]);var n=setTimeout(function(){r&&r.close()},s.timeoutInterval);r.onopen=function(e){console.log("ws onopen"),clearTimeout(a),clearTimeout(n),s.readyState=WebSocket.OPEN,s.onopen(e),s.reconnectAttempts=0},r.onclose=function(e){if(console.log("ws onclose"),clearTimeout(a),clearTimeout(n),r.onmessage=null,r.onclose=null,r.onopen=null,r.onerror=null,r=null,l)s.readyState=WebSocket.CLOSED,s.onclose(e);else{s.readyState=WebSocket.CONNECTING,s.onclose(e),s.reconnectAttempts=s.reconnectAttempts+1;var t=s.reconnectInterval*Math.pow(s.reconnectDecay,s.reconnectAttempts)*(1+Math.random());a=setTimeout(function(){s.open(!0)},t>s.maxReconnectInterval?s.maxReconnectInterval:t)}},r.onmessage=function(e){s.onmessage(e)},r.onerror=function(e){console.log("ws onerror"),s.onerror(e)}}},1==this.automaticOpen&&this.open(!1),this.send=function(e){if(r)return r.send(e);throw"INVALID_STATE_ERR : Pausing to reconnect websocket"},this.close=function(e,t){"undefined"==typeof e&&(e=1e3),l=!0,r&&r.close(e,t)},this.refresh=function(){s.reconnectAttempts=0,r&&r.close()}}if("WebSocket"in window)return e.prototype.onopen=function(e){},e.prototype.onclose=function(e){},e.prototype.onconnecting=function(e){},e.prototype.onmessage=function(e){},e.prototype.onerror=function(e){},e.CONNECTING=WebSocket.CONNECTING,e.OPEN=WebSocket.OPEN,e.CLOSING=WebSocket.CLOSING,e.CLOSED=WebSocket.CLOSED,e}),define("controllers/RealtimeUpdateController",["require","exports","module","underscore","backbone","reconnecting-websocket"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=e("reconnecting-websocket"),s=function(e){var t=function(){var t=e.socketUrl();return window.CoggleAccessToken&&(t+="&access_token="+window.CoggleAccessToken),t},n=new r(t(),[],{automaticOpen:!1,timeoutInterval:1e4,reconnectInterval:45e3,maxReconnectInterval:48e4});return n=i.extend(n,o.Events),n.onmessage=function(i){try{var o=JSON.parse(i.data);"delta"==o.event?(e.getDeltas().add(o.data),n.url=t()):"notification"==o.event&&(o.data.updated?e.getNotifications().set([o.data],{add:!1,merge:!0,remove:!1}):e.getNotifications().add([o.data]))}catch(e){}},n.emit=function(e,t){n.send(JSON.stringify({event:e,data:t}))},n.onopen=function(){n.trigger("connect")},n.onerror=function(){n.trigger("error")},n.onclose=function(){n.trigger("disconnect")},n},l=function(e){i.bindAll(this,"poll","destroy"),this.disconnectedAt=!1,this.connectedAt=!1,this.pollInterval=9e4*(Math.random()+.5),this.pollFailures=0,this.diagram=e,setTimeout(this.poll,5e3);try{this.socket=s(e),this.socket.on("connect",function(){this.connectedAt=Date.now(),this.disconnectedAt=!1}.bind(this)),this.socket.on("disconnect error",function(){this.disconnectedAt||(this.disconnectedAt=Date.now(),this.pollFailures=3,this.reschedulePoll()),this.connectedAt=!1}.bind(this)),this.socket.open()}catch(e){console.warn(e)}};l.prototype.destroy=function(){clearTimeout(this.pollLoop),this.socket&&this.socket.close(),this.wasDestroyed=!0},l.prototype.socketIsConnected=function(){return!!this.connectedAt&&this.connectedAt>this.disconnectedAt},l.prototype.disconnectedDuration=function(){return this.socketIsConnected()?0:Date.now()-this.disconnectedAt},l.prototype.reschedulePoll=function(){this.pollLoop&&(clearTimeout(this.pollLoop),this.pollLoop=!1);var e=this.pollInterval*Math.pow(1.5,this.pollFailures)*(Math.random()+.5)+20*Math.random()*1e3;this.pollLoop=setTimeout(function(){this.pollLoop=!1,this.poll()}.bind(this),e)},l.prototype.poll=function(){return this.wasDestroyed?this.destroy():this.socketIsConnected()?this.reschedulePoll():void this.diagram.getDeltas().poll(function(e){e?this.pollFailures++:(this.pollFailures=0,this.diagram.getNotifications().loadAllNew()),this.reschedulePoll()}.bind(this))},n.exports=l}),define("views/WorkspaceView",["require","exports","module","underscore","async","backbone","plugins/jquery.queryString","models/Message","views/BannerViews","views/DiagramToolbar","views/DiagramNodeMenu","starc/starc.print","starc/starc","controllers/DeltaGenerator","controllers/Reconciler","controllers/RealtimeUpdateController","env","env","env"],function(e,t,n){var i=e("underscore"),o=e("async"),r=e("backbone");e("plugins/jquery.queryString");var s=e("models/Message").Messages,l=e("views/BannerViews").BannerStack,a=e("views/DiagramToolbar"),u=e("views/DiagramNodeMenu"),c=e("starc/starc.print"),d=e("starc/starc"),h=e("controllers/DeltaGenerator"),p=e("controllers/Reconciler"),f=e("controllers/RealtimeUpdateController"),g="    <div class='diagram-container'>        <div id='diagram-header'>            <a href='"+e("env").api.url+"<%-back%>' tabindex='2' class='home'>                <% if(!printing) { %><img class='back-chevron' src='"+e("env").cdn.url+"/img/chevron.png'/><% } %>                <% if(picture) { %><img class='org-logo' src='<%-picture%>' style='background-color: <%-colour%>'/><% } %>                <img id='logo' src='"+e("env").cdn.url+"/img/coggle.png' alt='Coggle'/>                <div class='made-with-coggle'>made for free at coggle.it</div>            </a>        </div>        <div data-l10-id='save-indication' class='save-indicator'>Saving</div>        <div class='diagram-editor-scroll'></div>        <div id='loadingbackground'>            <div id='loading'><div class='loadspinner'></div><p></p></div>        </div>    </div>",m=r.View.extend({tagName:"div",className:"coggle-workspace",template:i.template(g),initialize:function(e){this.options=e,this.updateURL(this.model.get("url_title")),this.renderTemplate(),this.starcView=window._diagram=new d({model:this.model,readOnly:this.readOnly(),scroll_target:this.$el.find(".diagram-editor-scroll")}),this.bannerView=new l({collection:s}),this.addChildView(this.bannerView),this.toolbarView=new a({diagram:this.model,workspace:this}),this.addChildView(this.toolbarView),this.deltaReconciler=new p(this.sendDeltas.bind(this)),this.deltaGenerator=new h(this.model.getNodes(),this.deltaReconciler.queueDelta.bind(this.deltaReconciler)),window._workspace=this},renderTemplate:function(){var e=getCoggleUser().getActiveOrg().get("slug"),t=this.model.get("folder"),n=getCoggleUser().getActiveOrg().toJSON();n.back=e?"/"+e:"",n.back+=t?"/folder/"+t:"/",n.printing=!!$.queryString().print,this.$el.html(this.template(n))},render:function(){return this.wasRemoved?this:(this.$el.find(".diagram-editor-scroll").prepend(this.starcView.$el),this.$el.find(".diagram-container").prepend(this.toolbarView.render().$el.addClass("diagram-toolbar")),this.$el.prepend(this.bannerView.render().$el),getCoggleUser().menuExperiment()&&(this._node_menu||(this._node_menu=new u({diagram:this.getStarcView()}),this.addChildView(this._node_menu)),this.$el.append(this._node_menu.render().$el),this._node_menu.delegateEvents()),"0"===$.queryString().logo&&this.$el.find("#diagram-header").remove(),this)},load:function(){this.wasRemoved||(this.setupStarcView(),this.windowTitleSyncing(),this.markModified(),$.queryString().print?this.print():(this.model.accessViaToken()||this.trackActivity(),this.disconnectionMessages(),this.isEmbedded()&&this.showEmbedded(),this.model.canWrite()&&this.setupActions(),this.showOverageWarning()),this.applyAndWatchDeltas(),this.isRealtime()&&(this.realtimeController=new f(this.model)),ga("send","event","Load",window===window.top?"Normal":"Frame",{nonInteraction:1}))},remove:function(){this.trigger("close"),this.wasRemoved=!0,this.model.getNodes().off(void 0,void 0,this),this.model.getDeltas().off(void 0,void 0,this),this.model.off(void 0,void 0,this),this.getStarcView().remove(),this.realtimeController&&this.realtimeController.destroy(),delete this.realtimeController,this.deltaGenerator&&this.deltaGenerator.destroy(),delete this.deltaGenerator,this.deltaReconciler&&this.deltaReconciler.destroy(),delete this.deltaReconciler,s.get("degraded")&&s.get("degraded").deactivate(),s.get("disconnected")&&s.get("disconnected").deactivate(),s.get("sync-warning")&&s.get("sync-warning").deactivate(),s.get("open-coggle")&&s.get("open-coggle").deactivate(),s.get("embedded")&&s.get("embedded").deactivate(),s.get("private-overage")&&s.get("private-overage").deactivate(),$(window).off("beforeunload.workspaceContext"),$(window).off("mousemove.workspaceContext"),this.model.resetState(),r.View.prototype.remove.apply(this),$("body").removeClass("history-mode"),$("body").removeClass("presentation-mode"),delete window._workspace,delete window._diagram},readOnly:function(){var e=this.model.get("deleted")||this.model.get("overage_disable")||!this.model.canWrite();return e},getStarcView:function(){return this.starcView},setupStarcView:function(){return this.wasRemoved?this:($.queryString().print||(this.starcView.enableZoomShortcuts(),this.starcView.enableBoundaryDragScrolling(),this.starcView.enableScrollBounding(),$("body").hasClass("touch")||(this.starcView.enableNodeButtons(),this.starcView.enableTabFocus()),this.readOnly()||$("body").hasClass("touch")||this.starcView.enableKeyboardShortcuts()),void this.listenTo(this.starcView,"mode",function(e){$(window).trigger("coggle-mode-changed",e)}))},trackActivity:function(){if(this.model.canWrite()){var e=function(){this.wasRemoved||this.model.save({last_viewed:new Date,nonempty_nodes:this.model.getNodes().nonEmpty().length,total_nodes:this.model.getNodes().length})}.bind(this);this.listenToOnce(this.getStarcView(),"loaded",e),this.listenToOnce(this,"close",e),this.$el.on("mousemove.workspaceContext",i.throttle(e,3e5,{leading:!1})),$(window).on("beforeunload.workspaceContext",e)}},windowTitleSyncing:function(){this.listenTo(this.model.getNodes(),"change:text",function(e){e.isTitle()&&this.model.set("title",d.toTitleText(e.text()))}.bind(this));var e=function(){window.document.title=d.toTitleText(this.model.get("title")||"")}.bind(this);this.listenTo(this.model,"change",e),this.listenTo(this.model,"sync",e),e()},updateURL:function(e){e||(e="-");var t=/^\/diagram\/[^\/?#]*\/t\/([^\/]*).*$/.exec(window.location.pathname);if(!t||t&&t[1]!==e){var n=/(\/diagram\/[^\/]*)(\/t\/[^\/]*)?(.*)/.exec(window.location.href),i=n[1]+"/t/"+e+n[3];r.history.navigate(i,{replace:!0,trigger:!1})}},markModified:function(){this.listenToOnce(this.model.getNodes(),"delta",function(){var e=new Date;e.toISOString()>this.model.get("last_modified")&&this.model.set("last_modified",e)}.bind(this))},disconnectionMessages:function(){if(!$.queryString().print)var e=function(){if(this.wasRemoved)return clearTimeout(t);if(this.realtimeController&&this.deltaReconciler)if(this.deltaReconciler.unreconciledDuration()>2e4){s.get("degraded").deactivate(),s.get("disconnected").activate();var e=this.deltaReconciler.reconciliationAttempts();e>=2&&this.showSyncWarning()}else this.realtimeController.disconnectedDuration()>6e4?(s.get("degraded").activate(),s.get("disconnected").deactivate(),s.get("sync-warning")&&s.get("sync-warning").deactivate(),this.getStarcView().setReadOnly(this.readOnly())):(s.get("degraded").deactivate(),s.get("disconnected").deactivate(),s.get("sync-warning")&&s.get("sync-warning").deactivate(),this.getStarcView().setReadOnly(this.readOnly()))}.bind(this),t=setInterval(e,5e3)},showSyncWarning:function(){if(this.deltaReconciler){var e=this.deltaReconciler.reconciliationAttempts(),t=this.deltaReconciler.unreconciled.length();this.getStarcView().setReadOnly(!0);var n="Changes made while disconnected have not been saved after "+e+" attempts! If you continue to edit it may not be possible to save the changes.<br>You can <a onclick='location.reload()'>reload the page</a> to try again, or <a id=syncdiscardrefresh>discard "+t+" change"+(t>1?"s":"")+"</a>";s.warning(n,"sync-warning"),$("#syncdiscardrefresh").on("click",function(){this.deltaReconciler.discardChanges(),window.location.reload()}.bind(this))}},showOverageWarning:function(){this.model.get("overage_disable")?(s.get("private-overage").activate(),getCoggleUser().getActions().perform("overage:private_diagrams")):s.get("private-overage").deactivate(),this.off(this.model,"change:overage_disable",this),this.listenTo(this.model,"change:overage_disable",function(){this.getStarcView().setReadOnly(this.readOnly()),this.showOverageWarning()}.bind(this))},showEmbedded:function(){$("body").addClass("embedded"),$("#logo").parent().attr("target","_blank"),s.get("embedded").activate()},loadingAnimation:function(){var e=this.$el.find("#loading"),t=e.find("p");setTimeout(function(){t.text("This is taking longer than expected...")},4e3),this.listenToOnce(this.getStarcView(),"loaded",function(){$.queryString().print?($("#loadingbackground").remove(),this.getStarcView().$el.addClass("lod-1")):(this.getStarcView().setScale(this.getStarcView().getScale()),$("#loadingbackground").addClass("fadeout"),setTimeout(function(){$("#loadingbackground").remove(),$(window).trigger("clockify-start")},200)),m.trigger("loaded",this)}.bind(this),this)},print:function(){"1"==$.queryString().madeWith&&$("#diagram-header .made-with-coggle").show(),this.listenToOnce(this.getStarcView(),"loaded",function(){c({diagram:this.getStarcView()})}.bind(this))},setupActions:function(){var e=function(e){getCoggleUser().getActions().unique(e)},t=this.getStarcView();this.listenTo(t,"node_added",e.bind(this,"added-node")),this.listenTo(t,"node_deleted",e.bind(this,"removed-node")),this.listenTo(t,"node_squashed",e.bind(this,"squashed-node")),this.listenTo(t,"node_inserted",e.bind(this,"inserted-node")),this.listenTo(t,"node_edited",e.bind(this,"edited-node")),this.listenTo(t,"node_moved",e.bind(this,"moved-node")),this.listenTo(t,"undo",e.bind(this,"undid")),this.listenTo(t,"redo",e.bind(this,"redid"))},isRealtime:function(){return!$.queryString().print&&(!this.isEmbedded()&&(window.location.hostname.indexOf("static.")===-1&&!this.model.accessIsEphemeral()))},isEmbedded:function(){return window.location.hostname.indexOf("embed.")!==-1},sendDeltas:function(e,t){this.$el.addClass("edited"),this.$el.addClass("saving"),$.ajax({method:"POST",url:this.model.url()+"/changes",data:JSON.stringify(e),contentType:"application/json"}).done(function(e){e.map(function(e){this.model.getDeltas().add(e,{silent:!0})}.bind(this)),this.$el.removeClass("saving"),t(!1,e)}.bind(this)).fail(function(){t(!0)}.bind(this))},getDeltaQueue:function(e){if(!this.delta_queue){var t=this.getStarcView(),n=this.model.getNodes();this.delta_queue=o.queue(function(e,i){return t.checkVersion(e),n.onDeltaV1(e),i()},1),this.delta_queue.drain=function(){this.delta_queue.drain=function(){},n.trigger("loaded")}.bind(this),this.listenToOnce(n,"loaded",function(){this.deltaGenerator&&this.deltaGenerator.resume()}.bind(this)),this.listenTo(t,"mode",function(){this.getStarcView().historyMode()?(console.log("pausing incoming delta queue"),this.delta_queue.pause(),this.deltaGenerator&&this.deltaGenerator.pause()):(console.log("resuming incoming delta queue"),this.delta_queue.resume(),this.deltaGenerator&&this.deltaGenerator.resume())}.bind(this))}return this.delta_queue},applyAndWatchDeltas:function(){var e=this.deltaReconciler;e&&(this.getDeltaQueue().push(this.model.getDeltas().toJSON()),this.model.canWrite()&&(this.getDeltaQueue().push(e.asServerDeltas()),e.sync()),this.listenTo(this.model.getDeltas(),"add",function(t){var n=e.tryPop(t.toJSON());n||this.getDeltaQueue().push(t.toJSON())}.bind(this)))}});i.extend(m,r.Events),n.exports=m}),define("views/Gallery",["require","exports","module","underscore","backbone","plugins/jquery.queryString","starc/starc","env","env","env","env"],function(e,t,n){var i=e("underscore"),o=e("backbone");e("plugins/jquery.queryString");var r=e("starc/starc"),s="<div class='content'>    <a href='"+e("env").cdn.url+"/diagram/<%- short_id %>/t/<%- url_title %>' target='_blank' data-bypass class='preview' style='background-image: url("+e("env").cdn.url+"/diagram/<%- short_id %>/thumbnail?cachebust=3&mtime=<%- last_modified %>)'></a>    <% if (typeof show_in_gallery !== 'undefined'){%>        <% if(!show_in_gallery) { %><div class='button add'>Add to Gallery</div>        <% } else { %><div class='button remove danger'>Remove from Gallery</div><% } %>    <% } %>    <a target='_blank' href='https://www.facebook.com/sharer/sharer.php?u=<%- encodeURIComponent('"+e("env").cdn.url+"/diagram/'+ short_id + '/t/'+ url_title) %>' class='facebook'>Share</a>    <a target='_blank' href='https://twitter.com/intent/tweet?text=<%- encodeURIComponent(title) %>&url=<%- encodeURIComponent('"+e("env").cdn.url+"/diagram/'+ short_id + '/t/'+ url_title) %>&related=coggleit' class='twitter'>Tweet</a>    <div class='title'><%- title %></div></div>",l=o.View.extend({tagName:"div",className:"diagram gallery-item col-md-6 col-lg-6",template:i.template(s),events:{"click .add":"toggleGallery","click .remove":"toggleGallery"},initialize:function(e){i.bindAll(this,"render","toggleGallery"),this.options=e,this.listenTo(this.model,"change",this.render)},render:function(){var e=this.model.toJSON();return e.title=r.toTitleText(this.model.get("title")),$(this.el).html(this.template(e)),this},toggleGallery:function(){this.model.save({show_in_gallery:!this.model.get("show_in_gallery")},{wait:!0})}}),a="<div class='gallery-splash'><h1 data-l10n-id='gallery-title'>The Coggle Gallery</h1><p data-l10n-id='gallery-blurb2'>A selection of the best diagrams made with Coggle!</p><br/><div class='twitter-follow'>    <a href='https://twitter.com/coggleit' class='twitter-follow-button' data-show-count='false' data-size='large'></a>    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></div><div class='facebook-like'><div id='fb-root'></div>    <script>(function(d, s, id) {        var js, fjs = d.getElementsByTagName(s)[0];        if (d.getElementById(id)) return;        js = d.createElement(s); js.id = id;        js.src = '//connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v2.5&appId=512248378818127';        fjs.parentNode.insertBefore(js, fjs);    }(document, 'script', 'facebook-jssdk'));</script>    <div class='fb-like' data-href='https://www.facebook.com/coggleit' data-layout='button' data-action='like' data-show-faces='true' data-share='true'></div></div></div>",u="<div class='diagram-list-notice' data-l10n-id='gallery-folder-blurb2'><b>The Coggle Gallery</b> - A selection of the best diagrams made with Coggle!<br/>Follow us on <a href='https://twitter.com/coggleit' target='_blank'>Twitter</a> or <a href='https://facebook.com/coggleit' target='_blank'>Facebook</a> for regular updates.</div>",c=o.View.extend({tagName:"div",className:"gallery row",events:{},initialize:function(e){this.options=e,i.bindAll(this,"render","addOne","addAll","more","handleScroll"),this.listenTo(this.collection,"add",this.addOne),this.skip=parseInt($.queryString().skip)||0,$(window).on("scroll",this.handleScroll),$(".home-view").on("scroll",this.handleScroll),e.showSplash!==!1?this.$el.html($(a).l20n()):this.$el.html($(u).l20n()),this.addAll()},render:function(){return this},addOne:function(e){var t=new l({model:e,showAdmin:this.options.showAdmin});this.addChildView(t),this.$el.append(t.render().$el)},addAll:function(){this.collection.each(this.addOne)},handleScroll:function(){this.ended||$(document).height()-($(window).scrollTop()+$(window).height())<2e3&&this.more()},more:i.throttle(function(){this.collection.fetch({add:!0,remove:!1,update:!1,data:i.defaults({skip:this.skip+=4},i.omit($.queryString(),"review")),success:function(e,t){console.log("loaded items:",t.length),0===t.length&&(this.ended=!0)}.bind(this)})},500,{trailing:!1})});n.exports=c}),define("views/CloneView",["require","exports","module","backbone","views/BannerViews","models/Message","env"],function(e,t,n){var i=e("backbone"),o=e("views/BannerViews").BannerStack,r=e("models/Message").Messages,s=_.template("    <div class='banner-container'></div>    <div class='cloning-messages'>        <error></error>        <% if(userIsGuest) { %>            <div>                <p>You need to log in to create your own copy of this diagram.</p>                <a class='green button' data-bypass href='/auth/google?redirectTo=<%-redirectTo%>'><p>Log in with Google</p></a>            </div>        <% } else if(publicCopyOfPrivate) { %>            <div>                <p><strong>Warning:</strong> This diagram is private, but the copy you are making will be public, as you do not have any more private diagrams available.</p>                <a class='secondary button goback'><p>Cancel and go back</p></a>                <a class='green button doclone'><p>Create a public copy</p></a>            </div>        <% } %>        </div>    </div>"),l=function(e){var t=[];return Object.keys(e).forEach(function(n){"object"!=typeof e[n]?t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n])):e[n].length&&e[n].forEach(function(e){t.push(encodeURIComponent(n)+"[]="+encodeURIComponent(e))})}),t.join("&")},a=i.View.extend({tagName:"div",className:"clone-interstitial",events:{"touchstart .doclone":"doClone","click .doclone":"doClone","click .goback":"goBack"},initialize:function(e){_.bindAll(this,"render","error"),this.token=e.token,this.diagramId=e.diagramId,this.diagram=e.diagram,this.bannerView=new o({collection:r}),this.addChildView(this.bannerView)},copyWillBeMadePublic:function(){return!(this.diagram&&this.diagram.get&&this.diagram.get("public"))&&getCoggleUser().reachedPrivateLimit()},render:function(){var e="/clone/"+this.diagramId;this.token&&(e+="/"+this.token);var t={publicCopyOfPrivate:this.copyWillBeMadePublic(),userIsGuest:getCoggleUser().isGuest(),diagramTitle:this.diagram&&this.diagram.get&&this.diagram.get("title")||"",redirectTo:encodeURIComponent(e)};return this.$el.html(s(t)),this.$el.find(".banner-container").prepend(this.bannerView.render().$el),this},error:function(e){this.$el.find("error").first().text(e)},cloneIfPossible:function(){getCoggleUser().isGuest()||this.copyWillBeMadePublic()||this.doClone()},doClone:function(){var t=e("env").api.url+"/api/1/",n=_.pick($.queryString(),"clone","date");n.clone||(n.clone=["content","title"]),this.token&&(n.token=this.token);var i={};n.date&&(i.date=n.date,delete n.date),$.post(t+"diagrams/"+this.diagramId+"?"+l(n),i).fail(function(e,t,n){this.error("Failed to copy diagram: "+(e&&e.responseJSON&&e.responseJSON.description||n||t))}.bind(this)).done(function(e,t,n){window.location="/diagram/"+e.short_id+(e.url_title?"/t/"+e.url_title:"")})},goBack:function(){window.history.back()}});n.exports=a}),define("views/SettingsView",["require","exports","module","underscore","backbone","views/OrganisationPicker"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=e("views/OrganisationPicker").OrganisationPicker,s=i.template("<div>    <div class='settings-view-header'>        <h2><%- heading %></h2>        <% if(close) { %><a class='close' href='<%- close %>'>✕</a><% } %>    </div>    <div class='container-fluid'>        <div class='row'>            <div class='col-sm-4 col-md-3'>                <ul class='settings-view-menu'>                    <% _.each(settings, function(setting, key){ %>                        <li class='entry <%-key%> <% if(key === selected) { %>selected<% } %>'>                            <a href='<%-base_url%>/<%-key%>' data-l10n-id='settings-<%-key%>-title'><%- setting.title %></a>                        </li>                    <% }) %>                </ul>            </div>            <div class='col-sm-8 col-md-9 settings-view-content'>                <div class='settings-content'></div>            </div>        </div>    </div></div>");n.exports=o.View.extend({tagName:"div",className:"settings-view",template:s,initialize:function(e){i.bindAll(this,"render"),this.options=e},render:function(){var e=this.options.selected,t=this.options.settings[e];if(!t&&i.values(this.options.settings).length&&(t=i.values(this.options.settings)[0],e=i.keys(this.options.settings)[0]),this.$el.html(this.template({base_url:this.options.base_url||"/me",settings:this.options.settings,selected:e,close:this.options.close,heading:this.options.heading})),this.options.hero&&(this.$el.find(".container-fluid").first().prepend(this.options.hero.render().$el),this.options.hero.delegateEvents()),this.options.organisations){this.$el.addClass("has-organisation");var n=new r({collection:this.options.organisations,melink:"/me",path_suffix:"/dashboard/"+e});this.$el.prepend(n.render().$el)}return t&&(this.$el.find(".settings-content").html(t.view.render().$el),t.view.delegateEvents()),this}})}),define("views/PlanSignupView",["require","exports","module","underscore","backbone","views/CustomerView"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=e("views/CustomerView"),s="<div><h1>You're nearly done...</h1><div data-l10n-id='billing-promise' class='billing-contact'>    <div>We think you'll love your Coggle subscription, if for any reason you're not completely satisfied, get in touch at <b>hello@coggle.it</b> and we'll make it right.</div></div><error></error><div class='faqs container-fluid'>    <div class='row'>        <div class='faq col-md-6'>            <div class='question'>What's your cancellation policy?</div>            <div class='answer'>You can cancel at any time, and your subscription will end automatically at the end of your current billing period. We don't want to lock anyone into contracts that don't work for them!</div>        </div>        <div class='faq col-md-6'>            <div class='question'>What happens if I cancel my plan?</div>            <div class='answer'>If you choose to cancel your plan you'll keep access to all the diagrams you've created. You'll be moved back onto our free plan where you'll be able to view all your private diagrams and edit any public ones.</div>        </div>        <div class='faq col-md-6'>            <div class='question'>Will all my collaborators need a paid plan?</div>            <div class='answer'>No, you can invite anyone else can work with you on any of your private or public diagrams, although only people with a paid plan will be able to use the paid features.</div>        </div>        <div class='faq col-md-6'>            <div class='question'>I've still got questions!</div>            <div class='answer'>Send them to us! Email <b>hello@coggle.it</b></div>        </div>    </div></div></div>",l=o.View.extend({tagName:"div",className:"plan-signup",events:{},template:i.template(s),initialize:function(e){i.bindAll(this,"render","error","onCustomerSync","onBillingSuccess","onSignupCancel"),this.options=e,this.customerView=new r({model:this.model.getCustomer(),submit:"PURCHASE",product:this.getProduct(this.options.plan)}),this.addChildView(this.customerView),this.listenToOnce(this.customerView,"configured",this.onBillingSuccess),this.listenToOnce(this.customerView,"canceled",this.onSignupCancel),this.getProduct(this.options.plan)&&this.model.getActions().perform("billing:"+this.options.plan,{src:this.options.src}),this.listenTo(this.model.getCustomer(),"sync",this.onCustomerSync)},getProduct:function(e){return{"awesome:yearly":{title:"Awesome Yearly",price:5e3,currency_symbol:"$",period:"per year"},awesome:{title:"Awesome",price:500,currency_symbol:"$",period:"per month"}}[e]},onCustomerSync:function(){this.options.coupon&&this.model.getCustomer().set("coupon",this.options.coupon),this.render()},onBillingSuccess:function(){this.customerView.working(!0),this.model.getPlans().switchTo(this.options.plan,function(e){return e?(this.customerView.working(!1),this.error(e.description)):(getCoggleUser().getActions().perform("signup:"+this.options.plan,{src:this.options.src}),void setTimeout(function(){window.location="/"}.bind(this),500))}.bind(this))},onSignupCancel:function(){o.history.navigate(this.options.cancel||"/plans",!0)},render:function(){this.$el.html(this.template());var e=this.getProduct(this.options.plan);return e?(this.$el.find(".faqs").before(this.customerView.render().$el),this.customerView.delegateEvents(),this.customerView.addValidation(),this):(this.error("Sorry, that plan doesn't exist."),this)},error:function(e){this.$el.find("error").first().text(e)}});n.exports=l}),define("views/OrganisationSignupView",["require","exports","module","underscore","backbone","plugins/jquery.queryString","models/Customer","views/CustomerView"],function(e,t,n){var i=e("underscore"),o=e("backbone");e("plugins/jquery.queryString");var r=e("models/Customer"),s=e("views/CustomerView"),l="<div class='signup'>  <h1 data-l10n-id='orgcreate-title2' class='title'>Create a <a href='/organisations' data-bypass>Coggle Organisation</a></h1>  <div class='org-name' data-l10n-id='orgcreate-nameinput'>    <input type='text' placeholder='Choose Your Organisation Name' class='orgname' />    <span class='description flash-error'>Pick something short and recognisable!</span>  </div>  <div class='billing'></div>  <div class='faqs container-fluid'>    <div class='row'>        <div class='faq col-md-6' data-l10n-id='faq-orgs-whatare'>  <div class='question'/> <div class='answer'> <p/> </div></div>        <div class='faq col-md-6' data-l10n-id='faq-orgs-whofor'>   <div class='question'/> <div class='answer'> <p/><p/> </div></div>        <div class='faq col-md-6' data-l10n-id='faq-orgs-features'> <div class='question'/> <div class='answer'> <p><b/></p> <p><b/></p> <p><b/></p> <p><b/></p> </div></div>        <div class='faq col-md-6' data-l10n-id='faq-orgs-awesome'>  <div class='question'/> <div class='answer'> <p/><p/> </div></div>        <div class='faq col-md-6' data-l10n-id='faq-orgs-billing'>  <div class='question'/> <div class='answer'> </div></div>        <div class='faq col-md-6' data-l10n-id='faq-orgs-edu'>      <div class='question'/> <div class='answer'> </div></div>        <div class='faq col-md-6' data-l10n-id='faq-orgs-more'>     <div class='question'/> <div class='answer'> </div></div>    </div>  </div></div>";n.exports=o.View.extend({tagName:"div",className:"organisation-signup",template:i.template(l),events:{"keyup .orgname":"validateName","notify-warning":"error","click .faq .question":"openFAQ"},initialize:function(e){i.bindAll(this,"render","onStripeSuccess","onComplete","validateName","error","onSignupCancel"),this.options=e,$(this.el).html(this.template()),ga("send","event","Organisation","Signup","Opened"),getCoggleUser().getActions().perform("orgs:opensignup"),this.customer=new r,this.customer.url=!1,this.customerView=new s({model:this.customer,submit:"CREATE",validate:this.validateName,onStripeSuccess:this.onStripeSuccess,product:{title:"Organsiation",price:800,currency_symbol:"$",period:"per member per month"}}),this.addChildView(this.customerView),$.queryString().coupon&&this.customer.set("coupon",$.queryString().coupon),
this.listenTo(this.customerView,"configured",this.onComplete),this.listenTo(this.customerView,"canceled",this.onSignupCancel),this.$el.find(".billing").append(this.customerView.render().$el)},validateName:function(){var e=["about","press","diagrams","diagram","terms","tos","error","unsupported","admin","login","login_error","help","administrator","auth","organisation","organisations","me","api","mobile","invite","metrics","developer","privacy","folders","plans"],t=this.$el.find(".orgname").val();if(0===t.length)this.$el.find(".flash-error").addClass("error").text("Organisation name is required");else if(t.length<2)this.$el.find(".flash-error").addClass("error").text("Organisation name must be two or more characters.");else if(/^[a-z]/i.test(t)){if(e.indexOf(t.toLowerCase())==-1)return this.$el.find(".flash-error").removeClass("error").text("Okay!"),!0;this.$el.find(".flash-error").addClass("error").text("Names like that are reserved, please try a different one.")}else this.$el.find(".flash-error").addClass("error").text("Organisation name must begin with a letter.");return!1},onStripeSuccess:function(e,t){ga("send","event","Organisation","Signup","StripeCompleted");var n=window.getCoggleUser(),i={wait:!0,success:function(){this.customer.url=this.org.url()+"/customer",t()}.bind(this),error:function(e,n){console.log("failed to create organisation"),t(n.responseJSON.description||"Creating organisation failed.")}},o={name:this.$el.find(".orgname").val()};this.org?this.org.save(o,i):this.org=n.getOrganisations().create(o,i)},onSignupCancel:function(){o.history.navigate("/",!0)},error:function(e){ga("send","event","Organisation","Signup","Error"),this.$el.find("error").text(e),this.$el.find("button.signup").prop("disabled",!1),this.$el.find("input").prop("disabled",!1)},onComplete:function(){this.$el.html("<div class='overview'>Creating your organisation...</div>"),this.org.getPlans().create({plan:"organisation:standard",active:!0},{wait:!0,success:function(){ga("send","event","Organisation","Signup","Complete"),window.location="/"+this.org.get("slug")+"/dashboard"}.bind(this),error:function(){this.trigger("error","Failed to setup billing. Please contact Coggle support!")}.bind(this)})},render:function(){return this}})}),define("views/OrganisationLoginView",["require","exports","module","underscore","backbone"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=i.template("<div class='org-icon' style=' background-color: <%- colour %>; background-image: url(<%- picture %>)'></div><h2><%- name %></h1><a class='button green' data-bypass href='<%- login_url %>'>Login</a>");n.exports=o.View.extend({tagName:"div",className:"organisation-login",initialize:function(e){i.bindAll(this,"render"),this.options=e},render:function(){var e=this.model.toJSON();return e.login_url=this.model.loginUrl(),$(this.el).html(r(e)),this}})}),define("views/VerifyEmailView",["require","exports","module","underscore","backbone","env"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=e("env").api.url+"/api/1/",s=i.template("<div class='content-box container'><% if (errmsg) { %><error><%-errmsg%></error><% } else { %><p>One moment please... We've just sent an email to <b><%-address%></b> to verify your addess. Click on the link in the email to complete verification.</p><p>People use your email address to invite you to their diagrams in Coggle, and to reply to your invites.</p><p><a class='button resend-verification'>Resend Verification Email</a></p><% } %></div>"),l=function(){window.location.replace("/verify/done")},a=o.View.extend({events:{"click .resend-verification":"resendVerification"},tagName:"div",className:"verify-email-view",initialize:function(e){i.bindAll(this,"resendVerification"),this.options=e,this.errmsg=null},render:function(){var e=this.model.get("emails");if(e.length)l();else{var t=this.model.get("emails_needing_verification");this.$el.html(s({address:t&&t[0],errmsg:this.errmsg}))}return this},resendVerification:function(){if(!this.$el.find(".button").hasClass("disabled")){if(!this.model.get("emails_needing_verification").length)return console.error("no email to verify!");this.$el.find(".button").addClass("disabled"),this.$el.find(".button").text("Sending..."),$.ajax({url:r+"me/emails/"+this.model.get("emails_needing_verification")[0],type:"PUT",contentType:"application/json"}).done(function(){this.$el.find(".button").text("Sent!")}.bind(this)).fail(function(){this.$el.find(".button").text("Sending failed.")}.bind(this))}}}),u=i.template("<div class='content-box container'><% if (errmsg) { %><error><%-errmsg%></error><% } else { %><p>Verifying...</p><% } %></div>"),c=o.View.extend({tagName:"div",className:"verify-email-view",initialize:function(e){this.options=e,this.errmsg=null},render:function(){return this.$el.html(u({verifying:!0,errmsg:this.errmsg})),this},checkSignature:function(){this.options.sig&&$.ajax({url:r+"me/emails/"+this.options.email+"/verify?ts="+this.options.ts+"&user="+this.options.user+"&sig="+this.options.sig,type:"PUT"}).done(function(){console.log("verify sig OK"),l()}.bind(this)).fail(function(e){this.errmsg=e&&e.responseJSON&&e.responseJSON.description||"Invalid verification link! Please check the address and try again.",this.render()}.bind(this))}}),d=i.template("<div class='content-box container'><p>Thank you. Your address has been verified.</p><% if (!isGuest) { %><p><a href='/welcome'>Start using Coggle.</a></p><% } else {%><p>You can now close this browser window, or <a href='/login'>log in</a> to get started</p><% }%></div>"),h=o.View.extend({tagName:"div",className:"verify-complete-view",initialize:function(e){i.bindAll(this,"render"),this.options=e},render:function(){return this.$el.html(d({isGuest:getCoggleUser().isGuest()})),this}});n.exports={VerifyEmailView:c,VerifyCompleteView:h,MustVerifyEmailView:a}}),define("views/InvoiceViews",["require","exports","module","underscore","backbone"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r="<div style='padding: 30px'><p style='text-align:center'><img src='/img/coggle-2x.png' width='150px'/></p><div class='coggle-address' style='padding: 10px; float:left; vertical-align: top; margin-top: 50px'>    <p>CoggleIt Ltd</p>    <p>William James House,</p>    <p>Cowley Road,</p>    <p>Cambridge</p>    <p>CB4 0WX</p></div><div class='customer-address'  style='padding: 10px; float:right; vertical-align: top; margin-top: 50px'>    <p><%- charge.metadata.receipt_email || (customer && customer.metadata.receipt_email) || charge.receipt_email %></p>    <p><%- charge.metadata.address_line1 || (customer && customer.metadata.address_line1) || charge.source.address_line1 %></p>    <p><%- charge.metadata.address_line2 || (customer && customer.metadata.address_line2) || charge.source.address_line2 %></p>    <p><%- charge.metadata.address_city || (customer && customer.metadata.address_city) || charge.source.address_city %></p>    <p><%- charge.metadata.address_state || (customer && customer.metadata.address_state) || charge.source.address_state %></p>    <p><%- charge.metadata.address_zip || (customer && customer.metadata.address_zip) || charge.source.address_zip %></p>    <p><%- charge.metadata.address_country || (customer && customer.metadata.address_country) || charge.source.address_country %></p></div><div class='date' style='clear: both; margin: 10px;'>    <p><b>Invoice date</b> <%-new Date(date*1000).toDateString()%></p></div><div class='receipt-number' style='clear: both; margin: 10px;'>    <p><b>Receipt Number</b> <%- receipt_number %></p></div><ul class='cogglelist' style='padding: 15px;'><% _.each(lines.data, function(line){ %><li class='line'>    <span class='quantity' style='display:inline-block; width: 5%'><%- line.quantity %></span>    <span class='item' style='display:inline-block; width: 70%'><%- line.plan ? line.plan.name : line.description %></span>    <span class='price' style='display:inline-block; width: 24%'><%- (line.amount/100).toFixed(2) %> (<%- line.currency.toUpperCase() %>)</span></li><% }); %></ul><p class='tax' style='float:right; clear: both'>Including VAT at <%- metadata.vat ? metadata.vat : 0 %>%: <b><%- (metadata.vat? (total / 100 - total / (Number(metadata.vat) + 100)).toFixed(2) : 0) %> (<%- currency.toUpperCase() %>)</b></p><p class='tax' style='float:right; clear: both'>Total:<b> <%- (total/100).toFixed(2) %> (<%- currency.toUpperCase() %>)</b></p><p class='company-info' style='margin-top: 100px; clear: both;'>Registered in England and Wales. No. 9030487</p><p class='vat-info'>VAT Number: 203 7881 12</p></div>",s=o.View.extend({tagName:"div",className:"invoice",template:i.template(r),events:{},initialize:function(e){i.bindAll(this,"render")},render:function(){var e=this.model.toJSON();return e.charge||(e.charge={}),e.charge.source||(e.charge.source={}),e.charge.metadata||(e.charge.metadata={}),this.$el.html(this.template(e)),this}}),l="<li class='invoice-link'><a target='_blank' data-bypass target='_blank' href='<%- slug %>/invoices/<%- id %>'>Invoice for <%- (charge && charge.statement_descriptor) || 'charge' %> on <%-new Date(date*1000).toDateString()%></a><span class='amount'><%- total/100 %> (<%- currency.toUpperCase() %>)</span></li>",a=o.View.extend({tagName:"ul",className:"cogglelist invoice-list",events:{},template:i.template(l),initialize:function(e){i.bindAll(this,"addOne","addAll","render"),this.options=e,this.listenTo(this.collection,"add",this.addOne),this.listenTo(this.collection,"reset",this.addAll),this.addAll()},render:function(){return this.addAll(),this},addOne:function(e){var t=e.toJSON(),n=getCoggleUser().getActiveOrg().get("slug");t.slug=n?"/"+n:"",this.$el.append(this.template(t))},addAll:function(){this.$el.empty(),this.collection.each(this.addOne)}});n.exports.InvoiceView=s,n.exports.InvoiceList=a}),define("views/CheatView",["require","exports","module","underscore","backbone"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=i.template('<div class="group context-desktop">    <div class="cheat-tip" data-l10n-id="sidebar-bgmenu2"><b>Zoom</b>, add <b>text labels</b>, <b>undo</b>, and <b>paste copied items</b> by right clicking the background.</div>    <div><h4 data-l10n-id="sidebar-whentyping">When typing:</h4></div>     <ul>        <li data-l10n-id="sidebar-sc-newitem">            <div class="helpitem">New Item: </div>             <div class="helpvalue">                 <div class="keyboardkey">shift</div>                 <span>+</span>                 <div class="keyboardkey">return</div>             </div>         </li>        <li data-l10n-id="sidebar-sc-newchild">            <div class="helpitem">New Child Item: </div>             <div class="helpvalue">                 <div class="keyboardkey">tab</div>             </div>         </li>        <li data-l10n-id="sidebar-sc-parent">            <div class="helpitem">Jump to Parent: </div>             <div class="helpvalue">                 <div class="keyboardkey">shift</div>                 <span>+</span>                 <div class="keyboardkey">tab</div>             </div>         </li>        <li data-l10n-id="sidebar-sc-markdown">            <div class="helpitem">Format text: </div>             <div class="helpvalue">use <a href="http://bloggle.coggle.it/coggle-markdown-reference" target="_blank">Markdown</a></div>         </li>    </ul></div><div class="group shortcuts">    <div><h4 data-l10n-id="sidebar-shortcuts">Shortcuts</h4></div>     <ul>        <li data-l10n-id="sidebar-removebranch">            <div class="helpitem">Remove Branch:</div>             <div class="helpvalue">                 <div class="keyboardkey remove">alt</div>                 <span>+ click  </span>                 <div class="diagram-button cross"></div>             </div>         </li>        <li data-l10n-id="sidebar-insertbranch">            <div class="helpitem">Insert Branch:</div>             <div class="helpvalue">                 <div class="keyboardkey">shift</div>                 <span>+ click </span>                 <div class="diagram-button arrow"></div>             </div>         </li>        <li data-l10n-id="sidebar-transplantbranch">            <div class="helpitem">Transplant Branch: </div>             <div class="helpvalue">                 <div class="keyboardkey">shift</div>                 <span>+ drag </span>                 <div class="diagram-button arrow"></div>             </div>         </li>        <li data-l10n-id="sidebar-addimages">            <div class="helpitem">Add <a target="_blank" href="http://bloggle.coggle.it/add-images-to-a-coggle/">Images</a>: </div>             <div class="helpvalue">                 <div>drag and drop</div>             </div>         </li>        <li data-l10n-id="sidebar-zoom">            <div class="helpitem">Zoom: </div>             <div class="helpvalue">                 <div class="keyboardkey">ctrl</div>                 <span>+ mousewheel </span>             </div>         </li>        <li data-l10n-id="sidebar-undo">            <div class="helpitem">Undo: </div>             <div class="helpvalue">                 <div class="keyboardkey undo"> ctrl </div>                 <span>+ </span>                 <div class="keyboardkey">Z </div>             </div>         </li>        <li data-l10n-id="sidebar-redo">            <div class="helpitem">Redo:</div>             <div class="helpvalue">                 <div class="keyboardkey undo"> ctrl </div>                 <span>+</span>                 <div class="keyboardkey">shift</div>                 <span>+</span>                 <div class="keyboardkey">Z</div>             </div>         </li>        </ul></div><div class="group context-touch">    <div class="cheat-tip" data-l10n-id="touch-pressitem"><b>Long-press</b> on an <b>item</b> to <b>remove</b> items, change <b>colour</b>, <b>auto-arrange</b>, cross-link, copy, and more.</div>    <div class="cheat-tip" data-l10n-id="touch-pressbackground"><b>Long-press</b> on the <b>background</b> to add <b>labels</b>, <b>undo</b>, and paste.</div></div><div class="group">    <div><h4 data-l10n-id="sidebar-markdown">Markdown</h4></div>     <div class="cheat-tip" data-l10n-id="markdown-checkbox"><code>- [X]</code> to create a <input type="checkbox"/> checkbox</div>    <div class="cheat-tip" data-l10n-id="markdown-code"><code>`text`</code> to use a <code>fixed width</code> font</div></div><div class="group">    <div><h4 data-l10n-id="sidebar-icons">Icons</h4></div>     <div class="cheat-tip" data-l10n-id="markdown-icons">Type <code>:</code> while editing or use the button along the top of the item editor.</div></div>'),s=o.View.extend({tagName:"div",className:"cheats",initialize:function(){i.bindAll(this,"render")},render:function(){return $(this.el).html(r()),this}});n.exports=s}),define("views/GlobalHelpView",["require","exports","module","underscore","backbone","jquery.cookie"],function(e,t,n){var i=e("underscore"),o=e("backbone");e("jquery.cookie");var r="<div class='global-help-content'>    <div class='contextual-help'></div>    <div class='search-box'>        <input data-l10n-id='help-search' type='text' class='search' placeholder='Help me to...'/>    </div></div><div class='global-help-button'></div>",s=o.View.extend({tagName:"div",className:"global-help-view",template:i.template(r),events:{"keydown .search":"handleSearchKeypress","click .global-help-button":"toggle"},initialize:function(e){i.bindAll(this,"render","handleSearchKeypress","setContextualHelp","toggle"),this.options=e},render:function(){return this.$el.html(this.template()),$.cookie("globalHelpOpen")&&"true"===$.cookie("globalHelpOpen")&&(this.resize(),this.$el.addClass("open")),this.contextView?(this.$el.find(".contextual-help").html(this.contextView.render().$el),this.contextView.delegateEvents()):this.$el.find(".contextual-help").empty(),$(window).one("coggle-mode-changed",function(){this.$el.removeClass("open")}.bind(this)),this},setContextualHelp:function(e){this.contextView=e,this.render()},handleSearchKeypress:function(e){if(13===e.keyCode){var t=this.$el.find(".search").val();window.open("https://coggle.help/search?query="+encodeURIComponent(t)),ga("send","event","GlobalHelp","Search",t)}27===e.keyCode&&(""===this.$el.find(".search").val()?this.toggle():this.$el.find(".search").val("")),e.stopPropagation()},resize:function(){this.$el.find(".global-help-content .contextual-help").css({"max-height":$(window).innerHeight()-200})},toggle:function(){this.resize(),this.$el.hasClass("open")?(this.$el.removeClass("open"),$.cookie("globalHelpOpen","false",{expires:3600,path:"/"})):(this.$el.addClass("open"),$.cookie("globalHelpOpen","true",{expires:3600,path:"/"}))}});s.instance=function(){return s._instance||(s._instance=new s),s._instance},n.exports=s}),define("models/APIClients",["require","exports","module","backbone","env"],function(e,t,n){var i=e("backbone"),o=i.Model.extend({idAttribute:"_id"}),r=i.Collection.extend({model:o,url:e("env").api.url+"/api/1/clients"});n.exports.APIClientModel=o,n.exports.APIClientCollection=r}),define("views/APIClientViews",["require","exports","module","underscore","backbone","env"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=i.template("<error></error><div class='field'><div class='about'>The name of the application. This will be displayed to your users when Coggle asks them to authorize your application.</div><span class='input-label'>Application Name</span><input class='name' value='<%-name%>' /></div><div class='field'><div class='about'>The ID of your client application. You'll need this when you're using the Coggle OAuth2 APIs.</div><span class='input-label'>Client ID</span><input class='clientsecret selects' value='<%-_id%>' readonly/></div><div class='field clientsecret'><div class='about'>This is your client secret. You'll need this to use the OAuth2 APIs. Keep it safe and <b>don't share it with anyone</b>.</div><span class='input-label'>Client Secret</span><div class='wrap'><a class='refresh'><img src='"+e("env").cdn.url+"/img/refresh.png'></a><input class='clientsecret selects' value='<%-clientSecret%>' readonly/></div></div><div class='field'><div class='about'>Users get redirected back here after the authentication process. It should handle the access codes and error codes from Coggle.</div><span class='input-label'>Redirect URL</span><input class='redirecturi' value='<%-redirectURI%>' placeholder='Redirect URL' /></div><a class=' button danger delete'>    <span class='action'>Delete</span>    <span class='sure'>I&#39;m sure</span></a><div class='save-message'></div>"),s=o.View.extend({tagName:"div",className:"client-details",events:{"keypress input":"updateOnEnter","blur input:not([readonly])":"close","click .refresh":"generateSecret","click .selects":"select","click .delete":"deleteAreYouSure","click .sure":"removeClient"},initialize:function(e){i.bindAll(this,"render","close","edit","updateOnEnter","removeClient"),this.options=e,this.listenTo(this.model,"change",this.render),this.listenTo(this,"selected",function(){this.$el.parent().find(".selected").removeClass("selected"),this.$el.addClass("selected")}.bind(this))},render:function(){var e=this.model.toJSON();return $(this.el).html(r(e)),this},generateSecret:function(){this.model.save({clientSecret:null},{wait:!0})},select:function(e){$(e.target).select()},edit:function(e){$(this.el).addClass("editing"),this.input.focus()},message:function(e){this.saveMessageTimer&&clearTimeout(this.saveMessageTimer),this.$el.find(".save-message").html(e),this.$el.find(".save-message").show(),this.saveMessageTimer=setTimeout(function(){this.$el.find(".save-message").fadeOut()}.bind(this),2e3)},close:function(){this.message("Saving..."),this.model.save({name:this.$el.find("input.name").val(),redirectURI:this.$el.find("input.redirecturi").val(),appUrl:this.$el.find("input.appUrl").val(),repoUrl:this.$el.find("input.repoUrl").val()},{wait:!0,success:function(){this.message("Saved")}.bind(this),error:function(){this.message("Save failed!")}.bind(this)}),$(this.el).removeClass("editing")},updateOnEnter:function(e){13==e.keyCode&&$(e.target).blur()},deleteAreYouSure:function(){this.$el.find(".delete").addClass("disabled").addClass("areyousure"),window.setTimeout(function(){this.$el.find(".delete").removeClass("disabled")}.bind(this),1e3),window.setTimeout(function(){this.$el.find(".delete").removeClass("areyousure")}.bind(this),6e3)},removeClient:function(e){this.$el.find(".delete").hasClass("disabled")||(this.model.destroy({wait:!0}),this.$el.slideUp(function(){this.$el.remove()}.bind(this)))}}),l=i.template("<div class='name'><%-name%></div><div class='tags'></div>"),a=o.View.extend({tagName:"li",className:"client panel",events:{click:"selected"},initialize:function(e){i.bindAll(this,"render","selected","onRemoved"),this.options=e,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.onRemoved)},render:function(){return $(this.el).html(l(this.model.toJSON())),this},onRemoved:function(){this.$el.slideUp(function(){this.$el.remove()}.bind(this))},selected:function(){this.clientDetails||(this.clientDetails=new s({model:this.model})),$(this.options.details).html(this.clientDetails.render().el),this.clientDetails.delegateEvents(),this.clientDetails.trigger("selected")}}),u=i.template("<ul class='col-sm-3 clients cogglelist'>    <li class='create-client selected'>Add Client</li></ul><div class='col-sm-9 paneldetails'></div>"),c=i.template("<div class='choose-type'>    <div class='field'>        <h3>Create Client</h3>        <p class='description'>Create a new Coggle API client.</p>        <div class='button green create'>Create</div>    </div></div>"),d=o.View.extend({tagName:"div",className:"client-list",events:{"click .create-client":"showChoose","click .create":"createClient","click li":"select"},initialize:function(e){i.bindAll(this,"addOne","addAll","render","select"),this.options=e,this.listenTo(this.collection,"add",this.addOne),this.listenTo(this.collection,"reset",this.addAll),this.listenTo(this.collection,"all",this.render),this.listenToOnce(this,"added",function(e){e.$el.click()}),$(this.el).html(u()),this.showChoose()},showChoose:function(){this.$el.find(".selected").removeClass("selected"),this.$el.find(".paneldetails").html(c()),this.$el.find(".create-client").addClass("selected")},createClient:function(){this.collection.create({failure:[0,0],success:[0,0],users:[0,0]},{wait:!0}),this.once("added",function(e,t){e.selected()})},select:function(e){var t=$(e.target).closest("li"),n=this.$el.find(".paneldetails"),i=n.position().top+n.height(),o=t.position().top+t.height(),r=o-i;r<0&&(r=0),n.css("margin-top",r),this.$el.find(".selected").removeClass("selected"),t.addClass("selected")},render:function(){return this},addOne:function(e){var t=new a({model:e,details:this.$el.find(".paneldetails")});$(this.el).find(".clients .create-client").before(t.render().el),this.trigger("added",t,e),t.trigger("added")},addAll:function(){this.collection.sort(),this.collection.each(this.addOne)}});n.exports.APIClientDetailsView=s,n.exports.APIClientView=a,n.exports.APIClientList=d}),define("views/DeveloperView",["require","exports","module","underscore","backbone","models/APIClients","views/APIClientViews","models/User"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=e("models/APIClients").APIClientCollection,s=e("views/APIClientViews").APIClientList,l=(e("models/User"),"<br/><br/><h1>Develop Using the Coggle API</h1><p>The <a href='http://bloggle.coggle.it/introducing-the-coggle-api/'>Coggle API</a> lets you make requests to create and manipulate Coggles, to visualise your data, integrate Coggle with an existing process, import and export to different file types, and anything else that you can imagine!</p><h1 class='clientsheading'>Your API Clients</h1><span class='coggledocs'><a href='https://embed.coggle.it/diagram/532f2f5007eb88f857000976/06b3a62e14eb54cf7e99086f3cf7dd0398af0ecca4476a8778cad4a67eba53bb'>API Documentation</a></span><br><h1>Resources</h1><p>We've put together a set of useful resources to get you started. This includes a client library, some demo applications and documentation surrounding our API.<p><ul class='apiresources'>    <li>A <a href='https://github.com/Coggle/coggle-js'> client library</a> for node.js</li>    <li>A <a href='https://github.com/Coggle/coggle-issue-importer'> GitHub issue importer</a> with <a href='http://github2coggle.herokuapp.com'>running demo</a></li>    <li>A <a href='https://github.com/Coggle/coggle-opml-importer'> OPML importer</a> with <a href='http://opmloggle.herokuapp.com'>running demo</a></li>    <li>and the <a href='https://embed.coggle.it/diagram/532f2f5007eb88f857000976/06b3a62e14eb54cf7e99086f3cf7dd0398af0ecca4476a8778cad4a67eba53bb'>API documentation</a></li></ul>"),a=o.View.extend({tagName:"div",className:"developer-view container",template:i.template(l),initialize:function(){if(!getCoggleUser().isGuest()){var e=new r;this.clientListView=new s({collection:e}),e.fetch()}},render:function(){return this.$el.html(this.template()),this.clientListView&&(this.$el.find(".coggledocs").after(this.clientListView.render().$el),this.clientListView.delegateEvents()),this}});n.exports=a}),define("views/MarketSurveyView",["require","exports","module","underscore","backbone","utils/cogglitude"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=(e("utils/cogglitude").onAmplitude,i.template("<div class='container-fluid'>    <error></error>    <h3>Help us tailor Coggle to you</h3>    <div class='question row'></div>    <a class='button green disabled done'>Done</a>    <span class='progress'><%- progress %></span></div>")),s=i.template("<p>Which of these best descibes you?</p><div class='segment col-xs-4' data-segment='education'>    <div class='segment-title'>Education</div>    <div class='role' data-role='student'>Student</div>    <div class='role' data-role='teacher'>Teacher</div>    <div class='role' data-role='edu-administrator'>Administrator</div></div><div class='segment col-xs-4' data-segment='it-or-engineering'>    <div class='segment-title'>IT / Engineering</div>    <div class='role' data-role='software-engineer'>Software Engineer</div>    <div class='role' data-role='network-engineer'>Network Engineer</div>    <div class='role' data-role='management'>Management</div>    <div class='role' data-role='other-engineering'>Other</div></div><div class='segment col-xs-4' data-segment='operations'>    <div class='segment-title'>Operations</div>    <div class='role' data-role='operations-manager'>Operations Manager</div>    <div class='role' data-role='project-manager'>Project Manager</div>    <div class='role' data-role='human-resources'>Human Resources</div>    <div class='role' data-role='other-operations'>Other</div></div><div class='segment col-xs-4' data-segment='product-or-design'>    <div class='segment-title'>Product / Design</div>    <div class='role' data-role='product-manager'>Product Manager</div>    <div class='role' data-role='ux-designer'>UX Designer</div>    <div class='role' data-role='other-design'>Other</div></div><div class='segment col-xs-4' data-segment='business'>    <div class='segment-title'>Business</div>    <div class='role' data-role='finance'>Finance</div>    <div class='role' data-role='marketing'>Marketing</div>    <div class='role' data-role='sales'>Sales</div>    <div class='role' data-role='management'>Management</div></div><div class='segment col-xs-4' data-segment='other'>    <div class='segment-title'>Other</div>    <div class='role' data-role='other'>Other</div></div>"),l=i.template("<p>What would you like to create? You can select more than one.</p><div class='use-case col-xs-4 concept-mapping' data-use-case='concept-mapping'>Concept Maps</div><div class='use-case col-xs-4 mind-mapping' data-use-case='mind-mapping'>Mind Maps</div><div class='use-case col-xs-4 flow-charts' data-use-case='flow-charts'>Flow Charts</div>");n.exports=o.View.extend({events:{"click .role":"selectRole","click .use-case":"selectUseCase","click .button.done":"save"},tagName:"div",className:"market-survey-view",initialize:function(e){i.bindAll(this,"render","selectRole","selectUseCase","save"),this.options=e},render:function(){var e="1 of 2";return this.role&&(e="2 of 2"),this.$el.html(r({progress:e})),this.segment?this.renderUseCases():this.renderSegments(),this.delegateEvents(),this},canSubmit:function(){return this.role&&this.segment&&this.usecases&&this.usecases.length},renderSegments:function(){this.$el.find(".question").first().html(s())},renderUseCases:function(){this.$el.find(".question").first().html(l())},selectUseCase:function(e){$(e.target).toggleClass("selected"),this.usecases=this.$el.find(".use-case.selected").map(function(e,t){return $(t).attr("data-use-case")}).toArray(),this.$el.find(".button.done").toggleClass("disabled",!this.usecases.length)},selectRole:function(e){var t=$(e.target);this.segment=t.closest(".segment").attr("data-segment"),this.role=t.attr("data-role"),this.render()},save:function(){if(this.canSubmit()){var e={survey_segment:this.segment,survey_role:this.role,survey_usecases:this.usecases};this.model.save({segmentation:e}),this.model.getActions().setExternalUserProperties(e),this.model.getActions().perform("survey:market:complete"),this.remove()}}})}),function(e){"function"==typeof define&&define.amd?define("plugins/jquery.booleanSlider",["jquery"],e):e(jQuery)}(function(e){e.fn.booleanSlider=function(t){this.each(function(){var t=this;this.toNo=function(n){e(t).off("click"),e(t).removeClass("on").html("NO"),e(t).parent().next('input[type="checkbox"]').removeAttr("checked"),e(t).attr("data-l10n-id","slider-no"),setTimeout(function(){e(t).l20n()},0),e(t).click(t.toYes),(void 0===n||n)&&setTimeout(function(){e(t).trigger("changed",{state:!1})},100)},this.toYes=function(n){e(t).off("click"),e(t).addClass("on").html("YES"),e(t).parent().next('input[type="checkbox"]').prop("checked","checked"),e(t).attr("data-l10n-id","slider-yes"),setTimeout(function(){e(t).l20n()},0),e(t).click(t.toNo),(void 0===n||n)&&setTimeout(function(){e(t).trigger("changed",{state:!0})},100)},e(t).hasClass("on")?t.toYes(!1):t.toNo(!1)})}}),define("views/PersonalCommunicationView",["require","exports","module","underscore","backbone","plugins/jquery.booleanSlider","env"],function(e,t,n){var i=e("underscore"),o=e("backbone");e("plugins/jquery.booleanSlider");var r="<error></error><div class='settings-section'><h3 data-l10n-id='me-emails-title'>Email Addresses</h3><p data-l10n-id='me-emailstip'>We'll only email your primary address, but you can receive invites to any of the others.</p><ul class='cogglelist emails'><% _.each(emails, function(email) {%>    <li><%-email%>    <% if(email == emails[0]) {%>        <b data-l10n-id='me-emails-primary'> (primary)</b>    <%} else { %>        <div class='icons'>            <img src='"+e("env").cdn.url+"/img/bin.png' class='delete icon' data-id='<%-email%>' />        </div>    <% } %>    </li><%})%></ul><h3 data-l10n-id='me-communication-title'>Communication</h3><span data-l10n-id='me-talktome'>Talk to me:</span><div class='checkbox-slider-frame'>    <span class='allow_communication slider-button <%-allow_communication?'on':''%>'><%-allow_communication?'YES':'NO'%></span></div><input type='checkbox' name='allow_communication'/><span data-l10n-id='me-diagram-notifications'>Diagram notifications:</span><div class='checkbox-slider-frame'>    <span class='allow_transactional_communication slider-button <%-allow_transactional_communication?'on':''%>'><%-allow_transactional_communication?'YES':'NO'%></span></div><input type='checkbox' name='allow_transactional_communication'/></div>";n.exports=o.View.extend({tagName:"div",className:"personal-communication",template:i.template(r),events:{"changed .slider-button.allow_communication":"toggleCommunication","changed .slider-button.allow_transactional_communication":"toggleTransactionalCommunications","click .emails .delete":"removeEmail"},initialize:function(e){
i.bindAll(this,"render","error","toggleCommunication","toggleTransactionalCommunications"),this.options=e,this.listenTo(this.model,"changed",this.render)},removeEmail:function(e){var t=$(e.target).attr("data-id");return $.ajax({url:"/api/1/me/emails/"+t,type:"delete"}).done(function(t){t.error?this.$el.find("error").text(t.msg):$(e.currentTarget).parent().parent().remove()}),e.preventDefault(),!1},toggleCommunication:function(e,t){this.model.set("allow_communication",t.state),this.model.save(void 0,{success:function(){this.error(null)}.bind(this),error:function(){this.error("Saving communication settings failed.")}.bind(this)})},toggleTransactionalCommunications:function(e,t){this.model.set("allow_transactional_communication",t.state),this.model.save(void 0,{success:function(){this.error(null)}.bind(this),error:function(){this.error("Saving transactional communication settings failed.")}.bind(this)})},render:function(){var e=this.model.toJSON();return $(this.el).html(this.template(e)),this.$el.find(".slider-button").booleanSlider(),this},error:function(e){this.$el.find("error").first().text(e)}})}),define("views/PersonalLanguageView",["require","exports","module","underscore","backbone"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=i.template("<error></error><div class='settings-section'><h3 data-l10n-id='me-language-title'>Choose Your Preferred Language</h3><select class='select_language' name='select_language'>    <option value='default'>(Browser Default)</option>    <option value='en-GB'>English (UK)</option>    <option value='en-US'>English (US)</option>    <option value='en-AU'>English (Australia)</option>    <option value='de'>Deutsch</option>    <option value='es'>Español</option>    <option value='fr'>Français</option>    <option value='ja'>日本語</option>    <option value='pt-BR'>Português (do Brasil)</option>    <option value='ru'>ру́сский язы́к</option>    <option value='ro-RO'>Română</option>    <option value='sv'>Svenska</option>    <option value='zh-CN'>中文 (简化字)</option>    <option value='zh-TW'>中文 (正體字, 臺灣)</option></select><p data-l10n-id='me-language-tip'>Help us provide Coggle in your native language, or add something that's missing by contributing to our <a href='https://github.com/coggle/coggle-translations'>translations project</a> on Github!</p><p data-l10n-id='me-language-questions'>If you have any questions about translations – or you have corrections or improvements and you're not sure how to help out, just drop us an email at <a href='mailto:translate@coggle.it'>translate@coggle.it</a>.</p></div>");n.exports=o.View.extend({tagName:"div",className:"personal-language",events:{"change .select_language":"selectionChanged"},initialize:function(e){i.bindAll(this,"render","error","selectionChanged"),this.options=e,this.listenTo(this.model,"changed",this.render)},selectionChanged:function(e,t){this.model.set("preferred_locale",this.$el.find(".select_language").val()),this.model.save(void 0,{success:function(){location.reload()},error:function(){this.error("Failed to update language settings.")}.bind(this)})},render:function(){var e=this.model.toJSON();return $(this.el).html(r(e)),$(this.el).find(".select_language").val(e.preferred_locale),this},error:function(e){this.$el.find("error").first().text(e)}})}),define("views/CancelPlanView",["require","exports","module","underscore","backbone","env"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=i.template("<error></error><div class='row'>    <div class='col-md-5'>        <img style='width: 100%' src='"+e("env").cdn.url+"/img/features/rejoin-branch.gif'/>    </div>    <div class='col-md-7'>        <p><b>Really cancel your plan?</b></p>        <p>            If you have more than 3 private diagrams, you won't be able to edit them while using the free version.            You'll also miss out on <b>multiple root nodes</b>, <b>customisable line styles</b>,            and all the other <a href='/awesome' data-bypass>Awesome features</a>!        </p>        <% if (discount_available) { %>            <p>Stay Awesome and get <b>30% off</b> your subscription for the next <b>3 months</b>!</p>            <div class='button apply-discount'>Stay Awesome!</div>        <% } %>        <div class='button danger im-sure'>Cancel Subscription</div>        <a class='back'>Back</a>    </div></div>"),s=i.template("<div class='loadspinner'></div></div>");n.exports=o.View.extend({tagName:"div",className:"cancel-plan",events:{"click .im-sure":"cancelSubscription","click .apply-discount":"applyRetentionDiscount","click .back":"back"},initialize:function(e){i.bindAll(this,"render","cancelSubscription","error","applyRetentionDiscount"),this.options=e},render:function(){return this.model.getCustomer(function(e,t){return e?this.error(e):void this.model.getPlans(function(e,n){return e?this.error("Something went wrong loading your plans! Please try again later"):n.getActivePlan()?void getCoggleUser().getActions(function(e,i){var o=!!e||i&&i.get("coupon:stay_awesome"),s="awesome"===n.getActivePlan().id,l=1e3*t.get("created");this.$el.html(r({discount_available:s&&!o&&l<Date.now()-12096e5}))}.bind(this)):o.history.navigate("/me/billing",!0)}.bind(this))}.bind(this)),this},error:function(e){this.$el.text(e)},think:function(){this.$el.html(s())},back:function(){this.trigger("back")},cancelSubscription:function(){this.think(),getCoggleUser().getActions().perform("cancellation:"+this.model.getPlans().getActivePlan().id),this.model.getPlans().getActivePlan().destroy({wait:!0,success:function(){window.location="/me/billing/survey"},error:function(){this.error("Something went wrong while canceling your subscription, please try again or contact Coggle support!")}.bind(this)})},applyRetentionDiscount:function(){this.think(),this.model.getPlans().getActivePlan().save({coupon:"stay_awesome"},{wait:!0,success:function(){getCoggleUser().getActions().unique("coupon:stay_awesome"),this.$el.html("<b>Discount applied!</b>")}.bind(this)})}})}),define("views/PlanSummaryView",["require","exports","module","jquery.l20n","underscore","backbone","views/CancelPlanView"],function(e,t,n){e("jquery.l20n");var i=e("underscore"),o=e("backbone"),r=e("views/CancelPlanView"),s="<h3>Subscription</h3><error></error><div class='plan-details'><div class='loadspinner'></div></div></div>",l="<p data-l10n-id='summary-free-plan' class='free'>You don't have a subscription yet. <a href='/plans?src=me-upgrade-now' class='show-plans'>Upgrade now!</a></p>",a="<p data-l10n-id='summary-active-plan' data-l10n-ctx='{\"planName\":\"<%- plan %>\"}' class='active'>You're on the <code><%- plan %></code> plan. <a class='cancel'>Cancel subscription</a> or <a href='/plans?src=me-compare-plans'>compare plans</a>.</p>",u="<div data-l10n-id='summary-upgrade-yearly'><p class='upgrade'>Get two months free (<b>save 15%</b>) by paying annually. <a href='/plans/awesome:yearly?src=me-billing-upgrade' class='button green upgrade-yearly'>Upgrade (<b>$50</b>)</a></p><p>Time remaining on your current plan will be automatically deducted from the cost of the upgrade.</p></div>",c="<p data-l10n-id='summary-ending-plan' data-l10n-ctx='{\"planName\":\"<%- plan %>\"}' class='active'>You're currently on the <code><%- plan %></code> plan. It's <b>set to cancel</b> at the end of the current billing period. <a class='button green resubscribe'>Resubscribe</a></p>",d="<p data-l10n-id='summary-overdue-plan' class='overdue'>Your subscription is inactive due to an overdue payment. You can fix this by updating your card or getting in touch with us at <b>hello@coggle.it</b>.</p>",h=o.View.extend({tagName:"div",className:"plan-summary",events:{"click .resubscribe":"resubscribe","click .cancel":"confirmCancel"},template:i.template(s),freeTemplate:i.template(l),activeTemplate:i.template(a),upgradeTemplate:i.template(u),endingTemplate:i.template(c),overdueTemplate:i.template(d),initialize:function(e){i.bindAll(this,"render","error"),this.options=e,this.working(!0),this.model.getPlans(function(e){return this.working(!1),e?this.error("Something went wrong loading your plans! Please try again later"):void this.render()}.bind(this)),this.cancelView=new r({model:this.model}),this.addChildView(this.cancelView),this.listenTo(this.cancelView,"back",function(){this.showCancel=!1,this.render()}.bind(this))},render:function(){if(this.$el.html(this.template()),this.showCancel)return this.$el.find(".plan-details").html(this.cancelView.render().$el),this.cancelView.delegateEvents(),this;if(this.isWorking)return this;var e=this.model.getPlans(),t=e.getActivePlan();t&&(t=t.toJSON());var n=t?t.plan:"free";return this.model.isTriallingAwesome()&&(n="free"),!t||"free"===n||t.ending&&t.overdue?this.$el.find(".plan-details").html(this.freeTemplate()):t.ending?this.$el.find(".plan-details").html(this.endingTemplate(t)):(this.$el.find(".plan-details").html(this.activeTemplate(t)),t.overdue&&this.$el.find(".plan-details").prepend(this.overdueTemplate(t)),"awesome"===n&&this.$el.find(".plan-details").append(this.upgradeTemplate(t))),this},error:function(e){this.$el.find("error").first().text(e)},working:function(e){this.isWorking=e,this.render()},confirmCancel:function(){this.showCancel=!0,this.render()},resubscribe:function(){this.working(!0),this.model.getPlans().getActivePlan().save({active:!0},{success:function(){this.working(!1)}.bind(this),error:function(){this.working(!1),this.error("Resubscribe failed - please try again!")}.bind(this)})}});n.exports=h}),define("views/PersonalBillingView",["require","exports","module","underscore","backbone","views/PlanSummaryView","views/PlanSelectionView","views/CustomerView","views/InvoiceViews"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=e("views/PlanSummaryView"),s=e("views/PlanSelectionView"),l=e("views/CustomerView"),a=e("views/InvoiceViews").InvoiceList,u="<error></error><div class='plans'></div><div class='subscription settings-section'></div><div class='stripe'></div><div class='invoices'></div></div>",c=function(){return'<a class="typeform-share" href="https://coggleit.typeform.com/to/GONu8b?followup='+getCoggleUser().id+'" data-mode="popup" data-auto-open=true target="_blank"></a><script>(function(){var qs,js,q,s,d=document,gi=d.getElementById,ce=d.createElement,gt=d.getElementsByTagName,id="typef_orm_share",b="https://s3-eu-west-1.amazonaws.com/share.typeform.com/";if(!gi.call(d,id)){js=ce.call(d,"script");js.id=id;js.src=b+"share.js";q=gt.call(d,"script")[0];q.parentNode.insertBefore(js,q)}})()</script>'};n.exports=o.View.extend({tagName:"div",className:"personal-billing",template:i.template(u),initialize:function(e){i.bindAll(this,"render"),this.options=e,$(this.el).html(this.template(this.model.toJSON())),this.options.survey&&this.$el.prepend(c()),this.planView=new r({model:getCoggleUser()}),this.$el.find(".subscription").append(this.planView.render().$el),this.addChildView(this.planView),this.customerView=new l({model:this.model.getCustomer(function(){this.model.getCustomer().id?this.$el.find(".stripe").append(this.customerView.render().$el):getCoggleUser().getPlans(function(e,t){!e&&t.getActivePlan()||(this.planSelection=new s({model:getCoggleUser(),src:"me-billing"}),this.$el.find(".plans").append(this.planSelection.render().$el),this.$el.find(".subscription").hide())}.bind(this))}.bind(this))}),this.addChildView(this.customerView),this.invoiceList=new a({collection:getCoggleUser().getInvoices(function(){})}),this.$el.find(".invoices").html(this.invoiceList.render().$el),this.addChildView(this.invoiceList)},render:function(){return this}})}),define("views/RecommendCoggleView",["require","exports","module","underscore","backbone","views/RecommendProgressView","env"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=e("views/RecommendProgressView"),s="<div class='settings-section'>    <h3>Recommend Coggle</h3>    <p data-l10n-id='recommend-already-awesome'>You're already Awesome - help the rest of the world discover Coggle!</p>    <input class='link' value='<%-link%>' readonly/></div>",l="<div class='settings-section'>    <h3>Recommend Coggle</h3>    <div data-l10n-id='claim-free-month'>        <p>Claim your free month of Coggle Awesome!</p>        <div class='button redeem'>Redeem Now</div>    </div></div>",a="<div class='settings-section'>    <h3>Recommend Coggle</h3>    <div class='progress-view'></div>     <div data-l10n-id='recommend-share-link'>        <p>Either invite collaborators to your diagrams, or share your referral link via             <a target='_blank' href='https://www.facebook.com/sharer/sharer.php?u=<%-encodeURIComponent(link+'?utm_medium=facebook&utm_campaign=recommend')%>'>Facebook</a>,             <a target='_blank' href='https://twitter.com/intent/tweet?related=coggleit&text=Like%20superpowers%20for%20your%20mind!%20%23coggle&url=<%-encodeURIComponent(link+'?utm_medium=twitter&utm_campaign=recommend')%>'> Twitter</a>,             or <a target='_blank' href='mailto:friend@example.com?subject=Check out Coggle!&amp;body=Coggle is a great way to get creative! I use it all the time and love it. You should totally sign up.%0a%0aCheck out this link to learn more: <%-encodeURIComponent(link+'?utm_medium=email&utm_campaign=recommend')%>'>email</a>.        </p>        <input class='link' value='<%-link%>' readonly/>    </div></div>";n.exports=o.View.extend({tagName:"div",className:"recommend-coggle",template:i.template(a),claimTemplate:i.template(l),alreadyAwesomeTemplate:i.template(s),events:{"mouseup input":"select","click .redeem":"redeem"},initialize:function(e){i.bindAll(this,"render","select"),this.options=e,this.progressView=new r({model:this.model}),this.progressView.$el.addClass("progress-dark")},select:function(){this.$el.find("input").select()},render:function(){var t=e("env").api.url+"/recommend/"+this.model.id;return this.model.referralTrialEligiblilityState(function(e,n,i,o){return e?this.$el.html("Sorry, something went wrong loading your invites. Please try again later!"):void(this.model.isAwesome()?this.$el.html(this.alreadyAwesomeTemplate({link:t})):n?this.$el.html(this.claimTemplate({link:t})):(this.$el.html(this.template({link:t})),this.$el.find(".progress-view").first().prepend(this.progressView.render().$el)))}.bind(this)),this},redeem:function(){this.model.referralTrialEligiblilityState(function(e,t){return e?this.$el.html("Sorry, something went wrong starting your trial. Please contact Coggle support!"):void(t&&this.model.getPlans().create({plan:"awesome",trialling_until:new Date(Date.now()+2592e6)},{wait:!0,success:function(){this.$el.html("Hold on, we're making things Awesome..."),this.model.getActions().unique("coupon:recommend-3"),setTimeout(function(){window.location="/"},2e3)}.bind(this),error:function(){this.$el.html("Sorry, something went wrong starting your trial. Please contact Coggle support!")}.bind(this)}))}.bind(this))}})}),define("views/PersonalAccountView",["require","exports","module","underscore","backbone"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r="<div class='settings-section'><error></error><h3>Close Your Coggle Account</h3><p>Permenantly close your free Coggle account.</p><p>This process is <b>irreversible</b> and will take effect immediately. You will lose access to all your diagrams, so make sure you have exported any you want to keep.</p><button class='danger button delete-account'>Close my Account</button><div class='confirmation' style='display:none'><input placeholder='Type your email address' class='email-confirm'/><button class='danger button confirm-delete-account'>CONFIRM</button></div></div>";n.exports=o.View.extend({tagName:"div",className:"personal-account",template:i.template(r),events:{"click .delete-account":"confirmDelete","click .confirm-delete-account":"deleteNow"},initialize:function(e){i.bindAll(this,"render","confirmDelete","deleteNow"),this.options=e},confirmDelete:function(){this.$el.find(".delete-account").hide(),this.$el.find(".confirmation").show(),this.$el.find(".confirmation .email-confirm").focus()},deleteNow:function(){this.model.get("emails")[0]==this.$el.find(".confirmation .email-confirm").val()?(this.$el.find("error").empty(),getCoggleUser().getActions().perform("delete-account"),this.$el.find(".button, input").attr("disabled",!0).addClass("disabled"),this.model.destroy({data:{confirm_email:this.$el.find(".confirmation .email-confirm").val()},processData:!0,wait:!0,success:function(){window.location="https://coggleit.typeform.com/to/eoPCdC"}.bind(this),error:function(){this.$el.find(".button, input").attr("disabled",!1).removeClass("disabled"),this.$el.find("error").text("Your account could not be removed. Make sure any paid subscriptions are cancelled first!")}.bind(this)})):this.$el.find("error").text("Email does not match.")},render:function(){var e=this.model.toJSON();return $(this.el).html(this.template(e)),this}})}),define("views/FilterableListView",["require","exports","module","underscore","backbone"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=i.template("<div class='search-box'>    <input class='search' placeholder='Filter'/></div><ul class='cogglelist list-items'></ul>");n.exports=o.View.extend({tagName:"div",className:"filterable-list-view",events:{"keyup input.search":"updateFilter"},initialize:function(e){i.bindAll(this,"addOne","addAll","render","updateFilter"),this.options=e,this.collections=e.collections,this.collections.map(function(e){this.listenTo(e,"add",this.addAll)}.bind(this))},updateFilter:function(){var e=this.$el.find("input.search").val();e.length?this.filterText=e:this.filterText=!1,this.$el.find(".list-items").empty(),this.addAll()},render:function(){return this.$el.html(r()),this.addAll(),this},addOne:function(e){var t=this.options.item_class,n=i.clone(this.options.item_options);n.model||(n.model=e);var o=new t(n);this.addChildView(o),this.$el.find(".list-items").append(o.render().$el)},addAll:function(){this.$el.find(".list-items").empty(),this.collections.map(function(e){this.filterText&&e.search&&(e=e.sort().search(this.filterText)),e.map(this.addOne)}.bind(this))}})}),define("views/OrganisationMemberView",["require","exports","module","underscore","backbone","views/MemberIconView","views/AccessSliderView"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=e("views/MemberIconView"),s=e("views/AccessSliderView"),l=i.template("<b class='name hidden-xs'><%- name || email %></b><% if (name && email) { %><span class='email hidden-sm hidden-xs'> (<%- email %>)</span><% } %><span class='tags'></span><div class='icons'>    <% if ((!is_self) && (!is_invite)) { %>        <a class='button orange compact view-diagrams' href='/<%- slug %>?member=<%- user %>'>View As</a>    <% } %>    <% if (!is_self) { %>        <div class='button gray compact change-permissions'>Edit</div>        <div class='button danger compact remove'>Remove</div>    <% } %></div>"),a=i.template("<span class='tag'><%- tag %></span>");n.exports=o.View.extend({tagName:"li",className:"org-member",events:{"click .change-permissions":"openPermissions","click .user-icon":"openPermissions","click .tags .tag":"openPermissions","click .remove":"removeMember"},initialize:function(e){i.bindAll(this,"render"),this.options=e,this.listenTo(this.model,"remove",this.remove),this.listenTo(this.model,"change:permissions",this.renderTags)},renderTags:function(){var e=this.model.get("permissions").indexOf("admin")!==-1,t=[e?"administrator":"member"];this.model.isMe()&&(t=["you"]),this.$el.find(".tags").html(t.map(function(e){return a({tag:e})}).join(""))},render:function(){var e=this.model.toJSON();e.is_self=this.model.isMe(),e.is_invite=!this.model.get("name"),e.slug=this.options.organisation.get("slug"),e.email||(e.email="<no email address>"),this.$el.html(l(e)),this.renderTags();var t=new r({model:this.model});return this.$el.prepend(t.render().$el),this},openPermissions:function(){if(!this.model.isMe()){if(!this.accessSlider){var e=[{label:'Member<br/><span class="tip">Allow creating documents</span>',data:"write"},{label:'Administer<br/><span class="tip">Manage people, billing and sharing</span>',data:"admin"}];this.accessSlider=new s({model:this.model,roles:e,removable:!1}),this.addChildView(this.accessSlider)}this.$el.find(".user-icon").callout(this.accessSlider.render().$el,{my:"left top",at:"center bottom"}).open(),this.accessSlider.delegateEvents()}},removeMember:function(){this.model.destroy({wait:!0,error:function(e,t){console.error(t)}})}})}),define("views/OrganisationGuestMemberView",["require","exports","module","underscore","backbone","views/MemberIconView"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=e("views/MemberIconView"),s=i.template("<b class='name hidden-xs'><%- name || email %></b><% if (name && email) { %><span class='email hidden-sm hidden-xs'> (<%- email %>)</span><% } %><span class='tags'><span class='tag'>guest</span></span><div class='icons'>    <a class='button orange compact view-diagrams'href='/<%- slug %>/folder/shared?member=<%- _id %>'>View As</a>    <a class='button green compact make-full-member'>Upgrade</a>    <div class='button danger compact remove'>Remove All Access</div></div><error></error>");n.exports=o.View.extend({tagName:"li",className:"org-member org-guest-member",events:{"click .remove":"removeMember","click .make-full-member":"makeFullMember"},initialize:function(e){i.bindAll(this,"render","removeMember","makeFullMember"),this.options=e,this.listenTo(this.model,"remove",this.remove)},render:function(){var e=this.model.toJSON();e.slug=this.options.organisation.get("slug"),this.$el.html(s(e));var t=new r({model:this.model});return this.$el.prepend(t.render().$el),this},error:function(e){this.$el.find("error").first().text(e)},removeMember:function(){window.confirm("Are you sure you want to remove all access to your organsiation for this user? This cannot be undone.")&&this.model.destroy({wait:!0,success:function(){console.log("Removed all access for user")},error:function(){console.log(arguments),this.error("Failed to remove user!")}.bind(this)})},makeFullMember:function(){var e=this.options.organisation.getAccess(),t=this.options.organisation.getGuestMembers();e.create({user:this.model.get("_id"),permissions:["read","write"]},{wait:!0,success:function(){this.error(null),t.fetch()}.bind(this),error:function(){this.error("Failed to upgrade user to full organisation member.")}.bind(this)})}})}),define("views/OrganisationMembersView",["require","exports","module","underscore","backbone","plugins/jquery.callout","views/FilterableListView","views/AccessListView","views/ShareViews","views/OrganisationMemberView","views/OrganisationGuestMemberView"],function(e,t,n){var i=e("underscore"),o=e("backbone");e("plugins/jquery.callout");var r=e("views/FilterableListView"),s=(e("views/AccessListView"),e("views/ShareViews").ShareView),l=i.template("<error></error><div class='settings-section'>    <h3 style='float:left'>Organisation Members</h3>    <div class='org-members members'></div>    <div class='field'>      <div class='addmembers'></div>    </div>    <p><b>Tip:</b> You can enter more than one email address at once!</p></div><div class='settings-section'>    <h3>Guest Members</h3>    <p>Guest members are people outside of your organisation that have access to one or more resources within your organisation. This means they have been granted permission to view or edit a diagram or folder owned by your Coggle Organisation.</p>    <span>Allow guest members:</span>    <p class='checkbox-slider-frame'>      <span class='allow_sharing slider-button <%-allow_sharing?'on':''%>'><%-allow_sharing?'YES':'NO'%></span>    </p>    <p><b>Guest members are not charged for, they do not form part of your bill. They cannot create diagrams or use all of the paid features.</b></p>    <div class='guest-members members'></div></div>");n.exports=o.View.extend({tagName:"div",className:"organisation-members",events:{"changed .slider-button.allow_sharing":"toggleSharing"},initialize:function(t){i.bindAll(this,"render","error","toggleSharing"),this.options=t,this.memberList=new r({item_class:e("views/OrganisationMemberView"),item_options:{organisation:this.model},collections:[this.model.getAccess(),this.model.getInvites()]}),this.addChildView(this.memberList),this.model.getAccess(function(e){e&&this.error("Loading Organisation members failed.")}.bind(this)),this.model.getInvites(function(e){e&&this.error("Loading Organisation invites failed.")}.bind(this)),this.shareView=new s({model:this.model}),this.addChildView(this.shareView),this.listenTo(this.shareView,"error",this.error),this.guestMemberList=new r({item_class:e("views/OrganisationGuestMemberView"),item_options:{organisation:this.model},collections:[this.model.getGuestMembers()]}),this.model.getGuestMembers(function(e){e&&this.error("Loading Organisation guest members failed.")}.bind(this)),this.model.getAccess().on("add remove",function(){this.model.getGuestMembers().fetch({add:!0,remove:!0})}.bind(this))},error:function(e){this.$el.find("error").first().text(e)},render:function(){return $(this.el).html(l(this.model.toJSON())),this.$el.find(".slider-button").booleanSlider(),this.$el.find(".org-members").append(this.memberList.render().$el),this.$el.find(".addmembers").append(this.shareView.render().$el),this.$el.find(".guest-members").append(this.guestMemberList.render().$el),this},toggleSharing:function(e,t){this.model.set("allow_sharing",t.state),this.model.save(void 0,{success:function(){this.error(null)}.bind(this),error:function(){this.error("Failed to update sharing settings.")}.bind(this)})}})}),define("views/OrganisationProfileView",["require","exports","module","underscore","backbone","utils/getDroppedFiles","utils/imageFromFile","utils/resizeImage","env"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=e("utils/getDroppedFiles").getDroppedFiles,s=e("utils/imageFromFile"),l=e("utils/resizeImage").resizeImage,a="<error></error><div class='settings-section'>    <h3>Organisation Name</h3>    <input class='name' required placeholder='Organisation Name' value='<%-name%>' />    <span>A recognisable name for your organisation.</span></div><div class='settings-section'>    <h3>Icon <img style='float:right; width: 20px; margin-top: -3px' src='/img/favicon64.png'/></h3>    <div class='upload'>        <img class='org-icon' src='<%-picture%>' style='background-color: <%- colour %>'/>        <p>Drag an image here to upload</p>        <a href='#' class='tip revert'>or revert to default icon</a>        <p>Must be a square image, recommended size is 128px by 128px.</p>        <p class='tip'>For best results use a colourful, recognisable image.</p>    </div></div>";n.exports=o.View.extend({tagName:"div",className:"organisation-profile",template:i.template(a),events:{"blur .name":"saveName","keyup .name":"saveNameOnEnter","click .revert":"clearIcon",drop:"onImageDropped",dragover:function(e){e.preventDefault()}},initialize:function(e){i.bindAll(this,"render","error","saveName","saveNameOnEnter"),this.options=e,this.listenTo(this.model,"change",this.render)},clearIcon:function(){this.model.set("picture",null),this.model.save()},onImageDropped:function(e){var t=e.dataTransfer=e.originalEvent.dataTransfer;t&&t.files&&t.files.length&&r(t).always(function(e){var t=e[0];t&&t.type.startsWith("image/")&&s(t,function(e){var n={maxWidth:256,maxHeight:256};l(e,n,function(e){var n=new FormData;n.append("files[]",e,t.name),$.ajax({type:"POST",url:this.model.url()+"/icon",data:n,processData:!1,contentType:!1}).fail(function(){this.error("Image upload failed.")}.bind(this)).done(function(e){this.model.save({picture:JSON.parse(e).path},{success:function(){this.error(null)}.bind(this),error:function(){this.error("Image saving failed.")}.bind(this)})}.bind(this))}.bind(this))}.bind(this))}.bind(this)),e.preventDefault()},saveName:function(e){this.$el.find(".name").val()!=this.model.get("name")&&(this.model.set("name",this.$el.find(".name").val()),this.model.save(void 0,{success:function(){this.error(null)}.bind(this),error:function(){this.error("Failed to save name update.")}.bind(this)}))},saveNameOnEnter:function(e){13==e.keyCode&&this.saveName(e)},render:function(){var t=this.model.toJSON();return t.picture||(t.picture=e("env").cdn.url+"/img/anon.png"),$(this.el).html(this.template(t)),this},error:function(e){this.$el.find("error").first().text(e)}})}),define("views/OrganisationDiagramsView",["require","exports","module","underscore","backbone","views/DiagramViews"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=e("views/DiagramViews").DiagramList,s=i.template("<error></error><div class='settings-section'>    <h3>Bulk Export</h3>    <a class='button green' data-bypass href='/api/1/organisations/<%-_id%>/export'>EXPORT as JSON</a></div><div class='settings-section'>    <h3>Diagrams</h3>    <p><a class='viewall'>View all diagrams</a>.</p>    <div class='members'></div></div><div class='userview'></div>");n.exports=o.View.extend({tagName:"div",className:"organisation-sharing",events:{"click .viewall":"showAllDiagrams"},initialize:function(e){i.bindAll(this,"render","error","showAllDiagrams"),this.options=e,this.listenTo(this.model,"change",this.render)},render:function(){var e=this.model.toJSON();return $(this.el).html(s(e)),this},error:function(e){this.$el.find("error").first().text(e)},showAllDiagrams:function(){var e=new r({emptyContent:!1,collection:this.model.getDiagrams(function(e){e&&this.error("Loading Organisation diagrams failed.")}.bind(this),{data:{includeDeleted:1}})});this.addChildView(e),this.$el.find(".userview").html(e.render().$el)}})}),define("views/OrganisationBillingView",["require","exports","module","underscore","backbone","views/CustomerView","views/InvoiceViews"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=e("views/CustomerView"),s=e("views/InvoiceViews").InvoiceList,l="<error></error><div class='settings-section'>    <p><%=next_bill ? 'Your next bill will be on <b>'+next_bill+'</b>.' : 'No more bills are scheduled!' %> Estimated monthly bill: <span class='currency'><%- (currency=='gbp') ? '£' : '$' %></span><span class='price'></span><span class='invites'> (+<span class='pending'></span> pending invites)</span></p></div><div class='payment'></div><div class='invoices'></div><div class='settings-section'>    <h3>Dangerzone</h3>    <p>Close this organisation and stop billing - <b>this will make Coggles your organisation owns inaccessible</b>!</p>    <p>This process is <b>irreversible</b> and will take effect immediately so use with caution.</p>    <button class='danger button close'>DELETE</button>    <div class='confirmation' style='display:none'>        <input placeholder='Type the organisation name' class='name'/>        <button class='danger button confirm'>CONFIRM</button>    </div></div>";n.exports=o.View.extend({tagName:"div",className:"organisation-billing",template:i.template(l),events:{"click .close":"confirmClose","click .confirm":"close"},initialize:function(e){i.bindAll(this,"render","renderBillingEstimate"),this.options=e,this.customerView=new r({model:this.model.getCustomer(function(e){e&&this.$el.find("error").first().text("Loading customer failed")}.bind(this)),plan:this.model.hasActiveEnterprisePlan()?"organisation:enterprise":"organisation"}),this.addChildView(this.customerView),this.invoiceList=new s({collection:this.model.getInvoices(function(e){e&&console.warn("failed to fetch invoices!",e)}.bind(this))}),this.addChildView(this.invoiceList),this.listenTo(this.model.getInvites(),"add remove",this.renderBillingEstimate),this.listenTo(this.model.getAccess(),"add remove",this.renderBillingEstimate)},render:function(){var e=this.model.toJSON(),t=new Date(e.next_bill);return e.next_bill&&(e.next_bill=t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()),$(this.el).html(this.template(e)),this.$el.find(".payment").append(this.customerView.render().$el),this.$el.find(".invoices").html(this.invoiceList.render().$el),this.renderBillingEstimate(),this.model.hasActivePlan()||this.error("Your Coggle Organisation payment is overdue. Please update your billing details!"),
this},renderBillingEstimate:function(){this.$el.find(".invites .pending").text(this.model.getInvites().length),this.$el.find(".price").text(this.model.getAccess().length*this.model.getMonthlyUserPrice()),0===this.model.getInvites().length?this.$el.find(".invites").hide():this.$el.find(".invites").show()},confirmClose:function(){this.$el.find(".close").hide(),this.$el.find(".confirmation").show(),this.$el.find(".confirmation .name").focus()},error:function(e){this.$el.find("error").first().text(e)},close:function(){this.model.get("name").length>0&&this.model.get("name")==this.$el.find(".confirmation .name").val()&&(getCoggleUser().getActions().perform("cancellation:organisation"),this.model.destroy({wait:!0,success:function(){window.location="/"},error:function(){this.error("Failed to close Organisation, please reload and try again.")}.bind(this)}))}})}),define("views/DomainViews",["require","exports","module","underscore","backbone","env"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r="<div class='icons'><img src='"+e("env").cdn.url+"/img/bin.png' class='icon delete'></div><div class='name'><b><%-id%></b></div>",s=o.View.extend({tagName:"li",className:"domain",template:i.template(r),events:{"click .delete":"removeDomain"},initialize:function(){i.bindAll(this,"render","removeDomain"),this.listenTo(this.model,"change",this.render)},render:function(){return $(this.el).html(this.template(this.model.toJSON())),this},removeDomain:function(){this.model.destroy({success:function(){$(this.el).remove()}.bind(this)})}}),l="<ul class='cogglelist'></ul><error></error><div class='field danger'>    <div class='button hasInput green add'>ADD</div>    <div class='inputs'>        <input type='text' class='domain hasButton' placeholder='Domain, e.g. coggle.it'>    </div></div>",a=o.View.extend({tagName:"div",className:"domain-list",events:{"keyup input":"submitOnEnter","click .add":"add","notify-warning":"error"},initialize:function(e){i.bindAll(this,"addOne","addAll","render","add","error","submitOnEnter"),this.$el.html(i.template(l)()),this.options=e,this.listenTo(this.collection,"add",this.addOne),this.listenTo(this.collection,"reset",this.addAll),this.listenTo(this.collection,"all",this.render),this.addAll()},add:function(){this.$el.find("error").empty();var e=this.$el.find("input").val();e&&0!==e.length&&this.collection.create({id:e},{wait:!0,error:function(e,t){this.error(t.responseJSON.description)}.bind(this),success:function(){this.$el.find("input").val("")}.bind(this)})},submitOnEnter:function(e){13==e.keyCode&&this.add()},error:function(e){return this.$el.find("error").text(e),!1},render:function(){return this},addOne:function(e){var t=new s({model:e});$(this.el).find("ul").append(t.render().$el)},addAll:function(){this.collection.each(this.addOne)}});n.exports.DomainView=s,n.exports.DomainList=a}),define("views/OrganisationAuthProvidersView",["require","exports","module","underscore","backbone","views/DomainViews","env"],function(e,t,n){var i=e("underscore"),o=e("backbone"),r=e("views/DomainViews").DomainList,s=i.template("<error></error><div class='settings-section'>    <h3>SAML Integration</h3>    <% if (edit_saml) { %>        <p>SAML allows you to use your own SSO provider to authenticate your Organisation members. When your users log in they will automatically be added to your organisation.</p>        <h4>Entrypoint (ID Provider SSO URL)</h4>        <input class='entrypoint' placeholder='Entrypoint, e.g. https://example.com/sso/saml' value='<%- sso && sso.saml && sso.saml.entryPoint %>'>        <h4>Certificate</h4>        <textarea class='certificate' placeholder='Paste the X.509 certificate from your ID provider here'><%- sso && sso.saml && sso.saml.cert %></textarea>        <div style='text-align:right; margin-top: 10px'>            <error class='saml-error'></error>            <a class='button danger remove-saml-config'>Remove Config</a>            <a class='button green save-saml-config'>Save</a>        </div>    <% } else { %>        <p>You have configured SAML login for your Organisation. This is the login page to direct your users to:</p>        <pre><b><%- login_url %></b></pre>        <div style='text-align:right'>            <div class='button green edit-saml-config'>Edit SAML Config</div>        </div>    <% } %></div><div class='settings-section'>    <h3>Domain Access</h3>    <p>Automatically add all members of your domain based on their email address domain. First, you will need to validate the ownership of your domain so we can be sure that you are the real owner. To do this add the code below to the TXT DNS record for your domain:</p>    <pre><b>coggle-verification=<%-verification_code%></b></pre>    <div class='domainaccess'></div></div>");n.exports=o.View.extend({tagName:"div",className:"organisation-auth-providers-view",events:{"notify-warning":"error","click .save-saml-config":"saveSamlConfig","click .remove-saml-config":"removeSamlConfig","click .edit-saml-config":"editSamlConfig"},initialize:function(e){i.bindAll(this,"render","saveSamlConfig","editSamlConfig","removeSamlConfig","persistSamlConfig"),this.options=e;var t=this.model.getDomains(function(e){e&&this.error("Failed to load domains.")});this.domainList=new r({collection:t}),this.addChildView(this.domainList),this.model.on("change",this.render),this.edit_saml=!this.model.hasSamlConfig()},error:function(e){this.$el.find("error").first().text(e)},render:function(){var t=this.model.toJSON();return t.login_url=e("env").api.url+"/"+this.model.get("slug")+"/login",t.sso||(t.sso={}),t.edit_saml=this.edit_saml,this.$el.html(s(t)),this.$el.find(".domainaccess").append(this.domainList.render().$el),this.domainList.delegateEvents(),this},samlError:function(e){this.$el.find("error.saml-error").first().text(e)},editSamlConfig:function(){this.edit_saml=!0,this.render()},removeSamlConfig:function(){this.model.set({sso:{saml:{entryPoint:null,cert:null}}}),this.persistSamlConfig()},saveSamlConfig:function(){var e=this.$el.find("input.entrypoint").val(),t=this.$el.find("textarea.certificate").val();return e?t?(this.model.set({sso:{saml:{entryPoint:e,cert:t}}}),void this.persistSamlConfig()):this.samlError("Certificate is required"):this.samlError("Entrypoint is required")},persistSamlConfig:function(){this.model.save({},{wait:!0,success:function(){this.samlError(null),this.edit_saml=!this.model.hasSamlConfig(),this.render()}.bind(this),error:function(e,t){console.log(arguments),this.samlError(t&&t.responseJSON&&t.responseJSON.description||"Failed to update SAML config")}.bind(this)})}})}),define("controllers/Router",["require","exports","module","plugins/jquery.queryString","underscore","models/Diagram","models/Diagram","models/User","models/Folder","views/ErrorView","views/HomeView","views/DiagramViews","views/SearchResultsView","views/WorkspaceView","views/Gallery","views/CloneView","views/SettingsView","views/OrganisationPicker","views/PlanSelectionView","views/PlanSignupView","views/OrganisationSignupView","views/OrganisationLoginView","views/VerifyEmailView","views/VerifyEmailView","views/VerifyEmailView","models/Invoice","views/InvoiceViews","views/CheatView","views/GlobalHelpView","views/DeveloperView","views/MarketSurveyView","env","views/PersonalCommunicationView","views/PersonalLanguageView","views/PersonalBillingView","views/RecommendCoggleView","views/PersonalAccountView","views/OrganisationMembersView","views/OrganisationProfileView","views/OrganisationDiagramsView","views/OrganisationBillingView","views/OrganisationAuthProvidersView"],function(e,t,n){e("plugins/jquery.queryString");var i=e("underscore"),o=e("models/Diagram").DiagramModel,r=e("models/Diagram").DiagramCollection,s=e("models/User"),l=e("models/Folder").FolderCollection,a=e("views/ErrorView"),u=e("views/HomeView"),c=e("views/DiagramViews").DiagramList,d=e("views/SearchResultsView"),h=e("views/WorkspaceView"),p=e("views/Gallery"),f=e("views/CloneView"),g=e("views/SettingsView"),m=e("views/OrganisationPicker").OrganisationPicker,v=e("views/PlanSelectionView"),y=e("views/PlanSignupView"),b=e("views/OrganisationSignupView"),w=e("views/OrganisationLoginView"),_=e("views/VerifyEmailView").VerifyEmailView,E=e("views/VerifyEmailView").MustVerifyEmailView,C=e("views/VerifyEmailView").VerifyCompleteView,F=e("models/Invoice").InvoiceModel,A=e("views/InvoiceViews").InvoiceView,x=e("views/CheatView"),S=e("views/GlobalHelpView"),T=e("views/DeveloperView"),O=e("views/MarketSurveyView"),N=Backbone.Router.extend({routes:{"me(/:view)":"my_settings","me/billing/survey":"my_billing_survey",verify:"verify_email","verify/done":"verify_complete","organisations/new":"createOrganisation",":orgslug/dashboard(/:view)":"org_settings",developer:"developer",plans:"plans","plans/(:plan)":"signup",welcome:"welcome","diagram/:diagram(/t/:title)(/:token)":"diagram","clone/:diagram(/:token)":"clone",gallery:"gallery","folder/:folder(/*)":"folder",":orgslug/folder/:folder(/*)":"org_folder","invoices/:invoice":"invoice",":orgslug/invoices/:invoice":"invoice","search/(*stuff)":"search",":orgslug/search/:query*":"search",":orgslug/login":"org_login","(:orgslug)(/)":"home"},initialize:function(){this.on("route:before",function(){S.instance().setContextualHelp(null)}),$("body").append(S.instance().render().$el),window._router=this},setKeyView:function(){this._keyView=window.location.href.substr(window.location.origin.length)},getKeyView:function(){return this._keyView},execute:function(){this.trigger("route:before");var e=Backbone.Router.prototype.execute.apply(this,arguments);return this.trigger("route:after"),e},switchToOrg:function(e){var t=s.me().getOwnOrg();return e?(t=s.me().getOrganisations().forSlug(e),$("body").addClass("viewing-organisation")):$("body").removeClass("viewing-organisation"),t&&s.me().setActiveOrg(t),t},home:function(e){!e&&this.showPlans?(this.setKeyView(),this.plans(),this.showPlans=!1):this.org_folder(e,"root")},org_folder:function(e,t){var n=this.switchToOrg(e);return n?n.id&&!n.hasActivePlan()?void(n.isAdmin()?Backbone.history.navigate("/"+n.get("slug")+"/dashboard/billing",!0):this.error("Your organisation subscription has expired. Please contact your organisation administrator to update the payment details.","/")):void this.folder(t):this.organsiationNotFound()},folder:function(e){if(s.me().fetch(),s.me().isGuest())return void("/"!==window.location.pathname&&(window.location="/"));var t=s.me().getActiveOrg();if(!t.id&&!s.me().hasOwnOrg())return t=s.me().getOrganisations().at(0),t?Backbone.history.navigate("/"+t.get("slug"),!0):this.error("We can't find an Organisation associated with your account.");var n=$.queryString().member,i=$.queryString().includeDeleted,o={data:{includeDeleted:i,member:n}},a=n?new l:t.getFolders(),d=new u({user:s.me(),organisation:t,member:n,folders:a,folder:e});a.fetchOrQueue(function(n,i){if(n||!i)return this.error("Failed to load folders. Are you online?");if("gallery"==e)s.me().getActions().perform("gallery:viewed"),document.title="Gallery - Coggle",d.setContentView(new p({collection:r.getPublicGallery(function(){}),showSplash:!1}));else{var l=i.get(e);if(!l)return Backbone.history.navigate("/"+(t.get("slug")?t.get("slug"):""),!0);document.title=l.get("name")+" - Coggle",d.setContentView(new c({organisation:t,collection:l.getDiagrams(function(e){if(e)return this.error("Failed to load diagrams. Are you online?")}.bind(this),o),folder:l}))}}.bind(this),o),this.market_survey(),$("#page").html(d.render().$el),n||this.setKeyView(),this.once("route:before",function(){d.$el.addClass("transition-out"),setTimeout(function(){d.remove()},300)})},invoice:function(t,n){if(S.instance().$el.hide(),s.me().isGuest())return void(window.location="/");var i=this.switchToOrg(t);i||(n=t,t=void 0);var o=new F({id:n});i&&i.id&&(o.url=e("env").api.url+"/api/1/organisations/"+i.get("slug")+"/invoices/"+n),o.fetchOrQueue(function(e){if(e)return void $("body").html("<error>Error loading invoice</error>");var t=new A({model:o});$("body").html(t.render().$el)})},diagram:function(e,t,n){!n&&$.queryString().access_token&&(n=$.queryString().access_token),S.instance().setContextualHelp(new x),this.setKeyView();var i=s.me().getActiveOrg().findDiagramById(e);i||(i=new o({short_id:e})),i.setToken(n);var r=new h({model:i});$("#page").append(r.render().$el),r.loadingAnimation(),this.once("route:before",function(){r.remove(),i.setToken(null)}),i.getDeltas().length?r.load():i.fetch({success:function(){i.getDeltas().fetchOrQueue(function(){r.load()}.bind(this))}.bind(this),error:function(){return this.error("Sorry - we couldn't load your diagram. Are you online?")}.bind(this)})},clone:function(e,t){var n=s.me().getActiveOrg().findDiagramById(e);n||(n=new o({short_id:e},{token:t}));var i=new f({token:t,diagramId:e,diagram:n});$("#page").html(i.render().$el),i.cloneIfPossible()},gallery:function(){document.title="Gallery - Coggle";var e=new p({collection:$.queryString().review?r.getPublicReviewCollection({data:i.omit($.queryString(),"review")},function(){}):r.getPublicGallery(function(){})});$("#page").html(e.render().$el),this.once("route:before",function(){e.remove()})},search:function(e,t){t||(t=e,e=void 0),document.title=t+" - Coggle";var n=this.switchToOrg(e);if(!n)return this.organsiationNotFound();if(!t||0===t.length)return Backbone.history.navigate(e,!0);var i=s.me().getActiveOrg().search(t),o=new u({user:s.me(),organisation:n,folders:n.getFolders(function(){}),search:t});o.setContentView(new d({collection:i,query:t})),$("#page").html(o.render().$el),this.once("route:before",function(){o.remove()})},error:function(e,t){document.title="Error - Coggle",console.warn("error:",e);var n=new a({message:e,link:t}),i=new m({collection:s.me().getOrganisations(),hide_own_org:!s.me().hasOwnOrg()});$("#page").html(n.render().$el),$("#page").prepend(i.render().$el),this.once("route:before",function(){n.remove(),i.remove()})},organsiationNotFound:function(){return this.error("We can't find the organisation you're looking for.","/")},notFound:function(){return this.error("We can't find the thing you're looking for","/")},welcome:function(){Backbone.history.navigate("/",!0),s.me().isAwesome()&&!s.me().isTriallingAwesome()||(this.showPlans="true"===s.me().science("show-plans",["true","false"])),$.cookie("globalHelpOpen")||$.cookie("globalHelpOpen",getCoggleUser().science("help-starts-open",["true","false"]),{expires:3600,path:"/"})},plans:function(){if($.queryString().plan)return this.signup($.queryString().plan);document.title="Plans - Coggle",s.me().getActions().perform("view:plans");var e=new v({model:s.me(),src:$.queryString().src,coupon:$.queryString().coupon,close:this.getKeyView()});$.queryString().coupon||Backbone.history.navigate("/plans",{trigger:!1,replace:!0}),$("#page").html(e.render().$el.addClass("modal")),this.once("route:before",function(){e.remove()})},signup:function(e){document.title="Plans - Coggle";var t=new y({model:s.me(),plan:e,coupon:$.queryString().coupon,src:$.queryString().src,cancel:this.getKeyView()});$.queryString().coupon||Backbone.history.navigate("/plans/"+e,{trigger:!1,replace:!0}),$("#page").html(t.render().$el),this.once("route:before",function(){t.remove()})},my_settings:function(t,n){var i=this.switchToOrg();if(!i)return this.organsiationNotFound();n||(n={}),n.model=s.me();var o={communication:{title:"Communication",view:new(e("views/PersonalCommunicationView"))(n)},language:{title:"Language",view:new(e("views/PersonalLanguageView"))(n)}};s.me().hasOwnOrg()&&(o.billing={title:"Billing & Invoices",view:new(e("views/PersonalBillingView"))(n)},o.recommend={title:"Recommend",view:new(e("views/RecommendCoggleView"))(n)},o.account={title:"Close Account",view:new(e("views/PersonalAccountView"))(n)});var r=new g({settings:o,selected:t||"billing",base_url:"/me",close:this.getKeyView()||"/",heading:$.l10n.get("settings","Settings"),organisations:s.me().getOrganisations()});$("#page").append(r.render().$el),this.once("route:before",function(){r.remove()})},my_billing_survey:function(){this.my_settings("billing",{survey:!0}),Backbone.history.navigate("/me/billing",{replace:!0})},verify_email:function(){document.title="Verify Your Email Address - Coggle";var e;if($.queryString().sig)e=new _({model:s.me(),sig:$.queryString().sig,email:$.queryString().email,user:$.queryString().user,ts:$.queryString().ts}),e.checkSignature();else{if(s.me().isGuest())return Backbone.history.navigate("/",!0);e=new E({model:s.me()})}$("#page").html(e.render().$el),this.once("route:before",function(){e.remove()})},verify_complete:function(){document.title="Email Address Verified - Coggle";var e=new C({model:s.me()});$("#page").html(e.render().$el),this.once("route:before",function(){e.remove()})},org_login:function(e){var t=this.switchToOrg(e),n=new w({model:t});$("#page").html(n.render().$el),this.once("route:before",function(){n.remove()})},org_settings:function(t,n){var i=this.switchToOrg(t);if(!i)return this.organsiationNotFound();var o={},r={model:i},l=null;i.isAdmin()?o={membership:{title:"Members",view:new(e("views/OrganisationMembersView"))(r)},profile:{title:"Profile",view:new(e("views/OrganisationProfileView"))(r)},exports:{title:"Exports",view:new(e("views/OrganisationDiagramsView"))(r)},billing:{title:"Billing & Invoices",view:new(e("views/OrganisationBillingView"))(r)},authentication:{title:"Authentication",view:new(e("views/OrganisationAuthProvidersView"))(r)}}:l=new a({message:"These are not the settings you are looking for!",link:"/me"});var u=new g({hero:l,settings:o,selected:n||"membership",close:this.getKeyView()||"/"+t,base_url:"/"+t+"/dashboard",heading:i.get("name")+" Settings Dashboard",organisations:s.me().getOrganisations()});$("#page").append(u.render().$el),this.once("route:before",function(){u.remove()})},createOrganisation:function(){var e=(this.switchToOrg(),new b({model:s.me()}));$("#page").html(e.render().$el),this.once("route:before",function(){e.remove()})},developer:function(){var e=new T;$("#page").html(e.render().$el),this.once("route:before",function(){e.remove()})},market_survey:function(){$("body").hasClass("touch")||s.me().isGuest()||s.me().isOlderThan("9/11/17")||s.me().getActions(function(e){if(!e&&!s.me().getActions().get("survey:market:complete")){var t=new O({model:s.me()});$("#page").append(t.render().$el)}}.bind(this))}});n.exports=N}),define("controllers/MessagePollController",["require","exports","module","plugins/jquery.queryString"],function(e,t,n){e("plugins/jquery.queryString"),n.exports=function(){if(!$.queryString().print){var e=function(){Messages.fetch({global:!1,data:{version:Coggle_JS_Version},remove:!1}),setTimeout(e,6e5+5*Math.random()*60*1e3)};setTimeout(function(){e()},15e3+10*Math.random()*1e3),window._fetchMessages=e}}}),define("controllers/AutoUpdate",["require","exports","module","underscore","plugins/jquery.queryString","models/Message"],function(e,t,n){var i=e("underscore");e("plugins/jquery.queryString");var o=e("models/Message").Messages;n.exports=function(){if(!$.queryString().print){var e=!1;$("body").on("keypress mousemove touchmove pointermove",i.throttle(function(){clearTimeout(e)},1e3));var t=function(){Backbone.Router.disableCaptureLinks(),setTimeout(function(){o.get("update").activate()},72e5),e||(e=setTimeout(function(){window.location.reload(!0)},108e5+60*Math.random()*60*1e3))},n=function(){$.getJSON("/assets/version.json",function(e){e.version!==window.Coggle_JS_Version?(console.log("js is out of date: \n","latest = ( js:",e.version," )\n","loaded = ( js:",window.Coggle_JS_Version," )\n"),t()):console.log("js is up to date")}),setTimeout(n,6e5+5*Math.random()*60*1e3)};setTimeout(function(){n()},3e4+10*Math.random()*1e3),window._checkUpdate=n}}}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/widgets/tooltip",["jquery","../keycode","../position","../unique-id","../version","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(t,n){var i=(t.attr("aria-describedby")||"").split(/\s+/);i.push(n),t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(i.join(" ")))},_removeDescribedBy:function(t){var n=t.data("ui-tooltip-id"),i=(t.attr("aria-describedby")||"").split(/\s+/),o=e.inArray(n,i);o!==-1&&i.splice(o,1),t.removeData("ui-tooltip-id"),i=e.trim(i.join(" ")),i?t.attr("aria-describedby",i):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=e([])},_setOption:function(t,n){var i=this;this._super(t,n),"content"===t&&e.each(this.tooltips,function(e,t){i._updateContent(t.element)})},_setOptionDisabled:function(e){this[e?"_disable":"_enable"]()},_disable:function(){var t=this;e.each(this.tooltips,function(n,i){var o=e.Event("blur");o.target=o.currentTarget=i.element[0],t.close(o,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var t=e(this);if(t.is("[title]"))return t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")}))},_enable:function(){this.disabledTitles.each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))}),this.disabledTitles=e([])},open:function(t){var n=this,i=e(t?t.target:this.element).closest(this.options.items);i.length&&!i.data("ui-tooltip-id")&&(i.attr("title")&&i.data("ui-tooltip-title",i.attr("title")),i.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&i.parents().each(function(){var t,i=e(this);i.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,n.close(t,!0)),i.attr("title")&&(i.uniqueId(),n.parents[this.id]={element:this,title:i.attr("title")},i.attr("title",""))}),this._registerCloseHandlers(t,i),this._updateContent(i,t))},_updateContent:function(e,t){var n,i=this.options.content,o=this,r=t?t.type:null;return"string"==typeof i||i.nodeType||i.jquery?this._open(t,e,i):(n=i.call(e[0],function(n){o._delay(function(){e.data("ui-tooltip-open")&&(t&&(t.type=r),this._open(t,e,n))})}),void(n&&this._open(t,e,n)))},_open:function(t,n,i){function o(e){u.of=e,s.is(":hidden")||s.position(u)}var r,s,l,a,u=e.extend({},this.options.position);if(i){if(r=this._find(n))return void r.tooltip.find(".ui-tooltip-content").html(i);n.is("[title]")&&(t&&"mouseover"===t.type?n.attr("title",""):n.removeAttr("title")),r=this._tooltip(n),s=r.tooltip,this._addDescribedBy(n,s.attr("id")),s.find(".ui-tooltip-content").html(i),this.liveRegion.children().hide(),a=e("<div>").html(s.find(".ui-tooltip-content").html()),a.removeAttr("name").find("[name]").removeAttr("name"),a.removeAttr("id").find("[id]").removeAttr("id"),a.appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:o}),o(t)):s.position(e.extend({of:n},this.options.position)),s.hide(),this._show(s,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(l=this.delayedShow=setInterval(function(){s.is(":visible")&&(o(u.of),clearInterval(l))},e.fx.interval)),this._trigger("open",t,{tooltip:s})}},_registerCloseHandlers:function(t,n){var i={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var i=e.Event(t);i.currentTarget=n[0],this.close(i,!0)}}};n[0]!==this.element[0]&&(i.remove=function(){this._removeTooltip(this._find(n).tooltip)}),t&&"mouseover"!==t.type||(i.mouseleave="close"),t&&"focusin"!==t.type||(i.focusout="close"),this._on(!0,n,i)},close:function(t){var n,i=this,o=e(t?t.currentTarget:this.element),r=this._find(o);return r?(n=r.tooltip,void(r.closing||(clearInterval(this.delayedShow),o.data("ui-tooltip-title")&&!o.attr("title")&&o.attr("title",o.data("ui-tooltip-title")),this._removeDescribedBy(o),r.hiding=!0,n.stop(!0),this._hide(n,this.options.hide,function(){i._removeTooltip(e(this))}),o.removeData("ui-tooltip-open"),this._off(o,"mouseleave focusout keyup"),o[0]!==this.element[0]&&this._off(o,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,n){e(n.element).attr("title",n.title),delete i.parents[t]}),r.closing=!0,this._trigger("close",t,{tooltip:n}),r.hiding||(r.closing=!1)))):void o.removeData("ui-tooltip-open")},_tooltip:function(t){var n=e("<div>").attr("role","tooltip"),i=e("<div>").appendTo(n),o=n.uniqueId().attr("id");return this._addClass(i,"ui-tooltip-content"),this._addClass(n,"ui-tooltip","ui-widget ui-widget-content"),n.appendTo(this._appendTo(t)),this.tooltips[o]={element:t,tooltip:n}},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_appendTo:function(e){var t=e.closest(".ui-front, dialog");return t.length||(t=this.document[0].body),t},_destroy:function(){var t=this;e.each(this.tooltips,function(n,i){var o=e.Event("blur"),r=i.element;o.target=o.currentTarget=r[0],t.close(o,!0),e("#"+n).remove(),r.data("ui-tooltip-title")&&(r.attr("title")||r.attr("title",r.data("ui-tooltip-title")),r.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),e.uiBackCompat!==!1&&e.widget("ui.tooltip",e.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var e=this._superApply(arguments);return this.options.tooltipClass&&e.tooltip.addClass(this.options.tooltipClass),e}}),e.ui.tooltip}),define("views/Tooltips",["require","exports","module","jquery-ui/widgets/tooltip"],function(e,t,n){e("jquery-ui/widgets/tooltip");var i,o,r,s=!1,l=function(){var e=r.offset().left+r.width()/2;o.toggleClass("top",r.offset().top>o.offset().top),o.find(".arrow").css({left:e-o.offset().left})};n.exports=function(){$(document).tooltip({position:{my:"center top+12",at:"center bottom",collision:"flipfit"},open:function(e,t){return o=t.tooltip,r=$(e.toElement||e.originalEvent&&e.originalEvent.target),s?void o.remove():(0===o.find(".arrow").length&&o.append('<div class="arrow">'),clearInterval(i),void(i=setInterval(l,50)))},close:function(){o.find(".arrow").remove(),clearInterval(i)}})},window.addEventListener("mousedown",function(){o&&o.remove(),s=!0},{capture:!0,passive:!0}),window.addEventListener("mouseup",function(){s=!1},{capture:!0,passive:!0})}),function(e){"function"==typeof define&&define.amd?define("plugins/jquery.proportionalPosition",["jquery"],e):e(jQuery)}(function(e){e.fn.proportionalPosition=function(){var t=e(this),n=t.offset(),i=n.left+t.width()/2,o=n.top+t.height()/2,r=window.innerWidth||document.documentElement.clientWidth,s=window.innerHeight||document.documentElement.clientHeight;return{left:i/r,top:o/s}}}),!function(e){"function"==typeof define&&define.amd?define("floaty-clicky-thing",["jquery"],e):e(jQuery)}(function(e){e.fn.floatyClickyThing=function(t){var n=e();return e(this).each(function(){var i=e(this),o=e('<div class=floatyclickycontainer><div class="floatyclickything"><div/><div/>');o.appendTo(i),o.position({my:t.my||"center",at:t.at||"left top",of:t.of||i,collision:t.collision||"fit"}),e.merge(n,o)}),n}}),function(e){"function"==typeof define&&define.amd?define("plugins/jquery.contextualHelp",["jquery","underscore","plugins/jquery.proportionalPosition","floaty-clicky-thing","jquery.outsideEvents"],e):e(jQuery,_)}(function(e,t,n,i,o){function r(n){function i(e){return n.on_ignore&&n.on_ignore(),n.ignore_action&&(y.unique(n.ignore_action),l(n.ignore_action)),a.push(n.action),r(),n.on_ignore&&n.on_ignore(),e&&e.stopPropagation(),!1}function o(e){return n.action&&(y.unique(n.action),l(n.action)),n.on_complete&&n.on_complete(),e&&e.stopPropagation(),d(),!1}function r(){function e(){m&&(m.off("clickoutside"),m.fadeOut(100,function(){m.remove(),m=null}))}v?v.fadeOut(100,function(){v.remove(),v=null,e()}):e()}function u(){if(!v){m&&m.addClass("active"),n.on_open&&n.on_open();var r=s((m||g.of).proportionalPosition());n.callout_opts&&(r=t.extend(r,n.callout_opts));var l=e("<div/>").addClass("helpholder");n.title&&l.append(e("<div/>").html(n.title).addClass("helptitle")),l.append(e("<div/>").html(n.content).addClass("helpcontent")).append(e("<div data-l10n-id='help-ok-got-it'/>").text("OK, got it!").addClass("okgotit button")).append(e("<div data-l10n-id='help-hide-for-now'/>").text("Hide for now").addClass("hidefornow button secondary")).append(e("<div class='clearfix'>")),l.l20n(),v=p.callout(l,t.extend(r,{at:g.at,of:g.of,appendTo:p,openOn:"",closeOn:""})).open(),v.find(".okgotit").on("click",o),v.find(".hidefornow").on("click",i)}}function c(){n.noCoachPoint||m||(m=p.floatyClickyThing(g),m.on("click",function(e){return u(),e.stopPropagation(),!1}))}function d(){var e=!0;n.after&&(e="string"==typeof n.after?!!y.get(n.after):t.all(n.after,function(e){return y.get(e)})),!e||n.action&&y.get(n.action)||y.get(n.dismiss_action)||n.suppress_action&&y.get(n.suppress_action)?r():(c(),n.openOnActivation&&a.indexOf(n.action)==-1&&u())}function h(){v&&v.reposition()}var p=e(this);if(!p.length)return{reposition:function(){}};if(p.data("contextualHelp."+n.action)){var f=p.data("contextualHelp."+n.action);return f.evaluateRules(),f}if(n=e.extend({content:"hello help",position:{}},n),!n.action)throw new Error("action is required");if(!n.actions)throw new Error("actions collection is required");n.ignore_action||(n.ignore_action=n.action+":ignore"),n.dismiss_action||(n.dismiss_action=n.action+":dismiss");var g=n.position;g.my=g.my||"center",g.at=g.at||"left bottom",g.collision=g.collision||"fit",g.of&&e(g.of).length||(g.of=p);var m,v,y=n.actions,b=t.throttle(d,50,{leading:!1});return y.on("add remove",b),n.openImmediately?(c(),a.indexOf(n.action)==-1&&u()):b(),p.data("contextualHelp."+n.action,{open:u,close:close,show:c,evaluateRules:d,reposition:h}),p.data("contextualHelp."+n.action)}function s(e){var t={my:"center top+10",callout:"center top"},n=.15,i=.3,o=.3;return e.left<n?e.top<i?{my:"left top+10",callout:"left top"}:e.top>1-o?{my:"left bottom+10",callout:"left bottom"}:{my:"left+10 center",callout:"left middle"}:e.left>1-n?e.top<i?{my:"right top+10",callout:"right top"}:e.top>1-o?{my:"right bottom+10",callout:"right bottom"}:{my:"right-10 center",callout:"right middle"}:e.top>1-o?{my:"center bottom-10",callout:"center bottom"}:t}function l(e){if(ga){var t=e.split(":");0===t.indexOf("help")&&t.shift(),t.length>2&&(t[1]=t.slice(1).join(":")),ga("send","event","HelpAction",t[0],t[1])}}var a=[];e.fn.contextualHelp=function(t){var n=null;return e(this).each(function(e){n=r.call(this,t)}),n}}),define("views/ContextualHelpFlow",["require","exports","module","underscore","backbone","plugins/jquery.contextualHelp","jquery.outsideEvents","jquery.l20n","views/WorkspaceView"],function(e,t,n){var i=(e("underscore"),e("backbone"));e("plugins/jquery.contextualHelp"),e("jquery.outsideEvents"),e("jquery.l20n");var o=e("views/WorkspaceView"),r=function(){};r.start=function(){if(!window.getCoggleUser().isGuest()){var e=null;o.on("loaded",function(t){e=t}),window.getCoggleUser().getActions(function(t,n){return t||!n?console.warn("help setup failed",t):(e?r.setupWorkspaceHelp(e,n):o.on("loaded",function(t){e=t,r.setupWorkspaceHelp(e,n)}),i.history.on("route",function(){setTimeout(function(){r.setupDiagramListHelp(n)},400)}),void setTimeout(function(){r.setupDiagramListHelp(n)},400))})}},r.setupDiagramListHelp=function(e){$(".coggle-workspace").length||(getCoggleUser().getOrganisations().length>0&&$(".coggle-sidebar").contextualHelp({actions:e,title:$.l10n.get("help-orgs-switch-title","Switch Between Organisations"),content:$("<div data-l10n-id='help-orgs-switch'/>").html("<p>Click to switch between Organisations.</p><p>Organisations let you control sharing of Coggles and work with larger teams.</p>"),
position:{my:"left top",at:"left+40 top+60",of:$(".organisations")},callout_opts:{my:"left-4 top+10",callout:"left top"},action:"help:createorganisation",after:["help:gohome"],openOnActivation:!0,on_open:function(){$(".home-view").animate({scrollTop:0},50)}}),$(".create-diagram").first().contextualHelp({actions:e,title:$.l10n.get("help-creatediagram-title","Create a New Diagram"),content:$("<div data-l10n-id='help-creatediagram'/>").html("<p>Create a new Coggle Diagram to get started.</p>"),position:{my:"left top",at:"left+15 bottom+4"},callout_opts:{my:"left top+10",callout:"left top"},action:"help:creatediagram",suppress_action:"created-diagram",openOnActivation:!0}),$(".search-view").contextualHelp({actions:e,title:$.l10n.get("help-searchcoggle-title","Search Coggle"),content:$("<div data-l10n-id='help-searchcoggle'/>").html("Type to find your documents &mdash; quickly search for any word in a diagram!"),position:{my:"left top",at:"left+15 bottom-2"},action:"help:search",after:["help:gohome"],openOnActivation:!0}))},r.startInviteFlow=function(e,t){e.$el.find(".toolbar .members").addClass("modal"),e.$el.find(".toolbar .member.sharing").click(),$("body").addClass("disable-tips"),setTimeout(function(){function n(){e.$el.find(".toolbar .members").removeClass("modal"),$("body").removeClass("disable-tips"),$(".ui-tooltip").hide(),$(".diagram-editor").mousedown()}e.$el.find(".toolbar .member.sharing").one("mousedownoutside",n),$(".share-view").contextualHelp({actions:t,title:$.l10n.get("help-toolbar-inviteflow-title","Enter a Co-worker's Email"),content:$("<div data-l10n-id='help-toolbar-invitedonefaster'/>").html("Get things done faster - invite someone to edit with you and see their changes instantly."),position:{my:"center center",at:"center bottom+14"},action:"help:inviteflow",openOnActivation:!0,openImmediately:!0,on_complete:n,on_ignore:n}).open()},200)},r.setupWorkspaceHelp=function(e,t){function n(){setTimeout(function(){var e=$(".node-content.active:not(.root)").last();e.length||(e=$(".node-content:not(.root)").last()),e.contextualHelp({actions:t,content:$("<div data-l10n-id='help-edit-node'/>").html("<p>Click any item to edit the text.</p><p>Change the text size by dragging the corner of the editing area.</p>"),position:{my:"center center",at:"center bottom+12"},action:"help:node-edited",suppress_action:"edited-node",openOnActivation:!0,after:["added-node"]})},500)}function i(){setTimeout(function(){var e=$(".node-container.active:not(.root) .node-content").last();e.length||(e=$(".node-container:not(.root) .node-content").last()),e.contextualHelp({actions:t,content:$("<div data-l10n-id='help-move-node'/>").html("Drag any text to move it."),position:{my:"center center",at:"center bottom+12"},action:"help:node-moved",suppress_action:"moved-node",openOnActivation:!0,after:["edited-node"]})},500)}function o(){setTimeout(function(){$(".node-container:not(.root) .node-content").last().contextualHelp({actions:t,content:$("<div data-l10n-id='help-node-menu'/>").html("Right click to access the menu. Here you can add, remove, copy, and arrange branches"),position:{my:"center center",at:"center bottom+12"},action:"help:node-menu",suppress_action:"node-contextmenu-opened",openOnActivation:!0,after:["moved-node"]})},500)}if(e.$el.find(".toolbar .member.sharing").length){var s=e.$el.contextualHelp({actions:t,title:$.l10n.get("help-toolbar-invite-title","Work With Others"),content:$("<div data-l10n-id='help-toolbar-invite'/>").html("Click to invite people to edit or view this Coggle. You can control people's permissions by clicking on their icon."),position:{my:"center center",at:"center+14 bottom+14",of:e.$el.find(".toolbar .member.sharing")},action:"help:invitetodiagram",openOnActivation:!0,on_complete:function(){r.startInviteFlow(e,t)}});e.$el.on("resize notifications-state-changed",function(){s.reposition()}),t.get("help:invitetodiagram")&&!t.get("help:inviteflow")&&r.startInviteFlow(e,t)}e.$el.contextualHelp({actions:t,content:$("<div data-l10n-id='help-gohome'/>").html("Click the Coggle logo to go back to the homepage, where your documents are automatically saved."),position:{my:"center center",at:"right+4 bottom+12",of:$("#diagram-header #logo")},action:"help:gohome",after:["node-contextmenu-opened","added-node","edited-node"],openOnActivation:!0});var l=$("body").hasClass("touch"),a=$(".node-container.titleroot .node-content").last();l?(console.log("setting up touch help:",a),a.contextualHelp({actions:t,content:$("<div data-l10n-id='help-press-hold-menu'/>").html("Press and hold on an item to open the menu and add branches."),position:{my:"center center",at:"right+4 bottom+12"},action:"help:press-hold-menu",openOnActivation:!0,after:["help:inviteflow"],suppress_action:"node-contextmenu-opened"})):a.contextualHelp({actions:t,content:$("<div data-l10n-id='help-add-node'/>").html("Use the (+) buttons to add branches."),position:{my:"center center",at:"right+4 bottom+12"},action:"help:node-added",openOnActivation:!0,after:["help:inviteflow"],suppress_action:"added-node"}),e.getStarcView().once("node_added",n),e.getStarcView().once("node_edited",i),e.getStarcView().once("node_moved",o)},n.exports=r}),define("utils/unescape",["require","exports","module","underscore"],function(e,t,n){function i(e,t){var n=null,o=null;for(var r in e)if(e.hasOwnProperty(r)){if(o=e[r],n=typeof o,("_id"===r||"id"===r)&&"string"===n)continue;"object"===n&&null!==o?e[r]=i(o,t):"string"===n&&(e[r]=t(o))}return e}function o(e){return i(e,s.unescape)}function r(e){return i(e,s.escape)}var s=e("underscore");n.exports.unescapeRecursive=o,n.exports.escapeRecursive=r}),function(e){"function"==typeof define&&define.amd?define("plugins/jquery.inputDetection",["jquery","underscore","BrowserDetect"],e):e(jQuery,_,BrowserDetect)}(function(e,t,n){e.fn.detectInputTypes=function(){function e(){a.length>s&&a.splice(0,a.length-s)}function n(){var e=t.countBy(a,function(e){return e}),n=e[r]||0,s=e[o]||0,c=n/(n+s)>u?r:o;l!==c&&(l=c,i.trigger(c))}var i=this,o="mouseInputPrevalent",r="touchInputPrevalent",s=8,l=null,a=[],u=.4;i.each(function(t,i){i.addEventListener("mousedown",function(t){a.push(o),e(),n()},{capture:!0,passive:!0}),i.addEventListener("touchstart",function(t){a.push(r),e(),n()},{capture:!0,passive:!0})})},e.fn.touchResponsive=function(t,i){function o(){e(s).removeClass(a).addClass(l),e(window).width()>d?e(s).removeClass(u).addClass(c):e(s).removeClass(c).addClass(u)}function r(){e(s).removeClass(l).addClass(a),e(s).removeClass(c).removeClass(u)}i=i||{};var s=i.selector||"body",l=i.touch_class||"touch",a=i.desktop_class||"desktop",u=i.phone_class||"phone",c=i.tablet_class||"tablet",d=i.phone_width||600;e(t).detectInputTypes(),e(t).on("touchInputPrevalent",o),e(t).on("mouseInputPrevalent",r);var h=n;"iOS"==h.OS||"Android"==h.OS||"Blackberry"==h.OS?o():r()}}),function(e){"function"==typeof define&&define.amd?define("plugins/jquery.redirectUnsupported",["jquery","BrowserDetect","jquery.cookie"],e):e(jQuery,BrowserDetect,jqueryCookie)}(function(e,t){function n(){if("Android"==l.OS||"iOS"==l.OS||"BlackBerry"==l.OS)return o;switch(l.browser){case"Googlebot":return i;case"Safari":if(l.version>4&&"iOS"!=l.OS)return i;break;case"WebKit":if(l.version>530&&"iOS"!=l.OS&&"Android"!=l.OS)return i;break;case"Chrome":if(l.version>4)return i;break;case"Firefox":if(l.version>6)return i;break;case"Explorer":if(l.version>9)return i;break;case"Opera":if(l.version>=11)return i}return r}var i={supported:1,desktop:1},o={supported:1,desktop:0},r={supported:0,desktop:1},s="/unsupported",l=t;e.redirectUnsupported=function(){if(e.cookie("continue_anyway"))return void console.log("cookie prevents unsupported redirect!");var t=n();if(!t.supported){console.log("unsupported browser:"+l.browser+" version:"+l.version+" os:"+l.OS);var i=document.URL;i.indexOf(s,i.length-s.length)==-1&&t.desktop&&(window.location=s)}}}),window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,i=function(){},o=function(){return n.apply(this instanceof i&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,o.prototype=new i,o}),String.prototype.trim||!function(){var e=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(e,"")}}(),Object.create||(Object.create=function(){function e(){}return function(t){if(1!=arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}()),!String.prototype.startsWith){var startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t};try{Object.defineProperty(String.prototype,"startsWith",{enumerable:!1,configurable:!1,writable:!1,value:startsWith})}catch(e){String.prototype.startsWith=startsWith}}Math.sign=Math.sign||function(e){return e=+e,0===e||isNaN(e)?e:e>0?1:-1},Array.prototype.find||(Array.prototype.find=function(e){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),i=n.length>>>0,o=arguments[1],r=0;r<i;r++)if(t=n[r],e.call(o,t,r,n))return t}),function(e){e.forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode&&this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),function(e){function t(){}e.console&&e.console.log||(e.console={log:t,debug:t,info:t,warn:t,error:t})}(window),define("mdn-polyfill",function(){}),define("backbone.captureLinks",["require","exports","module"],function(e,t,n){Backbone.Router.captureLinks=function(){$(document).on("click","a[href]:not([data-bypass]):not([target=_blank])",function(e){if(!Backbone.Router._disableCaptureLinks&&!(e.metaKey||e.ctrlKey||e.shiftKey)){var t={prop:$(this).prop("href"),attr:$(this).attr("href")},n=location.protocol+"//"+location.host;"#"!==t.attr.slice(0,1)&&t.prop.slice(0,n.length)===n&&(e.preventDefault(),Backbone.history.navigate(t.prop.slice(n.length,t.prop.length),!0))}})},Backbone.Router.disableCaptureLinks=function(){Backbone.Router._disableCaptureLinks=!0}}),function(e){define("jquery-touch-punch",["jquery-ui/widget","jquery-ui/widgets/mouse"],function(){return function(){!function(e){function t(e,t){if(!(e.originalEvent.touches.length>1)){e.preventDefault();var n=e.originalEvent.changedTouches[0],i=document.createEvent("MouseEvents");i.initMouseEvent(t,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(i)}}if(e.support.touch="ontouchend"in document,e.support.touch){var n,i=e.ui.mouse.prototype,o=i._mouseInit,r=i._mouseDestroy;i._touchStart=function(e){var i=this;!n&&i._mouseCapture(e.originalEvent.changedTouches[0])&&(n=!0,i._touchMoved=!1,t(e,"mouseover"),t(e,"mousemove"),t(e,"mousedown"))},i._touchMove=function(e){n&&(this._touchMoved=!0,t(e,"mousemove"))},i._touchEnd=function(e){n&&(t(e,"mouseup"),t(e,"mouseout"),this._touchMoved||t(e,"click"),n=!1)},i._mouseInit=function(){var t=this;t.element.bind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),o.call(t)},i._mouseDestroy=function(){var t=this;t.element.unbind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),r.call(t)}}}(jQuery)}.apply(e,arguments)})}(this),define("controllers/HeaderInjection",["require","exports","module","env"],function(e,t,n){var i=e("env");n.exports=function(){$.ajaxPrefilter(function(e,t,n){if(!e.crossDomain||0===e.url.indexOf(i.api.url)){if("undefined"!=typeof window.Coggle_JS_Version&&n.setRequestHeader("X-CoggleJS-Version",window.Coggle_JS_Version),"undefined"!=typeof window.CSRFToken&&n.setRequestHeader("X-CSRF-Token",window.CSRFToken),"undefined"!=typeof window.CoggleAccessToken&&n.setRequestHeader("Authorization","Bearer "+window.CoggleAccessToken),"function"==typeof getCoggleUser){var o=getCoggleUser().getActiveOrg().id;o&&e.url.indexOf("organisation=")===-1&&(e.url+=e.url.indexOf("?")===-1?"?":"&",e.url+="organisation="+o)}window._coggle_impersonate&&(console.log("adding impersonate",e.url),e.url+=e.url.indexOf("?")===-1?"?":"&",e.url+="impersonate="+window._coggle_impersonate)}})}}),define("web-main",["require","exports","module","jquery","jquery-migrate","underscore","async","backbone","controllers/Router","models/User","models/Organisation","controllers/MessagePollController","controllers/AutoUpdate","views/APIClientViews","models/APIClients","views/Tooltips","views/ContextualHelpFlow","utils/unescape","plugins/jquery.queryString","plugins/jquery.inputDetection","plugins/jquery.redirectUnsupported","mdn-polyfill","backbone.captureLinks","jquery-touch-punch","controllers/HeaderInjection"],function(e,t,n){function i(){console.log("starting up..."),ga&&getCoggleUser()&&!getCoggleUser().isGuest()&&ga("set","userId",getCoggleUser().id);var e=$.cookie("coggle-pick-homepage-test");e&&0!==e.length&&getCoggleUser().science("homepage",[e]),$.ajaxSetup({cache:!1}),$.redirectUnsupported(),$(document).touchResponsive(),window.Raygun&&!getCoggleUser().isGuest()&&window.Raygun.setUser(getCoggleUser().id),getCoggleUser().isStaff()&&$.queryString().impersonate&&(window._coggle_impersonate=$.queryString().impersonate,window.Messages.warning("Impersonating "+window._coggle_impersonate),getCoggleUser().fetch(),getCoggleUser().getOrganisations().fetch());var t=new s;$.queryString().print||getCoggleUser().isGuest()?r.history.start({pushState:!0})||t.notFound():(r.history.start({pushState:!0})||t.notFound(),a(),u(),d.start(),r.Router.captureLinks()),c()}e("jquery"),e("jquery-migrate");var o=(e("underscore"),e("async")),r=e("backbone"),s=e("controllers/Router"),l=e("models/User"),a=(e("models/Organisation").OrganisationModel,e("controllers/MessagePollController")),u=e("controllers/AutoUpdate"),c=(e("views/APIClientViews"),e("models/APIClients"),e("views/Tooltips")),d=e("views/ContextualHelpFlow");e("utils/unescape").unescapeRecursive;return e("plugins/jquery.queryString"),e("plugins/jquery.inputDetection"),e("plugins/jquery.redirectUnsupported"),e("mdn-polyfill"),e("backbone.captureLinks"),e("jquery-touch-punch"),e("controllers/HeaderInjection")(),r.history.on("route",function(){ga&&ga("send","pageview",window.location.pathname.replace(/\/t\/[^\/]*/,""))}),function(e){o.parallel([function(t){e&&e.user?(l.me().set(e.user),t()):l.me().fetchOrQueue(t)},function(t){e&&e.organisations?(l.me().getOrganisations().reset(e.organisations),t()):l.me().getOrganisations(t)}],function(){if(e){var t=l.me().getOrganisations().get(e.organisation&&e.organisation._id);if(e.organisation?(t||(t=l.me().getOrganisations().add(e.organisation)),l.me().setActiveOrg(t)):t=l.me().getActiveOrg(),e.diagram){var n=t.getFolders().add({_id:e.diagram.folder||"root"}),o=n.getDiagrams().add(e.diagram);o.getDeltas().reset(e.deltas)}}i()})}});